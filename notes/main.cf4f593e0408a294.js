"use strict";(self.webpackChunkuniversal_note=self.webpackChunkuniversal_note||[]).push([[179],{6304:(ft,Ie,F)=>{F.d(Ie,{Dh:()=>De,GT:()=>ue,cc:()=>Ne,hO:()=>He,on:()=>j,pX:()=>se,xv:()=>he});var u=F(5879),te=F(7142),B=F(2994);ft=F.hmd(ft);const re=["ngOnDestroy"],se=(Pe,st,ct,ne={})=>new Proxy(Pe,{get:(we,ce)=>ct.runOutsideAngular(()=>{var Ee;if(Pe[ce])return!(null===(Ee=ne?.spy)||void 0===Ee)&&Ee.get&&ne.spy.get(ce,Pe[ce]),Pe[ce];if(re.indexOf(ce)>-1)return()=>{};const Ve=st.toPromise().then(G=>{const Te=G&&G[ce];return"function"==typeof Te?Te.bind(G):Te&&Te.then?Te.then(ze=>ct.run(()=>ze)):ct.run(()=>Te)});return new Proxy(()=>{},{get:(G,Te)=>Ve[Te],apply:(G,Te,ze)=>Ve.then(Pt=>{var Qt;const $n=Pt&&Pt(...ze);return!(null===(Qt=ne?.spy)||void 0===Qt)&&Qt.apply&&ne.spy.apply(ce,ze,$n),$n})})})}),ue=(Pe,st)=>{st.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(ne=>{Object.defineProperty(Pe.prototype,ne,Object.getOwnPropertyDescriptor(ct.prototype||ct,ne))})})};class ve{constructor(st){return st}}const De=new u.OlP("angularfire2.app.options"),he=new u.OlP("angularfire2.app.name");function j(Pe,st,ct){const we="object"==typeof ct&&ct||{};we.name=we.name||"string"==typeof ct&&ct||"[DEFAULT]";const Ee=te.Z.apps.filter(Ve=>Ve&&Ve.name===we.name)[0]||st.runOutsideAngular(()=>te.Z.initializeApp(Pe,we));try{JSON.stringify(Pe)!==JSON.stringify(Ee.options)&&W("error",`${Ee.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Ee)}const W=(Pe,...st)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Pe](...st)},ie={provide:ve,useFactory:j,deps:[De,u.R0b,[new u.FiY,he]]};let He=(()=>{class Pe{constructor(ct){te.Z.registerVersion("angularfire",B.q4.full,"core"),te.Z.registerVersion("angularfire",B.q4.full,"app-compat"),te.Z.registerVersion("angular",u.q4F.full,ct.toString())}static initializeApp(ct,ne){return{ngModule:Pe,providers:[{provide:De,useValue:ct},{provide:he,useValue:ne}]}}}return Pe.\u0275fac=function(ct){return new(ct||Pe)(u.LFG(u.Lbi))},Pe.\u0275mod=u.oAB({type:Pe}),Pe.\u0275inj=u.cJS({providers:[ie]}),Pe})();function Ne(Pe,st,ct,ne,we){const[,ce,Ee]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Pe)||[];if(ce)return function Qe(Pe,st){try{return Pe.toString()===st.toString()}catch{return Pe===st}}(we,Ee)||(Ye("error",`${st} was already initialized on the ${ct} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:we,was:Ee})),ce;{const Ve=ne();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Ve,we]),Ve}}const ke=!!ft.hot,Ye=(Pe,...st)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Pe](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2994:(ft,Ie,F)=>{F.d(Ie,{q4:()=>nf,iC:()=>Zn,fc:()=>Is,HU:()=>pt,vb:()=>Xs,JM:()=>Pi});var u=F(5879),te=F(3182),B=F(5861),re=F(4303),se=F(9058),ue=F(4537),ve=F(7879),De=F(1878);const he="@firebase/installations",j="0.6.1",W=1e4,ie=`w:${j}`,He="FIS_v2",Ne="https://firebaseinstallations.googleapis.com/v1",Qe=36e5,st=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function ne({projectId:D}){return`${Ne}/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:Pt(D.expiresIn),creationTime:Date.now()}}function ce(D,S){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,B.Z)(function*(D,S){const V=(yield S.json()).error;return st.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ve({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Te(D){return ze.apply(this,arguments)}function ze(){return(ze=(0,B.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function Pt(D){return Number(D.replace("s","000"))}function Ln(){return(Ln=(0,B.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:O}){const V=ne(D),J=Ve(D),oe=S.getImmediate({optional:!0});if(oe){const mt=yield oe.getHeartbeatsHeader();mt&&J.append("x-firebase-client",mt)}const at={method:"POST",headers:J,body:JSON.stringify({fid:O,authVersion:He,appId:D.appId,sdkVersion:ie})},gt=yield Te(()=>fetch(V,at));if(gt.ok){const mt=yield gt.json();return{fid:mt.fid||O,registrationStatus:2,refreshToken:mt.refreshToken,authToken:we(mt.authToken)}}throw yield ce("Create Installation",gt)})).apply(this,arguments)}function Sn(D){return new Promise(S=>{setTimeout(S,D)})}const go=/^[cdef][\w-]{21}$/,le="";function ge(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const O=function _e(D){return function _i(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return go.test(O)?O:le}catch{return le}}function me(D){return`${D.appName}!${D.appId}`}const Le=new Map;function We(D,S){const O=me(D);Xt(O,S),function It(D,S){const O=function Ct(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=D=>{Xt(D.data.key,D.data.fid)}),un}();O&&O.postMessage({key:D,fid:S}),function nn(){0===Le.size&&un&&(un.close(),un=null)}()}(O,S)}function Xt(D,S){const O=Le.get(D);if(O)for(const V of O)V(S)}let un=null;const Jn="firebase-installations-database",yi=1,mn="firebase-installations-store";let Wn=null;function yr(){return Wn||(Wn=(0,De.X3)(Jn,yi,{upgrade:(D,S)=>{0===S&&D.createObjectStore(mn)}})),Wn}function ji(D,S){return cr.apply(this,arguments)}function cr(){return(cr=(0,B.Z)(function*(D,S){const O=me(D),J=(yield yr()).transaction(mn,"readwrite"),oe=J.objectStore(mn),Se=yield oe.get(O);return yield oe.put(S,O),yield J.done,(!Se||Se.fid!==S.fid)&&We(D,S.fid),S})).apply(this,arguments)}function ms(D){return xr.apply(this,arguments)}function xr(){return(xr=(0,B.Z)(function*(D){const S=me(D),V=(yield yr()).transaction(mn,"readwrite");yield V.objectStore(mn).delete(S),yield V.done})).apply(this,arguments)}function es(D,S){return wt.apply(this,arguments)}function wt(){return(wt=(0,B.Z)(function*(D,S){const O=me(D),J=(yield yr()).transaction(mn,"readwrite"),oe=J.objectStore(mn),Se=yield oe.get(O),at=S(Se);return void 0===at?yield oe.delete(O):yield oe.put(at,O),yield J.done,at&&(!Se||Se.fid!==at.fid)&&We(D,at.fid),at})).apply(this,arguments)}function Bt(D){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,B.Z)(function*(D){let S;const O=yield es(D.appConfig,V=>{const J=function zn(D){return mo(D||{fid:ge(),registrationStatus:0})}(V),oe=function _s(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(st.create("app-offline"))};const O={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},V=function Ri(D,S){return dn.apply(this,arguments)}(D,O);return{installationEntry:O,registrationPromise:V}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Bn(D)}:{installationEntry:S}}(D,J);return S=oe.registrationPromise,oe.installationEntry});return O.fid===le?{installationEntry:yield S}:{installationEntry:O,registrationPromise:S}}),Ht.apply(this,arguments)}function dn(){return dn=(0,B.Z)(function*(D,S){try{const O=yield function $n(D,S){return Ln.apply(this,arguments)}(D,S);return ji(D.appConfig,O)}catch(O){throw ct(O)&&409===O.customData.serverCode?yield ms(D.appConfig):yield ji(D.appConfig,{fid:S.fid,registrationStatus:0}),O}}),dn.apply(this,arguments)}function Bn(D){return Or.apply(this,arguments)}function Or(){return(Or=(0,B.Z)(function*(D){let S=yield An(D.appConfig);for(;1===S.registrationStatus;)yield Sn(100),S=yield An(D.appConfig);if(0===S.registrationStatus){const{installationEntry:O,registrationPromise:V}=yield Bt(D);return V||O}return S})).apply(this,arguments)}function An(D){return es(D,S=>{if(!S)throw st.create("installation-not-found");return mo(S)})}function mo(D){return function hn(D){return 1===D.registrationStatus&&D.registrationTime+W<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Pr(){return(Pr=(0,B.Z)(function*({appConfig:D,heartbeatServiceProvider:S},O){const V=function va(D,{fid:S}){return`${ne(D)}/${S}/authTokens:generate`}(D,O),J=function G(D,{refreshToken:S}){const O=Ve(D);return O.append("Authorization",function Qt(D){return`${He} ${D}`}(S)),O}(D,O),oe=S.getImmediate({optional:!0});if(oe){const mt=yield oe.getHeartbeatsHeader();mt&&J.append("x-firebase-client",mt)}const at={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie,appId:D.appId}})},gt=yield Te(()=>fetch(V,at));if(gt.ok)return we(yield gt.json());throw yield ce("Generate Auth Token",gt)})).apply(this,arguments)}function Fr(D){return ba.apply(this,arguments)}function ba(){return ba=(0,B.Z)(function*(D,S=!1){let O;const V=yield es(D.appConfig,oe=>{if(!Wt(oe))throw st.create("not-registered");const Se=oe.authToken;if(!S&&function z(D){return 2===D.requestStatus&&!function $(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+Qe}(D)}(Se))return oe;if(1===Se.requestStatus)return O=function ot(D,S){return Re.apply(this,arguments)}(D,S),oe;{if(!navigator.onLine)throw st.create("app-offline");const at=function Q(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}(oe);return O=function Dt(D,S){return Ft.apply(this,arguments)}(D,at),at}});return O?yield O:V.authToken}),ba.apply(this,arguments)}function Re(){return(Re=(0,B.Z)(function*(D,S){let O=yield it(D.appConfig);for(;1===O.authToken.requestStatus;)yield Sn(100),O=yield it(D.appConfig);const V=O.authToken;return 0===V.requestStatus?Fr(D,S):V})).apply(this,arguments)}function it(D){return es(D,S=>{if(!Wt(S))throw st.create("not-registered");return function Ce(D){return 1===D.requestStatus&&D.requestTime+W<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ft(){return Ft=(0,B.Z)(function*(D,S){try{const O=yield function kr(D,S){return Pr.apply(this,arguments)}(D,S),V=Object.assign(Object.assign({},S),{authToken:O});return yield ji(D.appConfig,V),O}catch(O){if(!ct(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const V=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ji(D.appConfig,V)}else yield ms(D.appConfig);throw O}}),Ft.apply(this,arguments)}function Wt(D){return void 0!==D&&2===D.registrationStatus}function ut(){return(ut=(0,B.Z)(function*(D){const S=D,{installationEntry:O,registrationPromise:V}=yield Bt(S);return V?V.catch(console.error):Fr(S).catch(console.error),O.fid})).apply(this,arguments)}function bn(){return bn=(0,B.Z)(function*(D,S=!1){const O=D;return yield function rn(D){return qn.apply(this,arguments)}(O),(yield Fr(O,S)).token}),bn.apply(this,arguments)}function qn(){return(qn=(0,B.Z)(function*(D){const{registrationPromise:S}=yield Bt(D);S&&(yield S)})).apply(this,arguments)}function Ls(D){return st.create("missing-app-config-values",{valueName:D})}const Bs="installations",Mt=D=>{const S=D.getProvider("app").getImmediate(),O=function Fs(D){if(!D||!D.options)throw Ls("App Configuration");if(!D.name)throw Ls("App Name");const S=["projectId","apiKey","appId"];for(const O of S)if(!D.options[O])throw Ls(O);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:O,heartbeatServiceProvider:(0,re._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Vo=D=>{const S=D.getProvider("app").getImmediate(),O=(0,re._getProvider)(S,Bs).getImmediate();return{getId:()=>function ae(D){return ut.apply(this,arguments)}(O),getToken:J=>function Tt(D){return bn.apply(this,arguments)}(O,J)}};(function wa(){(0,re._registerComponent)(new ue.wA(Bs,Mt,"PUBLIC")),(0,re._registerComponent)(new ue.wA("installations-internal",Vo,"PRIVATE"))})(),(0,re.registerVersion)(he,j),(0,re.registerVersion)(he,j,"esm2017");const jo="@firebase/remote-config",xi=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Y_{constructor(S,O,V,J){this.client=S,this.storage=O,this.storageCache=V,this.logger=J}isCachedDataFresh(S,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-O,J=V<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var O=this;return(0,B.Z)(function*(){const[V,J]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(J&&O.isCachedDataFresh(S.cacheMaxAgeMillis,V))return J;S.eTag=J&&J.eTag;const oe=yield O.client.fetch(S),Se=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Se.push(O.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Se),oe})()}}function vr(D=navigator){return D.languages&&D.languages[0]||D.language}class Ta{constructor(S,O,V,J,oe,Se){this.firebaseInstallations=S,this.sdkVersion=O,this.namespace=V,this.projectId=J,this.apiKey=oe,this.appId=Se}fetch(S){var O=this;return(0,B.Z)(function*(){const[V,J]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,at={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},gt={sdk_version:O.sdkVersion,app_instance_id:V,app_instance_id_token:J,app_id:O.appId,language_code:vr()},mt={method:"POST",headers:at,body:JSON.stringify(gt)},xt=fetch(Se,mt),Rt=new Promise((sn,qi)=>{S.signal.addEventListener(()=>{const Dn=new Error("The operation was aborted.");Dn.name="AbortError",qi(Dn)})});let Cn;try{yield Promise.race([xt,Rt]),Cn=yield xt}catch(sn){let qi="fetch-client-network";throw"AbortError"===sn?.name&&(qi="fetch-timeout"),xi.create(qi,{originalErrorMessage:sn?.message})}let Ei=Cn.status;const Do=Cn.headers.get("ETag")||void 0;let tn,Nn;if(200===Cn.status){let sn;try{sn=yield Cn.json()}catch(qi){throw xi.create("fetch-client-parse",{originalErrorMessage:qi?.message})}tn=sn.entries,Nn=sn.state}if("INSTANCE_STATE_UNSPECIFIED"===Nn?Ei=500:"NO_CHANGE"===Nn?Ei=304:("NO_TEMPLATE"===Nn||"EMPTY_CONFIG"===Nn)&&(tn={}),304!==Ei&&200!==Ei)throw xi.create("fetch-status",{httpStatus:Ei});return{status:Ei,eTag:Do,config:tn}})()}}class qp{constructor(S,O){this.client=S,this.storage=O}fetch(S){var O=this;return(0,B.Z)(function*(){const V=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(S,V)})()}attemptFetch(S,{throttleEndTimeMillis:O,backoffCount:V}){var J=this;return(0,B.Z)(function*(){yield function js(D,S){return new Promise((O,V)=>{const J=Math.max(S-Date.now(),0),oe=setTimeout(O,J);D.addEventListener(()=>{clearTimeout(oe),V(xi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,O);try{const oe=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Ju(D){if(!(D instanceof se.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(oe))throw oe;const Se={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield J.storage.setThrottleMetadata(Se),J.attemptFetch(S,Se)}})()}}class Ml{constructor(S,O,V,J,oe){this.app=S,this._client=O,this._storageCache=V,this._storage=J,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wc(D,S){const O=D.target.error||void 0;return xi.create(S,{originalErrorMessage:O&&O?.message})}const vs="app_namespace_store";class Sa{constructor(S,O,V,J=function Xi(){return new Promise((D,S)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=V=>{S(wc(V,"storage-open"))},O.onsuccess=V=>{D(V.target.result)},O.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(vs,{keyPath:"compositeKey"})}}catch(O){S(xi.create("storage-open",{originalErrorMessage:O?.message}))}})}()){this.appId=S,this.appName=O,this.namespace=V,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var O=this;return(0,B.Z)(function*(){const V=yield O.openDbPromise;return new Promise((J,oe)=>{const at=V.transaction([vs],"readonly").objectStore(vs),gt=O.createCompositeKey(S);try{const mt=at.get(gt);mt.onerror=xt=>{oe(wc(xt,"storage-get"))},mt.onsuccess=xt=>{const Rt=xt.target.result;J(Rt?Rt.value:void 0)}}catch(mt){oe(xi.create("storage-get",{originalErrorMessage:mt?.message}))}})})()}set(S,O){var V=this;return(0,B.Z)(function*(){const J=yield V.openDbPromise;return new Promise((oe,Se)=>{const gt=J.transaction([vs],"readwrite").objectStore(vs),mt=V.createCompositeKey(S);try{const xt=gt.put({compositeKey:mt,value:O});xt.onerror=Rt=>{Se(wc(Rt,"storage-set"))},xt.onsuccess=()=>{oe()}}catch(xt){Se(xi.create("storage-set",{originalErrorMessage:xt?.message}))}})})()}delete(S){var O=this;return(0,B.Z)(function*(){const V=yield O.openDbPromise;return new Promise((J,oe)=>{const at=V.transaction([vs],"readwrite").objectStore(vs),gt=O.createCompositeKey(S);try{const mt=at.delete(gt);mt.onerror=xt=>{oe(wc(xt,"storage-delete"))},mt.onsuccess=()=>{J()}}catch(mt){oe(xi.create("storage-delete",{originalErrorMessage:mt?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class er{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,B.Z)(function*(){const O=S.storage.getLastFetchStatus(),V=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),oe=yield O;oe&&(S.lastFetchStatus=oe);const Se=yield V;Se&&(S.lastSuccessfulFetchTimestampMillis=Se);const at=yield J;at&&(S.activeConfig=at)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Ec(){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,B.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function yo(){(0,re._registerComponent)(new ue.wA("remote-config",function D(S,{instanceIdentifier:O}){const V=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw xi.create("registration-window");if(!(0,se.hl)())throw xi.create("indexed-db-unavailable");const{projectId:oe,apiKey:Se,appId:at}=V.options;if(!oe)throw xi.create("registration-project-id");if(!Se)throw xi.create("registration-api-key");if(!at)throw xi.create("registration-app-id");const gt=new Sa(at,V.name,O=O||"firebase"),mt=new er(gt),xt=new ve.Yd(jo);xt.logLevel=ve.in.ERROR;const Rt=new Ta(J,re.SDK_VERSION,O,oe,Se,at),Cn=new qp(Rt,gt),Ei=new Y_(Cn,gt,mt,xt),Do=new Ml(V,Ei,mt,gt,xt);return function kh(D){const S=(0,se.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Do),Do},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(jo,"0.4.1"),(0,re.registerVersion)(jo,"0.4.1","esm2017")}();const Pn="/firebase-messaging-sw.js",Ke="/firebase-cloud-messaging-push-scope",Nt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wn="https://fcmregistrations.googleapis.com/v1",tr="google.c.a.c_id",vo="google.c.a.c_l",Gi="google.c.a.ts";var Ur=function(D){return D.PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",D}(Ur||{});function Oi(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ot(D){const O=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(O),J=new Uint8Array(V.length);for(let oe=0;oe<V.length;++oe)J[oe]=V.charCodeAt(oe);return J}const bo="fcm_token_details_db",Nl=5,Xn="fcm_token_object_Store";function Ma(){return Ma=(0,B.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(bo))return null;let S=null;return(yield(0,De.X3)(bo,Nl,{upgrade:(V=(0,B.Z)(function*(J,oe,Se,at){var gt;if(oe<2||!J.objectStoreNames.contains(Xn))return;const mt=at.objectStore(Xn),xt=yield mt.index("fcmSenderId").get(D);if(yield mt.clear(),xt)if(2===oe){const Rt=xt;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;S={token:Rt.fcmToken,createTime:null!==(gt=Rt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:Oi(Rt.vapidKey)}}}else if(3===oe){const Rt=xt;S={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Oi(Rt.auth),p256dh:Oi(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Oi(Rt.vapidKey)}}}else if(4===oe){const Rt=xt;S={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Oi(Rt.auth),p256dh:Oi(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Oi(Rt.vapidKey)}}}}),function(oe,Se,at,gt){return V.apply(this,arguments)})})).close(),yield(0,De.Lj)(bo),yield(0,De.Lj)("fcm_vapid_details_db"),yield(0,De.Lj)("undefined"),function Ho(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var V}),Ma.apply(this,arguments)}const br="firebase-messaging-database",Na=1,Hs="firebase-messaging-store";let Gs=null;function wr(){return Gs||(Gs=(0,De.X3)(br,Na,{upgrade:(D,S)=>{0===S&&D.createObjectStore(Hs)}})),Gs}function Go(D){return ts.apply(this,arguments)}function ts(){return ts=(0,B.Z)(function*(D){const S=$i(D),V=yield(yield wr()).transaction(Hs).objectStore(Hs).get(S);if(V)return V;{const J=yield function ei(D){return Ma.apply(this,arguments)}(D.appConfig.senderId);if(J)return yield jt(D,J),J}}),ts.apply(this,arguments)}function jt(D,S){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,B.Z)(function*(D,S){const O=$i(D),J=(yield wr()).transaction(Hs,"readwrite");return yield J.objectStore(Hs).put(S,O),yield J.done,S})).apply(this,arguments)}function Ra(){return(Ra=(0,B.Z)(function*(D){const S=$i(D),V=(yield wr()).transaction(Hs,"readwrite");yield V.objectStore(Hs).delete(S),yield V.done})).apply(this,arguments)}function $i({appConfig:D}){return D.appId}const Un=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $o(D,S){return ai.apply(this,arguments)}function ai(){return(ai=(0,B.Z)(function*(D,S){const O=yield Dc(D),V=Wo(S),J={method:"POST",headers:O,body:JSON.stringify(V)};let oe;try{oe=yield(yield fetch(ns(D.appConfig),J)).json()}catch(Se){throw Un.create("token-subscribe-failed",{errorInfo:Se?.toString()})}if(oe.error)throw Un.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw Un.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Wi(){return(Wi=(0,B.Z)(function*(D,S){const O=yield Dc(D),V=Wo(S.subscriptionOptions),J={method:"PATCH",headers:O,body:JSON.stringify(V)};let oe;try{oe=yield(yield fetch(`${ns(D.appConfig)}/${S.token}`,J)).json()}catch(Se){throw Un.create("token-update-failed",{errorInfo:Se?.toString()})}if(oe.error)throw Un.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw Un.create("token-update-no-token");return oe.token})).apply(this,arguments)}function vi(D,S){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,B.Z)(function*(D,S){const V={method:"DELETE",headers:yield Dc(D)};try{const oe=yield(yield fetch(`${ns(D.appConfig)}/${S}`,V)).json();if(oe.error)throw Un.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(J){throw Un.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function ns({projectId:D}){return`${wn}/projects/${D}/registrations`}function Dc(D){return lr.apply(this,arguments)}function lr(){return(lr=(0,B.Z)(function*({appConfig:D,installations:S}){const O=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Wo({p256dh:D,auth:S,endpoint:O,vapidKey:V}){const J={web:{endpoint:O,auth:S,p256dh:D}};return V!==Nt&&(J.web.applicationPubKey=V),J}const Xu=6048e5;function Qp(){return Qp=(0,B.Z)(function*(D){const S=yield function jn(D,S){return Jp.apply(this,arguments)}(D.swRegistration,D.vapidKey),O={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Oi(S.getKey("auth")),p256dh:Oi(S.getKey("p256dh"))},V=yield Go(D.firebaseDependencies);if(V){if(function Xp(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}(V.subscriptionOptions,O))return Date.now()>=V.createTime+Xu?function Fh(D,S){return Lh.apply(this,arguments)}(D,{token:V.token,createTime:Date.now(),subscriptionOptions:O}):V.token;try{yield vi(D.firebaseDependencies,V.token)}catch(J){console.warn(J)}return Bh(D.firebaseDependencies,O)}return Bh(D.firebaseDependencies,O)}),Qp.apply(this,arguments)}function td(){return td=(0,B.Z)(function*(D){const S=yield Go(D.firebaseDependencies);S&&(yield vi(D.firebaseDependencies,S.token),yield function xl(D){return Ra.apply(this,arguments)}(D.firebaseDependencies));const O=yield D.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()}),td.apply(this,arguments)}function Lh(){return Lh=(0,B.Z)(function*(D,S){try{const O=yield function Kp(D,S){return Wi.apply(this,arguments)}(D.firebaseDependencies,S),V=Object.assign(Object.assign({},S),{token:O,createTime:Date.now()});return yield jt(D.firebaseDependencies,V),O}catch(O){throw yield function ed(D){return td.apply(this,arguments)}(D),O}}),Lh.apply(this,arguments)}function Bh(D,S){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,B.Z)(function*(D,S){const V={token:yield $o(D,S),createTime:Date.now(),subscriptionOptions:S};return yield jt(D,V),V.token})).apply(this,arguments)}function Jp(){return(Jp=(0,B.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ot(S)})})).apply(this,arguments)}function K_(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function eg(D,S){if(!S.notification)return;D.notification={};const O=S.notification.title;O&&(D.notification.title=O);const V=S.notification.body;V&&(D.notification.body=V);const J=S.notification.image;J&&(D.notification.image=J);const oe=S.notification.icon;oe&&(D.notification.icon=oe)}(S,D),function bb(D,S){S.data&&(D.data=S.data)}(S,D),function wb(D,S){var O,V,J,oe,Se;if(!(S.fcmOptions||null!==(O=S.notification)&&void 0!==O&&O.click_action))return;D.fcmOptions={};const at=null!==(J=null===(V=S.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==J?J:null===(oe=S.notification)||void 0===oe?void 0:oe.click_action;at&&(D.fcmOptions.link=at);const gt=null===(Se=S.fcmOptions)||void 0===Se?void 0:Se.analytics_label;gt&&(D.fcmOptions.analyticsLabel=gt)}(S,D),S}function nd(D,S){const O=[];for(let V=0;V<D.length;V++)O.push(D.charAt(V)),V<S.length&&O.push(S.charAt(V));return O.join("")}function id(D){return Un.create("missing-app-config-values",{valueName:D})}nd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Eb{constructor(S,O,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function ng(D){if(!D||!D.options)throw id("App Configuration Object");if(!D.name)throw id("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:O}=D;for(const V of S)if(!O[V])throw id(V);return{appName:D.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:O,analyticsProvider:V}}_delete(){return Promise.resolve()}}function $s(){return($s=(0,B.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Pn,{scope:Ke}),D.swRegistration.update().catch(()=>{})}catch(S){throw Un.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function Pl(){return(Pl=(0,B.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield function kl(D){return $s.apply(this,arguments)}(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function bi(){return(bi=(0,B.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Nt)})).apply(this,arguments)}function nr(){return nr=(0,B.Z)(function*(D,S){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield function Oa(D,S){return bi.apply(this,arguments)}(D,S?.vapidKey),yield function bs(D,S){return Pl.apply(this,arguments)}(D,S?.serviceWorkerRegistration),function Ol(D){return Qp.apply(this,arguments)}(D)}),nr.apply(this,arguments)}function rd(){return(rd=(0,B.Z)(function*(D,S,O){const V=function sd(D){switch(D){case Ur.NOTIFICATION_CLICKED:return"notification_open";case Ur.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:O[tr],message_name:O[vo],message_time:O[Gi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pa(){return Pa=(0,B.Z)(function*(D,S){const O=S.data;if(!O.isFirebaseMessaging)return;D.onMessageHandler&&O.messageType===Ur.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(K_(O)):D.onMessageHandler.next(K_(O)));const V=O.data;(function tg(D){return"object"==typeof D&&!!D&&tr in D})(V)&&"1"===V["google.c.a.e"]&&(yield function Tc(D,S,O){return rd.apply(this,arguments)}(D,O.messageType,V))}),Pa.apply(this,arguments)}const od="@firebase/messaging",jh=D=>{const S=new Eb(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Vh(D,S){return Pa.apply(this,arguments)}(S,O)),S},Fa=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:V=>function ka(D,S){return nr.apply(this,arguments)}(S,V)}};function Gh(){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,B.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hh(){(0,re._registerComponent)(new ue.wA("messaging",jh,"PUBLIC")),(0,re._registerComponent)(new ue.wA("messaging-internal",Fa,"PRIVATE")),(0,re.registerVersion)(od,"0.12.1"),(0,re.registerVersion)(od,"0.12.1","esm2017")}();const sg="analytics",Q_="firebase_id",og="origin",$h=6e4,Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wh="https://www.googletagmanager.com/gtag/js",ir=new ve.Yd("@firebase/analytics");function Mc(D){return Promise.all(D.map(S=>S.catch(O=>O)))}function Ws(){return(Ws=(0,B.Z)(function*(D,S,O,V,J,oe){const Se=V[J];try{if(Se)yield S[Se];else{const gt=(yield Mc(O)).find(mt=>mt.measurementId===J);gt&&(yield S[gt.appId])}}catch(at){ir.error(at)}D("config",J,oe)})).apply(this,arguments)}function zs(){return(zs=(0,B.Z)(function*(D,S,O,V,J){try{let oe=[];if(J&&J.send_to){let Se=J.send_to;Array.isArray(Se)||(Se=[Se]);const at=yield Mc(O);for(const gt of Se){const mt=at.find(Rt=>Rt.measurementId===gt),xt=mt&&S[mt.appId];if(!xt){oe=[];break}oe.push(xt)}}0===oe.length&&(oe=Object.values(S)),yield Promise.all(oe),D("event",V,J||{})}catch(oe){ir.error(oe)}})).apply(this,arguments)}const Er=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zo=30,Ll=new class qs{constructor(S={},O=1e3){this.throttleMetadata=S,this.intervalMillis=O}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,O){this.throttleMetadata[S]=O}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Bl(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function cd(){return(cd=(0,B.Z)(function*(D){var S;const{appId:O,apiKey:V}=D,J={method:"GET",headers:Bl(V)},oe=Eo.replace("{app-id}",O),Se=yield fetch(oe,J);if(200!==Se.status&&304!==Se.status){let at="";try{const gt=yield Se.json();null!==(S=gt.error)&&void 0!==S&&S.message&&(at=gt.error.message)}catch{}throw Er.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:at})}return Se.json()})).apply(this,arguments)}function ld(){return(ld=(0,B.Z)(function*(D,S=Ll,O){const{appId:V,apiKey:J,measurementId:oe}=D.options;if(!V)throw Er.create("no-app-id");if(!J){if(oe)return{measurementId:oe,appId:V};throw Er.create("no-api-key")}const Se=S.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},at=new jl;return setTimeout((0,B.Z)(function*(){at.abort()}),void 0!==O?O:$h),Ir({appId:V,apiKey:J,measurementId:oe},Se,at,S)})).apply(this,arguments)}function Ir(D,S,O){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,B.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:O},V,J=Ll){var oe;const{appId:Se,measurementId:at}=D;try{yield function Vl(D,S){return new Promise((O,V)=>{const J=Math.max(S-Date.now(),0),oe=setTimeout(O,J);D.addEventListener(()=>{clearTimeout(oe),V(Er.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(V,S)}catch(gt){if(at)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${gt?.message}]`),{appId:Se,measurementId:at};throw gt}try{const gt=yield function qo(D){return cd.apply(this,arguments)}(D);return J.deleteThrottleMetadata(Se),gt}catch(gt){const mt=gt;if(!function Tn(D){if(!(D instanceof se.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(mt)){if(J.deleteThrottleMetadata(Se),at)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:Se,measurementId:at};throw gt}const xt=503===Number(null===(oe=mt?.customData)||void 0===oe?void 0:oe.httpStatus)?(0,se.$s)(O,J.intervalMillis,zo):(0,se.$s)(O,J.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+xt,backoffCount:O+1};return J.setThrottleMetadata(Se,Rt),ir.debug(`Calling attemptFetch again in ${xt} millis`),Ir(D,Rt,V,J)}}),Ul.apply(this,arguments)}class jl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Zs,Oc;function Rc(){return(Rc=(0,B.Z)(function*(D,S,O,V,J){if(J&&J.global)D("event",O,V);else{const oe=yield S;D("event",O,Object.assign(Object.assign({},V),{send_to:oe}))}})).apply(this,arguments)}function ug(){return(ug=(0,B.Z)(function*(){if(!(0,se.hl)())return ir.warn(Er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return ir.warn(Er.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wl(){return Wl=(0,B.Z)(function*(D,S,O,V,J,oe,Se){var at;const gt=function ti(D){return ld.apply(this,arguments)}(D);gt.then(Ei=>{O[Ei.measurementId]=Ei.appId,D.options.measurementId&&Ei.measurementId!==D.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Ei.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ei=>ir.error(Ei)),S.push(gt);const mt=function hd(){return ug.apply(this,arguments)}().then(Ei=>{if(Ei)return V.getId()}),[xt,Rt]=yield Promise.all([gt,mt]);(function lg(D){const S=window.document.getElementsByTagName("script");for(const O of Object.values(S))if(O.src&&O.src.includes(Wh)&&O.src.includes(D))return O;return null})(oe)||function ag(D,S){const O=document.createElement("script");O.src=`${Wh}?l=${D}&id=${S}`,O.async=!0,document.head.appendChild(O)}(oe,xt.measurementId),Oc&&(J("consent","default",Oc),function dd(D){Oc=D}(void 0)),J("js",new Date);const Cn=null!==(at=Se?.config)&&void 0!==at?at:{};return Cn[og]="firebase",Cn.update=!0,null!=Rt&&(Cn[Q_]=Rt),J("config",xt.measurementId,Cn),Zs&&(J("set",Zs),function Kh(D){Zs=D}(void 0)),xt.measurementId}),Wl.apply(this,arguments)}class J_{constructor(S){this.app=S}_delete(){return delete Es[this.app.options.appId],Promise.resolve()}}let Es={},zl=[];const Qh={};let Jh,Io,Zo="dataLayer",La=!1;function Me(D,S,O){!function dg(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((V,J)=>`(${J+1}) ${V}`).join(" "),O=Er.create("invalid-analytics-context",{errorInfo:S});ir.warn(O.message)}}();const V=D.options.appId;if(!V)throw Er.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Er.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Es[V])throw Er.create("already-exists",{id:V});if(!La){!function zh(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Zo);const{wrappedGtag:oe,gtagCore:Se}=function Zh(D,S,O,V,J){let oe=function(...Se){window[V].push(arguments)};return window[J]&&"function"==typeof window[J]&&(oe=window[J]),window[J]=function qh(D,S,O,V){function oe(){return oe=(0,B.Z)(function*(Se,at,gt){try{"event"===Se?yield function cg(D,S,O,V,J){return zs.apply(this,arguments)}(D,S,O,at,gt):"config"===Se?yield function Nc(D,S,O,V,J,oe){return Ws.apply(this,arguments)}(D,S,O,V,at,gt):"consent"===Se?D("consent","update",gt):D("set",at)}catch(mt){ir.error(mt)}}),oe.apply(this,arguments)}return function J(Se,at,gt){return oe.apply(this,arguments)}}(oe,D,S,O),{gtagCore:oe,wrappedGtag:window[J]}}(Es,zl,Qh,Zo,"gtag");Io=oe,Jh=Se,La=!0}return Es[V]=function Et(D,S,O,V,J,oe,Se){return Wl.apply(this,arguments)}(D,zl,Qh,S,Jh,Zo,O),new J_(D)}function Xh(){return fi.apply(this,arguments)}function fi(){return(fi=(0,B.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const ef="@firebase/analytics";!function Co(){(0,re._registerComponent)(new ue.wA(sg,(S,{options:O})=>Me(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,re._registerComponent)(new ue.wA("analytics-internal",function D(S){try{const O=S.getProvider(sg).getImmediate();return{logEvent:(V,J,oe)=>function pg(D,S,O,V){D=(0,se.m9)(D),function ur(D,S,O,V,J){return Rc.apply(this,arguments)}(Io,Es[D.app.options.appId],S,O,V).catch(J=>ir.error(J))}(O,V,J,oe)}}catch(O){throw Er.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,re.registerVersion)(ef,"0.9.1"),(0,re.registerVersion)(ef,"0.9.1","esm2017")}();var pd=F(1954),Cr=F(2631);const Fc=new class ql extends Cr.v{}(class Pc extends pd.o{constructor(S,O){super(S,O),this.scheduler=S,this.work=O}schedule(S,O=0){return O>0?super.schedule(S,O):(this.delay=O,this.state=S,this.scheduler.flush(this),this)}execute(S,O){return O>0||this.closed?super.execute(S,O):this._execute(S,O)}requestAsyncId(S,O,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(S,O,V):(S.flush(this),0)}});var tf=F(6321),Ba=F(9397),Js=F(3093),gd=F(5137);const nf=new u.GfV("7.6.1"),rf="__angularfire_symbol__analyticsIsSupportedValue",md="__angularfire_symbol__analyticsIsSupported",Hn="__angularfire_symbol__remoteConfigIsSupportedValue",zi="__angularfire_symbol__remoteConfigIsSupported",Zl="__angularfire_symbol__messagingIsSupportedValue",En="__angularfire_symbol__messagingIsSupported";function Pi(D,S,O){if(S){if(1===S.length)return S[0];const oe=S.filter(Se=>Se.app===O);if(1===oe.length)return oe[0]}return O.container.getProvider(D).getImmediate({optional:!0})}globalThis[md]||(globalThis[md]=Xh().then(D=>globalThis[rf]=D).catch(()=>globalThis[rf]=!1)),globalThis[En]||(globalThis[En]=Gh().then(D=>globalThis[Zl]=D).catch(()=>globalThis[Zl]=!1)),globalThis[zi]||(globalThis[zi]=Ec().then(D=>globalThis[Hn]=D).catch(()=>globalThis[Hn]=!1));const Xs=(D,S)=>{const O=S?[S]:(0,te.C6)(),V=[];return O.forEach(J=>{J.container.getProvider(D).instances.forEach(Se=>{V.includes(Se)||V.push(Se)})}),V};function In(){}class Ua{constructor(S,O=Fc){this.zone=S,this.delegate=O}now(){return this.delegate.now()}schedule(S,O,V){const J=this.zone;return this.delegate.schedule(function(Se){J.runGuarded(()=>{S.apply(this,[Se])})},O,V)}}class Lc{constructor(S){this.zone=S,this.task=null}call(S,O){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",In,{},In,In)),O.pipe((0,Ba.b)({next:V,complete:V,error:V})).subscribe(S).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pt=(()=>{class D{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Ua(Zone.current)),this.insideAngular=O.run(()=>new Ua(Zone.current,tf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(O){return new(O||D)(u.LFG(u.R0b))},D.\u0275prov=u.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function eo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Is(D){return D.pipe((0,Js.Q)(eo().outsideAngular))}function Zn(D){return eo(),function Bc(D){return function(O){return(O=O.lift(new Lc(D.ngZone))).pipe((0,gd.R)(D.outsideAngular),(0,Js.Q)(D.insideAngular))}}(eo())(D)}},9058:(ft,Ie,F)=>{F.d(Ie,{$s:()=>it,BH:()=>we,DV:()=>mn,Dv:()=>Bn,G6:()=>_i,GJ:()=>Jn,L:()=>De,LL:()=>Le,Pz:()=>ne,Sg:()=>ce,UG:()=>G,UI:()=>yr,US:()=>ue,Wj:()=>mo,Wl:()=>Xt,Yr:()=>Sn,ZB:()=>W,ZR:()=>me,aH:()=>ct,b$:()=>Pt,cI:()=>Be,dS:()=>kr,eu:()=>le,g5:()=>B,gK:()=>Or,gQ:()=>Bt,h$:()=>ve,hl:()=>go,hu:()=>te,jU:()=>Te,lb:()=>hn,m9:()=>Wt,ne:()=>Ht,p$:()=>j,pd:()=>wt,r3:()=>yi,ru:()=>ze,tV:()=>he,uI:()=>Ve,ug:()=>Pr,vZ:()=>ji,w1:()=>$n,w9:()=>nn,xO:()=>xr,xb:()=>Wn,z$:()=>Ee,zI:()=>ge,zd:()=>es});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(z,$){if(!z)throw B($)},B=function(z){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+z)},re=function(z){const $=[];let Q=0;for(let Ce=0;Ce<z.length;Ce++){let ae=z.charCodeAt(Ce);ae<128?$[Q++]=ae:ae<2048?($[Q++]=ae>>6|192,$[Q++]=63&ae|128):55296==(64512&ae)&&Ce+1<z.length&&56320==(64512&z.charCodeAt(Ce+1))?(ae=65536+((1023&ae)<<10)+(1023&z.charCodeAt(++Ce)),$[Q++]=ae>>18|240,$[Q++]=ae>>12&63|128,$[Q++]=ae>>6&63|128,$[Q++]=63&ae|128):($[Q++]=ae>>12|224,$[Q++]=ae>>6&63|128,$[Q++]=63&ae|128)}return $},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,$){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let ae=0;ae<z.length;ae+=3){const ut=z[ae],Tt=ae+1<z.length,bn=Tt?z[ae+1]:0,rn=ae+2<z.length,qn=rn?z[ae+2]:0;let di=(15&bn)<<2|qn>>6,Ps=63&qn;rn||(Ps=64,Tt||(di=64)),Ce.push(Q[ut>>2],Q[(3&ut)<<4|bn>>4],Q[di],Q[Ps])}return Ce.join("")},encodeString(z,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(z):this.encodeByteArray(re(z),$)},decodeString(z,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(z):function(z){const $=[];let Q=0,Ce=0;for(;Q<z.length;){const ae=z[Q++];if(ae<128)$[Ce++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const ut=z[Q++];$[Ce++]=String.fromCharCode((31&ae)<<6|63&ut)}else if(ae>239&&ae<365){const rn=((7&ae)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;$[Ce++]=String.fromCharCode(55296+(rn>>10)),$[Ce++]=String.fromCharCode(56320+(1023&rn))}else{const ut=z[Q++],Tt=z[Q++];$[Ce++]=String.fromCharCode((15&ae)<<12|(63&ut)<<6|63&Tt)}}return $.join("")}(this.decodeStringToByteArray(z,$))},decodeStringToByteArray(z,$){this.init_();const Q=$?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let ae=0;ae<z.length;){const ut=Q[z.charAt(ae++)],bn=ae<z.length?Q[z.charAt(ae)]:0;++ae;const qn=ae<z.length?Q[z.charAt(ae)]:64;++ae;const zt=ae<z.length?Q[z.charAt(ae)]:64;if(++ae,null==ut||null==bn||null==qn||null==zt)throw Error();Ce.push(ut<<2|bn>>4),64!==qn&&(Ce.push(bn<<4&240|qn>>2),64!==zt&&Ce.push(qn<<6&192|zt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ve=function(z){const $=re(z);return ue.encodeByteArray($,!0)},De=function(z){return ve(z).replace(/\./g,"")},he=function(z){try{return ue.decodeString(z,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function j(z){return W(void 0,z)}function W(z,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return $}for(const Q in $)!$.hasOwnProperty(Q)||!ie(Q)||(z[Q]=W(z[Q],$[Q]));return z}function ie(z){return"__proto__"!==z}const Ye=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=z&&he(z[1]);return $&&JSON.parse($)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},ct=()=>{var z;return null===(z=Ye())||void 0===z?void 0:z.config},ne=z=>{var $;return null===($=Ye())||void 0===$?void 0:$[`_${z}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Q)=>{this.resolve=$,this.reject=Q})}wrapCallback($){return(Q,Ce)=>{Q?this.reject(Q):this.resolve(Ce),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Q):$(Q,Ce))}}}function ce(z,$){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=$||"demo-project",ae=z.iat||0,ut=z.sub||z.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:ae,exp:ae+3600,auth_time:ae,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},z);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Tt)),""].join(".")}function Ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function G(){var z;const $=null===(z=Ye())||void 0===z?void 0:z.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Te(){return"object"==typeof self&&self.self===self}function ze(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $n(){const z=Ee();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Sn(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function _i(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function go(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((z,$)=>{try{let Q=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(Ce);ae.onsuccess=()=>{ae.result.close(),Q||self.indexedDB.deleteDatabase(Ce),z(!0)},ae.onupgradeneeded=()=>{Q=!1},ae.onerror=()=>{var ut;$((null===(ut=ae.error)||void 0===ut?void 0:ut.message)||"")}}catch(Q){$(Q)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class me extends Error{constructor($,Q,Ce){super(Q),this.code=$,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor($,Q,Ce){this.service=$,this.serviceName=Q,this.errors=Ce}create($,...Q){const Ce=Q[0]||{},ae=`${this.service}/${$}`,ut=this.errors[$],Tt=ut?function We(z,$){return z.replace(lt,(Q,Ce)=>{const ae=$[Ce];return null!=ae?String(ae):`<${Ce}?>`})}(ut,Ce):"Error";return new me(ae,`${this.serviceName}: ${Tt} (${ae}).`,Ce)}}const lt=/\{\$([^}]+)}/g;function Be(z){return JSON.parse(z)}function Xt(z){return JSON.stringify(z)}const It=function(z){let $={},Q={},Ce={},ae="";try{const ut=z.split(".");$=Be(he(ut[0])||""),Q=Be(he(ut[1])||""),ae=ut[2],Ce=Q.d||{},delete Q.d}catch{}return{header:$,claims:Q,data:Ce,signature:ae}},nn=function(z){const Q=It(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Jn=function(z){const $=It(z).claims;return"object"==typeof $&&!0===$.admin};function yi(z,$){return Object.prototype.hasOwnProperty.call(z,$)}function mn(z,$){if(Object.prototype.hasOwnProperty.call(z,$))return z[$]}function Wn(z){for(const $ in z)if(Object.prototype.hasOwnProperty.call(z,$))return!1;return!0}function yr(z,$,Q){const Ce={};for(const ae in z)Object.prototype.hasOwnProperty.call(z,ae)&&(Ce[ae]=$.call(Q,z[ae],ae,z));return Ce}function ji(z,$){if(z===$)return!0;const Q=Object.keys(z),Ce=Object.keys($);for(const ae of Q){if(!Ce.includes(ae))return!1;const ut=z[ae],Tt=$[ae];if(cr(ut)&&cr(Tt)){if(!ji(ut,Tt))return!1}else if(ut!==Tt)return!1}for(const ae of Ce)if(!Q.includes(ae))return!1;return!0}function cr(z){return null!==z&&"object"==typeof z}function xr(z){const $=[];for(const[Q,Ce]of Object.entries(z))Array.isArray(Ce)?Ce.forEach(ae=>{$.push(encodeURIComponent(Q)+"="+encodeURIComponent(ae))}):$.push(encodeURIComponent(Q)+"="+encodeURIComponent(Ce));return $.length?"&"+$.join("&"):""}function es(z){const $={};return z.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[ae,ut]=Ce.split("=");$[decodeURIComponent(ae)]=decodeURIComponent(ut)}}),$}function wt(z){const $=z.indexOf("?");if(!$)return"";const Q=z.indexOf("#",$);return z.substring($,Q>0?Q:void 0)}class Bt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,Q){Q||(Q=0);const Ce=this.W_;if("string"==typeof $)for(let zt=0;zt<16;zt++)Ce[zt]=$.charCodeAt(Q)<<24|$.charCodeAt(Q+1)<<16|$.charCodeAt(Q+2)<<8|$.charCodeAt(Q+3),Q+=4;else for(let zt=0;zt<16;zt++)Ce[zt]=$[Q]<<24|$[Q+1]<<16|$[Q+2]<<8|$[Q+3],Q+=4;for(let zt=16;zt<80;zt++){const di=Ce[zt-3]^Ce[zt-8]^Ce[zt-14]^Ce[zt-16];Ce[zt]=4294967295&(di<<1|di>>>31)}let qn,qt,ae=this.chain_[0],ut=this.chain_[1],Tt=this.chain_[2],bn=this.chain_[3],rn=this.chain_[4];for(let zt=0;zt<80;zt++){zt<40?zt<20?(qn=bn^ut&(Tt^bn),qt=1518500249):(qn=ut^Tt^bn,qt=1859775393):zt<60?(qn=ut&Tt|bn&(ut|Tt),qt=2400959708):(qn=ut^Tt^bn,qt=3395469782);const di=(ae<<5|ae>>>27)+qn+rn+qt+Ce[zt]&4294967295;rn=bn,bn=Tt,Tt=4294967295&(ut<<30|ut>>>2),ut=ae,ae=di}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+ut&4294967295,this.chain_[2]=this.chain_[2]+Tt&4294967295,this.chain_[3]=this.chain_[3]+bn&4294967295,this.chain_[4]=this.chain_[4]+rn&4294967295}update($,Q){if(null==$)return;void 0===Q&&(Q=$.length);const Ce=Q-this.blockSize;let ae=0;const ut=this.buf_;let Tt=this.inbuf_;for(;ae<Q;){if(0===Tt)for(;ae<=Ce;)this.compress_($,ae),ae+=this.blockSize;if("string"==typeof $){for(;ae<Q;)if(ut[Tt]=$.charCodeAt(ae),++Tt,++ae,Tt===this.blockSize){this.compress_(ut),Tt=0;break}}else for(;ae<Q;)if(ut[Tt]=$[ae],++Tt,++ae,Tt===this.blockSize){this.compress_(ut),Tt=0;break}}this.inbuf_=Tt,this.total_+=Q}digest(){const $=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&Q,Q/=256;this.compress_(this.buf_);let Ce=0;for(let ae=0;ae<5;ae++)for(let ut=24;ut>=0;ut-=8)$[Ce]=this.chain_[ae]>>ut&255,++Ce;return $}}function Ht(z,$){const Q=new zn(z,$);return Q.subscribe.bind(Q)}class zn{constructor($,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{$(this)}).catch(Ce=>{this.error(Ce)})}next($){this.forEachObserver(Q=>{Q.next($)})}error($){this.forEachObserver(Q=>{Q.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Q,Ce){let ae;if(void 0===$&&void 0===Q&&void 0===Ce)throw new Error("Missing Observer.");ae=function Ri(z,$){if("object"!=typeof z||null===z)return!1;for(const Q of $)if(Q in z&&"function"==typeof z[Q])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Q,complete:Ce},void 0===ae.next&&(ae.next=dn),void 0===ae.error&&(ae.error=dn),void 0===ae.complete&&(ae.complete=dn);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),ut}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,$)}sendOne($,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Q(this.observers[$])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dn(){}const Bn=function(z,$,Q,Ce){let ae;if(Ce<$?ae="at least "+$:Ce>Q&&(ae=0===Q?"none":"no more than "+Q),ae)throw new Error(z+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+ae+".")};function Or(z,$){return`${z} failed: ${$} argument `}function mo(z,$,Q,Ce){if((!Ce||Q)&&"function"!=typeof Q)throw new Error(Or(z,$)+"must be a valid function.")}function hn(z,$,Q,Ce){if((!Ce||Q)&&("object"!=typeof Q||null===Q))throw new Error(Or(z,$)+"must be a valid context object.")}const kr=function(z){const $=[];let Q=0;for(let Ce=0;Ce<z.length;Ce++){let ae=z.charCodeAt(Ce);if(ae>=55296&&ae<=56319){const ut=ae-55296;Ce++,te(Ce<z.length,"Surrogate pair missing trail surrogate."),ae=65536+(ut<<10)+(z.charCodeAt(Ce)-56320)}ae<128?$[Q++]=ae:ae<2048?($[Q++]=ae>>6|192,$[Q++]=63&ae|128):ae<65536?($[Q++]=ae>>12|224,$[Q++]=ae>>6&63|128,$[Q++]=63&ae|128):($[Q++]=ae>>18|240,$[Q++]=ae>>12&63|128,$[Q++]=ae>>6&63|128,$[Q++]=63&ae|128)}return $},Pr=function(z){let $=0;for(let Q=0;Q<z.length;Q++){const Ce=z.charCodeAt(Q);Ce<128?$++:Ce<2048?$+=2:Ce>=55296&&Ce<=56319?($+=4,Q++):$+=3}return $},Fr=1e3,ba=2,ot=144e5,Re=.5;function it(z,$=Fr,Q=ba){const Ce=$*Math.pow(Q,z),ae=Math.round(Re*Ce*(Math.random()-.5)*2);return Math.min(ot,Ce+ae)}function Wt(z){return z&&z._delegate?z._delegate:z}},8390:(ft,Ie,F)=>{var u=F(5879);let te=null;function B(){return te}class se{}const ue=new u.OlP("DocumentToken");let ve=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(he)},providedIn:"platform"})}return n})();const De=new u.OlP("Location Initialized");let he=(()=>{class n extends ve{constructor(){super(),this._doc=(0,u.f3M)(ue),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(e){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function j(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function W(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ie(n){return n&&"?"!==n[0]?"?"+n:n}let He=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Qe)},providedIn:"root"})}return n})();const Ne=new u.OlP("appBaseHref");let Qe=(()=>{class n extends He{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return j(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ie(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const l=this.prepareExternalUrl(r+ie(o));this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,o){const l=this.prepareExternalUrl(r+ie(o));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ve),u.LFG(Ne,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ke=(()=>{class n extends He{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=j(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let l=this.prepareExternalUrl(r+ie(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,o){let l=this.prepareExternalUrl(r+ie(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ve),u.LFG(Ne,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ye=(()=>{class n{constructor(e){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function ne(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(W(ct(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ie(i))}normalize(e){return n.stripTrailingSlash(function st(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,ct(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ie(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ie(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=ie;static#t=this.joinWithSlash=j;static#n=this.stripTrailingSlash=W;static#i=this.\u0275fac=function(i){return new(i||n)(u.LFG(He))};static#r=this.\u0275prov=u.Yz7({token:n,factory:function(){return function Pe(){return new Ye((0,u.LFG)(He))}()},providedIn:"root"})}return n})();function ct(n){return n.replace(/\/index.html$/,"")}const Vs=/\s+/,xi=[];let Ia=(()=>{class n{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=xi,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Vs):xi}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Vs):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Vs).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ca{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Ca(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===o?void 0:o);else if(null!==o){const h=i.get(o);i.move(h,l),yc(h,r)}});for(let r=0,o=i.length;r<o;r++){const h=i.get(r).context;h.index=r,h.count=o,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{yc(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function yc(n,t){n.context.$implicit=t.item}let Hi=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new vc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kh("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kh("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class vc{constructor(){this.$implicit=null,this.ngIf=null}}function kh(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(t)}'.`)}let Mn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const Ur="browser";function Xn(n){return"server"===n}let br=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Na((0,u.LFG)(ue),window)})}return n})();class Na{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Hs(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const l=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class zh extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Nc extends zh{static makeCurrent(){!function re(n){te||(te=n)}(new Nc)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function cg(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}();return null==e?null:function qh(n){zs=zs||document.createElement("a"),zs.setAttribute("href",n);const t=zs.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Ea(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let zs,Ws=null,lg=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Yh=new u.OlP("EventManagerPlugins");let Er=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Yh),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class zo{constructor(t){this._doc=t}}const ad="ng-app-id";let qs=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xn(o),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${ad}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(ad),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(ad,this.appId),l}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const o=this.styleRef,l=o.get(i)?.elements;l?l.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ll={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bl=/%COMP%/g,Ir=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Tn(n,t){return t.map(e=>e.replace(Bl,n))}let jl=(()=>{class n{constructor(e,i,r,o,l,h,p,y=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=p,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=Xn(h),this.defaultRenderer=new Zs(e,l,p,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===u.ifc.ShadowDom&&(i={...i,encapsulation:u.ifc.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof Gl?r.applyToHost(e):r instanceof wi&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const l=this.doc,h=this.ngZone,p=this.eventManager,y=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(i.encapsulation){case u.ifc.Emulated:o=new Gl(p,y,i,this.appId,I,l,h,T);break;case u.ifc.ShadowDom:return new Vr(p,y,e,i,l,h,this.nonce,T);default:o=new wi(p,y,i,I,l,h,T)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Er),u.LFG(qs),u.LFG(u.AFp),u.LFG(Ir),u.LFG(ue),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Zs{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Ll[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Hl(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Hl(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new u.vHH(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const o=Ll[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Ll[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(u.JOm.DashCase|u.JOm.Important)?t.style.setProperty(e,i,r&u.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&u.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=B().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function Hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vr extends Zs{constructor(t,e,i,r,o,l,h,p){super(t,o,l,p),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=Tn(r.id,r.styles);for(const I of y){const T=document.createElement("style");h&&T.setAttribute("nonce",h),T.textContent=I,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wi extends Zs{constructor(t,e,i,r,o,l,h,p){super(t,o,l,h),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=p?Tn(p,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Gl extends wi{constructor(t,e,i,r,o,l,h,p){const y=r+"-"+i.id;super(t,e,i,o,l,h,p,y),this.contentAttr=function Ul(n){return"_ngcontent-%COMP%".replace(Bl,n)}(y),this.hostAttr=function Vl(n){return"_nghost-%COMP%".replace(Bl,n)}(y)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let ud=(()=>{class n extends zo{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const xc=["alt","control","meta","shift"],ws={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$l={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Oc=(()=>{class n extends zo{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const o=n.parseEventName(i),l=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(e,o.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),xc.forEach(y=>{const I=i.indexOf(y);I>-1&&(i.splice(I,1),l+=y+".")}),l+=o,0!=i.length||0===o.length)return null;const p={};return p.domEventName=r,p.fullKey=l,p}static matchEventFullKeyCode(e,i){let r=ws[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),xc.forEach(l=>{l!==r&&(0,$l[l])(e)&&(o+=l+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const zl=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Ur},{provide:u.g9A,useValue:function Et(){Nc.makeCurrent()},multi:!0},{provide:ue,useFactory:function J_(){return(0,u.RDi)(document),document},deps:[]}]),Qh=new u.OlP(""),Zo=[{provide:u.rWj,useClass:class Zh{addToWindow(t){u.dqk.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new u.vHH(5103,!1);return o},u.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let o=r.length,l=!1;const h=function(p){l=l||p,o--,0==o&&i(l)};r.forEach(p=>{p.whenStable(h)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?B().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Ys=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Wl(){return new u.qLn},deps:[]},{provide:Yh,useClass:ud,multi:!0,deps:[ue,u.R0b,u.Lbi]},{provide:Yh,useClass:Oc,multi:!0,deps:[ue]},jl,qs,Er,{provide:u.FYo,useExisting:jl},{provide:class wr{},useClass:lg,deps:[]},[]];let Jh=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:u.AFp,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Qh,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...Ys,...Zo],imports:[Mn,u.hGG]})}return n})(),Me=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function dg(){return new Me((0,u.LFG)(ue))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let Cr=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new(i||n):u.LFG(Fc),r},providedIn:"root"})}return n})(),Fc=(()=>{class n extends Cr{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new u.vHH(5200,!1);case u.q3G.URL:return(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new u.vHH(5201,!1);default:throw new u.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,u.JVY)(e)}bypassSecurityTrustStyle(e){return(0,u.L6k)(e)}bypassSecurityTrustScript(e){return(0,u.eBb)(e)}bypassSecurityTrustUrl(e){return(0,u.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,u.pB0)(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function ql(n){return new Fc(n.get(ue))}(u.LFG(u.zs3)),r},providedIn:"root"})}return n})();var Hn=F(5592),zi=F(4674),En=F(2459),nt=F(2096),jr=F(5619);const{isArray:sf}=Array,{getPrototypeOf:ey,prototype:Pi,keys:Xs}=Object;function In(n){if(1===n.length){const t=n[0];if(sf(t))return{args:t,keys:null};if(function Ua(n){return n&&"object"==typeof n&&ey(n)===Pi}(t)){const e=Xs(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Lc=F(2737),pt=F(7398);const{isArray:eo}=Array;function Hr(n){return(0,pt.U)(t=>function Yl(n,t){return eo(t)?n(...t):n(t)}(n,t))}var Is=F(9940);function Cs(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var Zn=F(8251),Bc=F(7103);function Yo(...n){const t=(0,Is.yG)(n),e=(0,Is.jO)(n),{args:i,keys:r}=In(n);if(0===i.length)return(0,En.D)([],t);const o=new Hn.y(function _d(n,t,e=Lc.y){return i=>{D(t,()=>{const{length:r}=n,o=new Array(r);let l=r,h=r;for(let p=0;p<r;p++)D(t,()=>{const y=(0,En.D)(n[p],t);let I=!1;y.subscribe((0,Zn.x)(i,T=>{o[p]=T,I||(I=!0,h--),h||i.next(e(o.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,r?l=>Cs(r,l):Lc.y));return e?o.pipe(Hr(e)):o}function D(n,t,e){n?(0,Bc.f)(e,n,t):t()}const O=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var V=F(7537);function oe(...n){return function J(){return(0,V.J)(1)}()((0,En.D)(n,(0,Is.yG)(n)))}var Se=F(4829);function at(n){return new Hn.y(t=>{(0,Se.Xf)(n()).subscribe(t)})}var gt=F(8407);function mt(n,t){const e=(0,zi.m)(n)?n:()=>n,i=r=>r.error(e());return new Hn.y(t?r=>t.schedule(i,0,r):i)}var xt=F(6232),Rt=F(7394),Cn=F(9360);function Ei(){return(0,Cn.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Zn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Do extends Hn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Cn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Rt.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Zn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Rt.w0.EMPTY)}return t}refCount(){return Ei()(this)}}var tn=F(8645),Nn=F(4664);function sn(n){return n<=0?()=>xt.E:(0,Cn.e)((t,e)=>{let i=0;t.subscribe((0,Zn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function qi(...n){const t=(0,Is.yG)(n);return(0,Cn.e)((e,i)=>{(t?oe(n,e,t):oe(n,e)).subscribe(i)})}function Dn(n,t){return(0,Cn.e)((e,i)=>{let r=0;e.subscribe((0,Zn.x)(i,o=>n.call(t,o,r++)&&i.next(o)))})}var dr=F(1631);function yd(n){return(0,Cn.e)((t,e)=>{let i=!1;t.subscribe((0,Zn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function mg(n=_g){return(0,Cn.e)((t,e)=>{let i=!1;t.subscribe((0,Zn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function _g(){return new O}function rr(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Dn((r,o)=>n(r,o,i)):Lc.y,sn(1),e?yd(t):mg(()=>new O))}function Kl(n,t){return(0,zi.m)(t)?(0,dr.z)(n,t,1):(0,dr.z)(n,1)}var Gn=F(9397);function To(n){return(0,Cn.e)((t,e)=>{let o,i=null,r=!1;i=t.subscribe((0,Zn.x)(e,void 0,void 0,l=>{o=(0,Se.Xf)(n(l,To(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function Ko(n,t){return(0,Cn.e)(function vd(n,t,e,i,r){return(o,l)=>{let h=e,p=t,y=0;o.subscribe((0,Zn.x)(l,I=>{const T=y++;p=h?n(p,I,T):(h=!0,I),i&&l.next(p)},r&&(()=>{h&&l.next(p),l.complete()})))}}(n,t,arguments.length>=2,!0))}function bd(n){return n<=0?()=>xt.E:(0,Cn.e)((t,e)=>{let i=[];t.subscribe((0,Zn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function wd(n){return(0,Cn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var af=F(2420);function ni(n){return(0,Cn.e)((t,e)=>{(0,Se.Xf)(n).subscribe((0,Zn.x)(e,()=>e.complete(),af.Z)),!e.closed&&t.subscribe(e)})}const Gt="primary",So=Symbol("RouteTitle");class Uc{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ql(n){return new Uc(n)}function ty(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const l=i[o],h=n[o];if(l.startsWith(":"))r[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Gr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!vg(n[r],t[r]))return!1;return!0}function vg(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}return n===t}function hr(n){return n.length>0?n[n.length-1]:null}function Va(n){return function Zl(n){return!!n&&(n instanceof Hn.y||(0,zi.m)(n.lift)&&(0,zi.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,En.D)(Promise.resolve(n)):(0,nt.of)(n)}const iy={exact:function Jl(n,t,e){if(!eu(n.segments,t.segments)||!jc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Jl(n.children[i],t.children[i],e))return!1;return!0},subset:ja},cf={exact:function ry(n,t){return Gr(n,t)},subset:function Xl(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>vg(n[e],t[e]))},ignored:()=>!0};function lf(n,t,e){return iy[e.paths](n.root,t.root,e.matrixParams)&&cf[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ja(n,t,e){return Vc(n,t,t.segments,e)}function Vc(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!eu(r,e)||t.hasChildren()||!jc(r,e,i))}if(n.segments.length===e.length){if(!eu(n.segments,e)||!jc(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!ja(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(eu(n.segments,r)&&jc(n.segments,r,i)&&n.children[Gt])&&Vc(n.children[Gt],t,o,i)}}function jc(n,t,e){return t.every((i,r)=>cf[e](n[r].parameters,i.parameters))}class Ha{constructor(t=new on([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ql(this.queryParams)),this._queryParamMap}toString(){return Sb.serialize(this)}}class on{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bg(this)}}class Ed{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ql(this.parameters)),this._parameterMap}toString(){return is(this)}}function eu(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let uf=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new sy},providedIn:"root"})}return n})();class sy{parse(t){const e=new Gc(t);return new Ha(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Qo(t.root,!0)}`,i=function ff(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${df(e)}=${df(r)}`).join("&"):`${df(e)}=${df(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Fi(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Sb=new sy;function bg(n){return n.segments.map(t=>is(t)).join("/")}function Qo(n,t){if(!n.hasChildren())return bg(n);if(t){const e=n.children[Gt]?Qo(n.children[Gt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Gt&&i.push(`${r}:${Qo(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function fD(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Gt&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Gt&&(e=e.concat(t(r,i)))}),e}(n,(i,r)=>r===Gt?[Qo(n.children[Gt],!1)]:[`${r}:${Qo(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${bg(n)}/${e[0]}`:`${bg(n)}/(${e.join("//")})`}}function Ga(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function df(n){return Ga(n).replace(/%3B/gi,";")}function Id(n){return Ga(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $a(n){return decodeURIComponent(n)}function hf(n){return $a(n.replace(/\+/g,"%20"))}function is(n){return`${Id(n.path)}${function tu(n){return Object.keys(n).map(t=>`;${Id(t)}=${Id(n[t])}`).join("")}(n.parameters)}`}const pf=/^[^\/()?;#]+/;function Hc(n){const t=n.match(pf);return t?t[0]:""}const wg=/^[^\/()?;=#]+/,Ab=/^[^=?&#]+/,rs=/^[^&#]+/;class Gc{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Gt]=new on(t,e)),i}parseSegment(){const t=Hc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(t),new Ed($a(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function pD(n){const t=n.match(wg);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Hc(this.remaining);r&&(i=r,this.capture(i))}t[$a(e)]=$a(i)}parseQueryParam(t){const e=function gD(n){const t=n.match(Ab);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function Eg(n){const t=n.match(rs);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=hf(e),o=hf(i);if(t.hasOwnProperty(r)){let l=t[r];Array.isArray(l)||(l=[l],t[r]=l),l.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Hc(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Gt);const l=this.parseChildren();e[o]=1===Object.keys(l).length?l[Gt]:new on([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new u.vHH(4011,!1)}}function Ig(n){return n.segments.length>0?new on([],{[Gt]:n}):n}function Cg(n){const t={};for(const i of Object.keys(n.children)){const o=Cg(n.children[i]);if(i===Gt&&0===o.segments.length&&o.hasChildren())for(const[l,h]of Object.entries(o.children))t[l]=h;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function Mb(n){if(1===n.numberOfChildren&&n.children[Gt]){const t=n.children[Gt];return new on(n.segments.concat(t.segments),t.children)}return n}(new on(n.segments,t))}function Jo(n){return n instanceof Ha}function oy(n){let t;const r=Ig(function e(o){const l={};for(const p of o.children){const y=e(p);l[p.outlet]=y}const h=new on(o.url,l);return o===n&&(t=h),h}(n.root));return t??r}function ay(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(0===t.length)return nu(r,r,r,e,i);const o=function Nb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new iu(!0,0,n);let t=0,e=!1;const i=n.reduce((r,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([p,y])=>{h[p]="string"==typeof y?y.split("/"):y}),[...r,{outlets:h}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===l?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,o]},[]);return new iu(e,t,i)}(t);if(o.toRoot())return nu(r,r,new on([],{}),e,i);const l=function Rb(n,t,e){if(n.isAbsolute)return new zc(t,!0,0);if(!e)return new zc(t,!1,NaN);if(null===e.parent)return new zc(e,!0,0);const i=$c(n.commands[0])?0:1;return function ly(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new u.vHH(4005,!1);r=i.segments.length}return new zc(i,!1,r-o)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),h=l.processChildren?Zc(l.segmentGroup,l.index,o.commands):Cd(l.segmentGroup,l.index,o.commands);return nu(r,l.segmentGroup,h,e,i)}function $c(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wc(n){return"object"==typeof n&&null!=n&&n.outlets}function nu(n,t,e,i,r){let l,o={};i&&Object.entries(i).forEach(([p,y])=>{o[p]=Array.isArray(y)?y.map(I=>`${I}`):`${y}`}),l=n===t?e:cy(n,t,e);const h=Ig(Cg(l));return new Ha(h,o,r)}function cy(n,t,e){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===t?e:cy(o,t,e)}),new on(n.segments,i)}class iu{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&$c(i[0]))throw new u.vHH(4003,!1);const r=i.find(Wc);if(r&&r!==hr(i))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zc{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Cd(n,t,e){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return Zc(n,t,e);const i=function xb(n,t,e){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;const l=n.segments[r],h=e[i];if(Wc(h))break;const p=`${h}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Sg(p,y,l))return o;i+=2}else{if(!Sg(p,{},l))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new on(n.segments.slice(0,i.pathIndex),{});return o.children[Gt]=new on(n.segments.slice(i.pathIndex),n.children),Zc(o,0,r)}return i.match&&0===r.length?new on(n.segments,{}):i.match&&!n.hasChildren()?Tg(n,t,e):i.match?Zc(n,0,r):Tg(n,t,e)}function Zc(n,t,e){if(0===e.length)return new on(n.segments,{});{const i=function qc(n){return Wc(n[0])?n[0].outlets:{[Gt]:n}}(e),r={};if(Object.keys(i).some(o=>o!==Gt)&&n.children[Gt]&&1===n.numberOfChildren&&0===n.children[Gt].segments.length){const o=Zc(n.children[Gt],t,e);return new on(n.segments,o.children)}return Object.entries(i).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(r[o]=Cd(n.children[o],t,l))}),Object.entries(n.children).forEach(([o,l])=>{void 0===i[o]&&(r[o]=l)}),new on(n.segments,r)}}function Tg(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(Wc(o)){const p=ru(o.outlets);return new on(i,p)}if(0===r&&$c(e[0])){i.push(new Ed(n.segments[t].path,su(e[0]))),r++;continue}const l=Wc(o)?o.outlets[Gt]:`${o}`,h=r<e.length-1?e[r+1]:null;l&&h&&$c(h)?(i.push(new Ed(l,su(h))),r+=2):(i.push(new Ed(l,{})),r++)}return new on(i,{})}function ru(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=Tg(new on([],{}),0,i))}),t}function su(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Sg(n,t,e){return n==e.path&&Gr(t,e.parameters)}const ou="imperative";class ss{constructor(t,e){this.id=t,this.url=e}}class Dd extends ss{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yc extends ss{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kc extends ss{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class au extends ss{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class fr extends ss{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xo extends ss{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ag extends ss{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ob extends ss{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gf extends ss{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uy extends ss{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dy{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kb{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pb{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wa{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mf{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mD{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fb{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Td{}class Mg{constructor(t){this.url=t}}class hy{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new cu,this.attachRef=null}}let cu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new hy,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Lb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=to(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=to(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ao(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Ao(t,this._root).map(e=>e.value)}}function to(n,t){if(n===t.value)return t;for(const e of t.children){const i=to(n,e);if(i)return i}return null}function Ao(n,t){if(n===t.value)return[t];for(const e of t.children){const i=Ao(n,e);if(i.length)return i.unshift(t),i}return[]}class os{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function za(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ng extends Lb{constructor(t,e){super(t),this.snapshot=e,_(this,t)}toString(){return this.snapshot.toString()}}function Sd(n,t){const e=function lu(n,t){const l=new b([],{},{},"",{},Gt,t,null,{});return new g("",new os(l,[]))}(0,t),i=new jr.X([new Ed("",{})]),r=new jr.X({}),o=new jr.X({}),l=new jr.X({}),h=new jr.X(""),p=new Qc(i,r,l,h,o,Gt,t,e.root);return p.snapshot=e.root,new Ng(new os(p,[]),e)}class Qc{constructor(t,e,i,r,o,l,h,p){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,pt.U)(y=>y[So]))??(0,nt.of)(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(t=>Ql(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(t=>Ql(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rg(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function _f(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class b{get title(){return this.data?.[So]}constructor(t,e,i,r,o,l,h,p,y){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=l,this.component=h,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ql(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ql(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class g extends Lb{constructor(t,e){super(e),this.url=t,_(this,e)}toString(){return E(this._root)}}function _(n,t){t.value._routerState=n,t.children.forEach(e=>_(n,e))}function E(n){const t=n.children.length>0?` { ${n.children.map(E).join(", ")} } `:"";return`${n.value}${t}`}function R(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Gr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Gr(t.params,e.params)||n.paramsSubject.next(e.params),function ny(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Gr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),Gr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function k(n,t){const e=Gr(n.params,t.params)&&function Tb(n,t){return eu(n,t)&&n.every((e,i)=>Gr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||k(n.parent,t.parent))}let Y=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(cu),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(qe,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=e;const r=this.location,l=e.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new ye(e,h,r.injector);this.activated=r.createComponent(l,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class ye{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Qc?this.route:t===cu?this.childContexts:this.parent.get(t,e)}}const qe=new u.OlP("");let rt=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=Yo([i.queryParams,i.params,i.data]).pipe((0,Nn.w)(([o,l,h],p)=>(h={...o,...l,...h},0===p?(0,nt.of)(h):Promise.resolve(h)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const l=(0,u.qFp)(i.component);if(l)for(const{templateName:h}of l.inputs)e.activatedComponentRef.setInput(h,o[h]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function vt(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Li(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return vt(n,i,r);return vt(n,i)})}(n,t,e);return new os(i,r)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(h=>vt(n,h)),l}}const i=function Yn(n){return new Qc(new jr.X(n.url),new jr.X(n.params),new jr.X(n.queryParams),new jr.X(n.fragment),new jr.X(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(o=>vt(n,o));return new os(i,r)}}const qa="ngNavigationCancelingError";function yf(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Jo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=uu(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function uu(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[qa]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Jc(n){return n&&n[qa]}let Ad=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(i,r){1&i&&u._UZ(0,"router-outlet")},dependencies:[Y],encapsulation:2})}return n})();function Pg(n){const t=n.children&&n.children.map(Pg),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Gt&&(e.component=Ad),e}function no(n){return n.outlet||Gt}function Xc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class _D{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),R(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=za(e);t.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,r[l],i),delete r[l]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=za(t);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);if(i&&i.outlet){const l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=za(t);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const r=za(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new mD(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Wa(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(R(r),r===o)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),R(h.route.value),this.activateChildRoutes(t,null,l.children)}else{const h=Xc(r.snapshot);l.attachRef=null,l.route=r,l.injector=h,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class Hb{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Fg{constructor(t,e){this.component=t,this.route=e}}function vf(n,t,e){const i=n._root;return Nd(i,t?t._root:null,e,[i.value])}function Md(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,u.Z0I)(n)?t.get(n):n:i}function Nd(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=za(t);return n.children.forEach(l=>{(function py(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const p=function cN(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!eu(n.url,t.url);case"pathParamsOrQueryParamsChange":return!eu(n.url,t.url)||!Gr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!k(n,t)||!Gr(n.queryParams,t.queryParams);default:return!k(n,t)}}(l,o,o.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Hb(i)):(o.data=l.data,o._resolvedData=l._resolvedData),Nd(n,t,o.component?h?h.children:null:e,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Fg(h.outlet.component,l))}else l&&Lg(t,h,r),r.canActivateChecks.push(new Hb(i)),Nd(n,null,o.component?h?h.children:null:e,i,r)})(l,o[l.value.outlet],e,i.concat([l.value]),r),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>Lg(h,e.getContext(l),r)),r}function Lg(n,t,e){const i=za(n),r=n.value;Object.entries(i).forEach(([o,l])=>{Lg(l,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new Fg(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Bg(n){return"function"==typeof n}function bD(n){return n instanceof O||"EmptyError"===n?.name}const bf=Symbol("INITIAL_VALUE");function Rd(){return(0,Nn.w)(n=>Yo(n.map(t=>t.pipe(sn(1),qi(bf)))).pipe((0,pt.U)(t=>{for(const e of t)if(!0!==e){if(e===bf)return bf;if(!1===e||e instanceof Ha)return e}return!0}),Dn(t=>t!==bf),sn(1)))}function $b(n){return(0,gt.z)((0,Gn.b)(t=>{if(Jo(t))throw yf(0,t)}),(0,pt.U)(t=>!0===t))}class Ug{constructor(t){this.segmentGroup=t||null}}class Vg{constructor(t){this.urlTree=t}}function Za(n){return mt(new Ug(n))}function zb(n){return mt(new Vg(n))}class DD{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new u.vHH(4002,!1)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,nt.of)(i);if(r.numberOfChildren>1||!r.children[Gt])return mt(new u.vHH(4e3,!1));r=r.children[Gt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const o=this.createSegmentGroup(t,e.root,i,r);return new Ha(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);i[r]=e[h]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){const o=this.createSegments(t,e.segments,i,r);let l={};return Object.entries(e.children).forEach(([h,p])=>{l[h]=this.createSegmentGroup(t,p,i,r)}),new on(o,l)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new u.vHH(4001,!1);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}const jg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hg(n,t,e,i,r){const o=Zb(n,t,e);return o.matched?(i=function xg(n,t){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function Wb(n,t,e,i){const r=t.canMatch;if(!r||0===r.length)return(0,nt.of)(!0);const o=r.map(l=>{const h=Md(l,n);return Va(function Gb(n){return n&&Bg(n.canMatch)}(h)?h.canMatch(t,e):n.runInContext(()=>h(t,e)))});return(0,nt.of)(o).pipe(Rd(),$b())}(i,t,e).pipe((0,pt.U)(l=>!0===l?o:{...jg}))):(0,nt.of)(o)}function Zb(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...jg}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||ty)(e,n,t);if(!r)return{...jg};const o={};Object.entries(r.posParams??{}).forEach(([h,p])=>{o[h]=p.path});const l=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function Yb(n,t,e,i){return e.length>0&&function _N(n,t,e){return e.some(i=>Gg(n,t,i)&&no(i)!==Gt)}(n,e,i)?{segmentGroup:new on(t,mN(i,new on(e,n.children))),slicedSegments:[]}:0===e.length&&function TD(n,t,e){return e.some(i=>Gg(n,t,i))}(n,e,i)?{segmentGroup:new on(n.segments,gN(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new on(n.segments,n.children),slicedSegments:e}}function gN(n,t,e,i,r){const o={};for(const l of i)if(Gg(n,e,l)&&!r[no(l)]){const h=new on([],{});o[no(l)]=h}return{...r,...o}}function mN(n,t){const e={};e[Gt]=t;for(const i of n)if(""===i.path&&no(i)!==Gt){const r=new on([],{});e[no(i)]=r}return e}function Gg(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class yN{constructor(t,e,i,r,o,l,h){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new DD(this.urlSerializer,this.urlTree)}noMatchError(t){return new u.vHH(4002,!1)}recognize(){const t=Yb(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Gt).pipe(To(e=>{if(e instanceof Vg)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof Ug?this.noMatchError(e):e}),(0,pt.U)(e=>{const i=new b([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,{}),r=new os(i,e),o=new g("",r),l=function Dg(n,t,e=null,i=null){return ay(oy(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Gt).pipe(To(i=>{throw i instanceof Ug?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=Rg(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0)}processChildren(t,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,En.D)(r).pipe(Kl(o=>{const l=i.children[o],h=function oN(n,t){const e=n.filter(i=>no(i)===t);return e.push(...n.filter(i=>no(i)!==t)),e}(e,o);return this.processSegmentGroup(t,h,l,o)}),Ko((o,l)=>(o.push(...l),o)),yd(null),function Db(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Dn((r,o)=>n(r,o,i)):Lc.y,bd(1),e?yd(t):mg(()=>new O))}(),(0,dr.z)(o=>{if(null===o)return Za(i);const l=SD(o);return function vN(n){n.sort((t,e)=>t.value.outlet===Gt?-1:e.value.outlet===Gt?1:t.value.outlet.localeCompare(e.value.outlet))}(l),(0,nt.of)(l)}))}processSegment(t,e,i,r,o,l){return(0,En.D)(e).pipe(Kl(h=>this.processSegmentAgainstRoute(h._injector??t,e,h,i,r,o,l).pipe(To(p=>{if(p instanceof Ug)return(0,nt.of)(null);throw p}))),rr(h=>!!h),To(h=>{if(bD(h))return function Kb(n,t,e){return 0===t.length&&!n.children[e]}(i,r,o)?(0,nt.of)([]):Za(i);throw h}))}processSegmentAgainstRoute(t,e,i,r,o,l,h){return function yy(n,t,e,i){return!!(no(n)===i||i!==Gt&&Gg(t,e,n))&&("**"===n.path||Zb(t,n,e).matched)}(i,r,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,r,i,o,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,l):Za(r):Za(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?zb(o):this.applyRedirects.lineralizeSegments(i,o).pipe((0,dr.z)(l=>{const h=new on(l,{});return this.processSegment(t,e,h,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:I}=Zb(e,r,o);if(!h)return Za(e);const T=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,I);return r.redirectTo.startsWith("/")?zb(T):this.applyRedirects.lineralizeSegments(r,T).pipe((0,dr.z)(N=>this.processSegment(t,i,e,N.concat(y),l,!1)))}matchSegmentAgainstRoute(t,e,i,r,o,l){let h;if("**"===i.path){const p=r.length>0?hr(r).parameters:{},y=new b(r,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MD(i),no(i),i.component??i._loadedComponent??null,i,Od(i));h=(0,nt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),e.children={}}else h=Hg(e,i,r,t).pipe((0,pt.U)(({matched:p,consumedSegments:y,remainingSegments:I,parameters:T})=>p?{snapshot:new b(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MD(i),no(i),i.component??i._loadedComponent??null,i,Od(i)),consumedSegments:y,remainingSegments:I}:null));return h.pipe((0,Nn.w)(p=>null===p?Za(e):this.getChildConfig(t=i._injector??t,i,r).pipe((0,Nn.w)(({routes:y})=>{const I=i._loadedInjector??t,{snapshot:T,consumedSegments:N,remainingSegments:P}=p,{segmentGroup:H,slicedSegments:K}=Yb(e,N,P,y);if(0===K.length&&H.hasChildren())return this.processChildren(I,y,H).pipe((0,pt.U)(xe=>null===xe?null:[new os(T,xe)]));if(0===y.length&&0===K.length)return(0,nt.of)([new os(T,[])]);const X=no(i)===o;return this.processSegment(I,y,H,K,X?Gt:o,!0).pipe((0,pt.U)(xe=>[new os(T,xe)]))}))))}getChildConfig(t,e,i){return e.children?(0,nt.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,nt.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function CD(n,t,e,i){const r=t.canLoad;if(void 0===r||0===r.length)return(0,nt.of)(!0);const o=r.map(l=>{const h=Md(l,n);return Va(function uN(n){return n&&Bg(n.canLoad)}(h)?h.canLoad(t,e):n.runInContext(()=>h(t,e)))});return(0,nt.of)(o).pipe(Rd(),$b())}(t,e,i).pipe((0,dr.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Gn.b)(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function _y(n){return mt(uu(!1,3))}())):(0,nt.of)({routes:[],injector:t})}}function uF(n){const t=n.value.routeConfig;return t&&""===t.path}function SD(n){const t=[],e=new Set;for(const i of n){if(!uF(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=SD(i.children);t.push(new os(i.value,r))}return t.filter(i=>!e.has(i))}function MD(n){return n.data||{}}function Od(n){return n.resolve||{}}function Qb(n,t){return(0,dr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return(0,nt.of)(e);let o=0;return(0,En.D)(r).pipe(Kl(l=>function ND(n,t,e,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!OD(r)&&(o[So]=r.title),function RD(n,t,e,i){const r=function xD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,nt.of)({});const o={};return(0,En.D)(r).pipe((0,dr.z)(l=>function kd(n,t,e,i){const r=Xc(t)??i,o=Md(n,r);return Va(o.resolve?o.resolve(t,e):r.runInContext(()=>o(t,e)))}(n[l],t,e,i).pipe(rr(),(0,Gn.b)(h=>{o[l]=h}))),bd(1),function yg(n){return(0,pt.U)(()=>n)}(o),To(l=>bD(l)?xt.E:mt(l)))}(o,n,t,i).pipe((0,pt.U)(l=>(n._resolvedData=l,n.data=Rg(n,e).resolve,r&&OD(r)&&(n.data[So]=r.title),null)))}(l.route,i,n,t)),(0,Gn.b)(()=>o++),bd(1),(0,dr.z)(l=>o===r.length?(0,nt.of)(e):xt.E))})}function OD(n){return"string"==typeof n.title||null===n.title}function Jb(n){return(0,Nn.w)(t=>{const e=n(t);return e?(0,En.D)(e).pipe((0,pt.U)(()=>t)):(0,nt.of)(t)})}const Ef=new u.OlP("ROUTES");let Xb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,nt.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Va(e.loadComponent()).pipe((0,pt.U)(Pd),(0,Gn.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),wd(()=>{this.componentLoaders.delete(e)})),r=new Do(i,()=>new tn.x).pipe(Ei());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,nt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function bN(n,t,e,i){return Va(n.loadChildren()).pipe((0,pt.U)(Pd),(0,dr.z)(r=>r instanceof u.YKP||Array.isArray(r)?(0,nt.of)(r):(0,En.D)(t.compileModuleAsync(r))),(0,pt.U)(r=>{i&&i(n);let o,l,h=!1;return Array.isArray(r)?(l=r,!0):(o=r.create(e).injector,l=o.get(Ef,[],{optional:!0,self:!0}).flat()),{routes:l.map(Pg),injector:o}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(wd(()=>{this.childrenLoaders.delete(i)})),l=new Do(o,()=>new tn.x).pipe(Ei());return this.childrenLoaders.set(i,l),l}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pd(n){return function el(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let by=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tn.x,this.transitionAbortSubject=new tn.x,this.configLoader=(0,u.f3M)(Xb),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(uf),this.rootContexts=(0,u.f3M)(cu),this.inputBindingEnabled=null!==(0,u.f3M)(qe,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,nt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new kb(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new dy(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new jr.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ou,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dn(o=>0!==o.id),(0,pt.U)(o=>({...o,extractedUrl:e.urlHandlingStrategy.extract(o.rawUrl)})),(0,Nn.w)(o=>{this.currentTransition=o;let l=!1,h=!1;return(0,nt.of)(o).pipe((0,Gn.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Nn.w)(p=>{const y=p.currentBrowserUrl.toString(),I=!e.navigated||p.extractedUrl.toString()!==y||y!==p.currentUrlTree.toString();if(!I&&"reload"!==(p.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const N="";return this.events.next(new au(p.id,this.urlSerializer.serialize(p.rawUrl),N,0)),p.resolve(null),xt.E}if(e.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return(0,nt.of)(p).pipe((0,Nn.w)(N=>{const P=this.transitions?.getValue();return this.events.next(new Dd(N.id,this.urlSerializer.serialize(N.extractedUrl),N.source,N.restoredState)),P!==this.transitions?.getValue()?xt.E:Promise.resolve(N)}),function vy(n,t,e,i,r,o){return(0,dr.z)(l=>function wf(n,t,e,i,r,o,l="emptyOnly"){return new yN(n,t,e,i,r,l,o).recognize()}(n,t,e,i,l.extractedUrl,r,o).pipe((0,pt.U)(({state:h,tree:p})=>({...l,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Gn.b)(N=>{o.targetSnapshot=N.targetSnapshot,o.urlAfterRedirects=N.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects};const P=new Xo(N.id,this.urlSerializer.serialize(N.extractedUrl),this.urlSerializer.serialize(N.urlAfterRedirects),N.targetSnapshot);this.events.next(P)}));if(I&&e.urlHandlingStrategy.shouldProcessUrl(p.currentRawUrl)){const{id:N,extractedUrl:P,source:H,restoredState:K,extras:X}=p,xe=new Dd(N,this.urlSerializer.serialize(P),H,K);this.events.next(xe);const Ue=Sd(0,this.rootComponentType).snapshot;return this.currentTransition=o={...p,targetSnapshot:Ue,urlAfterRedirects:P,extras:{...X,skipLocationChange:!1,replaceUrl:!1}},(0,nt.of)(o)}{const N="";return this.events.next(new au(p.id,this.urlSerializer.serialize(p.extractedUrl),N,1)),p.resolve(null),xt.E}}),(0,Gn.b)(p=>{const y=new Ag(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}),(0,pt.U)(p=>(this.currentTransition=o={...p,guards:vf(p.targetSnapshot,p.currentSnapshot,this.rootContexts)},o)),function xd(n,t){return(0,dr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:l}}=e;return 0===l.length&&0===o.length?(0,nt.of)({...e,guardsResult:!0}):function wD(n,t,e,i){return(0,En.D)(n).pipe((0,dr.z)(r=>function ID(n,t,e,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,nt.of)(!0);const l=o.map(h=>{const p=Xc(t)??r,y=Md(h,p);return Va(function gy(n){return n&&Bg(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,i):p.runInContext(()=>y(n,t,e,i))).pipe(rr())});return(0,nt.of)(l).pipe(Rd())}(r.component,r.route,e,t,i)),rr(r=>!0!==r,!0))}(l,i,r,n).pipe((0,dr.z)(h=>h&&function lN(n){return"boolean"==typeof n}(h)?function ED(n,t,e,i){return(0,En.D)(t).pipe(Kl(r=>oe(function lF(n,t){return null!==n&&t&&t(new Pb(n)),(0,nt.of)(!0)}(r.route.parent,i),function fN(n,t){return null!==n&&t&&t(new mf(n)),(0,nt.of)(!0)}(r.route,i),function pN(n,t,e){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(l=>function fy(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>at(()=>{const h=l.guards.map(p=>{const y=Xc(l.node)??e,I=Md(p,y);return Va(function yD(n){return n&&Bg(n.canActivateChild)}(I)?I.canActivateChild(i,n):y.runInContext(()=>I(i,n))).pipe(rr())});return(0,nt.of)(h).pipe(Rd())}));return(0,nt.of)(o).pipe(Rd())}(n,r.path,e),function my(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,nt.of)(!0);const r=i.map(o=>at(()=>{const l=Xc(t)??e,h=Md(o,l);return Va(function dN(n){return n&&Bg(n.canActivate)}(h)?h.canActivate(t,n):l.runInContext(()=>h(t,n))).pipe(rr())}));return(0,nt.of)(r).pipe(Rd())}(n,r.route,e))),rr(r=>!0!==r,!0))}(i,o,n,t):(0,nt.of)(h)),(0,pt.U)(h=>({...e,guardsResult:h})))})}(this.environmentInjector,p=>this.events.next(p)),(0,Gn.b)(p=>{if(o.guardsResult=p.guardsResult,Jo(p.guardsResult))throw yf(0,p.guardsResult);const y=new Ob(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.events.next(y)}),Dn(p=>!!p.guardsResult||(this.cancelNavigationTransition(p,"",3),!1)),Jb(p=>{if(p.guards.canActivateChecks.length)return(0,nt.of)(p).pipe((0,Gn.b)(y=>{const I=new gf(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}),(0,Nn.w)(y=>{let I=!1;return(0,nt.of)(y).pipe(Qb(e.paramsInheritanceStrategy,this.environmentInjector),(0,Gn.b)({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(y,"",2)}}))}),(0,Gn.b)(y=>{const I=new uy(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(I)}))}),Jb(p=>{const y=I=>{const T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Gn.b)(N=>{I.component=N}),(0,pt.U)(()=>{})));for(const N of I.children)T.push(...y(N));return T};return Yo(y(p.targetSnapshot.root)).pipe(yd(),sn(1))}),Jb(()=>this.afterPreactivation()),(0,pt.U)(p=>{const y=function St(n,t,e){const i=vt(n,t._root,e?e._root:void 0);return new Ng(i,t)}(e.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return this.currentTransition=o={...p,targetRouterState:y},o}),(0,Gn.b)(()=>{this.events.next(new Td)}),((n,t,e,i)=>(0,pt.U)(r=>(new _D(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,p=>this.events.next(p),this.inputBindingEnabled),sn(1),(0,Gn.b)({next:p=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects))),e.titleStrategy?.updateTitle(p.targetRouterState.snapshot),p.resolve(!0)},complete:()=>{l=!0}}),ni(this.transitionAbortSubject.pipe((0,Gn.b)(p=>{throw p}))),wd(()=>{l||h||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),To(p=>{if(h=!0,Jc(p))this.events.next(new Kc(o.id,this.urlSerializer.serialize(o.extractedUrl),p.message,p.cancellationCode)),function sr(n){return Jc(n)&&Jo(n.url)}(p)?this.events.next(new Mg(p.url)):o.resolve(!1);else{this.events.next(new fr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(p))}catch(y){o.reject(y)}}return xt.E}))}))}cancelNavigationTransition(e,i,r){const o=new Kc(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kD(n){return n!==ou}let PD=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Gt);return i}getResolvedTitleForRoute(e){return e.data[So]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(wN)},providedIn:"root"})}return n})(),wN=(()=>{class n extends PD{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Me))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(FD)},providedIn:"root"})}return n})();class IN{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let FD=(()=>{class n extends IN{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wy=new u.OlP("",{providedIn:"root",factory:()=>({})});let CN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(DN)},providedIn:"root"})}return n})(),DN=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $g=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}($g||{});function Wg(n,t){n.events.pipe(Dn(e=>e instanceof Yc||e instanceof Kc||e instanceof fr||e instanceof au),(0,pt.U)(e=>e instanceof Yc||e instanceof au?$g.COMPLETE:e instanceof Kc&&(0===e.code||1===e.code)?$g.REDIRECTING:$g.FAILED),Dn(e=>e!==$g.REDIRECTING),sn(1)).subscribe(()=>{t()})}function tl(n){throw n}function zg(n,t,e){return t.parse("/")}const LD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let as=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new tn.x,this.options=(0,u.f3M)(wy,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||tl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zg,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(CN),this.routeReuseStrategy=(0,u.f3M)(EN),this.titleStrategy=(0,u.f3M)(PD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(Ef,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(by),this.urlSerializer=(0,u.f3M)(uf),this.location=(0,u.f3M)(Ye),this.componentInputBindingEnabled=!!(0,u.f3M)(qe,{optional:!0}),this.eventsSubscription=new Rt.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ha,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sd(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(TN(i)&&this._events.next(i));if(i instanceof Dd)kD(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof au)this.rawUrlTree=r.rawUrl;else if(i instanceof Xo){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof Td)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Kc)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof Mg){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kD(r.source)};this.scheduleNavigation(o,ou,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof fr&&this.restoreHistory(r,!0),i instanceof Yc&&(this.navigated=!0),TN(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ou,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const o={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const p={...r};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const h=this.parseUrl(e);this.scheduleNavigation(h,i,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Pg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:p}=i,y=p?this.currentUrlTree.fragment:l;let T,I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}null!==I&&(I=this.removeEmptyProps(I));try{T=oy(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),T=this.currentUrlTree.root}return ay(T,e,I,y??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Jo(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ou,null,i)}navigate(e,i={skipLocationChange:!1}){return function dF(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new u.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...LD}:!1===i?{...BD}:i,Jo(e))return lf(this.currentUrlTree,e,r);const o=this.parseUrl(e);return lf(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(e,i,r,o,l){if(this.disposed)return Promise.resolve(!1);let h,p,y;l?(h=l.resolve,p=l.reject,y=l.promise):y=new Promise((T,N)=>{h=T,p=N});const I=this.pendingTasks.add();return Wg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:o,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(T=>Promise.reject(T))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",l)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TN(n){return!(n instanceof Td||n instanceof Mg)}let Fd=(()=>{class n{constructor(e,i,r,o,l,h){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=l,this.locationStrategy=h,this.href=null,this.commands=null,this.onChanges=new tn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const p=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=e.events.subscribe(y=>{y instanceof Yc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(as),u.Y36(Qc),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(He))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&u.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&i&&u.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})();class SN{}let MN=(()=>{class n{constructor(e,i,r,o,l){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Dn(e=>e instanceof Yc),Kl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=(0,u.MMx)(o.providers,e,`Route: ${o.path}`));const l=o._injector??e,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,En.D)(r).pipe((0,V.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,nt.of)(null);const o=r.pipe((0,dr.z)(l=>null===l?(0,nt.of)(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??e,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,En.D)([o,l]).pipe((0,V.J)())}return o})}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(as),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(SN),u.LFG(Xb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const nw=new u.OlP("");let UD=(()=>{class n{constructor(e,i,r,o,l={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Dd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Yc?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof au&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Fb&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fb(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function Mo(n,t){return{\u0275kind:n,\u0275providers:t}}function HD(){const n=(0,u.f3M)(u.zs3);return t=>{const e=n.get(u.z2F);if(t!==e.components[0])return;const i=n.get(as),r=n.get(GD);1===n.get(qg)&&i.initialNavigation(),n.get(WD,null,u.XFs.Optional)?.setUpPreloading(),n.get(nw,null,u.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const GD=new u.OlP("",{factory:()=>new tn.x}),qg=new u.OlP("",{providedIn:"root",factory:()=>1}),WD=new u.OlP("");function RN(n){return Mo(0,[{provide:WD,useExisting:MN},{provide:SN,useExisting:n}])}const Cf=new u.OlP("ROUTER_FORROOT_GUARD"),zD=[Ye,{provide:uf,useClass:sy},as,cu,{provide:Qc,useFactory:function iw(n){return n.routerState.root},deps:[as]},Xb,[]];function qD(){return new u.PXZ("Router",as)}let Yg=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[zD,[],{provide:Ef,multi:!0,useValue:e},{provide:Cf,useFactory:QD,deps:[[as,new u.FiY,new u.tp0]]},{provide:wy,useValue:i||{}},i?.useHash?{provide:He,useClass:ke}:{provide:He,useClass:Qe},{provide:nw,useFactory:()=>{const n=(0,u.f3M)(br),t=(0,u.f3M)(u.R0b),e=(0,u.f3M)(wy),i=(0,u.f3M)(by),r=(0,u.f3M)(uf);return e.scrollOffset&&n.setOffset(e.scrollOffset),new UD(r,i,n,t,e)}},i?.preloadingStrategy?RN(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:qD},i?.initialNavigation?Ey(i):[],i?.bindToComponentInputs?Mo(8,[rt,{provide:qe,useExisting:rt}]).\u0275providers:[],[{provide:ON,useFactory:HD},{provide:u.tb,multi:!0,useExisting:ON}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Ef,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Cf,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function QD(n){return"guarded"}function Ey(n){return["disabled"===n.initialNavigation?Mo(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const t=(0,u.f3M)(as);return()=>{t.setUpLocationChangeListener()}}},{provide:qg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Mo(2,[{provide:qg,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:t=>{const e=t.get(De,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=t.get(as),o=t.get(GD);Wg(r,()=>{i(!0)}),t.get(by).afterPreactivation=()=>(i(!0),o.closed?(0,nt.of)(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const ON=new u.OlP("");var Ld=F(6321),_n=F(2994);function sw(){return(0,Cn.e)((n,t)=>{let e,i=!1;n.subscribe((0,Zn.x)(t,r=>{const o=e;e=r,i&&t.next([o,r]),i=!0}))})}var bt,Kg=F(3997),Ii=F(6304),Tf=(F(8443),F(3106)),pe=F(5861),cs=F(4303),ea=F(4537),No=F(7879),L=F(9058),FN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},il={},Qg=Qg||{},Ut=FN||self;function Iy(){}function Jg(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Bd(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var XD="closure_uid_"+(1e9*Math.random()>>>0),LN=0;function BN(n,t,e){return n.call.apply(n.bind,arguments)}function yF(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function ls(n,t,e){return(ls=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?BN:yF).apply(null,arguments)}function Ud(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Dr(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return t.prototype[r].apply(i,l)}}function Ya(){this.s=this.s,this.o=this.o}Ya.prototype.s=!1,Ya.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function _F(n){Object.prototype.hasOwnProperty.call(n,XD)&&n[XD]||(n[XD]=++LN)}(this)},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vd=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function Xg(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Cy(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(Jg(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let l=0;l<o;l++)n[r+l]=i[l]}else n.push(i)}}function Zi(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Zi.prototype.h=function(){this.defaultPrevented=!0};var Dy=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Iy,t),Ut.removeEventListener("test",Iy,t)}catch{}return n}();function rl(n){return/^[\s\xa0]*$/.test(n)}var Ty=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function em(n,t){return n<t?-1:n>t?1:0}function jd(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function sl(n){return-1!=jd().indexOf(n)}function tm(n){return tm[" "](n),n}tm[" "]=Iy;var Ay,n,UN=sl("Opera"),Hd=sl("Trident")||sl("MSIE"),eT=sl("Edge"),aw=eT||Hd,Sy=sl("Gecko")&&!(-1!=jd().toLowerCase().indexOf("webkit")&&!sl("Edge"))&&!(sl("Trident")||sl("MSIE"))&&!sl("Edge"),tT=-1!=jd().toLowerCase().indexOf("webkit")&&!sl("Edge");function nT(){var n=Ut.document;return n?n.documentMode:void 0}e:{var iT="",cw=(n=jd(),Sy?/rv:([^\);]+)(\)|;)/.exec(n):eT?/Edge\/([\d\.]+)/.exec(n):Hd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tT?/WebKit\/(\S+)/.exec(n):UN?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cw&&(iT=cw?cw[1]:""),Hd){var Sf=nT();if(null!=Sf&&Sf>parseFloat(iT)){Ay=String(Sf);break e}}Ay=iT}var lw={};var Ry=Ut.document&&Hd&&(nT()||parseInt(Ay,10))||void 0;function im(n,t){if(Zi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Sy){e:{try{tm(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&im.X.h.call(this)}}Dr(im,Zi);var rT={2:"touch",3:"pen",4:"mouse"};im.prototype.h=function(){im.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rm="closure_listenable_"+(1e6*Math.random()|0),sT=0;function vF(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++sT,this.ba=this.ea=!1}function xy(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Af(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function oT(n){const t={};for(const e in n)t[e]=n[e];return t}const Gd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mf(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let o=0;o<Gd.length;o++)e=Gd[o],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Oy(n){this.src=n,this.g={},this.h=0}function ky(n,t){var e=t.type;if(e in n.g){var o,i=n.g[e],r=Vd(i,t);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(xy(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function uw(n,t,e,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==t&&o.capture==!!e&&o.ha==i)return r}return-1}Oy.prototype.add=function(n,t,e,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=uw(n,t,i,r);return-1<l?(t=n[l],e||(t.ea=!1)):((t=new vF(t,this.src,o,!!i,r)).ea=e,n.push(t)),t};var dw="closure_lm_"+(1e6*Math.random()|0),hw={};function fw(n,t,e,i,r){if(i&&i.once)return jN(n,t,e,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)fw(n,t[o],e,i,r);return null}return e=By(e),n&&n[rm]?n.N(t,e,Bd(i)?!!i.capture:!!i,r):pw(n,t,e,!1,i,r)}function pw(n,t,e,i,r,o){if(!t)throw Error("Invalid event type");var l=Bd(r)?!!r.capture:!!r,h=Ly(n);if(h||(n[dw]=h=new Oy(n)),(e=h.add(t,e,i,l,o)).proxy)return e;if(i=function gw(){const t=HN;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)Dy||(r=l),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(aT(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function jN(n,t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)jN(n,t[o],e,i,r);return null}return e=By(e),n&&n[rm]?n.O(t,e,Bd(i)?!!i.capture:!!i,r):pw(n,t,e,!0,i,r)}function Py(n,t,e,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)Py(n,t[o],e,i,r);else i=Bd(i)?!!i.capture:!!i,e=By(e),n&&n[rm]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=uw(o=n.g[t],e,i,r))&&(xy(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=Ly(n))&&(t=n.g[t.toString()],n=-1,t&&(n=uw(t,e,i,r)),(e=-1<n?t[n]:null)&&Fy(e))}function Fy(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[rm])ky(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(aT(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Ly(t))?(ky(e,n),0==e.h&&(e.src=null,t[dw]=null)):xy(n)}}}function aT(n){return n in hw?hw[n]:hw[n]="on"+n}function HN(n,t){if(n.ba)n=!0;else{t=new im(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&Fy(n),n=e.call(i,t)}return n}function Ly(n){return(n=n[dw])instanceof Oy?n:null}var mw="__closure_events_fn_"+(1e9*Math.random()>>>0);function By(n){return"function"==typeof n?n:(n[mw]||(n[mw]=function(t){return n.handleEvent(t)}),n[mw])}function pr(){Ya.call(this),this.i=new Oy(this),this.P=this,this.I=null}function Tr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Zi(t,n);else if(t instanceof Zi)t.target=t.target||n;else{var r=t;Mf(t=new Zi(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var l=t.g=e[o];r=_w(l,i,!0,t)&&r}if(r=_w(l=t.g=n,i,!0,t)&&r,r=_w(l,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=_w(l=t.g=e[o],i,!1,t)&&r}function _w(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var l=t[o];if(l&&!l.ba&&l.capture==e){var h=l.listener,p=l.ha||l.src;l.ea&&ky(n.i,l),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}Dr(pr,Ya),pr.prototype[rm]=!0,pr.prototype.removeEventListener=function(n,t,e,i){Py(this,n,t,e,i)},pr.prototype.M=function(){if(pr.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)xy(e[i]);delete n.g[t],n.h--}}this.I=null},pr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},pr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Uy=Ut.JSON.stringify;function cT(){var n=uT;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var sm,yw=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bF,n=>n.reset());class bF{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function vw(n){Ut.setTimeout(()=>{throw n},0)}function ol(n,t){sm||function GN(){var n=Ut.Promise.resolve(void 0);sm=function(){n.then(bw)}}(),lT||(sm(),lT=!0),uT.add(n,t)}var lT=!1,uT=new class ta{constructor(){this.h=this.g=null}add(t,e){const i=yw.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function bw(){for(var n;n=cT();){try{n.h.call(n.g)}catch(e){vw(e)}var t=yw;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}lT=!1}function io(n,t){pr.call(this),this.h=n||1,this.g=t||Ut,this.j=ls(this.lb,this),this.l=Date.now()}function Vy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ww(n,t,e){if("function"==typeof n)e&&(n=ls(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ls(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ut.setTimeout(n,t||0)}function $N(n){n.g=ww(()=>{n.g=null,n.i&&(n.i=!1,$N(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Dr(io,pr),(bt=io.prototype).ca=!1,bt.R=null,bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tr(this,"tick"),this.ca&&(Vy(this),this.start()))}},bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){io.X.M.call(this),Vy(this),delete this.g};class gr extends Ya{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:$N(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function om(n){Ya.call(this),this.h=n,this.g={}}Dr(om,Ya);var jy=[];function dT(n,t,e,i){Array.isArray(e)||(e&&(jy[0]=e.toString()),e=jy);for(var r=0;r<e.length;r++){var o=fw(t,e[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function hT(n){Af(n.g,function(t,e){this.g.hasOwnProperty(e)&&Fy(t)},n),n.g={}}function Nf(){this.g=!0}function Rf(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function mT(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<r.length;l++)r[l]=""}}}return Uy(e)}catch{return t}}(n,e)+(i?" "+i:"")})}om.prototype.M=function(){om.X.M.call(this),hT(this)},om.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nf.prototype.Aa=function(){this.g=!1},Nf.prototype.info=function(){};var $d={},_T=null;function Hy(){return _T=_T||new pr}function Ew(n){Zi.call(this,$d.Pa,n)}function Ka(n){const t=Hy();Tr(t,new Ew(t))}function Qa(n,t){Zi.call(this,$d.STAT_EVENT,n),this.stat=t}function Yi(n){const t=Hy();Tr(t,new Qa(t,n))}function yT(n,t){Zi.call(this,$d.Qa,n),this.size=t}function am(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},t)}$d.Pa="serverreachability",Dr(Ew,Zi),$d.STAT_EVENT="statevent",Dr(Qa,Zi),$d.Qa="timingevent",Dr(yT,Zi);var cm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Iw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lm(){}function um(){}lm.prototype.h=null;var Dw,Of={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gy(){Zi.call(this,"d")}function Cw(){Zi.call(this,"c")}function $y(){}function dm(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new om(this),this.O=wF,this.T=new io(n=aw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Tw}function Tw(){this.i=null,this.g="",this.h=!1}Dr(Gy,Zi),Dr(Cw,Zi),Dr($y,lm),$y.prototype.g=function(){return new XMLHttpRequest},$y.prototype.i=function(){return{}},Dw=new $y;var wF=45e3,Sw={},Aw={};function vT(n,t,e){n.K=1,n.v=Lf(Ts(t)),n.s=e,n.P=!0,Mw(n,null)}function Mw(n,t){n.F=Date.now(),kf(n),n.A=Ts(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),Fw(e.i,"t",i),n.C=0,e=n.l.H,n.h=new Tw,n.g=Zw(n.l,e?t:null,!n.s),0<n.N&&(n.L=new gr(ls(n.La,n,n.g),n.N)),dT(n.S,n.g,"readystatechange",n.ib),t=n.H?oT(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),Ka(),function fT(n,t,e,i,r,o){n.info(function(){if(n.g)if(o)for(var l="",h=o.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var I=y[0];y=y[1];var T=I.split("_");l=2<=T.length&&"type"==T[1]?l+(I+"=")+y+"&":l+(I+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Nw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function WN(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=Wy(n,e),r==Aw){4==t&&(n.o=4,Yi(14),i=!1),Rf(n.j,n.m,null,"[Incomplete Response]");break}if(r==Sw){n.o=4,Yi(15),Rf(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Rf(n.j,n.m,r,null),Vt(n,r)}Nw(n)&&r!=Aw&&r!=Sw&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Yi(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),iv(t),t.K=!0,Yi(11))):(Rf(n.j,n.m,e,"[Invalid Chunked Response]"),du(n),Pf(n))}function Wy(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Aw:(e=Number(t.substring(e,i)),isNaN(e)?Sw:(i+=1)+e>t.length?Aw:(t=t.substr(i,e),n.C=i+e,t))}function kf(n){n.V=Date.now()+n.O,Rw(n,n.O)}function Rw(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=am(ls(n.gb,n),t)}function zy(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Pf(n){0==n.l.G||n.I||Ww(n.l,n)}function du(n){zy(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Vy(n.T),hT(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Vt(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||Zy(e.h,n)))if(!n.J&&Zy(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;rv(e),mm(e)}nv(e),Yi(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=am(ls(e.cb,e),6e3));if(1>=qy(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else na(e,11)}else if((n.J||e.g==n)&&rv(e),!rl(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.T=y[0],y=y[1],2==e.G)if("c"==y[0]){e.I=y[1],e.ka=y[2];const I=y[3];null!=I&&(e.ma=I,e.j.info("VER="+e.ma));const T=y[4];null!=T&&(e.Ca=T,e.j.info("SVER="+e.Ca));const N=y[5];null!=N&&"number"==typeof N&&0<N&&(e.J=i=1.5*N,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const H=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var o=i.h;o.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Lw(o,o.h),o.h=null))}if(i.D){const K=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(i.za=K,Kn(i.F,i.D,K))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var l=n;if((i=e).sa=qw(i,i.H?i.ka:null,i.V),l.J){TT(i.h,l);var h=l,p=i.J;p&&h.setTimeout(p),h.B&&(zy(h),kf(h)),i.g=l}else OT(i);0<e.i.length&&Zd(e)}else"stop"!=y[0]&&"close"!=y[0]||na(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?na(e,7):Gw(e):"noop"!=y[0]&&e.l&&e.l.wa(y),e.A=0)}Ka()}catch{}}function Wd(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(Jg(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function wT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Jg(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function bT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Jg(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],e&&e[o],n)}(bt=dm.prototype).setTimeout=function(n){this.O=n},bt.ib=function(n){n=n.target;const t=this.L;t&&3==Xa(n)?t.l():this.La(n)},bt.La=function(n){try{if(n==this.g)e:{const I=Xa(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||aw||this.g&&(this.h.h||this.g.fa()||ev(this.g)))){this.I||4!=I||7==t||Ka(),zy(this);var e=this.g.aa();this.Y=e;t:if(Nw(this)){var i=ev(this.g);n="";var r=i.length,o=4==Xa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){du(this),Pf(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==e,function pT(n,t,e,i,r,o,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.U,I,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rl(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Yi(12),du(this),Pf(this);break e}Rf(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vt(this,e)}this.P?(WN(this,I,l),aw&&this.i&&3==I&&(dT(this.S,this.T,"tick",this.hb),this.T.start())):(Rf(this.j,this.m,l,null),Vt(this,l)),4==I&&du(this),this.i&&!this.I&&(4==I?Ww(this.l,this):(this.i=!1,kf(this)))}else 400==e&&0<l.indexOf("Unknown SID")?(this.o=3,Yi(12)):(this.o=0,Yi(13)),du(this),Pf(this)}}}catch{}},bt.hb=function(){if(this.g){var n=Xa(this.g),t=this.g.fa();this.C<t.length&&(zy(this),WN(this,n,t),this.i&&4!=n&&kf(this))}},bt.cancel=function(){this.I=!0,du(this)},bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function gT(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Ka(),Yi(17)),du(this),this.o=2,Pf(this)):Rw(this,this.V-n)};var xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ja(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ja){this.h=void 0!==t?t:n.h,Ff(this,n.j),this.s=n.s,this.g=n.g,hu(this,n.m),this.l=n.l,t=n.i;var e=new hm;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),Ow(this,e),this.o=n.o}else n&&(e=String(n).match(xw))?(this.h=!!t,Ff(this,e[1]||"",!0),this.s=zd(e[2]||""),this.g=zd(e[3]||"",!0),hu(this,e[4]),this.l=zd(e[5]||"",!0),Ow(this,e[6]||"",!0),this.o=zd(e[7]||"")):(this.h=!!t,this.i=new hm(null,this.h))}function Ts(n){return new Ja(n)}function Ff(n,t,e){n.j=e?zd(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function hu(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Ow(n,t,e){t instanceof hm?(n.i=t,function KN(n,t){t&&!n.j&&(fu(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(CT(this,i),Fw(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=Bf(t,IT)),n.i=new hm(t,n.h))}function Kn(n,t,e){n.i.set(t,e)}function Lf(n){return Kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zd(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bf(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,kw),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ja.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Bf(t,ET,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Bf(t,ET,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(Bf(e,"/"==e.charAt(0)?ZN:qN,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Bf(e,YN)),n.join("")};var ET=/[#\/\?@]/g,qN=/[#\?:]/g,ZN=/[#\?]/g,IT=/[#\?@]/g,YN=/#/g;function hm(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function fu(n){n.g||(n.g=new Map,n.h=0,n.i&&function zN(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var o=n[e].substring(0,i);r=n[e].substring(i+1)}else o=n[e];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function CT(n,t){fu(n),t=Uf(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function Pw(n,t){return fu(n),t=Uf(n,t),n.g.has(t)}function Fw(n,t,e){CT(n,t),0<e.length&&(n.i=null,n.g.set(Uf(n,t),Xg(e)),n.h+=e.length)}function Uf(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function DT(n){this.l=n||QN,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=hm.prototype).add=function(n,t){fu(this),this.i=null,n=Uf(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},bt.forEach=function(n,t){fu(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},bt.oa=function(){fu(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let o=0;o<r.length;o++)e.push(t[i])}return e},bt.W=function(n){fu(this);let t=[];if("string"==typeof n)Pw(this,n)&&(t=t.concat(this.g.get(Uf(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},bt.set=function(n,t){return fu(this),this.i=null,Pw(this,n=Uf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},bt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const o=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=o;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var QN=10;function JN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function qy(n){return n.h?1:n.g?n.g.size:0}function Zy(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function Lw(n,t){n.g?n.g.add(t):n.h=t}function TT(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function ST(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return Xg(n.i)}function Yy(){}function XN(){this.g=new Yy}function eR(n,t,e){const i=e||"";try{Wd(n,function(r,o){let l=r;Bd(r)&&(l=Uy(r)),t.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Ky(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function fm(n){this.l=n.ac||null,this.j=n.jb||!1}function Qy(n,t){pr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Uw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}DT.prototype.cancel=function(){if(this.i=ST(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yy.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},Yy.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Dr(fm,lm),fm.prototype.g=function(){return new Qy(this.l,this.j)},fm.prototype.i=function(n){return function(){return n}}({}),Dr(Qy,pr);var Uw=0;function AT(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ss(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qd(n)}function qd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=Qy.prototype).open=function(n,t){if(this.readyState!=Uw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,qd(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Ut).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ss(this)),this.readyState=Uw},bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qd(this)),this.g&&(this.readyState=3,qd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;AT(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Ss(this):qd(this),3==this.readyState&&AT(this)}},bt.Va=function(n){this.g&&(this.response=this.responseText=n,Ss(this))},bt.Ua=function(n){this.g&&(this.response=n,Ss(this))},bt.ga=function(){this.g&&Ss(this)},bt.setRequestHeader=function(n,t){this.v.append(n,t)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Qy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tR=Ut.JSON.parse;function pi(n){pr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MT,this.K=this.L=!1}Dr(pi,pr);var MT="",NT=/^https?$/i,RT=["POST","PUT"];function Xy(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,nR(n),pm(n)}function nR(n){n.D||(n.D=!0,Tr(n,"complete"),Tr(n,"error"))}function Vw(n){if(n.h&&typeof Qg<"u"&&(!n.C[1]||4!=Xa(n)||2!=n.aa()))if(n.v&&4==Xa(n))ww(n.Ha,0,n);else if(Tr(n,"readystatechange"),4==Xa(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.H).match(xw)[1]||null;if(!r&&Ut.self&&Ut.self.location){var o=Ut.self.location.protocol;r=o.substr(0,o.length-1)}i=!NT.test(r?r.toLowerCase():"")}e=i}if(e)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var l=2<Xa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",nR(n)}}finally{pm(n)}}}function pm(n,t){if(n.g){jw(n);const e=n.g,i=n.C[0]?Iy:null;n.g=null,n.C=null,t||Tr(n,"ready");try{e.onreadystatechange=i}catch{}}}function jw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Xa(n){return n.g?n.g.readyState:0}function ev(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case MT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ec(n){let t="";return Af(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function Hw(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=ec(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Kn(n,t,e))}function gm(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function tv(n){this.Ca=0,this.i=[],this.j=new Nf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=gm("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=gm("baseRetryDelayMs",5e3,n),this.bb=gm("retryDelaySeedMs",1e4,n),this.$a=gm("forwardChannelMaxRetries",2,n),this.ta=gm("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new DT(n&&n.concurrentRequestLimit),this.Fa=new XN,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Gw(n){if(xT(n),3==n.G){var t=n.U++,e=Ts(n.F);Kn(e,"SID",n.I),Kn(e,"RID",t),Kn(e,"TYPE","terminate"),pu(n,e),(t=new dm(n,n.j,t,void 0)).K=2,t.v=Lf(Ts(e)),e=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(e=Ut.navigator.sendBeacon(t.v.toString(),"")),!e&&Ut.Image&&((new Image).src=t.v,e=!0),e||(t.g=Zw(t.l,null),t.g.da(t.v)),t.F=Date.now(),kf(t)}PT(n)}function mm(n){n.g&&(iv(n),n.g.cancel(),n.g=null)}function xT(n){mm(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),rv(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Zd(n){JN(n.h)||n.m||(n.m=!0,ol(n.Ja,n),n.C=0)}function $w(n,t){var e;e=t?t.m:n.U++;const i=Ts(n.F);Kn(i,"SID",n.I),Kn(i,"RID",e),Kn(i,"AID",n.T),pu(n,i),n.o&&n.s&&Hw(i,n.o,n.s),e=new dm(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=iR(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Lw(n.h,e),vT(e,i,t)}function pu(n,t){n.ia&&Af(n.ia,function(e,i){Kn(t,i,e)}),n.l&&Wd({},function(e,i){Kn(t,i,e)})}function iR(n,t,e){e=Math.min(n.i.length,e);var i=n.l?ls(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const l=["count="+e];-1==o?0<e?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let p=0;p<e;p++){let y=r[p].h;const I=r[p].g;if(y-=o,0>y)o=Math.max(0,r[p].h-100),h=!1;else try{eR(I,l,"req"+y+"_")}catch{i&&i(I)}}if(h){i=l.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function OT(n){n.g||n.u||(n.Z=1,ol(n.Ia,n),n.A=0)}function nv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=am(ls(n.Ia,n),zw(n,n.A)),n.A++,0))}function iv(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function kT(n){n.g=new dm(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=Ts(n.sa);Kn(t,"RID","rpc"),Kn(t,"SID",n.I),Kn(t,"CI",n.L?"0":"1"),Kn(t,"AID",n.T),Kn(t,"TYPE","xmlhttp"),pu(n,t),n.o&&n.s&&Hw(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=Lf(Ts(t)),e.s=null,e.P=!0,Mw(e,n)}function rv(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function Ww(n,t){var e=null;if(n.g==t){rv(n),iv(n),n.g=null;var i=2}else{if(!Zy(n.h,t))return;e=t.D,TT(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Tr(i=Hy(),new yT(i,e)),Zd(n)}else OT(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function _m(n,t){return!(qy(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=am(ls(n.Ja,n,t),zw(n,n.C)),n.C++,0)))}(n,t)||2==i&&nv(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:na(n,5);break;case 4:na(n,10);break;case 3:na(n,6);break;default:na(n,2)}}function zw(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function na(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=ls(n.kb,n);e||(e=new Ja("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Ff(e,"https"),Lf(e)),function Bw(n,t){const e=new Nf;if(Ut.Image){const i=new Image;i.onload=Ud(Ky,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Ud(Ky,e,i,"TestLoadImage: error",!1,t),i.onabort=Ud(Ky,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ud(Ky,e,i,"TestLoadImage: timeout",!1,t),Ut.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Yi(2);n.G=0,n.l&&n.l.va(t),PT(n),xT(n)}function PT(n){if(n.G=0,n.la=[],n.l){const t=ST(n.h);(0!=t.length||0!=n.i.length)&&(Cy(n.la,t),Cy(n.la,n.i),n.h.i.length=0,Xg(n.i),n.i.length=0),n.l.ua()}}function qw(n,t,e){var i=e instanceof Ja?Ts(e):new Ja(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),hu(i,i.m);else{var r=Ut.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Ja(null,void 0);i&&Ff(o,i),t&&(o.g=t),r&&hu(o,r),e&&(o.l=e),i=o}return t=n.za,(e=n.D)&&t&&Kn(i,e,t),Kn(i,"VER",n.ma),pu(n,i),i}function Zw(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new pi(e&&n.Da&&!n.ra?new fm({jb:!0}):n.ra)).Ka(n.H),t}function FT(){}function sv(){if(Hd&&!(10<=Number(Ry)))throw Error("Environmental error: no available transport.")}function Sr(n,t){pr.call(this),this.g=new tv(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!rl(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!rl(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Vf(this)}function LT(n){Gy.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function BT(){Cw.call(this),this.status=1}function Vf(n){this.g=n}(bt=pi.prototype).Ka=function(n){this.L=n},bt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dw.g(),this.C=function xf(n){return n.h||(n.h=n.i())}(this.u?this.u:Dw),this.g.onreadystatechange=ls(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void Xy(this,o)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())e.set(o,i.get(o))}i=Array.from(e.keys()).find(o=>"content-type"==o.toLowerCase()),r=Ut.FormData&&n instanceof Ut.FormData,!(0<=Vd(RT,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of e)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jw(this),0<this.B&&((this.K=function Jy(n){return Hd&&function VN(){return function nm(n){var t=lw;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=Ty(String(Ay)).split("."),e=Ty("9").split("."),i=Math.max(t.length,e.length);for(let l=0;0==n&&l<i;l++){var r=t[l]||"",o=e[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=em(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||em(0==r[2].length,0==o[2].length)||em(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ls(this.qa,this)):this.A=ww(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){Xy(this,o)}},bt.qa=function(){typeof Qg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),pm(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pm(this,!0)),pi.X.M.call(this)},bt.Ha=function(){this.s||(this.F||this.v||this.l?Vw(this):this.fb())},bt.fb=function(){Vw(this)},bt.aa=function(){try{return 2<Xa(this)?this.g.status:-1}catch{return-1}},bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),tR(t)}},bt.Ea=function(){return this.m},bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=tv.prototype).ma=8,bt.G=1,bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new dm(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=oT(o),Mf(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=iR(this,r,t),Kn(e=Ts(this.F),"RID",n),Kn(e,"CVER",22),this.D&&Kn(e,"X-HTTP-Session-Id",this.D),pu(this,e),o&&(this.N?t="headers="+encodeURIComponent(String(ec(o)))+"&"+t:this.o&&Hw(e,this.o,o)),Lw(this.h,r),this.Ya&&Kn(e,"TYPE","init"),this.O?(Kn(e,"$req",t),Kn(e,"SID","null"),r.Z=!0,vT(r,e,null)):vT(r,e,t),this.G=2}}else 3==this.G&&(n?$w(this,n):0==this.i.length||JN(this.h)||$w(this))},bt.Ia=function(){if(this.u=null,kT(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=am(ls(this.eb,this),n)}},bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Yi(10),mm(this),kT(this))},bt.cb=function(){null!=this.v&&(this.v=null,mm(this),nv(this),Yi(19))},bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Yi(2)):(this.j.info("Failed to ping google.com"),Yi(1))},(bt=FT.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Ra=function(){},sv.prototype.g=function(n,t){return new Sr(n,t)},Dr(Sr,pr),Sr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Yi(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=qw(n,null,n.V),Zd(n)},Sr.prototype.close=function(){Gw(this.g)},Sr.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=Uy(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&Zd(t)},Sr.prototype.M=function(){this.g.l=null,delete this.j,Gw(this.g),delete this.g,Sr.X.M.call(this)},Dr(LT,Gy),Dr(BT,Cw),Dr(Vf,FT),Vf.prototype.xa=function(){Tr(this.g,"a")},Vf.prototype.wa=function(n){Tr(this.g,new LT(n))},Vf.prototype.va=function(n){Tr(this.g,new BT)},Vf.prototype.ua=function(){Tr(this.g,"b")},sv.prototype.createWebChannel=sv.prototype.g,Sr.prototype.send=Sr.prototype.u,Sr.prototype.open=Sr.prototype.m,Sr.prototype.close=Sr.prototype.close,cm.NO_ERROR=0,cm.TIMEOUT=8,cm.HTTP_ERROR=6,Iw.COMPLETE="complete",um.EventType=Of,Of.OPEN="a",Of.CLOSE="b",Of.ERROR="c",Of.MESSAGE="d",pr.prototype.listen=pr.prototype.N,pi.prototype.listenOnce=pi.prototype.O,pi.prototype.getLastError=pi.prototype.Oa,pi.prototype.getLastErrorCode=pi.prototype.Ea,pi.prototype.getStatus=pi.prototype.aa,pi.prototype.getResponseJson=pi.prototype.Sa,pi.prototype.getResponseText=pi.prototype.fa,pi.prototype.send=pi.prototype.da,pi.prototype.setWithCredentials=pi.prototype.Ka;var rR=il.createWebChannelTransport=function(){return new sv},sR=il.getStatEventTarget=function(){return Hy()},Yw=il.ErrorCode=cm,oR=il.EventType=Iw,aR=il.Event=$d,Kw=il.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Qw=il.FetchXmlHttpFactory=fm,ov=il.WebChannel=um,av=il.XhrIo=pi;const UT="@firebase/firestore";class mr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let jf="9.16.0";const gu=new No.Yd("@firebase/firestore");function Jw(){return gu.logLevel}function Ge(n,...t){if(gu.logLevel<=No.in.DEBUG){const e=t.map(Xw);gu.debug(`Firestore (${jf}): ${n}`,...e)}}function Ci(n,...t){if(gu.logLevel<=No.in.ERROR){const e=t.map(Xw);gu.error(`Firestore (${jf}): ${n}`,...e)}}function mu(n,...t){if(gu.logLevel<=No.in.WARN){const e=t.map(Xw);gu.warn(`Firestore (${jf}): ${n}`,...e)}}function Xw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const t=`FIRESTORE (${jf}) INTERNAL ASSERTION FAILED: `+n;throw Ci(t),new Error(t)}function _t(n,t){n||dt()}function tt(n,t){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class or{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class cv{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class lR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(mr.UNAUTHENTICATED))}shutdown(){}}class tc{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ym{constructor(t){this.t=t,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const o=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let l=new or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new or,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=l;t.enqueueRetryable((0,pe.Z)(function*(){yield y.promise,yield o(i.currentUser)}))},p=y=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new or)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t("string"==typeof i.accessToken),new cv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _t(null===t||"string"==typeof t),new mr(t)}}class $r{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_t(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Yd{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new $r(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ro{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=o=>{null!=o.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,Ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(_t("string"==typeof e.token),this.A=e.token,new vm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hf(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class Kd{static R(){const e=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=Hf(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%62))}return i}}function kt(n,t){return n<t?-1:n>t?1:0}function ia(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function Qd(n){return n+"\0"}class Fn{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Fn.fromMillis(Date.now())}static fromDate(t){return Fn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Fn(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yt(t)}static min(){return new yt(new Fn(0,0))}static max(){return new yt(new Fn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nc{constructor(t,e,i){void 0===e?e=0:e>t.length&&dt(),void 0===i?i=t.length-e:i>t.length-e&&dt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===nc.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof nc?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=t.get(r),l=e.get(r);if(o<l)return-1;if(o>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Jt extends nc{construct(t,e,i){return new Jt(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Jt(e)}static emptyPath(){return new Jt([])}}const HT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends nc{construct(t,e,i){return new gi(t,e,i)}static isValidIdentifier(t){return HT.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Fe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Fe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===h?(l=!l,r++):"."!==h||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new Fe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gi(e)}static emptyPath(){return new gi([])}}class Xe{constructor(t){this.path=t}static fromPath(t){return new Xe(Jt.fromString(t))}static fromName(t){return new Xe(Jt.fromString(t).popFirst(5))}static empty(){return new Xe(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Jt.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Jt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Xe(new Jt(t.slice()))}}class bm{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function lv(n){return n.fields.find(t=>2===t.kind)}function _u(n){return n.fields.filter(t=>2!==t.kind)}bm.UNKNOWN_ID=-1;class wm{constructor(t,e){this.fieldPath=t,this.kind=e}}class Jd{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Jd(0,xo.min())}}function WT(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(1e9===i?new Fn(e+1,0):new Fn(e,i));return new xo(r,Xe.empty(),t)}function uR(n){return new xo(n.readTime,n.key,-1)}class xo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new xo(yt.min(),Xe.empty(),-1)}static max(){return new xo(yt.max(),Xe.empty(),-1)}}function eE(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Xe.comparator(n.documentKey,t.documentKey),0!==e?e:kt(n.largestBatchId,t.largestBatchId))}const zT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function yu(n){return qT.apply(this,arguments)}function qT(){return qT=(0,pe.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==zT)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),qT.apply(this,arguments)}class de{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new de((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof de?e:de.resolve(e)}catch(e){return de.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):de.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):de.reject(e)}static resolve(t){return new de((e,i)=>{e(t)})}static reject(t){return new de((e,i)=>{i(t)})}static waitFor(t){return new de((e,i)=>{let r=0,o=0,l=!1;t.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&e()},p=>i(p))}),l=!0,o===r&&e()})}static or(t){let e=de.resolve(!1);for(const i of t)e=e.next(r=>r?de.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new de((i,r)=>{const o=t.length,l=new Array(o);let h=0;for(let p=0;p<o;p++){const y=p;e(t[y]).next(I=>{l[y]=I,++h,h===o&&i(l)},I=>r(I))}})}static doWhile(t,e){return new de((i,r)=>{const o=()=>{!0===t()?e().next(()=>{o()},r):i()};o()})}}class uv{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new al(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=hv(i.target.error);this.P.reject(new al(t,r))}}static open(t,e,i,r){try{return new uv(e,t.transaction(r,i))}catch(o){throw new al(e,o)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(Ge("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new dv(e)}}class ra{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===ra.D((0,L.z$)())&&Ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ge("SimpleDb","Removing database:",t),vu(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(ra.N())return!0;const t=(0,L.z$)(),e=ra.D(t),i=0<e&&e<10,r=ra.k(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,pe.Z)(function*(){return e.db||(Ge("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=l=>{i(l.target.result)},o.onblocked=()=>{r(new al(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;r("VersionError"===h.name?new Fe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new al(t,h))},o.onupgradeneeded=l=>{Ge("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.S.$(l.target.result,o.transaction,l.oldVersion,e.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var o=this;return(0,pe.Z)(function*(){const l="readonly"===e;let h=0;for(;;){++h;try{o.db=yield o.F(t);const p=uv.open(o.db,t,l?"readonly":"readwrite",i),y=r(p).next(I=>(p.V(),I)).catch(I=>(p.abort(I),de.reject(I))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,I="FirebaseError"!==y.name&&h<3;if(Ge("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),o.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tE{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return vu(this.q.delete())}}class al extends Fe{constructor(t,e){super(fe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ic(n){return"IndexedDbTransactionError"===n.name}class dv{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ge("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),vu(i)}add(t){return Ge("SimpleDb","ADD",this.store.name,t,t),vu(this.store.add(t))}get(t){return vu(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ge("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ge("SimpleDb","DELETE",this.store.name,t),vu(this.store.delete(t))}count(){return Ge("SimpleDb","COUNT",this.store.name),vu(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.H(r,(l,h)=>{o.push(h)}).next(()=>o)}{const r=this.store.getAll(i.range);return new de((o,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new de((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}Y(t,e){Ge("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(o,l,h)=>h.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new de((i,r)=>{e.onerror=o=>{const l=hv(o.target.error);r(l)},e.onsuccess=o=>{const l=o.target.result;l?t(l.primaryKey,l.value).next(h=>{h?l.continue():i()}):i()}})}H(t,e){const i=[];return new de((r,o)=>{t.onerror=l=>{o(l.target.error)},t.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const p=new tE(h),y=e(h.primaryKey,h.value,p);if(y instanceof de){const I=y.catch(T=>(p.done(),de.reject(T)));i.push(I)}p.isDone?r():null===p.G?h.continue():h.continue(p.G)}}).next(()=>de.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function vu(n){return new de((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=hv(i.target.error);e(r)}})}let Gf=!1;function hv(n){const t=ra.D((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gf||(Gf=!0,setTimeout(()=>{throw i},0)),i}}return n}class hR{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;Ge("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,pe.Z)(function*(){e.task=null;try{Ge("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){ic(i)?Ge("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield yu(i)}yield e.nt(6e4)}))}}class Em{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,pe.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,o=!0;return de.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return Ge("IndexBackiller",`Processing collection: ${l}`),this.rt(t,l,r).next(h=>{r-=h,i.add(l)});o=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.ot(r,o)).next(h=>(Ge("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h))).next(()=>l.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,o)=>{const l=uR(o);eE(l,i)>0&&(i=l)}),new xo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let so=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>i.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}return n.at=-1,n})();class fR{constructor(t,e,i,r,o,l,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class bu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new bu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof bu&&t.projectId===this.projectId&&t.database===this.database}}function ZT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function cl(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Im(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function wu(n){return null==n}function fv(n){return 0===n&&1/n==-1/0}function YT(n){return"number"==typeof n&&Number.isInteger(n)&&!fv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Bi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Bi(e)}static fromUint8Array(t){const e=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Bi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(n){if(_t(!!n),"string"==typeof n){let t=0;const e=gR.exec(n);if(_t(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Di(n.seconds),nanos:Di(n.nanos)}}function Di(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xd(n){return"string"==typeof n?Bi.fromBase64String(n):Bi.fromUint8Array(n)}function pv(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function nE(n){const t=n.mapValue.fields.__previous_value__;return pv(t)?nE(t):t}function $f(n){const t=ll(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(t.seconds,t.nanos)}const Eu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gv={nullValue:"NULL_VALUE"};function eh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pv(n)?4:iE(n)?9007199254740991:10:dt()}function sa(n,t){if(n===t)return!0;const e=eh(n);if(e!==eh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return $f(n).isEqual($f(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=ll(i.timestampValue),l=ll(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Xd(n.bytesValue).isEqual(Xd(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Di(i.geoPointValue.latitude)===Di(r.geoPointValue.latitude)&&Di(i.geoPointValue.longitude)===Di(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Di(i.integerValue)===Di(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Di(i.doubleValue),l=Di(r.doubleValue);return o===l?fv(o)===fv(l):isNaN(o)&&isNaN(l)}return!1}(n,t);case 9:return ia(n.arrayValue.values||[],t.arrayValue.values||[],sa);case 10:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(ZT(o)!==ZT(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!sa(o[h],l[h])))return!1;return!0}(n,t);default:return dt()}var r}function th(n,t){return void 0!==(n.values||[]).find(e=>sa(e,t))}function rc(n,t){if(n===t)return 0;const e=eh(n),i=eh(t);if(e!==i)return kt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,t.booleanValue);case 2:return function(r,o){const l=Di(r.integerValue||r.doubleValue),h=Di(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,t);case 3:return KT(n.timestampValue,t.timestampValue);case 4:return KT($f(n),$f(t));case 5:return kt(n.stringValue,t.stringValue);case 6:return function(r,o){const l=Xd(r),h=Xd(o);return l.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const l=r.split("/"),h=o.split("/");for(let p=0;p<l.length&&p<h.length;p++){const y=kt(l[p],h[p]);if(0!==y)return y}return kt(l.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const l=kt(Di(r.latitude),Di(o.latitude));return 0!==l?l:kt(Di(r.longitude),Di(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,o){const l=r.values||[],h=o.values||[];for(let p=0;p<l.length&&p<h.length;++p){const y=rc(l[p],h[p]);if(y)return y}return kt(l.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===Eu.mapValue&&o===Eu.mapValue)return 0;if(r===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;const l=r.fields||{},h=Object.keys(l),p=o.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const T=kt(h[I],y[I]);if(0!==T)return T;const N=rc(l[h[I]],p[y[I]]);if(0!==N)return N}return kt(h.length,y.length)}(n.mapValue,t.mapValue);default:throw dt()}}function KT(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return kt(n,t);const e=ll(n),i=ll(t),r=kt(e.seconds,i.seconds);return 0!==r?r:kt(e.nanos,i.nanos)}function ul(n){return Wf(n)}function Wf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=ll(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xd(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const l of i.values||[])o?o=!1:r+=",",r+=Wf(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",l=!0;for(const h of r)l?l=!1:o+=",",o+=`${h}:${Wf(i.fields[h])}`;return o+"}"}(n.mapValue):dt();var t}function dl(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function mv(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function QT(n){return!!n&&"nullValue"in n}function JT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function nh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return cl(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=nh(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=nh(n.arrayValue.values[e]);return t}return Object.assign({},n)}function iE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XT(n){return"nullValue"in n?gv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dl(bu.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function mR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dl(bu.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Eu:dt()}function eS(n,t){const e=rc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function rE(n,t){const e=rc(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class sc{constructor(t,e){this.position=t,this.inclusive=e}}function sE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],l=n.position[r];if(i=o.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),e.key):rc(l,e.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function _v(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!sa(n.position[e],t.position[e]))return!1;return!0}class oE{}class fn extends oE{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new nS(t,e,i):"array-contains"===e?new sS(t,i):"in"===e?new lE(t,i):"not-in"===e?new oS(t,i):"array-contains-any"===e?new aS(t,i):new fn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new iS(t,i):new rS(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(rc(e,this.value)):null!==e&&eh(this.value)===eh(e)&&this.matchesComparison(rc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xn extends oE{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new xn(t,e)}matches(t){return ih(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(e=>e.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function ih(n){return"and"===n.op}function yv(n){return"or"===n.op}function vv(n){return tS(n)&&ih(n)}function tS(n){for(const t of n.filters)if(t instanceof xn)return!1;return!0}function bv(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+ul(n.value);if(vv(n))return n.filters.map(t=>bv(t)).join(",");{const t=n.filters.map(e=>bv(e)).join(",");return`${n.op}(${t})`}}function aE(n,t){return n instanceof fn?(e=n,(i=t)instanceof fn&&e.op===i.op&&e.field.isEqual(i.field)&&sa(e.value,i.value)):n instanceof xn?function(e,i){return i instanceof xn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,o,l)=>r&&aE(o,i.filters[l]),!0)}(n,t):void dt();var e,i}function wv(n,t){const e=n.filters.concat(t);return xn.create(e,n.op)}function Dm(n){return n instanceof fn?`${(t=n).field.canonicalString()} ${t.op} ${ul(t.value)}`:n instanceof xn?function(t){return t.op.toString()+" {"+t.getFilters().map(Dm).join(" ,")+"}"}(n):"Filter";var t}class nS extends fn{constructor(t,e,i){super(t,e,i),this.key=Xe.fromName(i.referenceValue)}matches(t){const e=Xe.comparator(t.key,this.key);return this.matchesComparison(e)}}class iS extends fn{constructor(t,e){super(t,"in",e),this.keys=cE(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class rS extends fn{constructor(t,e){super(t,"not-in",e),this.keys=cE(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function cE(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Xe.fromName(i.referenceValue))}class sS extends fn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Cm(e)&&th(e.arrayValue,this.value)}}class lE extends fn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&th(this.value.arrayValue,e)}}class oS extends fn{constructor(t,e){super(t,"not-in",e)}matches(t){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!th(this.value.arrayValue,e)}}class aS extends fn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Cm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>th(this.value.arrayValue,i))}}class hl{constructor(t,e="asc"){this.field=t,this.dir=e}}function Iu(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class Ti{constructor(t,e){this.comparator=t,this.root=e||ar.EMPTY}insert(t,e){return new Ti(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(t){return new Ti(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ar.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ev(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ev(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ev(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ev(this.root,t,this.comparator,!0)}}class Ev{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ar{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??ar.RED,this.left=r??ar.EMPTY,this.right=o??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new ar(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ar.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const t=this.left.check();if(t!==this.right.check())throw dt();return t+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1,ar.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ar(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(t){this.comparator=t,this.data=new Ti(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Iv(this.data.getIterator())}getIteratorFrom(t){return new Iv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof yn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new yn(this.comparator);return e.data=t,e}}class Iv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qf(n){return n.hasNext()?n.getNext():void 0}class Wr{constructor(t){this.fields=t,t.sort(gi.comparator)}static empty(){return new Wr([])}unionWith(t){let e=new yn(gi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Wr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ia(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class zr{constructor(t){this.value=t}static empty(){return new zr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!zf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=nh(e)}setAll(t){let e=gi.emptyPath(),i={},r=[];t.forEach((l,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=h.popLast()}l?i[h.lastSegment()]=nh(l):r.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());zf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];zf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){cl(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new zr(nh(this.value))}}function _R(n){const t=[];return cl(n.fields,(e,i)=>{const r=new gi([e]);if(zf(i)){const o=_R(i.mapValue).fields;if(0===o.length)t.push(r);else for(const l of o)t.push(r.child(l))}else t.push(r)}),new Wr(t)}class ii{constructor(t,e,i,r,o,l,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(t){return new ii(t,0,yt.min(),yt.min(),yt.min(),zr.empty(),0)}static newFoundDocument(t,e,i,r){return new ii(t,1,e,yt.min(),i,r,0)}static newNoDocument(t,e){return new ii(t,2,e,yt.min(),yt.min(),zr.empty(),0)}static newUnknownDocument(t,e){return new ii(t,3,e,yt.min(),yt.min(),zr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ii&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yR{constructor(t,e=null,i=[],r=[],o=null,l=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ft=null}}function Cv(n,t=null,e=[],i=[],r=null,o=null,l=null){return new yR(n,t,e,i,r,o,l)}function rh(n){const t=tt(n);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>bv(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),wu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>ul(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>ul(i)).join(",")),t.ft=e}return t.ft}function mi(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Iu(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!aE(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!_v(n.startAt,t.startAt)&&_v(n.endAt,t.endAt)}function Tm(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Dv(n,t){return n.filters.filter(e=>e instanceof fn&&e.field.isEqual(t))}function cS(n,t,e){let i=gv,r=!0;for(const o of Dv(n,t)){let l=gv,h=!0;switch(o.op){case"<":case"<=":l=XT(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=gv}eS({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const l=e.position[o];eS({value:i,inclusive:r},{value:l,inclusive:e.inclusive})<0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}function uE(n,t,e){let i=Eu,r=!0;for(const o of Dv(n,t)){let l=Eu,h=!0;switch(o.op){case">=":case">":l=mR(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=Eu}rE({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const l=e.position[o];rE({value:i,inclusive:r},{value:l,inclusive:e.inclusive})>0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}class fl{constructor(t,e=null,i=[],r=[],o=null,l="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=p,this.dt=null,this._t=null}}function dE(n,t,e,i,r,o,l,h){return new fl(n,t,e,i,r,o,l,h)}function sh(n){return new fl(n)}function oh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tv(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Sv(n){return null!==n.collectionGroup}function ah(n){const t=tt(n);if(null===t.dt){t.dt=[];const e=Tv(t),i=hE(t);if(null!==e&&null===i)e.isKeyField()||t.dt.push(new hl(e)),t.dt.push(new hl(gi.keyField(),"asc"));else{let r=!1;for(const o of t.explicitOrderBy)t.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new hl(gi.keyField(),o))}}}return t.dt}function qr(n){const t=tt(n);if(!t._t)if("F"===t.limitType)t._t=Cv(t.path,t.collectionGroup,ah(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of ah(t))e.push(new hl(o.field,"desc"===o.dir?"asc":"desc"));const i=t.endAt?new sc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sc(t.startAt.position,t.startAt.inclusive):null;t._t=Cv(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function lS(n,t){t.getFirstInequalityField(),Tv(n);const e=n.filters.concat([t]);return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Sm(n,t,e){return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ch(n,t){return mi(qr(n),qr(t))&&n.limitType===t.limitType}function oa(n){return`${rh(qr(n))}|lt:${n.limitType}`}function fE(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>Dm(i)).join(", ")}]`),wu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>ul(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>ul(i)).join(",")),`Target(${e})`}(qr(n))}; limitType=${n.limitType})`}function Av(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Xe.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of ah(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,o,l){const h=sE(r,o,l);return r.inclusive?h<=0:h<0}(e.startAt,ah(e),i)||e.endAt&&!function(r,o,l){const h=sE(r,o,l);return r.inclusive?h>=0:h>0}(e.endAt,ah(e),i)));var e,i}function aa(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Oo(n){return(t,e)=>{let i=!1;for(const r of ah(n)){const o=ca(r,t,e);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function ca(n,t,e){const i=n.field.isKeyField()?Xe.comparator(t.key,e.key):function(r,o,l){const h=o.data.field(r),p=l.data.field(r);return null!==h&&null!==p?rc(h,p):dt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return dt()}}function pE(n,t){if(n.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fv(t)?"-0":t}}function gE(n){return{integerValue:""+n}}function uS(n,t){return YT(t)?gE(t):pE(n,t)}class Mv{constructor(){this._=void 0}}function vR(n,t,e){return n instanceof oc?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(e,t):n instanceof lh?mE(n,t):n instanceof uh?dS(n,t):function(i,r){const o=Nv(i,r),l=_E(o)+_E(i.gt);return mv(o)&&mv(i.gt)?gE(l):pE(i.yt,l)}(n,t)}function bR(n,t,e){return n instanceof lh?mE(n,t):n instanceof uh?dS(n,t):e}function Nv(n,t){return n instanceof dh?mv(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class oc extends Mv{}class lh extends Mv{constructor(t){super(),this.elements=t}}function mE(n,t){const e=Am(t);for(const i of n.elements)e.some(r=>sa(r,i))||e.push(i);return{arrayValue:{values:e}}}class uh extends Mv{constructor(t){super(),this.elements=t}}function dS(n,t){let e=Am(t);for(const i of n.elements)e=e.filter(r=>!sa(r,i));return{arrayValue:{values:e}}}class dh extends Mv{constructor(t,e){super(),this.yt=t,this.gt=e}}function _E(n){return Di(n.integerValue||n.doubleValue)}function Am(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Mm{constructor(t,e){this.field=t,this.transform=e}}class fS{constructor(t,e){this.version=t,this.transformResults=e}}class ri{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ri}static exists(t){return new ri(void 0,t)}static updateTime(t){return new ri(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rv(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class xv{}function Ov(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Yf(n.key,ri.none()):new hh(n.key,n.data,ri.none());{const e=n.data,i=zr.empty();let r=new yn(gi.comparator);for(let o of t.fields)if(!r.has(o)){let l=e.field(o);null===l&&o.length>1&&(o=o.popLast(),l=e.field(o)),null===l?i.delete(o):i.set(o,l),r=r.add(o)}return new ac(n.key,i,new Wr(r.toArray()),ri.none())}}function kv(n,t,e){n instanceof hh?function(i,r,o){const l=i.value.clone(),h=bE(i.fieldTransforms,r,o.transformResults);l.setAll(h),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):n instanceof ac?function(i,r,o){if(!Rv(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=bE(i.fieldTransforms,r,o.transformResults),h=r.data;h.setAll(vE(i)),h.setAll(l),r.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Zf(n,t,e,i){return n instanceof hh?function(r,o,l,h){if(!Rv(r.precondition,o))return l;const p=r.value.clone(),y=wE(r.fieldTransforms,h,o);return p.setAll(y),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof ac?function(r,o,l,h){if(!Rv(r.precondition,o))return l;const p=wE(r.fieldTransforms,h,o),y=o.data;return y.setAll(vE(r)),y.setAll(p),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(I=>I.field))}(n,t,e,i):(l=e,Rv(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function pS(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=Nv(i.transform,r||null);null!=o&&(null===e&&(e=zr.empty()),e.set(i.field,o))}return e||null}function yE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&ia(e,i,(r,o)=>function hS(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof lh&&i instanceof lh||e instanceof uh&&i instanceof uh?ia(e.elements,i.elements,sa):e instanceof dh&&i instanceof dh?sa(e.gt,i.gt):e instanceof oc&&i instanceof oc);var e,i}(r,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class hh extends xv{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ac extends xv{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function vE(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function bE(n,t,e){const i=new Map;_t(n.length===e.length);for(let r=0;r<e.length;r++){const o=n[r],l=o.transform,h=t.data.field(o.field);i.set(o.field,bR(l,h,e[r]))}return i}function wE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,l=e.data.field(r.field);i.set(r.field,vR(o,l,t))}return i}class Yf extends xv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EE extends xv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wR{constructor(t){this.count=t}}var Ki,vn;function gS(n){switch(n){default:return dt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function mS(n){if(void 0===n)return Ci("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Ki.OK:return fe.OK;case Ki.CANCELLED:return fe.CANCELLED;case Ki.UNKNOWN:return fe.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return fe.INTERNAL;case Ki.UNAVAILABLE:return fe.UNAVAILABLE;case Ki.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Ki.NOT_FOUND:return fe.NOT_FOUND;case Ki.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Ki.ABORTED:return fe.ABORTED;case Ki.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Ki.DATA_LOSS:return fe.DATA_LOSS;default:return dt()}}(vn=Ki||(Ki={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class Cu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){cl(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return Im(this.inner)}size(){return this.innerSize}}const ER=new Ti(Xe.comparator);function As(){return ER}const _S=new Ti(Xe.comparator);function Nm(...n){let t=_S;for(const e of n)t=t.insert(e.key,e);return t}function yS(n){let t=_S;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function cc(){return Rm()}function vS(){return Rm()}function Rm(){return new Cu(n=>n.toString(),(n,t)=>n.isEqual(t))}const IR=new Ti(Xe.comparator),CR=new yn(Xe.comparator);function $t(...n){let t=CR;for(const e of n)t=t.add(e);return t}const bS=new yn(kt);function xm(){return bS}class Kf{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Qf.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Kf(yt.min(),r,xm(),As(),$t())}}class Qf{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Qf(i,e,$t(),$t(),$t())}}class Om{constructor(t,e,i,r){this.It=t,this.removedTargetIds=e,this.key=i,this.Tt=r}}class IE{constructor(t,e){this.targetId=t,this.Et=e}}class CE{constructor(t,e,i=Bi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class DE{constructor(){this.At=0,this.Rt=Du(),this.bt=Bi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=$t(),e=$t(),i=$t();return this.Rt.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:dt()}}),new Qf(this.bt,this.Pt,t,e,i)}xt(){this.vt=!1,this.Rt=Du()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class TE{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=As(),this.qt=SE(),this.Ut=new yn(kt)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,e=>{const i=this.Wt(e);switch(t.state){case 0:this.zt(e)&&i.Dt(t.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(t.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(i.Ft(),i.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),i.Dt(t.resumeToken));break;default:dt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((i,r)=>{this.zt(r)&&e(r)})}Jt(t){const e=t.targetId,i=t.Et.count,r=this.Yt(e);if(r){const o=r.target;if(Tm(o))if(0===i){const l=new Xe(o.path);this.Qt(e,l,ii.newNoDocument(l,yt.min()))}else _t(1===i);else this.Xt(e)!==i&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach((o,l)=>{const h=this.Yt(l);if(h){if(o.current&&Tm(h.target)){const p=new Xe(h.target.path);null!==this.Lt.get(p)||this.te(l,p)||this.Qt(l,p,ii.newNoDocument(p,t))}o.St&&(e.set(l,o.Ct()),o.xt())}});let i=$t();this.qt.forEach((o,l)=>{let h=!0;l.forEachWhile(p=>{const y=this.Yt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(o))}),this.Lt.forEach((o,l)=>l.setReadTime(t));const r=new Kf(t,e,this.Ut,this.Lt,i);return this.Lt=As(),this.qt=SE(),this.Ut=new yn(kt),r}Gt(t,e){if(!this.zt(t))return;const i=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,i),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,i){if(!this.zt(t))return;const r=this.Wt(t);this.te(t,e)?r.Nt(e,1):r.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),i&&(this.Lt=this.Lt.insert(e,i))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new DE,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new yn(kt),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||Ge("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new DE),this.$t.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function SE(){return new Ti(Xe.comparator)}function Du(){return new Ti(Xe.comparator)}const DR={asc:"ASCENDING",desc:"DESCENDING"},TR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jf={and:"AND",or:"OR"};class EF{constructor(t,e){this.databaseId=t,this.wt=e}}function Tu(n,t){return n.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SR(n,t){return n.wt?t.toBase64():t.toUint8Array()}function wS(n,t){return Tu(n,t.toTimestamp())}function Si(n){return _t(!!n),yt.fromTimestamp(function(t){const e=ll(t);return new Fn(e.seconds,e.nanos)}(n))}function ES(n,t){return(e=n,new Jt(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function fh(n){const t=Jt.fromString(n);return _t(xE(t)),t}function km(n,t){return ES(n.databaseId,t.path)}function lc(n,t){const e=fh(t);if(e.get(1)!==n.databaseId.projectId)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Xe(Fm(e))}function AE(n,t){return ES(n.databaseId,t)}function ph(n){const t=fh(n);return 4===t.length?Jt.emptyPath():Fm(t)}function Pm(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Fm(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lm(n,t,e){return{name:km(n,t),fields:e.value.mapValue.fields}}function us(n,t,e){const i=lc(n,t.name),r=Si(t.updateTime),o=t.createTime?Si(t.createTime):yt.min(),l=new zr({mapValue:{fields:t.fields}}),h=ii.newFoundDocument(i,r,o,l);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function Xf(n,t){let e;if(t instanceof hh)e={update:Lm(n,t.key,t.value)};else if(t instanceof Yf)e={delete:km(n,t.key)};else if(t instanceof ac)e={update:Lm(n,t.key,t.data),updateMask:TS(t.fieldMask)};else{if(!(t instanceof EE))return dt();e={verify:km(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const l=o.transform;if(l instanceof oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dh)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw dt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:wS(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:dt()),e;var r}function ME(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?ri.updateTime(Si(r.updateTime)):void 0!==r.exists?ri.exists(r.exists):ri.none():ri.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,l){let h=null;"setToServerValue"in l?(_t("REQUEST_TIME"===l.setToServerValue),h=new oc):"appendMissingElements"in l?h=new lh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new uh(l.removeAllFromArray.values||[]):"increment"in l?h=new dh(o,l.increment):dt();const p=gi.fromServerFormat(l.fieldPath);return new Mm(p,h)}(n,r)):[];var r;if(t.update){const r=lc(n,t.update.name),o=new zr({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new Wr((t.updateMask.fieldPaths||[]).map(y=>gi.fromServerFormat(y)));return new ac(r,o,l,e,i)}return new hh(r,o,e,i)}if(t.delete){const r=lc(n,t.delete);return new Yf(r,e)}if(t.verify){const r=lc(n,t.verify);return new EE(r,e)}return dt()}function NE(n,t){return{documents:[AE(n,t.path)]}}function Pv(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=AE(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=AE(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0!==p.length)return Um(xn.create(p,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(p){if(0!==p.length)return p.map(y=>{return{field:ep((I=y).field),direction:MR(I.dir)};var I})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=(y=t.limit,n.wt||wu(y)?y:{value:y});var y,h,p;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function RE(n){let t=ph(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){_t(1===i);const I=e.from[0];I.allDescendants?r=I.collectionId:t=t.child(I.collectionId)}let o=[];e.where&&(o=function(I){const T=DS(I);return T instanceof xn&&vv(T)?T.getFilters():[T]}(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(I=>{return new hl(tp((T=I).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;e.limit&&(h=function(I){let T;return T="object"==typeof I?I.value:I,wu(T)?null:T}(e.limit));let p=null;var I;e.startAt&&(p=new sc((I=e.startAt).values||[],!!I.before));let y=null;return e.endAt&&(y=function(I){return new sc(I.values||[],!I.before)}(e.endAt)),dE(t,r,l,o,h,"F",p,y)}function DS(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=tp(t.unaryFilter.field);return fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=tp(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tp(t.unaryFilter.field);return fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tp(t.unaryFilter.field);return fn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}(n):void 0!==n.fieldFilter?fn.create(tp((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return xn.create(t.compositeFilter.filters.map(e=>DS(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return dt()}}(t.compositeFilter.op))}(n):dt();var t}function MR(n){return DR[n]}function Bm(n){return TR[n]}function NR(n){return Jf[n]}function ep(n){return{fieldPath:n.canonicalString()}}function tp(n){return gi.fromServerFormat(n.fieldPath)}function Um(n){return n instanceof fn?function(t){if("=="===t.op){if(JT(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NAN"}};if(QT(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(JT(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NOT_NAN"}};if(QT(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ep(t.field),op:Bm(t.op),value:t.value}}}(n):n instanceof xn?function(t){const e=t.getFilters().map(i=>Um(i));return 1===e.length?e[0]:{compositeFilter:{op:NR(t.op),filters:e}}}(n):dt()}function TS(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function xE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=np(t)),t=RR(n.get(e),t);return np(t)}function RR(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function np(n){return n+"\x01\x01"}function Ms(n){const t=n.length;if(_t(t>=2),2===t)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const e=t-2,i=[];let r="";for(let o=0;o<t;){const l=n.indexOf("\x01",o);switch((l<0||l>e)&&dt(),n.charAt(l+1)){case"\x01":const h=n.substring(o,l);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(o,l),r+="\0";break;case"\x11":r+=n.substring(o,l+1);break;default:dt()}o=l+2}return new Jt(i)}const SS=["userId","batchId"];function Fv(n,t){return[n,Zr(t)]}function AS(n,t,e){return[n,Zr(t),e]}const MS={},NS=["prefixPath","collectionGroup","readTime","documentId"],RS=["prefixPath","collectionGroup","documentId"],xR=["collectionGroup","readTime","prefixPath","documentId"],xS=["canonicalId","targetId"],OR=["targetId","path"],kR=["path","targetId"],CF=["collectionId","parent"],DF=["indexId","uid"],TF=["uid","sequenceNumber"],SF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OS=["indexId","uid","orderedDocumentKey"],Lv=["userId","collectionPath","documentId"],PR=["userId","collectionPath","largestBatchId"],FR=["userId","collectionGroup","largestBatchId"],OE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vm=[...OE,"documentOverlays"],kS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PS=kS,LR=[...PS,"indexConfiguration","indexState","indexEntries"];class kE extends dR{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function Ar(n,t){const e=tt(n);return ra.M(e.se,t)}class PE{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&kv(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Zf(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Zf(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=vS();return this.mutations.forEach(r=>{const o=t.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=e.has(r.key)?null:h;const p=Ov(l,h);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),$t())}isEqual(t){return this.batchId===t.batchId&&ia(this.mutations,t.mutations,(e,i)=>yE(e,i))&&ia(this.baseMutations,t.baseMutations,(e,i)=>yE(e,i))}}class Bv{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){_t(t.mutations.length===i.length);let r=IR;const o=t.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Bv(t,e,i,r)}}class FE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Su{constructor(t,e,i,r,o=yt.min(),l=yt.min(),h=Bi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(t){return new Su(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Su(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Su(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class ip{constructor(t){this.ie=t}}function LE(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Uv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:km(r=n.ie,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:Tu(r,o.version.toTimestamp()),createTime:Tu(r,o.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Au(t.version)};else{if(!t.isUnknownDocument())return dt();i.unknownDocument={path:e.path.toArray(),version:Au(t.version)}}var r,o;return i}function Uv(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Au(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gh(n){const t=new Fn(n.seconds,n.nanoseconds);return yt.fromTimestamp(t)}function Mu(n,t){const e=(t.baseMutations||[]).map(o=>ME(n.ie,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const i=t.mutations.map(o=>ME(n.ie,o)),r=Fn.fromMillis(t.localWriteTimeMs);return new PE(t.batchId,r,e,i)}function jm(n){const t=gh(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?gh(n.lastLimboFreeSnapshotVersion):yt.min();let i;var r;return void 0!==n.query.documents?(_t(1===(r=n.query).documents.length),i=qr(sh(ph(r.documents[0])))):i=qr(RE(n.query)),new Su(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Bi.fromBase64String(n.resumeToken))}function Vv(n,t){const e=Au(t.snapshotVersion),i=Au(t.lastLimboFreeSnapshotVersion);let r;r=Tm(t.target)?NE(n.ie,t.target):Pv(n.ie,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:rh(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function BE(n){const t=RE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sm(t,t.limit,"L"):t}function jv(n,t){return new FE(t.largestBatchId,ME(n.ie,t.overlayMutation))}function UE(n,t){const e=t.path.lastSegment();return[n,Zr(t.path.popLast()),e]}function FS(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Au(i.readTime),documentKey:Zr(i.documentKey.path),largestBatchId:i.largestBatchId}}class UR{getBundleMetadata(t,e){return LS(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:gh(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return LS(t).put({bundleId:(i=e).id,createTime:Au(Si(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return Hv(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:BE(r.bundledQuery),readTime:gh(r.readTime)};var r})}saveNamedQuery(t,e){return Hv(t).put({name:(i=e).name,readTime:Au(Si(i.readTime)),bundledQuery:i.bundledQuery});var i}}function LS(n){return Ar(n,"bundles")}function Hv(n){return Ar(n,"namedQueries")}class Gv{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){return new Gv(t,e.uid||"")}getOverlay(t,e){return rp(t).get(UE(this.userId,e)).next(i=>i?jv(this.yt,i):null)}getOverlays(t,e){const i=cc();return de.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((o,l)=>{const h=new FE(e,l);r.push(this.oe(t,h))}),de.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(l=>r.add(Zr(l.getCollectionPath())));const o=[];return r.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(rp(t).Y("collectionPathOverlayIndex",h))}),de.waitFor(o)}getOverlaysForCollection(t,e,i){const r=cc(),o=Zr(e),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return rp(t).W("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const y=jv(this.yt,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const o=cc();let l;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return rp(t).Z({index:"collectionGroupOverlayIndex",range:h},(p,y,I)=>{const T=jv(this.yt,y);o.size()<r||T.largestBatchId===l?(o.set(T.getKey(),T),l=T.largestBatchId):I.done()}).next(()=>o)}oe(t,e){return rp(t).put(function(i,r,o){const[l,h,p]=UE(r,o.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Xf(i.ie,o.mutation)}}(this.yt,this.userId,e))}}function rp(n){return Ar(n,"documentOverlays")}class mh{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(Di(t.integerValue));else if("doubleValue"in t){const i=Di(t.doubleValue);isNaN(i)?this.he(e,13):(this.he(e,15),fv(i)?e.le(0):e.le(i))}else if("timestampValue"in t){const i=t.timestampValue;this.he(e,20),"string"==typeof i?e.fe(i):(e.fe(`${i.seconds||""}`),e.le(i.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(Xd(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.he(e,45),e.le(i.latitude||0),e.le(i.longitude||0)}else"mapValue"in t?iE(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):dt()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const i=t.fields||{};this.he(e,55);for(const r of Object.keys(i))this.de(r,e),this.ce(i[r],e)}ye(t,e){const i=t.values||[];this.he(e,50);for(const r of i)this.ce(r,e)}me(t,e){this.he(e,37),Xe.fromName(t).path.forEach(i=>{this.he(e,60),this.pe(i,e)})}he(t,e){t.le(e)}_e(t){t.le(2)}}function VR(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function BS(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const o=VR(255&e[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(t/8)}mh.Ie=new mh;class jR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ee(i.value),i=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.be(i.value),i=e.next();this.Pe()}ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const r=e.codePointAt(0);this.Ee(240|r>>>18),this.Ee(128|63&r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r)}}this.Ae()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const r=e.codePointAt(0);this.be(240|r>>>18),this.be(128|63&r>>>12),this.be(128|63&r>>>6),this.be(128|63&r)}}this.Pe()}Se(t){const e=this.De(t),i=BS(e);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}xe(t){const e=this.De(t),i=BS(e);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class HR{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class GR{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class Hm{constructor(){this.$e=new jR,this.Be=new HR(this.$e),this.Le=new GR(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class _h{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new _h(this.indexId,this.documentKey,this.arrayValue,i)}}function pl(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=VE(n.arrayValue,t.arrayValue),0!==e?e:(e=VE(n.directionalValue,t.directionalValue),0!==e?e:Xe.comparator(n.documentKey,t.documentKey)))}function VE(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class US{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const i=e;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(t){_t(t.collectionGroup===this.collectionId);const e=lv(t);if(void 0!==e&&!this.We(e))return!1;const i=_u(t);let r=0,o=0;for(;r<i.length&&this.We(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Qe){const l=i[r];if(!this.ze(this.Qe,l)||!this.He(this.Ke[o++],l))return!1;++r}for(;r<i.length;++r)if(o>=this.Ke.length||!this.He(this.Ke[o++],i[r]))return!1;return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function VS(n){var t,e;if(_t(n instanceof fn||n instanceof xn),n instanceof fn){if(n instanceof lE){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(o=>fn.create(n.field,"==",o)))||[];return xn.create(r,"or")}return n}const i=n.filters.map(r=>VS(r));return xn.create(i,n.op)}function jS(n){if(0===n.getFilters().length)return[];const t=GE(VS(n));return _t(HS(t)),jE(t)||HE(t)?[t]:t.getFilters()}function jE(n){return n instanceof fn}function HE(n){return n instanceof xn&&vv(n)}function HS(n){return jE(n)||HE(n)||function(t){if(t instanceof xn&&yv(t)){for(const e of t.getFilters())if(!jE(e)&&!HE(e))return!1;return!0}return!1}(n)}function GE(n){if(_t(n instanceof fn||n instanceof xn),n instanceof fn)return n;if(1===n.filters.length)return GE(n.filters[0]);const t=n.filters.map(i=>GE(i));let e=xn.create(t,n.op);return e=$m(e),HS(e)?e:(_t(e instanceof xn),_t(ih(e)),_t(e.filters.length>1),e.filters.reduce((i,r)=>Gm(i,r)))}function Gm(n,t){let e;return _t(n instanceof fn||n instanceof xn),_t(t instanceof fn||t instanceof xn),e=n instanceof fn?t instanceof fn?xn.create([n,t],"and"):$v(n,t):t instanceof fn?$v(t,n):function(i,r){if(_t(i.filters.length>0&&r.filters.length>0),ih(i)&&ih(r))return wv(i,r.getFilters());const o=yv(i)?i:r,l=yv(i)?r:i,h=o.filters.map(p=>Gm(p,l));return xn.create(h,"or")}(n,t),$m(e)}function $v(n,t){if(ih(t))return wv(t,n.getFilters());{const e=t.filters.map(i=>Gm(n,i));return xn.create(e,"or")}}function $m(n){if(_t(n instanceof fn||n instanceof xn),n instanceof fn)return n;const t=n.getFilters();if(1===t.length)return $m(t[0]);if(tS(n))return n;const e=t.map(r=>$m(r)),i=[];return e.forEach(r=>{r instanceof fn?i.push(r):r instanceof xn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:xn.create(i,n.op)}class $E{constructor(){this.Je=new WE}addToCollectionParentIndex(t,e){return this.Je.add(e),de.resolve()}getCollectionParents(t,e){return de.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return de.resolve()}deleteFieldIndex(t,e){return de.resolve()}getDocumentsMatchingTarget(t,e){return de.resolve(null)}getIndexType(t,e){return de.resolve(0)}getFieldIndexes(t,e){return de.resolve([])}getNextCollectionGroupToUpdate(t){return de.resolve(null)}getMinOffset(t,e){return de.resolve(xo.min())}getMinOffsetFromCollectionGroup(t,e){return de.resolve(xo.min())}updateCollectionGroup(t,e,i){return de.resolve()}updateIndexEntries(t,e){return de.resolve()}}class WE{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new yn(Jt.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new yn(Jt.comparator)).toArray()}}const Wv=new Uint8Array(0);class zE{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new WE,this.Xe=new Cu(i=>rh(i),(i,r)=>mi(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ye.add(e)});const o={collectionId:i,parent:Zr(r)};return GS(t).put(o)}return de.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[Qd(e),""],!1,!0);return GS(t).W(r).next(o=>{for(const l of o){if(l.collectionId!==e)break;i.push(Ms(l.parent))}return i})}addFieldIndex(t,e){const i=uc(t),r={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete r.indexId;const o=i.add(r);if(e.indexState){const l=op(t);return o.next(h=>{l.put(FS(h,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const i=uc(t),r=op(t),o=sp(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=sp(t);let r=!0;const o=new Map;return de.forEach(this.Ze(e),l=>this.tn(t,l).next(h=>{r&&(r=!!h),o.set(l,h)})).next(()=>{if(r){let l=$t();const h=[];return de.forEach(o,(p,y)=>{var I;Ge("IndexedDbIndexManager",`Using index ${I=p,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map($e=>`${$e.fieldPath}:${$e.kind}`).join(",")}`} to execute ${rh(e)}`);const T=function($e,Oe){const Ze=lv(Oe);if(void 0===Ze)return null;for(const et of Dv($e,Ze.fieldPath))switch(et.op){case"array-contains-any":return et.value.arrayValue.values||[];case"array-contains":return[et.value]}return null}(y,p),N=function($e,Oe){const Ze=new Map;for(const et of _u(Oe))for(const Lt of Dv($e,et.fieldPath))switch(Lt.op){case"==":case"in":Ze.set(et.fieldPath.canonicalString(),Lt.value);break;case"not-in":case"!=":return Ze.set(et.fieldPath.canonicalString(),Lt.value),Array.from(Ze.values())}return null}(y,p),P=function($e,Oe){const Ze=[];let et=!0;for(const Lt of _u(Oe)){const ln=0===Lt.kind?cS($e,Lt.fieldPath,$e.startAt):uE($e,Lt.fieldPath,$e.startAt);Ze.push(ln.value),et&&(et=ln.inclusive)}return new sc(Ze,et)}(y,p),H=function($e,Oe){const Ze=[];let et=!0;for(const Lt of _u(Oe)){const ln=0===Lt.kind?uE($e,Lt.fieldPath,$e.endAt):cS($e,Lt.fieldPath,$e.endAt);Ze.push(ln.value),et&&(et=ln.inclusive)}return new sc(Ze,et)}(y,p),K=this.en(p,y,P),X=this.en(p,y,H),xe=this.nn(p,y,N),Ue=this.sn(p.indexId,T,K,P.inclusive,X,H.inclusive,xe);return de.forEach(Ue,$e=>i.J($e,e.limit).next(Oe=>{Oe.forEach(Ze=>{const et=Xe.fromSegments(Ze.documentKey);l.has(et)||(l=l.add(et),h.push(et))})}))}).next(()=>h)}return de.resolve(null)})}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:jS(xn.create(t.filters,"and")).map(i=>Cv(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Xe.set(t,e),e)}sn(t,e,i,r,o,l,h){const p=(null!=e?e.length:1)*Math.max(i.length,o.length),y=p/(null!=e?e.length:1),I=[];for(let T=0;T<p;++T){const N=e?this.rn(e[T/y]):Wv,P=this.on(t,N,i[T%y],r),H=this.un(t,N,o[T%y],l),K=h.map(X=>this.on(t,N,X,!0));I.push(...this.createRange(P,H,K))}return I}on(t,e,i,r){const o=new _h(t,Xe.empty(),e,i);return r?o:o.Ue()}un(t,e,i,r){const o=new _h(t,Xe.empty(),e,i);return r?o.Ue():o}tn(t,e){const i=new US(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let l=null;for(const h of o)i.je(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(t,e){let i=2;const r=this.Ze(e);return de.forEach(r,o=>this.tn(t,o).next(l=>{l?0!==i&&l.fields.length<function(h){let p=new yn(gi.comparator),y=!1;for(const I of h.filters)for(const T of I.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:p=p.add(T.field));for(const I of h.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(y?1:0)}(o)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}cn(t,e){const i=new Hm;for(const r of _u(t)){const o=e.data.field(r.fieldPath);if(null==o)return null;const l=i.qe(r.kind);mh.Ie.ue(o,l)}return i.Fe()}rn(t){const e=new Hm;return mh.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const i=new Hm;return mh.Ie.ue(dl(this.databaseId,e),i.qe(function(r){const o=_u(r);return 0===o.length?0:o[o.length-1].kind}(t))),i.Fe()}nn(t,e,i){if(null===i)return[];let r=[];r.push(new Hm);let o=0;for(const l of _u(t)){const h=i[o++];for(const p of r)if(this.hn(e,l.fieldPath)&&Cm(h))r=this.ln(r,l,h);else{const y=p.qe(l.kind);mh.Ie.ue(h,y)}}return this.fn(r)}en(t,e,i){return this.nn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Fe();return e}ln(t,e,i){const r=[...t],o=[];for(const l of i.arrayValue.values||[])for(const h of r){const p=new Hm;p.seed(h.Fe()),mh.Ie.ue(l,p.qe(e.kind)),o.push(p)}return o}hn(t,e){return!!t.filters.find(i=>i instanceof fn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=uc(t),r=op(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(o=>{const l=[];return de.forEach(o,h=>r.get([h.indexId,this.uid]).next(p=>{l.push(function(y,I){const T=I?new Jd(I.sequenceNumber,new xo(gh(I.readTime),new Xe(Ms(I.documentKey)),I.largestBatchId)):Jd.empty(),N=y.fields.map(([P,H])=>new wm(gi.fromServerFormat(P),H));return new bm(y.indexId,y.collectionGroup,N,T)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:kt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=uc(t),o=op(t);return this.dn(t).next(l=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>de.forEach(h,p=>o.put(FS(p.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return de.forEach(e,(r,o)=>{const l=i.get(r.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),de.forEach(h,p=>this._n(t,r,p).next(y=>{const I=this.wn(o,p);return y.isEqual(I)?de.resolve():this.mn(t,o,p,y,I)}))))})}gn(t,e,i,r){return sp(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(i,e.key),documentKey:e.key.path.toArray()})}yn(t,e,i,r){return sp(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(i,e.key),e.key.path.toArray()])}_n(t,e,i){const r=sp(t);let o=new yn(pl);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,e)])},(l,h)=>{o=o.add(new _h(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>o)}wn(t,e){let i=new yn(pl);const r=this.cn(e,t);if(null==r)return i;const o=lv(e);if(null!=o){const l=t.data.field(o.fieldPath);if(Cm(l))for(const h of l.arrayValue.values||[])i=i.add(new _h(e.indexId,t.key,this.rn(h),r))}else i=i.add(new _h(e.indexId,t.key,Wv,r));return i}mn(t,e,i,r,o){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(h,p,y,I,T){const N=h.getIterator(),P=p.getIterator();let H=qf(N),K=qf(P);for(;H||K;){let X=!1,xe=!1;if(H&&K){const Ue=y(H,K);Ue<0?xe=!0:Ue>0&&(X=!0)}else null!=H?xe=!0:X=!0;X?(I(K),K=qf(P)):xe?(T(H),H=qf(N)):(H=qf(N),K=qf(P))}}(r,o,pl,h=>{l.push(this.gn(t,e,i,h))},h=>{l.push(this.yn(t,e,i,h))}),de.waitFor(l)}dn(t){let e=1;return op(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,h)=>pl(l,h)).filter((l,h,p)=>!h||0!==pl(l,p[h-1]));const r=[];r.push(t);for(const l of i){const h=pl(l,t),p=pl(l,e);if(0===h)r[0]=t.Ue();else if(h>0&&p<0)r.push(l),r.push(l.Ue());else if(p>0)break}r.push(e);const o=[];for(let l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];o.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Wv,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Wv,[]]))}return o}pn(t,e){return pl(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next($S)}getMinOffset(t,e){return de.mapArray(this.Ze(e),i=>this.tn(t,i).next(r=>r||dt())).next($S)}}function GS(n){return Ar(n,"collectionParents")}function sp(n){return Ar(n,"indexEntries")}function uc(n){return Ar(n,"indexConfiguration")}function op(n){return Ar(n,"indexState")}function $S(n){_t(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;eE(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new xo(t.readTime,t.documentKey,e)}const $R={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yr{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Yr(t,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zv(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],l=IDBKeyRange.only(e.batchId);let h=0;const p=i.Z({range:l},(I,T,N)=>(h++,N.delete()));o.push(p.next(()=>{_t(1===h)}));const y=[];for(const I of e.mutations){const T=AS(t,I.key.path,e.batchId);o.push(r.delete(T)),y.push(I.key)}return de.waitFor(o).next(()=>y)}function qv(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw dt();t=n.noDocument}return JSON.stringify(t).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(41943040,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class Wm{constructor(t,e,i,r){this.userId=t,this.yt=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static re(t,e,i,r){_t(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new Wm(o,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nu(t).Z({index:"userMutationsIndex",range:i},(r,o,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const o=yh(t),l=Nu(t);return l.add({}).next(h=>{_t("number"==typeof h);const p=new PE(h,e,i,r),y=function(N,P,H){const K=H.baseMutations.map(xe=>Xf(N.ie,xe)),X=H.mutations.map(xe=>Xf(N.ie,xe));return{userId:P,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:K,mutations:X}}(this.yt,this.userId,p),I=[];let T=new yn((N,P)=>kt(N.canonicalString(),P.canonicalString()));for(const N of r){const P=AS(this.userId,N.key.path,h);T=T.add(N.key.path.popLast()),I.push(l.put(y)),I.push(o.put(P,MS))}return T.forEach(N=>{I.push(this.indexManager.addToCollectionParentIndex(t,N))}),t.addOnCommittedListener(()=>{this.In[h]=p.keys()}),de.waitFor(I).next(()=>p)})}lookupMutationBatch(t,e){return Nu(t).get(e).next(i=>i?(_t(i.userId===this.userId),Mu(this.yt,i)):null)}Tn(t,e){return this.In[e]?de.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Nu(t).Z({index:"userMutationsIndex",range:r},(l,h,p)=>{h.userId===this.userId&&(_t(h.batchId>=i),o=Mu(this.yt,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Nu(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,o,l)=>{i=o.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nu(t).W("userMutationsIndex",e).next(i=>i.map(r=>Mu(this.yt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Fv(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return yh(t).Z({range:r},(l,h,p)=>{const[y,I,T]=l,N=Ms(I);if(y===this.userId&&e.path.isEqual(N))return Nu(t).get(T).next(P=>{if(!P)throw dt();_t(P.userId===this.userId),o.push(Mu(this.yt,P))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new yn(kt);const r=[];return e.forEach(o=>{const l=Fv(this.userId,o.path),h=IDBKeyRange.lowerBound(l),p=yh(t).Z({range:h},(y,I,T)=>{const[N,P,H]=y,K=Ms(P);N===this.userId&&o.path.isEqual(K)?i=i.add(H):T.done()});r.push(p)}),de.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,o=Fv(this.userId,i),l=IDBKeyRange.lowerBound(o);let h=new yn(kt);return yh(t).Z({range:l},(p,y,I)=>{const[T,N,P]=p,H=Ms(N);T===this.userId&&i.isPrefixOf(H)?H.length===r&&(h=h.add(P)):I.done()}).next(()=>this.En(t,h))}En(t,e){const i=[],r=[];return e.forEach(o=>{r.push(Nu(t).get(o).next(l=>{if(null===l)throw dt();_t(l.userId===this.userId),i.push(Mu(this.yt,l))}))}),de.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return zv(t.se,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),de.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return de.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return yh(t).Z({range:i},(o,l,h)=>{if(o[0]===this.userId){const p=Ms(o[1]);r.push(p)}else h.done()}).next(()=>{_t(0===r.length)})})}containsKey(t,e){return qE(t,this.userId,e)}Rn(t){return Zv(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qE(n,t,e){const i=Fv(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return yh(n).Z({range:o,X:!0},(h,p,y)=>{const[I,T,N]=h;I===t&&T===r&&(l=!0),y.done()}).next(()=>l)}function Nu(n){return Ar(n,"mutations")}function yh(n){return Ar(n,"documentMutations")}function Zv(n){return Ar(n,"mutationQueues")}class Ru{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Ru(0)}static vn(){return new Ru(-1)}}class WS{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new Ru(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>yt.fromTimestamp(new Fn(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>vh(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(_t(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const o=[];return vh(t).Z((l,h)=>{const p=jm(h);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,o.push(this.removeTargetData(t,p)))}).next(()=>de.waitFor(o)).next(()=>r)}forEachTarget(t,e){return vh(t).Z((i,r)=>{const o=jm(r);e(o)})}Vn(t){return ZE(t).get("targetGlobalKey").next(e=>(_t(null!==e),e))}Sn(t,e){return ZE(t).put("targetGlobalKey",e)}Dn(t,e){return vh(t).put(Vv(this.yt,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=rh(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return vh(t).Z({range:r,index:"queryTargetsIndex"},(l,h,p)=>{const y=jm(h);mi(e,y.target)&&(o=y,p.done())}).next(()=>o)}addMatchingKeys(t,e,i){const r=[],o=xu(t);return e.forEach(l=>{const h=Zr(l.path);r.push(o.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,l))}),de.waitFor(r)}removeMatchingKeys(t,e,i){const r=xu(t);return de.forEach(e,o=>{const l=Zr(o.path);return de.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){const i=xu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=xu(t);let o=$t();return r.Z({range:i,X:!0},(l,h,p)=>{const y=Ms(l[1]),I=new Xe(y);o=o.add(I)}).next(()=>o)}containsKey(t,e){const i=Zr(e.path),r=IDBKeyRange.bound([i],[Qd(i)],!1,!0);let o=0;return xu(t).Z({index:"documentTargetsIndex",X:!0,range:r},([l,h],p,y)=>{0!==l&&(o++,y.done())}).next(()=>o>0)}ne(t,e){return vh(t).get(e).next(i=>i?jm(i):null)}}function vh(n){return Ar(n,"targets")}function ZE(n){return Ar(n,"targetGlobal")}function xu(n){return Ar(n,"targetDocuments")}function zS([n,t],[e,i]){const r=kt(n,e);return 0===r?kt(t,i):r}class WR{constructor(t){this.xn=t,this.buffer=new yn(zS),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();zS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class zR{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;Ge("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,pe.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){ic(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield yu(i)}yield e.Fn(3e5)}))}}class qS{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return de.resolve(so.at);const i=new WR(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve($R)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$R):this.qn(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let i,r,o,l,h,p,y;const I=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,l=Date.now(),this.nthSequenceNumber(t,r))).next(T=>(i=T,h=Date.now(),this.removeTargets(t,i,e))).next(T=>(o=T,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(T=>(y=Date.now(),Jw()<=No.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-I}ms\n\tDetermined least recently used ${r} in `+(h-l)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-I}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:T})))}}class AF{constructor(t,e){this.db=t,this.garbageCollector=new qS(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Un(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return zm(t,i)}removeReference(t,e,i){return zm(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return zm(t,e)}Gn(t,e){return function(i,r){let o=!1;return Zv(i).tt(l=>qE(i,l,r).next(h=>(h&&(o=!0),de.resolve(!h)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Kn(t,(l,h)=>{if(h<=e){const p=this.Gn(t,l).next(y=>{if(!y)return o++,i.getEntry(t,l).next(()=>(i.removeEntry(l,yt.min()),xu(t).delete([0,Zr(l.path)])))});r.push(p)}}).next(()=>de.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return zm(t,e)}Kn(t,e){const i=xu(t);let r,o=so.at;return i.Z({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:y})=>{0===l?(o!==so.at&&e(new Xe(Ms(r)),o),o=y,r=p):o=so.at}).next(()=>{o!==so.at&&e(new Xe(Ms(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function zm(n,t){return xu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Zr(t.path),sequenceNumber:i}));var i}class ZS{constructor(){this.changes=new Cu(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ii.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?de.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class qR{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Ou(t).put(i)}removeEntry(t,e,i){return Ou(t).delete(function(r,o){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Uv(o),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=ii.newInvalidDocument(e);return Ou(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ap(e))},(r,o)=>{i=this.jn(e,o)}).next(()=>i)}Wn(t,e){let i={size:0,document:ii.newInvalidDocument(e)};return Ou(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ap(e))},(r,o)=>{i={document:this.jn(e,o),size:qv(o)}}).next(()=>i)}getEntries(t,e){let i=As();return this.zn(t,e,(r,o)=>{const l=this.jn(r,o);i=i.insert(r,l)}).next(()=>i)}Hn(t,e){let i=As(),r=new Ti(Xe.comparator);return this.zn(t,e,(o,l)=>{const h=this.jn(o,l);i=i.insert(o,h),r=r.insert(o,qv(l))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return de.resolve();let r=new yn(KE);e.forEach(p=>r=r.add(p));const o=IDBKeyRange.bound(ap(r.first()),ap(r.last())),l=r.getIterator();let h=l.getNext();return Ou(t).Z({index:"documentKeyIndex",range:o},(p,y,I)=>{const T=Xe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&KE(h,T)<0;)i(h,null),h=l.getNext();h&&h.isEqual(T)&&(i(h,y),h=l.hasNext()?l.getNext():null),h?I.j(ap(h)):I.done()}).next(()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),Uv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ou(t).W(IDBKeyRange.bound(r,o,!0)).next(l=>{let h=As();for(const p of l){const y=this.jn(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(t,e,i,r){let o=As();const l=YE(e,i),h=YE(e,xo.max());return Ou(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,y,I)=>{const T=this.jn(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(T.key,T),o.size===r&&I.done()}).next(()=>o)}newChangeBuffer(t){return new YR(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return YS(t).get("remoteDocumentGlobalKey").next(e=>(_t(!!e),e))}Qn(t,e){return YS(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function BR(n,t){let e;if(t.document)e=us(n.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Xe.fromSegments(t.noDocument.path),r=gh(t.noDocument.readTime);e=ii.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return dt();{const i=Xe.fromSegments(t.unknownDocument.path),r=gh(t.unknownDocument.version);e=ii.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Fn(i[0],i[1]);return yt.fromTimestamp(r)}(t.readTime)),e}(this.yt,e);if(!i.isNoDocument()||!i.version.isEqual(yt.min()))return i}return ii.newInvalidDocument(t)}}function ZR(n){return new qR(n)}class YR extends ZS{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Cu(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new yn((o,l)=>kt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const h=this.Xn.get(o);if(e.push(this.Yn.removeEntry(t,o,h.readTime)),l.isValidDocument()){const p=LE(this.Yn.yt,l);r=r.add(o.path.popLast());const y=qv(p);i+=y-h.size,e.push(this.Yn.addEntry(t,o,p))}else if(i-=h.size,this.trackRemovals){const p=LE(this.Yn.yt,l.convertToNoDocument(yt.min()));e.push(this.Yn.addEntry(t,o,p))}}),r.forEach(o=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Yn.updateMetadata(t,i)),de.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((o,l)=>{this.Xn.set(o,{size:l,readTime:i.get(o).readTime})}),i))}}function YS(n){return Ar(n,"remoteDocumentGlobal")}function Ou(n){return Ar(n,"remoteDocumentsV14")}function ap(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function YE(n,t){const e=t.documentKey.path.toArray();return[n,Uv(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function KE(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=kt(e[o],i[o]),r)return r;return r=kt(e.length,i.length),r||(r=kt(e[e.length-2],i[i.length-2]),r||kt(e[e.length-1],i[i.length-1]))}class KR{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class KS{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&Zf(i.mutation,r,Wr.empty(),Fn.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,$t()).next(()=>i))}getLocalViewOfDocuments(t,e,i=$t()){const r=cc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let l=Nm();return o.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=cc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,$t()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((l,h)=>{e.set(l,h)})})}computeViews(t,e,i,r){let o=As();const l=Rm(),h=Rm();return e.forEach((p,y)=>{const I=i.get(y.key);r.has(y.key)&&(void 0===I||I.mutation instanceof ac)?o=o.insert(y.key,y):void 0!==I?(l.set(y.key,I.mutation.getFieldMask()),Zf(I.mutation,y,I.mutation.getFieldMask(),Fn.now())):l.set(y.key,Wr.empty())}),this.recalculateAndSaveOverlays(t,o).next(p=>(p.forEach((y,I)=>l.set(y,I)),e.forEach((y,I)=>{var T;return h.set(y,new KR(I,null!==(T=l.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Rm();let r=new Ti((l,h)=>l-h),o=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const h of l)h.keys().forEach(p=>{const y=e.get(p);if(null===y)return;let I=i.get(p)||Wr.empty();I=h.applyToLocalView(y,I),i.set(p,I);const T=(r.get(h.batchId)||$t()).add(p);r=r.insert(h.batchId,T)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,I=p.value,T=vS();I.forEach(N=>{if(!o.has(N)){const P=Ov(e.get(N),i.get(N));null!==P&&T.set(N,P),o=o.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(t,y,T))}return de.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return Xe.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):Sv(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):de.resolve(cc());let h=-1,p=o;return l.next(y=>de.forEach(y,(I,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(I)?de.resolve():this.remoteDocumentCache.getEntry(t,I).next(N=>{p=p.insert(I,N)}))).next(()=>this.populateOverlays(t,y,o)).next(()=>this.computeViews(t,p,y,$t())).next(I=>({batchId:h,changes:yS(I)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Xe(e)).next(i=>{let r=Nm();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let o=Nm();return this.indexManager.getCollectionParents(t,r).next(l=>de.forEach(l,h=>{const p=(y=e,I=h.child(r),new fl(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(y=>{y.forEach((I,T)=>{o=o.insert(I,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(o=>(r=o,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(o=>{o.forEach((h,p)=>{const y=p.getKey();null===r.get(y)&&(r=r.insert(y,ii.newInvalidDocument(y)))});let l=Nm();return r.forEach((h,p)=>{const y=o.get(h);void 0!==y&&Zf(y.mutation,p,Wr.empty(),Fn.now()),Av(e,p)&&(l=l.insert(h,p))}),l})}}class QR{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return de.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:Si(i.createTime)}),de.resolve()}getNamedQuery(t,e){return de.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:BE(i.bundledQuery),readTime:Si(i.readTime)}),de.resolve();var i}}class JR{constructor(){this.overlays=new Ti(Xe.comparator),this.es=new Map}getOverlay(t,e){return de.resolve(this.overlays.get(e))}getOverlays(t,e){const i=cc();return de.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.oe(t,e,o)}),de.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(i)),de.resolve()}getOverlaysForCollection(t,e,i){const r=cc(),o=e.length+1,l=new Xe(e.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===o&&p.largestBatchId>i&&r.set(p.getKey(),p)}return de.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new Ti((y,I)=>y-I);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let I=o.get(y.largestBatchId);null===I&&(I=cc(),o=o.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=cc(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=r)););return de.resolve(h)}oe(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new FE(e,i));let o=this.es.get(e);void 0===o&&(o=$t(),this.es.set(e,o)),this.es.set(e,o.add(i.key))}}class QE{constructor(){this.ns=new yn(_r.ss),this.rs=new yn(_r.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new _r(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new _r(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new Xe(new Jt([])),i=new _r(e,t),r=new _r(e,t+1),o=[];return this.rs.forEachInRange([i,r],l=>{this.cs(l),o.push(l.key)}),o}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new Xe(new Jt([])),i=new _r(e,t),r=new _r(e,t+1);let o=$t();return this.rs.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(t){const e=new _r(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class _r{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return Xe.comparator(t.key,e.key)||kt(t._s,e._s)}static os(t,e){return kt(t._s,e._s)||Xe.comparator(t.key,e.key)}}class qm{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new yn(_r.ss)}checkEmpty(t){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const o=this.ws;this.ws++;const l=new PE(o,e,i,r);this.mutationQueue.push(l);for(const h of r)this.gs=this.gs.add(new _r(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return de.resolve(l)}lookupMutationBatch(t,e){return de.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),o=r<0?0:r;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new _r(e,0),r=new _r(e,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([i,r],l=>{const h=this.ys(l._s);o.push(h)}),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new yn(kt);return e.forEach(r=>{const o=new _r(r,0),l=new _r(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,l],h=>{i=i.add(h._s)})}),de.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;Xe.isDocumentKey(o)||(o=o.child(""));const l=new _r(new Xe(o),0);let h=new yn(kt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p._s)),!0)},l),de.resolve(this.Is(h))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){_t(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return de.forEach(e.mutations,r=>{const o=new _r(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new _r(e,0),r=this.gs.firstAfterOrEqual(i);return de.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return de.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class QS{constructor(t){this.Es=t,this.docs=new Ti(Xe.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,l=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return de.resolve(i?i.document.mutableCopy():ii.newInvalidDocument(e))}getEntries(t,e){let i=As();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ii.newInvalidDocument(r))}),de.resolve(i)}getAllFromCollection(t,e,i){let r=As();const o=new Xe(e.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||eE(uR(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return de.resolve(r)}getAllFromCollectionGroup(t,e,i,r){dt()}As(t,e){return de.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new JS(this)}getSize(t){return de.resolve(this.size)}}class JS extends ZS{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),de.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class XS{constructor(t){this.persistence=t,this.Rs=new Cu(e=>rh(e),mi),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new QE,this.targetCount=0,this.vs=Ru.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),de.resolve()}getLastRemoteSnapshotVersion(t){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return de.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),de.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Ru(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,de.resolve()}updateTargetData(t,e){return this.Dn(e),de.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,de.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.Rs.delete(l),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),de.waitFor(o).next(()=>r)}getTargetCount(t){return de.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return de.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),de.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(l=>{o.push(r.markPotentiallyOrphaned(t,l))}),de.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),de.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return de.resolve(i)}containsKey(t,e){return de.resolve(this.Ps.containsKey(e))}}class JE{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new so(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new XS(this),this.indexManager=new $E,this.remoteDocumentCache=new QS(i=>this.referenceDelegate.xs(i)),this.yt=new ip(e),this.Ns=new QR(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new JR,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new qm(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ge("MemoryPersistence","Starting transaction:",t);const r=new e1(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(o=>this.referenceDelegate.Os(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ms(t,e){return de.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class e1 extends dR{constructor(t){super(),this.currentSequenceNumber=t}}class Yv{constructor(t){this.persistence=t,this.Fs=new QE,this.$s=null}static Bs(t){return new Yv(t)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),de.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),de.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),de.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Ls.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,i=>{const r=Xe.fromPath(i);return this.qs(t,r).next(o=>{o||e.removeEntry(r,yt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.qs(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}qs(t,e){return de.or([()=>de.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class XR{constructor(t){this.yt=t}$(t,e,i,r){const o=new uv("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SS,{unique:!0}),h.createObjectStore("documentMutations"),ex(t),function(h){h.createObjectStore("remoteDocuments")}(t));let l=de.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),ex(t)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(h,p){return p.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SS,{unique:!0});const I=p.store("mutations"),T=y.map(N=>I.put(N));return de.waitFor(T)})}(t,o))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(l=l.next(()=>this.Us(o))),i<6&&r>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(o)))),i<7&&r>=7&&(l=l.next(()=>this.Gs(o))),i<8&&r>=8&&(l=l.next(()=>this.Qs(t,o))),i<9&&r>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(l=l.next(()=>this.js(o))),i<11&&r>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:Lv});p.createIndex("collectionPathOverlayIndex",PR,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",FR,{unique:!1})}(t)})),i<13&&r>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:NS});p.createIndex("documentKeyIndex",RS),p.createIndex("collectionGroupIndex",xR)}(t)).next(()=>this.Ws(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.zs(t,o))),i<15&&r>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:DF}).createIndex("sequenceNumberIndex",TF,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:SF}).createIndex("documentKeyIndex",OS,{unique:!1})}(t))),l}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=qv(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>de.forEach(r,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",l).next(h=>de.forEach(h,p=>{_t(p.userId===o.userId);const y=Mu(this.yt,p);return zv(t,o.userId,y).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((l,h)=>{const p=new Jt(l),y=[0,Zr(p)];o.push(e.get(y).next(I=>I?de.resolve():e.put({targetId:0,path:Zr(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>de.waitFor(o))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:CF});const i=e.store("collectionParents"),r=new WE,o=l=>{if(r.add(l)){const h=l.lastSegment(),p=l.popLast();return i.put({collectionId:h,parent:Zr(p)})}};return e.store("remoteDocuments").Z({X:!0},(l,h)=>{const p=new Jt(l);return o(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([l,h,p],y)=>{const I=Ms(h);return o(I.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const o=jm(r),l=Vv(this.yt,o);return e.put(l)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((o,l)=>{const h=e.store("remoteDocumentsV14"),p=(y=l,y.document?new Xe(Jt.fromString(y.document.name).popFirst(5)):y.noDocument?Xe.fromSegments(y.noDocument.path):y.unknownDocument?Xe.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const I={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(I))}).next(()=>de.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=ZR(this.yt),o=new JE(Yv.Bs,this.yt.ie);return i.W().next(l=>{const h=new Map;return l.forEach(p=>{var y;let I=null!==(y=h.get(p.userId))&&void 0!==y?y:$t();Mu(this.yt,p).keys().forEach(T=>I=I.add(T)),h.set(p.userId,I)}),de.forEach(h,(p,y)=>{const I=new mr(y),T=Gv.re(this.yt,I),N=o.getIndexManager(I),P=Wm.re(I,this.yt,N,o.referenceDelegate);return new KS(r,P,T,N).recalculateAndSaveOverlaysForDocumentKeys(new kE(e,so.at),p).next()})})}}function ex(n){n.createObjectStore("targetDocuments",{keyPath:OR}).createIndex("documentTargetsIndex",kR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xS,{unique:!0}),n.createObjectStore("targetGlobal")}const t1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class XE{constructor(t,e,i,r,o,l,h,p,y,I,T=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=o,this.window=l,this.document=h,this.Js=y,this.Ys=I,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!XE.C())throw new Fe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AF(this,r),this.ii=e+"main",this.yt=new ip(p),this.ri=new ra(this.ii,this.Xs,new XR(this.yt)),this.Cs=new WS(this.referenceDelegate,this.yt),this.remoteDocumentCache=ZR(this.yt),this.Ns=new UR,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Ci("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,t1);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new so(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,pe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,pe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,pe.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Kv(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(ic(t))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return Zm(t).get("owner").next(e=>de.resolve(this.mi(e)))}gi(t){return Kv(t).delete(this.clientId)}yi(){var t=this;return(0,pe.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ar(i,"clientMetadata");return r.W().next(o=>{const l=t.Ii(o,18e5),h=o.filter(p=>-1===l.indexOf(p));return de.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?de.resolve(!0):Zm(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,t1);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kv(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Ge("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,pe.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new kE(e,so.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>Kv(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return Wm.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new zE(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return Gv.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ge("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",o=15===(l=this.Xs)?LR:14===l?PS:13===l?kS:12===l?Vm:11===l?OE:void dt();var l;let h;return this.ri.runTransaction(t,r,o,p=>(h=new kE(p,this.Ss?this.Ss.next():so.at),"readwrite-primary"===e?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Ci(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(fe.FAILED_PRECONDITION,zT);return i(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Vi(t){return Zm(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Fe(fe.FAILED_PRECONDITION,t1)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zm(t).put("owner",e)}static C(){return ra.C()}_i(t){const e=Zm(t);return e.get("owner").next(i=>this.mi(i)?(Ge("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):de.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Ci(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return Ge("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ci("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Ci("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Zm(n){return Ar(n,"owner")}function Kv(n){return Ar(n,"clientMetadata")}function eI(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class tI{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=$t(),r=$t();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new tI(t,e.fromCache,i,r)}}class cp{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(o=>o||this.Oi(t,e,r,i)).next(o=>o||this.Mi(t,e))}ki(t,e){if(oh(e))return de.resolve(null);let i=qr(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=Sm(e,null,"F"),i=qr(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const l=$t(...o);return this.Ni.getDocuments(t,l).next(h=>this.indexManager.getMinOffset(t,i).next(p=>{const y=this.Fi(e,h);return this.$i(e,y,l,p.readTime)?this.ki(t,Sm(e,null,"F")):this.Bi(t,y,e,p)}))})))}Oi(t,e,i,r){return oh(e)||r.isEqual(yt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(o=>{const l=this.Fi(e,o);return this.$i(e,l,i,r)?this.Mi(t,e):(Jw()<=No.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fE(e)),this.Bi(t,l,e,WT(r,-1)))})}Fi(t,e){let i=new yn(Oo(t));return e.forEach((r,o)=>{Av(t,o)&&(i=i.add(o))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Mi(t,e){return Jw()<=No.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",fE(e)),this.Ni.getDocumentsMatchingQuery(t,e,xo.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(l=>{o=o.insert(l.key,l)}),o))}}class tx{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.yt=r,this.qi=new Ti(kt),this.Ui=new Cu(o=>rh(o),mi),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KS(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qi))}}function Qv(n,t,e,i){return new tx(n,t,e,i)}function n1(n,t){return r1.apply(this,arguments)}function r1(){return r1=(0,pe.Z)(function*(n,t){const e=tt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let p=$t();for(const y of r){l.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}for(const y of o){h.push(y.batchId);for(const I of y.mutations)p=p.add(I.key)}return e.localDocuments.getDocuments(i,p).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:h}))})})}),r1.apply(this,arguments)}function ix(n){const t=tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function s1(n,t,e){let i=$t(),r=$t();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let l=As();return e.forEach((h,p)=>{const y=o.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(yt.min())?(t.removeEntry(h,p.readTime),l=l.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(p),l=l.insert(h,p)):Ge("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Wi:l,zi:r}})}function rx(n,t){const e=tt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function lp(n,t){const e=tt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(o=>o?(r=o,de.resolve(r)):e.Cs.allocateTargetId(i).next(l=>(r=new Su(t,l,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.qi.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.qi=e.qi.insert(i.targetId,i),e.Ui.set(t,i.targetId)),i})}function gl(n,t,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,pe.Z)(function*(n,t,e){const i=tt(n),r=i.qi.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!ic(l))throw l;Ge("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.qi=i.qi.remove(t),i.Ui.delete(r.target)}),Jv.apply(this,arguments)}function Xv(n,t,e){const i=tt(n);let r=yt.min(),o=$t();return i.persistence.runTransaction("Execute query","readonly",l=>function(h,p,y){const I=tt(h),T=I.Ui.get(y);return void 0!==T?de.resolve(I.qi.get(T)):I.Cs.getTargetData(p,y)}(i,l,qr(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{o=p})}).next(()=>i.Li.getDocumentsMatchingQuery(l,t,e?r:yt.min(),e?o:$t())).next(h=>(o1(i,aa(t),h),{documents:h,Hi:o})))}function nI(n,t){const e=tt(n),i=tt(e.Cs),r=e.qi.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,t).next(l=>l?l.target:null))}function Km(n,t){const e=tt(n),i=e.Ki.get(t)||yt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,WT(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(o1(e,t,r),r))}function o1(n,t,e){let i=n.Ki.get(t)||yt.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ki.set(t,i)}function e0(){return e0=(0,pe.Z)(function*(n,t,e,i){const r=tt(n);let o=$t(),l=As();for(const y of e){const I=t.Ji(y.metadata.name);y.document&&(o=o.add(I));const T=t.Yi(y);T.setReadTime(t.Xi(y.metadata.readTime)),l=l.insert(I,T)}const h=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield lp(r,(y=i,qr(sh(Jt.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>s1(y,h,l).next(I=>(h.apply(y),I)).next(I=>r.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Cs.addMatchingKeys(y,o,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,I.Wi,I.zi)).next(()=>I.Wi)))}),e0.apply(this,arguments)}function ox(n,t){return iI.apply(this,arguments)}function iI(){return iI=(0,pe.Z)(function*(n,t,e=$t()){const i=yield lp(n,qr(BE(t.bundledQuery))),r=tt(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const l=Si(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ns.saveNamedQuery(o,t);const h=i.withResumeToken(Bi.EMPTY_BYTE_STRING,l);return r.qi=r.qi.insert(h.targetId,h),r.Cs.updateTargetData(o,h).next(()=>r.Cs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Cs.addMatchingKeys(o,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(o,t))})}),iI.apply(this,arguments)}function rI(n,t){return`firestore_clients_${n}_${t}`}function Qm(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function sI(n,t){return`firestore_targets_${n}_${t}`}class t0{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let o,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Fe(r.error.code,r.error.message))),l?new t0(t,e,r.state,o):(Ci("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class up{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Fe(i.error.code,i.error.message))),o?new up(t,i.state,r):(Ci("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Jm{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=xm();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=YT(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return r?new Jm(t,o):(Ci("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Xm{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Xm(e.clientId,e.onlineState):(Ci("SharedClientState",`Failed to parse online state: ${t}`),null)}}class n0{constructor(){this.activeTargetIds=xm()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oI{constructor(t,e,i,r,o){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ti(kt),this.started=!1,this.cr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=rI(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new n0),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,pe.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const o=t.getItem(rI(t.persistenceKey,r));if(o){const l=Jm.Zi(r,o);l&&(t.ur=t.ur.insert(l.clientId,l))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(sI(this.persistenceKey,t));if(i){const r=up.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(sI(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ge("SharedClientState","READ",t,e),e}setItem(t,e){Ge("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ge("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ge("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(o){let l=so.at;if(null!=o)try{const h=JSON.parse(o);_t("number"==typeof h),l=h}catch(h){Ci("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(i.newValue);r!==so.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(o=>e.syncEngine.Mr(o)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new t0(this.currentUser,t,e,i),o=Qm(this.persistenceKey,this.currentUser,t);this.setItem(o,r.tr())}Er(t){const e=Qm(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=sI(this.persistenceKey,t),o=new up(t,e,i);this.setItem(r,o.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return Jm.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return t0.Zi(new mr(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return up.Zi(r,e)}yr(t){return Xm.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,pe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),o=this.Ir(i),l=[],h=[];return o.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Br(l,h).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=xm();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class aI{constructor(){this.Lr=new n0,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new n0,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class a1{Ur(t){}shutdown(){}}class c1{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ax={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cI{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class lI extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,o){const l=this.ho(t,e);Ge("RestConnection","Sending: ",l,i);const h={};return this.lo(h,r,o),this.fo(t,l,h,i).then(p=>(Ge("RestConnection","Received: ",p),p),p=>{throw mu("RestConnection",`${t} failed with error: `,p,"url: ",l,"request:",i),p})}_o(t,e,i,r,o,l){return this.ao(t,e,i,r,o)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+jf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}ho(t,e){return`${this.oo}/v1/${e}:${ax[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((o,l)=>{const h=new av;h.setWithCredentials(!0),h.listenOnce(oR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yw.NO_ERROR:const y=h.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(y)),o(y);break;case Yw.TIMEOUT:Ge("Connection",'RPC "'+t+'" timed out'),l(new Fe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Yw.HTTP_ERROR:const I=h.getStatus();if(Ge("Connection",'RPC "'+t+'" failed with status:',I,"response text:",h.getResponseText()),I>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T?.error;if(N&&N.status&&N.message){const P=function(H){const K=H.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(K)>=0?K:fe.UNKNOWN}(N.status);l(new Fe(P,N.message))}else l(new Fe(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Fe(fe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ge("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);h.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=rR(),l=sR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Qw({})),this.lo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;const p=r.join("");Ge("Connection","Creating WebChannel: "+p,h);const y=o.createWebChannel(p,h);let I=!1,T=!1;const N=new cI({Hr:H=>{T?Ge("Connection","Not sending because WebChannel is closed:",H):(I||(Ge("Connection","Opening WebChannel transport."),y.open(),I=!0),Ge("Connection","WebChannel sending:",H),y.send(H))},Jr:()=>y.close()}),P=(H,K,X)=>{H.listen(K,xe=>{try{X(xe)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return P(y,ov.EventType.OPEN,()=>{T||Ge("Connection","WebChannel transport opened.")}),P(y,ov.EventType.CLOSE,()=>{T||(T=!0,Ge("Connection","WebChannel transport closed"),N.io())}),P(y,ov.EventType.ERROR,H=>{T||(T=!0,mu("Connection","WebChannel transport errored:",H),N.io(new Fe(fe.UNAVAILABLE,"The operation could not be completed")))}),P(y,ov.EventType.MESSAGE,H=>{var K;if(!T){const X=H.data[0];_t(!!X);const Ue=X.error||(null===(K=X[0])||void 0===K?void 0:K.error);if(Ue){Ge("Connection","WebChannel received error:",Ue);const $e=Ue.status;let Oe=function(et){const Lt=Ki[et];if(void 0!==Lt)return mS(Lt)}($e),Ze=Ue.message;void 0===Oe&&(Oe=fe.INTERNAL,Ze="Unknown error status: "+$e+" with message "+Ue.message),T=!0,N.io(new Fe(Oe,Ze)),y.close()}else Ge("Connection","WebChannel received:",X),N.ro(X)}}),P(l,aR.STAT_EVENT,H=>{H.stat===Kw.PROXY?Ge("Connection","Detected buffering proxy"):H.stat===Kw.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function uI(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function bh(n){return new EF(n,!0)}class dI{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&Ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class l1{constructor(t,e,i,r,o,l,h,p){this.Hs=t,this.vo=i,this.Vo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dI(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,pe.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,pe.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,pe.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===fe.RESOURCE_EXHAUSTED?(Ci(e.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Fe(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){t.state=0,t.start()}))}Qo(t){return Ge("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cx extends l1{constructor(t,e,i,r,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.yt=o}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function IS(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),r=t.targetChange.targetIds||[],o=function(p,y){return p.wt?(_t(void 0===y||"string"==typeof y),Bi.fromBase64String(y||"")):(_t(void 0===y||y instanceof Uint8Array),Bi.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&function(p){const y=void 0===p.code?fe.UNKNOWN:mS(p.code);return new Fe(y,p.message||"")}(l);e=new CE(i,r,o,h||null)}else if("documentChange"in t){const i=t.documentChange,r=lc(n,i.document.name),o=Si(i.document.updateTime),l=i.document.createTime?Si(i.document.createTime):yt.min(),h=new zr({mapValue:{fields:i.document.fields}}),p=ii.newFoundDocument(r,o,l,h);e=new Om(i.targetIds||[],i.removedTargetIds||[],p.key,p)}else if("documentDelete"in t){const i=t.documentDelete,r=lc(n,i.document),o=i.readTime?Si(i.readTime):yt.min(),l=ii.newNoDocument(r,o);e=new Om([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,r=lc(n,i.document);e=new Om([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return dt();{const i=t.filter,o=new wR(i.count||0);e=new IE(i.targetId,o)}}var p;return e}(this.yt,t),i=function(r){if(!("targetChange"in r))return yt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?Si(o.readTime):yt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=Pm(this.yt),e.addTarget=function(r,o){let l;const h=o.target;return l=Tm(h)?{documents:NE(r,h)}:{query:Pv(r,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=SR(r,o.resumeToken):o.snapshotVersion.compareTo(yt.min())>0&&(l.readTime=Tu(r,o.snapshotVersion.toTimestamp())),l}(this.yt,t);const i=function AR(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=Pm(this.yt),e.removeTarget=t,this.Bo(e)}}class lx extends l1{constructor(t,e,i,r,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.yt=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function CS(n,t){return n&&n.length>0?(_t(void 0!==t),n.map(e=>function(i,r){let o=Si(i.updateTime?i.updateTime:r);return o.isEqual(yt.min())&&(o=Si(r)),new fS(o,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Si(t.commitTime);return this.listener.Zo(i,e)}return _t(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=Pm(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Xf(this.yt,i))};this.Bo(e)}}class u1 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.yt=r,this.nu=!1}su(){if(this.nu)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.ao(t,e,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Fe(fe.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection._o(t,e,i,o,l,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Fe(fe.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class d1{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ci(e),this.ou=!1):Ge("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class h1{constructor(t,e,i,r,o){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur(h=>{i.enqueueAndForget((0,pe.Z)(function*(){var p;ml(l)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,pe.Z)(function*(y){const I=tt(y);I._u.add(4),yield wh(I),I.gu.set("Unknown"),I._u.delete(4),yield hp(I)}),function(y){return p.apply(this,arguments)})(l))}))}),this.gu=new d1(i,r)}}function hp(n){return fI.apply(this,arguments)}function fI(){return fI=(0,pe.Z)(function*(n){if(ml(n))for(const t of n.wu)yield t(!0)}),fI.apply(this,arguments)}function wh(n){return s0.apply(this,arguments)}function s0(){return s0=(0,pe.Z)(function*(n){for(const t of n.wu)yield t(!1)}),s0.apply(this,arguments)}function o0(n,t){const e=tt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),pI(e)?ku(e):n_(e).ko()&&a0(e,t))}function fp(n,t){const e=tt(n),i=n_(e);e.du.delete(t),i.ko()&&Kr(e,t),0===e.du.size&&(i.ko()?i.Fo():ml(e)&&e.gu.set("Unknown"))}function a0(n,t){n.yu.Ot(t.targetId),n_(n).zo(t)}function Kr(n,t){n.yu.Ot(t),n_(n).Ho(t)}function ku(n){n.yu=new TE({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>n.du.get(t)||null}),n_(n).start(),n.gu.uu()}function pI(n){return ml(n)&&!n_(n).No()&&n.du.size>0}function ml(n){return 0===tt(n)._u.size}function ux(n){n.yu=void 0}function MF(n){return c0.apply(this,arguments)}function c0(){return c0=(0,pe.Z)(function*(n){n.du.forEach((t,e)=>{a0(n,t)})}),c0.apply(this,arguments)}function gI(n,t){return f1.apply(this,arguments)}function f1(){return f1=(0,pe.Z)(function*(n,t){ux(n),pI(n)?(n.gu.hu(t),ku(n)):n.gu.set("Unknown")}),f1.apply(this,arguments)}function NF(n,t,e){return p1.apply(this,arguments)}function p1(){return p1=(0,pe.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof CE&&2===t.state&&t.cause)try{yield(i=(0,pe.Z)(function*(r,o){const l=o.cause;for(const h of o.targetIds)r.du.has(h)&&(yield r.remoteSyncer.rejectListen(h,l),r.du.delete(h),r.yu.removeTarget(h))}),function(r,o){return i.apply(this,arguments)})(n,t)}catch(i){Ge("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Pu(n,i)}else if(t instanceof Om?n.yu.Kt(t):t instanceof IE?n.yu.Jt(t):n.yu.jt(t),!e.isEqual(yt.min()))try{const i=yield ix(n.localStore);e.compareTo(i)>=0&&(yield function(r,o){const l=r.yu.Zt(o);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.du.get(p);y&&r.du.set(p,y.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach(h=>{const p=r.du.get(h);if(!p)return;r.du.set(h,p.withResumeToken(Bi.EMPTY_BYTE_STRING,p.snapshotVersion)),Kr(r,h);const y=new Su(p.target,h,1,p.sequenceNumber);a0(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){Ge("RemoteStore","Failed to raise snapshot:",i),yield Pu(n,i)}var i}),p1.apply(this,arguments)}function Pu(n,t,e){return mI.apply(this,arguments)}function mI(){return mI=(0,pe.Z)(function*(n,t,e){if(!ic(t))throw t;n._u.add(1),yield wh(n),n.gu.set("Offline"),e||(e=()=>ix(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield hp(n)}))}),mI.apply(this,arguments)}function l0(n,t){return t().catch(e=>Pu(n,e,t))}function pp(n){return u0.apply(this,arguments)}function u0(){return u0=(0,pe.Z)(function*(n){const t=tt(n),e=Fu(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;dx(t);)try{const r=yield rx(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,hx(t,r)}catch(r){yield Pu(t,r)}g1(t)&&d0(t)}),u0.apply(this,arguments)}function dx(n){return ml(n)&&n.fu.length<10}function hx(n,t){n.fu.push(t);const e=Fu(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function g1(n){return ml(n)&&!Fu(n).No()&&n.fu.length>0}function d0(n){Fu(n).start()}function m1(n){return _I.apply(this,arguments)}function _I(){return _I=(0,pe.Z)(function*(n){Fu(n).eu()}),_I.apply(this,arguments)}function h0(n){return e_.apply(this,arguments)}function e_(){return e_=(0,pe.Z)(function*(n){const t=Fu(n);for(const e of n.fu)t.Xo(e.mutations)}),e_.apply(this,arguments)}function RF(n,t,e){return f0.apply(this,arguments)}function f0(){return f0=(0,pe.Z)(function*(n,t,e){const i=n.fu.shift(),r=Bv.from(i,t,e);yield l0(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield pp(n)}),f0.apply(this,arguments)}function fx(n,t){return p0.apply(this,arguments)}function p0(){return p0=(0,pe.Z)(function*(n,t){var e;t&&Fu(n).Yo&&(yield(e=(0,pe.Z)(function*(i,r){if(gS(o=r.code)&&o!==fe.ABORTED){const l=i.fu.shift();Fu(i).Mo(),yield l0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield pp(i)}var o}),function(i,r){return e.apply(this,arguments)})(n,t)),g1(n)&&d0(n)}),p0.apply(this,arguments)}function Eh(n,t){return yI.apply(this,arguments)}function yI(){return yI=(0,pe.Z)(function*(n,t){const e=tt(n);e.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const i=ml(e);e._u.add(3),yield wh(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield hp(e)}),yI.apply(this,arguments)}function g0(n,t){return t_.apply(this,arguments)}function t_(){return t_=(0,pe.Z)(function*(n,t){const e=tt(n);t?(e._u.delete(2),yield hp(e)):t||(e._u.add(2),yield wh(e),e.gu.set("Unknown"))}),t_.apply(this,arguments)}function n_(n){return n.pu||(n.pu=function(t,e,i){const r=tt(t);return r.su(),new cx(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:MF.bind(null,n),Zr:gI.bind(null,n),Wo:NF.bind(null,n)}),n.wu.push(function(){var t=(0,pe.Z)(function*(e){e?(n.pu.Mo(),pI(n)?ku(n):n.gu.set("Unknown")):(yield n.pu.stop(),ux(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function Fu(n){return n.Iu||(n.Iu=function(t,e,i){const r=tt(t);return r.su(),new lx(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:m1.bind(null,n),Zr:fx.bind(null,n),tu:h0.bind(null,n),Zo:RF.bind(null,n)}),n.wu.push(function(){var t=(0,pe.Z)(function*(e){e?(n.Iu.Mo(),yield pp(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class _1{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,r,o){const l=Date.now()+i,h=new _1(t,e,l,r,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(n,t){if(Ci("AsyncQueue",`${t}: ${n}`),ic(n))return new Fe(fe.UNAVAILABLE,`${t}: ${n}`);throw n}class mp{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Xe.comparator(e.key,i.key):(e,i)=>Xe.comparator(e.key,i.key),this.keyedMap=Nm(),this.sortedSet=new Ti(this.comparator)}static emptySet(t){return new mp(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof mp)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new mp;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class y1{constructor(){this.Tu=new Ti(Xe.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):dt():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Ih{constructor(t,e,i,r,o,l,h,p,y){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,e,i,r,o){const l=[];return e.forEach(h=>{l.push({type:0,doc:h})}),new Ih(t,e,mp.emptySet(e),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ch(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class v1{constructor(){this.Au=void 0,this.listeners=[]}}class px{constructor(){this.queries=new Cu(t=>oa(t),ch),this.onlineState="Unknown",this.Ru=new Set}}function m0(n,t){return _0.apply(this,arguments)}function _0(){return _0=(0,pe.Z)(function*(n,t){const e=tt(n),i=t.query;let r=!1,o=e.queries.get(i);if(o||(r=!0,o=new v1),r)try{o.Au=yield e.onListen(i)}catch(l){const h=gp(l,`Initialization of query '${fE(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,o),o.listeners.push(t),t.bu(e.onlineState),o.Au&&t.Pu(o.Au)&&y0(e)}),_0.apply(this,arguments)}function vI(n,t){return bI.apply(this,arguments)}function bI(){return bI=(0,pe.Z)(function*(n,t){const e=tt(n),i=t.query;let r=!1;const o=e.queries.get(i);if(o){const l=o.listeners.indexOf(t);l>=0&&(o.listeners.splice(l,1),r=0===o.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),bI.apply(this,arguments)}function b1(n,t){const e=tt(n);let i=!1;for(const r of t){const l=e.queries.get(r.query);if(l){for(const h of l.listeners)h.Pu(r)&&(i=!0);l.Au=r}}i&&y0(e)}function gx(n,t,e){const i=tt(n),r=i.queries.get(t);if(r)for(const o of r.listeners)o.onError(e);i.queries.delete(t)}function y0(n){n.Ru.forEach(t=>{t.next()})}class v0{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Ih(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=Ih.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class w1{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class wI{constructor(t){this.yt=t}Ji(t){return lc(this.yt,t)}Yi(t){return t.metadata.exists?us(this.yt,t.document,!1):ii.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return Si(t)}}class mx{constructor(t,e,i){this.Mu=t,this.localStore=e,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=E1(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=Jt.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new wI(this.yt);for(const r of t)if(r.metadata.queries){const o=i.Ji(r.metadata.name);for(const l of r.metadata.queries){const h=(e.get(l)||$t()).add(o);e.set(l,h)}}return e}complete(){var t=this;return(0,pe.Z)(function*(){const e=yield function sx(n,t,e,i){return e0.apply(this,arguments)}(t.localStore,new wI(t.yt),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield ox(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function E1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _x{constructor(t){this.key=t}}class EI{constructor(t){this.key=t}}class yx{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=$t(),this.mutatedKeys=$t(),this.Gu=Oo(t),this.Qu=new mp(this.Gu)}get ju(){return this.qu}Wu(t,e){const i=e?e.zu:new y1,r=e?e.Qu:this.Qu;let o=e?e.mutatedKeys:this.mutatedKeys,l=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((I,T)=>{const N=r.get(I),P=Av(this.query,T)?T:null,H=!!N&&this.mutatedKeys.has(N.key),K=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let X=!1;N&&P?N.data.isEqual(P.data)?H!==K&&(i.track({type:3,doc:P}),X=!0):this.Hu(N,P)||(i.track({type:2,doc:P}),X=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(h=!0)):!N&&P?(i.track({type:0,doc:P}),X=!0):N&&!P&&(i.track({type:1,doc:N}),X=!0,(p||y)&&(h=!0)),X&&(P?(l=l.add(P),o=K?o.add(I):o.delete(I)):(l=l.delete(I),o=o.delete(I)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const I="F"===this.query.limitType?l.last():l.first();l=l.delete(I.key),o=o.delete(I.key),i.track({type:1,doc:I})}return{Qu:l,zu:i,$i:h,mutatedKeys:o}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const o=t.zu.Eu();o.sort((y,I)=>function(T,N){const P=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return P(T)-P(N)}(y.type,I.type)||this.Gu(y.doc,I.doc)),this.Ju(i);const l=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.Uu;return this.Uu=h,0!==o.length||p?{snapshot:new Ih(this.query,t.Qu,r,o,t.mutatedKeys,0===h,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new y1,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.qu=this.qu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.qu=this.qu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=$t(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new EI(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new _x(i))}),e}tc(t){this.qu=t.Hi,this.Ku=$t();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return Ih.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class xF{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class OF{constructor(t){this.key=t,this.nc=!1}}class kF{constructor(t,e,i,r,o,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Cu(h=>oa(h),ch),this.rc=new Map,this.oc=new Set,this.uc=new Ti(Xe.comparator),this.cc=new Map,this.ac=new QE,this.hc={},this.lc=new Map,this.fc=Ru.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function PF(n,t){return I1.apply(this,arguments)}function I1(){return I1=(0,pe.Z)(function*(n,t){const e=T0(n);let i,r;const o=e.ic.get(t);if(o)i=o.targetId,e.sharedClientState.addLocalQueryTarget(i),r=o.view.ec();else{const l=yield lp(e.localStore,qr(t));e.isPrimaryClient&&o0(e.remoteStore,l);const h=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield C1(e,t,i,"current"===h,l.resumeToken)}return r}),I1.apply(this,arguments)}function C1(n,t,e,i,r){return D1.apply(this,arguments)}function D1(){return D1=(0,pe.Z)(function*(n,t,e,i,r){n._c=(T,N,P)=>{return(H=(0,pe.Z)(function*(K,X,xe,Ue){let $e=X.view.Wu(xe);$e.$i&&($e=yield Xv(K.localStore,X.query,!1).then(({documents:et})=>X.view.Wu(et,$e)));const Oe=Ue&&Ue.targetChanges.get(X.targetId),Ze=X.view.applyChanges($e,K.isPrimaryClient,Oe);return TI(K,X.targetId,Ze.Xu),Ze.snapshot}),function(K,X,xe,Ue){return H.apply(this,arguments)})(n,T,N,P);var H};const o=yield Xv(n.localStore,t,!0),l=new yx(t,o.Hi),h=l.Wu(o.documents),p=Qf.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),y=l.applyChanges(h,n.isPrimaryClient,p);TI(n,e,y.Xu);const I=new xF(t,e,l);return n.ic.set(t,I),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),y.snapshot}),D1.apply(this,arguments)}function FF(n,t){return b0.apply(this,arguments)}function b0(){return b0=(0,pe.Z)(function*(n,t){const e=tt(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(o=>!ch(o,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield gl(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),fp(e.remoteStore,i.targetId),_l(e,i.targetId)}).catch(yu))):(_l(e,i.targetId),yield gl(e.localStore,i.targetId,!0))}),b0.apply(this,arguments)}function w0(){return w0=(0,pe.Z)(function*(n,t,e){const i=PI(n);try{const r=yield function(o,l){const h=tt(o),p=Fn.now(),y=l.reduce((N,P)=>N.add(P.key),$t());let I,T;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let P=As(),H=$t();return h.Gi.getEntries(N,y).next(K=>{P=K,P.forEach((X,xe)=>{xe.isValidDocument()||(H=H.add(X))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,P)).next(K=>{I=K;const X=[];for(const xe of l){const Ue=pS(xe,I.get(xe.key).overlayedDocument);null!=Ue&&X.push(new ac(xe.key,Ue,_R(Ue.value.mapValue),ri.exists(!0)))}return h.mutationQueue.addMutationBatch(N,p,X,l)}).next(K=>{T=K;const X=K.applyToLocalDocumentSet(I,H);return h.documentOverlayCache.saveOverlays(N,K.batchId,X)})}).then(()=>({batchId:T.batchId,changes:yS(I)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,h){let p=o.hc[o.currentUser.toKey()];p||(p=new Ti(kt)),p=p.insert(l,h),o.hc[o.currentUser.toKey()]=p}(i,r.batchId,e),yield yl(i,r.changes),yield pp(i.remoteStore)}catch(r){const o=gp(r,"Failed to persist write");e.reject(o)}}),w0.apply(this,arguments)}function T1(n,t){return _p.apply(this,arguments)}function _p(){return _p=(0,pe.Z)(function*(n,t){const e=tt(n);try{const i=yield function Ym(n,t){const e=tt(n),i=t.snapshotVersion;let r=e.qi;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.qi;const h=[];t.targetChanges.forEach((I,T)=>{const N=r.get(T);if(!N)return;h.push(e.Cs.removeMatchingKeys(o,I.removedDocuments,T).next(()=>e.Cs.addMatchingKeys(o,I.addedDocuments,T)));let P=N.withSequenceNumber(o.currentSequenceNumber);var H,K,X;t.targetMismatches.has(T)?P=P.withResumeToken(Bi.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):I.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(I.resumeToken,i)),r=r.insert(T,P),K=P,X=I,(0===(H=N).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&h.push(e.Cs.updateTargetData(o,P))});let p=As(),y=$t();if(t.documentUpdates.forEach(I=>{t.resolvedLimboDocuments.has(I)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,I))}),h.push(s1(o,l,t.documentUpdates).next(I=>{p=I.Wi,y=I.zi})),!i.isEqual(yt.min())){const I=e.Cs.getLastRemoteSnapshotVersion(o).next(T=>e.Cs.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(I)}return de.waitFor(h).next(()=>l.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,p,y)).next(()=>p)}).then(o=>(e.qi=r,o))}(e.localStore,t);t.targetChanges.forEach((r,o)=>{const l=e.cc.get(o);l&&(_t(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.nc=!0:r.modifiedDocuments.size>0?_t(l.nc):r.removedDocuments.size>0&&(_t(l.nc),l.nc=!1))}),yield yl(e,i,t)}catch(i){yield yu(i)}}),_p.apply(this,arguments)}function S1(n,t,e){const i=tt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((o,l)=>{const h=l.view.bu(t);h.snapshot&&r.push(h.snapshot)}),function(o,l){const h=tt(o);h.onlineState=l;let p=!1;h.queries.forEach((y,I)=>{for(const T of I.listeners)T.bu(l)&&(p=!0)}),p&&y0(h)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function LF(n,t,e){return A1.apply(this,arguments)}function A1(){return A1=(0,pe.Z)(function*(n,t,e){const i=tt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),o=r&&r.key;if(o){let l=new Ti(Xe.comparator);l=l.insert(o,ii.newNoDocument(o,yt.min()));const h=$t().add(o),p=new Kf(yt.min(),new Map,new yn(kt),l,h);yield T1(i,p),i.uc=i.uc.remove(o),i.cc.delete(t),SI(i)}else yield gl(i.localStore,t,!1).then(()=>_l(i,t,e)).catch(yu)}),A1.apply(this,arguments)}function vx(n,t){return E0.apply(this,arguments)}function E0(){return E0=(0,pe.Z)(function*(n,t){const e=tt(n),i=t.batch.batchId;try{const r=yield function nx(n,t){const e=tt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,p,y){const I=p.batch,T=I.keys();let N=de.resolve();return T.forEach(P=>{N=N.next(()=>y.getEntry(h,P)).next(H=>{const K=p.docVersions.get(P);_t(null!==K),H.version.compareTo(K)<0&&(I.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),y.addEntry(H)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,I))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=$t();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}(e.localStore,t);Ch(e,i,null),DI(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield yl(e,r)}catch(r){yield yu(r)}}),E0.apply(this,arguments)}function bx(n,t,e){return CI.apply(this,arguments)}function CI(){return CI=(0,pe.Z)(function*(n,t,e){const i=tt(n);try{const r=yield function(o,l){const h=tt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,l).next(I=>(_t(null!==I),y=I.keys(),h.mutationQueue.removeMutationBatch(p,I))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(i.localStore,t);Ch(i,t,e),DI(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield yl(i,r)}catch(r){yield yu(r)}}),CI.apply(this,arguments)}function M1(){return M1=(0,pe.Z)(function*(n,t){const e=tt(n);ml(e.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const l=tt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=gp(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),M1.apply(this,arguments)}function DI(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function Ch(n,t,e){const i=tt(n);let r=i.hc[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function _l(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||N1(n,i)})}function N1(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(fp(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),SI(n))}function TI(n,t,e){for(const i of e)i instanceof _x?(n.ac.addReference(i.key,t),Ex(n,i)):i instanceof EI?(Ge("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||N1(n,i.key)):dt()}function Ex(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||(Ge("SyncEngine","New document in limbo: "+e),n.oc.add(i),SI(n))}function SI(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new Xe(Jt.fromString(t)),i=n.fc.next();n.cc.set(i,new OF(e)),n.uc=n.uc.insert(e,i),o0(n.remoteStore,new Su(qr(sh(e.path)),i,2,so.at))}}function yl(n,t,e){return AI.apply(this,arguments)}function AI(){return AI=(0,pe.Z)(function*(n,t,e){const i=tt(n),r=[],o=[],l=[];var h;i.ic.isEmpty()||(i.ic.forEach((h,p)=>{l.push(i._c(p,t,e).then(y=>{if((y||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const I=tI.Ci(p.targetId,y);o.push(I)}}))}),yield Promise.all(l),i.sc.Wo(r),yield(h=(0,pe.Z)(function*(p,y){const I=tt(p);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>de.forEach(y,N=>de.forEach(N.Si,P=>I.persistence.referenceDelegate.addReference(T,N.targetId,P)).next(()=>de.forEach(N.Di,P=>I.persistence.referenceDelegate.removeReference(T,N.targetId,P)))))}catch(T){if(!ic(T))throw T;Ge("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const N=T.targetId;if(!T.fromCache){const P=I.qi.get(N),K=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);I.qi=I.qi.insert(N,K)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,o))}),AI.apply(this,arguments)}function MI(n,t){return NI.apply(this,arguments)}function NI(){return NI=(0,pe.Z)(function*(n,t){const e=tt(n);if(!e.currentUser.isEqual(t)){Ge("SyncEngine","User change. New user:",t.toKey());const i=yield n1(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(l=>{l.forEach(h=>{h.reject(new Fe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield yl(e,i.ji)}var r}),NI.apply(this,arguments)}function Ix(n,t){const e=tt(n),i=e.cc.get(t);if(i&&i.nc)return $t().add(i.key);{let r=$t();const o=e.rc.get(t);if(!o)return r;for(const l of o){const h=e.ic.get(l);r=r.unionWith(h.view.ju)}return r}}function Cx(n,t){return RI.apply(this,arguments)}function RI(){return RI=(0,pe.Z)(function*(n,t){const e=tt(n),i=yield Xv(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&TI(e,t.targetId,r.Xu),r}),RI.apply(this,arguments)}function Dx(n,t){return xI.apply(this,arguments)}function xI(){return xI=(0,pe.Z)(function*(n,t){const e=tt(n);return Km(e.localStore,t).then(i=>yl(e,i))}),xI.apply(this,arguments)}function Tx(n,t,e,i){return OI.apply(this,arguments)}function OI(){return OI=(0,pe.Z)(function*(n,t,e,i){const r=tt(n),o=yield function(l,h){const p=tt(l),y=tt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Tn(I,h).next(T=>T?p.localDocuments.getDocuments(I,T):de.resolve(null)))}(r.localStore,t);var h;null!==o?("pending"===e?yield pp(r.remoteStore):"acknowledged"===e||"rejected"===e?(Ch(r,t,i||null),DI(r,t),h=t,tt(tt(r.localStore).mutationQueue).An(h)):dt(),yield yl(r,o)):Ge("SyncEngine","Cannot apply mutation batch with id: "+t)}),OI.apply(this,arguments)}function I0(){return I0=(0,pe.Z)(function*(n,t){const e=tt(n);if(T0(e),PI(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield C0(e,i.toArray());e.dc=!0,yield g0(e.remoteStore,!0);for(const o of r)o0(e.remoteStore,o)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((o,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(_l(e,l),gl(e.localStore,l,!0))),fp(e.remoteStore,l)}),yield r,yield C0(e,i),function(o){const l=tt(o);l.cc.forEach((h,p)=>{fp(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new Ti(Xe.comparator)}(e),e.dc=!1,yield g0(e.remoteStore,!1)}}),I0.apply(this,arguments)}function C0(n,t,e){return kI.apply(this,arguments)}function kI(){return kI=(0,pe.Z)(function*(n,t,e){const i=tt(n),r=[],o=[];for(const l of t){let h;const p=i.rc.get(l);if(p&&0!==p.length){h=yield lp(i.localStore,qr(p[0]));for(const y of p){const I=i.ic.get(y),T=yield Cx(i,I);T.snapshot&&o.push(T.snapshot)}}else{const y=yield nI(i.localStore,l);h=yield lp(i.localStore,y),yield C1(i,R1(y),l,!1,h.resumeToken)}r.push(h)}return i.sc.Wo(o),r}),kI.apply(this,arguments)}function R1(n){return dE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function x1(n){const t=tt(n);return tt(tt(t.localStore).persistence).vi()}function O1(n,t,e,i){return k1.apply(this,arguments)}function k1(){return k1=(0,pe.Z)(function*(n,t,e,i){const r=tt(n);if(r.dc)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const o=r.rc.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const l=yield Km(r.localStore,aa(o[0])),h=Kf.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Bi.EMPTY_BYTE_STRING);yield yl(r,l,h);break}case"rejected":yield gl(r.localStore,t,!0),_l(r,t,i);break;default:dt()}}),k1.apply(this,arguments)}function Ns(n,t,e){return D0.apply(this,arguments)}function D0(){return D0=(0,pe.Z)(function*(n,t,e){const i=T0(n);if(i.dc){for(const r of t){if(i.rc.has(r)){Ge("SyncEngine","Adding an already active target "+r);continue}const o=yield nI(i.localStore,r),l=yield lp(i.localStore,o);yield C1(i,R1(o),l.targetId,!1,l.resumeToken),o0(i.remoteStore,l)}for(const r of e)i.rc.has(r)&&(yield gl(i.localStore,r,!1).then(()=>{fp(i.remoteStore,r),_l(i,r)}).catch(yu))}}),D0.apply(this,arguments)}function T0(n){const t=tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ix.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=LF.bind(null,t),t.sc.Wo=b1.bind(null,t.eventManager),t.sc.wc=gx.bind(null,t.eventManager),t}function PI(n){const t=tt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bx.bind(null,t),t}class F1{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,pe.Z)(function*(){e.yt=bh(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return Qv(this.persistence,new cp,t.initialUser,this.yt)}yc(t){return new JE(Yv.Bs,this.yt)}gc(t){return new aI}terminate(){var t=this;return(0,pe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class S0 extends F1{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield PI(i.Ac.syncEngine),yield pp(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return Qv(this.persistence,new cp,t.initialUser,this.yt)}Tc(t,e){return new zR(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new Em(e,this.persistence);return new hR(t.asyncQueue,i)}yc(t){const e=eI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new XE(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,uI(),dp(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new aI}}class Lu extends S0{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof oI&&(i.sharedClientState.syncEngine={Fr:Tx.bind(null,r),$r:O1.bind(null,r),Br:Ns.bind(null,r),vi:x1.bind(null,r),Mr:Dx.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var o=(0,pe.Z)(function*(l){yield function Sx(n,t){return I0.apply(this,arguments)}(i.Ac.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}gc(t){const e=uI();if(!oI.C(e))throw new Fe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=eI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new oI(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class A0{initialize(t,e){var i=this;return(0,pe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>S1(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=MI.bind(null,i.syncEngine),yield g0(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new px}createDatastore(t){const e=bh(t.databaseInfo.databaseId),i=new lI(t.databaseInfo);return new u1(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,o=h=>S1(this.syncEngine,h,0),l=c1.C()?new c1:new a1,new h1(e,i,r,o,l);var e,i,r,o,l}createSyncEngine(t,e){return function(i,r,o,l,h,p,y){const I=new kF(i,r,o,l,h,p);return y&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,pe.Z)(function*(e){const i=tt(e);Ge("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield wh(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function i_(n,t,e){if(!e)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function M0(n,t,e,i){if(!0===t&&!0===i)throw new Fe(fe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function L1(n){if(!Xe.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ax(n){if(Xe.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function r_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":dt()}function pn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Fe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=r_(n);throw new Fe(fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function B1(n,t){if(t<=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const U1=new Map;class V1{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Fe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,M0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yp{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V1(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new lR;switch(e.type){case"gapi":return new Yd(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=U1.get(t);e&&(Ge("ComponentProvider","Removing Datastore"),U1.delete(t),e.terminate())}(this),Promise.resolve()}}class Qn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qn(this.firestore,t,this._key)}}class Mr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Mr(this.firestore,t,this._query)}}class la extends Mr{constructor(t,e,i){super(t,e,sh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qn(this.firestore,null,new Xe(t))}withConverter(t){return new la(this.firestore,t,this._path)}}function Nx(n,t,...e){if(n=(0,L.m9)(n),i_("collection","path",t),n instanceof yp){const i=Jt.fromString(t,...e);return Ax(i),new la(n,null,i)}{if(!(n instanceof Qn||n instanceof la))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(t,...e));return Ax(i),new la(n.firestore,null,i)}}function s_(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=Kd.R()),i_("doc","path",t),n instanceof yp){const i=Jt.fromString(t,...e);return L1(i),new Qn(n,null,new Xe(i))}{if(!(n instanceof Qn||n instanceof la))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(t,...e));return L1(i),new Qn(n.firestore,n instanceof la?n.converter:null,new Xe(i))}}function LI(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof Qn||n instanceof la)&&(t instanceof Qn||t instanceof la)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function BI(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof Mr&&t instanceof Mr&&n.firestore===t.firestore&&ch(n._query,t._query)&&n.converter===t.converter}function UI(n,t=10240){let e=0;return{read:()=>(0,pe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class o_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Ci("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class vp{constructor(t,e){this.Pc=t,this.yt=e,this.metadata=new or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,pe.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,pe.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,pe.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const o=yield t.Cc(r);return new w1(JSON.parse(o),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,pe.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,pe.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,pe.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class Rx{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Fe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,pe.Z)(function*(o,l){const h=tt(o),p=Pm(h.yt)+"/documents",y={documents:l.map(P=>km(h.yt,P))},I=yield h._o("BatchGetDocuments",p,y,l.length),T=new Map;I.forEach(P=>{const H=function IF(n,t){return"found"in t?function(e,i){_t(!!i.found);const r=lc(e,i.found.name),o=Si(i.found.updateTime),l=i.found.createTime?Si(i.found.createTime):yt.min(),h=new zr({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(r,o,l,h)}(n,t):"missing"in t?function(e,i){_t(!!i.missing),_t(!!i.readTime);const r=lc(e,i.missing),o=Si(i.readTime);return ii.newNoDocument(r,o)}(n,t):dt()}(h.yt,P);T.set(H.key.toString(),H)});const N=[];return l.forEach(P=>{const H=T.get(P.toString());_t(!!H),N.push(H)}),N}),function(o,l){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Yf(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const o=Xe.fromPath(r);t.mutations.push(new EE(o,t.precondition(o)))}),yield(i=(0,pe.Z)(function*(r,o){const l=tt(r),h=Pm(l.yt)+"/documents",p={writes:o.map(y=>Xf(l.yt,y))};yield l.ao("Commit",h,p)}),function(r,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw dt();e=yt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Fe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(yt.min())?ri.exists(!1):ri.updateTime(e):ri.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(yt.min()))throw new Fe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ri.updateTime(e)}return ri.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class xx{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.kc=i.maxAttempts,this.xo=new dI(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,pe.Z)(function*(){const e=new Rx(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(o=>{t.Fc(o)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!wu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!gS(e)}return!1}}class BF{constructor(t,e,i,r){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=mr.UNAUTHENTICATED,this.clientId=Kd.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,pe.Z)(function*(h){Ge("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ge("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,pe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=gp(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function jI(n,t){return HI.apply(this,arguments)}function HI(){return HI=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,pe.Z)(function*(o){i.isEqual(o)||(yield n1(t.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),HI.apply(this,arguments)}function G1(n,t){return $1.apply(this,arguments)}function $1(){return $1=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield W1(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>Eh(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>Eh(t.remoteStore,o)),n.onlineComponents=t}),$1.apply(this,arguments)}function W1(n){return z1.apply(this,arguments)}function z1(){return z1=(0,pe.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield jI(n,new F1)),n.offlineComponents}),z1.apply(this,arguments)}function a_(n){return GI.apply(this,arguments)}function GI(){return GI=(0,pe.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield G1(n,new A0)),n.onlineComponents}),GI.apply(this,arguments)}function q1(n){return W1(n).then(t=>t.persistence)}function N0(n){return W1(n).then(t=>t.localStore)}function Z1(n){return a_(n).then(t=>t.remoteStore)}function Y1(n){return a_(n).then(t=>t.syncEngine)}function c_(n){return K1.apply(this,arguments)}function K1(){return K1=(0,pe.Z)(function*(n){const t=yield a_(n),e=t.eventManager;return e.onListen=PF.bind(null,t.syncEngine),e.onUnlisten=FF.bind(null,t.syncEngine),e}),K1.apply(this,arguments)}function Q1(n,t,e={}){const i=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(r,o,l,h,p){const y=new o_({next:T=>{o.enqueueAndForget(()=>vI(r,I));const N=T.docs.has(l);!N&&T.fromCache?p.reject(new Fe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&h&&"server"===h.source?p.reject(new Fe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new v0(sh(l.path),y,{includeMetadataChanges:!0,Nu:!0});return m0(r,I)}(yield c_(n),n.asyncQueue,t,e,i)})),i.promise}function Bu(n,t,e={}){const i=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(r,o,l,h,p){const y=new o_({next:T=>{o.enqueueAndForget(()=>vI(r,I)),T.fromCache&&"server"===h.source?p.reject(new Fe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),I=new v0(l,y,{includeMetadataChanges:!0,Nu:!0});return m0(r,I)}(yield c_(n),n.asyncQueue,t,e,i)})),i.promise}class Fx{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dI(this,"async_queue_retry"),this.Wc=()=>{const e=dp();e&&Ge("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=dp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=dp();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise(()=>{});const e=new or;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,pe.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!ic(e))throw e;Ge("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Ci("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=_1.createAndSchedule(this,t,e,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&dt()}verifyOperationInProgress(){}Xc(){var t=this;return(0,pe.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function l_(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class zI{constructor(){this._progressObserver={},this._taskCompletionResolver=new or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ci extends yp{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Fx,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eA(this),this._firestoreClient.terminate()}}function Ai(n){return n._firestoreClient||eA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eA(n){var t;const e=n._freezeSettings(),i=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new fR(n._databaseId,o,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new BF(n._authCredentials,n._appCheckCredentials,n._queue,i)}function tA(n,t,e){const i=new or;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield jI(n,e),yield G1(n,t),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(l=o).name?l.code===fe.FAILED_PRECONDITION||l.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;mu("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var l})).then(()=>i.promise)}function Vx(n){if(n._initialized||n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ua{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ua(Bi.fromBase64String(t))}catch(e){throw new Fe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ua(Bi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class da{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Fe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Dh{constructor(t){this._methodName=t}}class ZI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Fe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Fe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}const jF=/^__.*__$/;class jx{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ac(t,this.data,this.fieldMask,e,this.fieldTransforms):new hh(t,this.data,e,this.fieldTransforms)}}class oA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ac(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function aA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class O0{constructor(t,e,i,r,o,l){this.settings=t,this.databaseId=e,this.yt=i,this.ignoreUndefinedProperties=r,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new O0(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return L0(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(aA(this.sa)&&jF.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class cA{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=i||bh(t)}da(t,e,i,r=!1){return new O0({sa:t,methodName:e,fa:i,path:gi.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Uu(n){const t=n._freezeSettings(),e=bh(n._databaseId);return new cA(n._databaseId,!!t.ignoreUndefinedProperties,e)}function k0(n,t,e,i,r,o={}){const l=n.da(o.merge||o.mergeFields?2:0,t,e,r);F0("Data must be an object, but it was:",l,i);const h=dA(i,l);let p,y;if(o.merge)p=new Wr(l.fieldMask),y=l.fieldTransforms;else if(o.mergeFields){const I=[];for(const T of o.mergeFields){const N=hA(t,T,e);if(!l.contains(N))throw new Fe(fe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);$x(I,N)||I.push(N)}p=new Wr(I),y=l.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=l.fieldTransforms;return new jx(new zr(h),p,y)}class bp extends Dh{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof bp}}function YI(n,t,e){return new O0({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.yt,t.ignoreUndefinedProperties)}class lA extends Dh{_toFieldTransform(t){return new Mm(t.path,new oc)}isEqual(t){return t instanceof lA}}class Hx extends Dh{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=YI(this,t,!0),i=this._a.map(o=>Th(o,e)),r=new lh(i);return new Mm(t.path,r)}isEqual(t){return this===t}}class KI extends Dh{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=YI(this,t,!0),i=this._a.map(o=>Th(o,e)),r=new uh(i);return new Mm(t.path,r)}isEqual(t){return this===t}}class uA extends Dh{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new dh(t.yt,uS(t.yt,this.wa));return new Mm(t.path,e)}isEqual(t){return this===t}}function P0(n,t,e,i){const r=n.da(1,t,e);F0("Data must be an object, but it was:",r,i);const o=[],l=zr.empty();cl(i,(p,y)=>{const I=XI(t,p,e);y=(0,L.m9)(y);const T=r.ca(I);if(y instanceof bp)o.push(I);else{const N=Th(y,T);null!=N&&(o.push(I),l.set(I,N))}});const h=new Wr(o);return new oA(l,h,r.fieldTransforms)}function QI(n,t,e,i,r,o){const l=n.da(1,t,e),h=[hA(t,i,e)],p=[r];if(o.length%2!=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<o.length;N+=2)h.push(hA(t,o[N])),p.push(o[N+1]);const y=[],I=zr.empty();for(let N=h.length-1;N>=0;--N)if(!$x(y,h[N])){const P=h[N];let H=p[N];H=(0,L.m9)(H);const K=l.ca(P);if(H instanceof bp)y.push(P);else{const X=Th(H,K);null!=X&&(y.push(P),I.set(P,X))}}const T=new Wr(y);return new oA(I,T,l.fieldTransforms)}function u_(n,t,e,i=!1){return Th(e,n.da(i?4:3,t))}function Th(n,t){if(JI(n=(0,L.m9)(n)))return F0("Unsupported field value:",t,n),dA(n,t);if(n instanceof Dh)return function(e,i){if(!aA(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let o=0;for(const l of e){let h=Th(l,i.aa(o));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),o++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uS(i.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Fn.fromDate(e);return{timestampValue:Tu(i.yt,r)}}if(e instanceof Fn){const r=new Fn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tu(i.yt,r)}}if(e instanceof ZI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ua)return{bytesValue:SR(i.yt,e._byteString)};if(e instanceof Qn){const r=i.databaseId,o=e.firestore._databaseId;if(!o.isEqual(r))throw i.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ES(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${r_(e)}`)}(n,t)}function dA(n,t){const e={};return Im(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cl(n,(i,r)=>{const o=Th(r,t.ra(i));null!=o&&(e[i]=o)}),{mapValue:{fields:e}}}function JI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof ZI||n instanceof ua||n instanceof Qn||n instanceof Dh)}function F0(n,t,e){if(!JI(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=r_(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function hA(n,t,e){if((t=(0,L.m9)(t))instanceof da)return t._internalPath;if("string"==typeof t)return XI(n,t);throw L0("Field path arguments must be of type string or ",n,!1,void 0,e)}const Gx=new RegExp("[~\\*/\\[\\]]");function XI(n,t,e){if(t.search(Gx)>=0)throw L0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new da(...t.split("."))._internalPath}catch{throw L0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function L0(n,t,e,i,r){const o=i&&!i.isEmpty(),l=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||l)&&(p+=" (found",o&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new Fe(fe.INVALID_ARGUMENT,h+n+p)}function $x(n,t){return n.some(e=>e.isEqual(t))}class B0{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Wx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(U0("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Wx extends B0{data(){return super.data()}}function U0(n,t){return"string"==typeof t?XI(n,t):t instanceof da?t._internalPath:t._delegate._internalPath}function zx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fA{}class V0 extends fA{}function Sh(n,t,...e){let i=[];t instanceof fA&&i.push(t),i=i.concat(e),function(r){const o=r.filter(h=>h instanceof d_).length,l=r.filter(h=>h instanceof j0).length;if(o>1||o>0&&l>0)throw new Fe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class j0 extends V0{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new j0(t,e,i)}_apply(t){const e=this._parse(t);return x(t._query,e),new Mr(t.firestore,t.converter,lS(t._query,e))}_parse(t){const e=Uu(t.firestore);return function(r,o,l,h,p,y,I){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){M(I,y);const N=[];for(const P of I)N.push(C(h,r,P));T={arrayValue:{values:N}}}else T=C(h,r,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||M(I,y),T=u_(l,"where",I,"in"===y||"not-in"===y);return fn.create(p,y,T)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class d_ extends fA{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new d_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:xn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const h of l)x(o,h),o=lS(o,h)}(t._query,e),new Mr(t.firestore,t.converter,lS(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pA extends V0{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new pA(t,e)}_apply(t){const e=function(i,r,o){if(null!==i.startAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new hl(r,o);return function(h,p){if(null===hE(h)){const y=Tv(h);null!==y&&U(0,y,p.field)}}(i,l),l}(t._query,this._field,this._direction);return new Mr(t.firestore,t.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new fl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class H0 extends V0{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new H0(t,e,i)}_apply(t){return new Mr(t.firestore,t.converter,Sm(t._query,this._limit,this._limitType))}}class a extends V0{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new a(t,e,i)}_apply(t){const e=w(t,this.type,this._docOrFields,this._inclusive);return new Mr(t.firestore,t.converter,(r=e,new fl((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class f extends V0{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new f(t,e,i)}_apply(t){const e=w(t,this.type,this._docOrFields,this._inclusive);return new Mr(t.firestore,t.converter,(r=e,new fl((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function w(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof B0)return function(r,o,l,h,p){if(!h)throw new Fe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const I of ah(r))if(I.field.isKeyField())y.push(dl(o,h.key));else{const T=h.data.field(I.field);if(pv(T))throw new Fe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const N=I.field.canonicalString();throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}y.push(T)}return new sc(y,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Uu(n.firestore);return function(o,l,h,p,y,I){const T=o.explicitOrderBy;if(y.length>T.length)throw new Fe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let P=0;P<y.length;P++){const H=y[P];if(T[P].field.isKeyField()){if("string"!=typeof H)throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof H}`);if(!Sv(o)&&-1!==H.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${H}' contains a slash.`);const K=o.path.child(Jt.fromString(H));if(!Xe.isDocumentKey(K))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const X=new Xe(K);N.push(dl(l,X))}else{const K=u_(h,p,H);N.push(K)}}return new sc(N,I)}(n._query,n.firestore._databaseId,r,t,e,i)}}function C(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sv(t)&&-1!==e.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Jt.fromString(e));if(!Xe.isDocumentKey(i))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dl(n,new Xe(i))}if(e instanceof Qn)return dl(n,e._key);throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${r_(e)}.`)}function M(n,t){if(!Array.isArray(n)||0===n.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function x(n,t){if(t.isInequality()){const i=Tv(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=hE(n);null!==o&&U(0,r,o)}const e=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Fe(fe.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function U(n,t,e){if(!e.isEqual(t))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class ee{convertValue(t,e="none"){switch(eh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Di(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw dt()}}convertObject(t,e){const i={};return cl(t.fields,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertGeoPoint(t){return new ZI(Di(t.latitude),Di(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=nE(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp($f(t));default:return null}}convertTimestamp(t){const e=ll(t);return new Fn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Jt.fromString(t);_t(xE(i));const r=new bu(i.get(1),i.get(3)),o=new Xe(i.popFirst(5));return r.isEqual(e)||Ci(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function be(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class je extends ee{constructor(t){super(),this.firestore=t}convertBytes(t){return new ua(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}class Je{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ht extends B0{constructor(t,e,i,r,o,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ae(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(U0("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Ae extends ht{data(t={}){return super.data(t)}}class At{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Je(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Ae(this._firestore,this._userDataWriter,i.key,i,new Je(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Ae(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Je(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const h=new Ae(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Je(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),y=o.indexOf(l.doc.key)),{type:Kt(l.type),doc:h,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Kt(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function On(n,t){return n instanceof ht&&t instanceof ht?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof At&&t instanceof At&&n._firestore===t._firestore&&BI(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Qr extends ee{constructor(t){super(),this.firestore=t}convertBytes(t){return new ua(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}function GF(n,t,e){n=pn(n,Qn);const i=pn(n.firestore,ci),r=be(n.converter,t,e);return G0(i,[k0(Uu(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ri.none())])}function $F(n,t,e,...i){n=pn(n,Qn);const r=pn(n.firestore,ci),o=Uu(r);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof da?QI(o,"updateDoc",n._key,t,e,i):P0(o,"updateDoc",n._key,t),G0(r,[l.toMutation(n._key,ri.exists(!0))])}function WF(n,...t){var e,i,r;n=(0,L.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||l_(t[l])||(o=t[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(l_(t[l])){const T=t[l];t[l]=null===(e=T.next)||void 0===e?void 0:e.bind(T),t[l+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),t[l+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let p,y,I;if(n instanceof Qn)y=pn(n.firestore,ci),I=sh(n._key.path),p={next:T=>{t[l]&&t[l](Qx(y,n,T))},error:t[l+1],complete:t[l+2]};else{const T=pn(n,Mr);y=pn(T.firestore,ci),I=T._query;const N=new Qr(y);p={next:P=>{t[l]&&t[l](new At(y,N,T,P))},error:t[l+1],complete:t[l+2]},zx(n._query)}return function(T,N,P,H){const K=new o_(H),X=new v0(N,K,P);return T.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return m0(yield c_(T),X)})),()=>{K.bc(),T.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return vI(yield c_(T),X)}))}}(Ai(y),I,h,p)}function G0(n,t){return function(e,i){const r=new or;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function II(n,t,e){return w0.apply(this,arguments)}(yield Y1(e),i,r)})),r.promise}(Ai(n),t)}function Qx(n,t,e){const i=e.docs.get(t._key),r=new Qr(n);return new ht(n,r,t._key,i,new Je(e.hasPendingWrites,e.fromCache),t.converter)}const kG={maxAttempts:5};class zF{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Uu(t)}set(t,e,i){this._verifyNotCommitted();const r=Ep(t,this._firestore),o=be(r.converter,e,i),l=k0(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,ri.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=Ep(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof da?QI(this._dataReader,"WriteBatch.update",o._key,e,i,r):P0(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(l.toMutation(o._key,ri.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Ep(t,this._firestore);return this._mutations=this._mutations.concat(new Yf(e._key,ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ep(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Fe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class PG extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Uu(t)}get(t){const e=Ep(t,this._firestore),i=new je(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return dt();const o=r[0];if(o.isFoundDocument())return new B0(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new B0(this._firestore,i,e._key,null,e.converter);throw dt()})}set(t,e,i){const r=Ep(t,this._firestore),o=be(r.converter,e,i),l=k0(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(t,e,i,...r){const o=Ep(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof da?QI(this._dataReader,"Transaction.update",o._key,e,i,r):P0(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,l),this}delete(t){const e=Ep(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Ep(t,this._firestore),i=new Qr(this._firestore);return super.get(t).then(r=>new ht(this._firestore,i,e._key,r._document,new Je(!1,!1),e.converter))}}function Jx(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function ZF(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function YF(){if(!function pR(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){jf=cs.SDK_VERSION,(0,cs._registerComponent)(new ea.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const o=e.getProvider("app").getImmediate(),l=new ci(new ym(e.getProvider("auth-internal")),new Ro(e.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Fe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(h.options.projectId,p)}(o,i),o);return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(UT,"3.8.1",n),(0,cs.registerVersion)(UT,"3.8.1","esm2017")}();class tC{constructor(t){this._delegate=t}static fromBase64String(t){return YF(),new tC(ua.fromBase64String(t))}static fromUint8Array(t){return ZF(),new tC(ua.fromUint8Array(t))}toBase64(){return YF(),this._delegate.toBase64()}toUint8Array(){return ZF(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Xx(n){return function $G(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class WG{enableIndexedDbPersistence(t,e){return function Lx(n,t){Vx(n=pn(n,ci));const e=Ai(n),i=n._freezeSettings(),r=new A0;return tA(e,r,new S0(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Bx(n){Vx(n=pn(n,ci));const t=Ai(n),e=n._freezeSettings(),i=new A0;return tA(t,i,new Lu(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function nA(n){if(n._initialized&&!n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(e=(0,pe.Z)(function*(i){if(!ra.C())return Promise.resolve();const r=i+"main";yield ra.delete(r)}),function(i){return e.apply(this,arguments)})(eI(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class KF{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof bu||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&mu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function Mx(n,t,e,i={}){var r;const o=(n=pn(n,yp))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&mu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let l,h;if("string"==typeof i.mockUserToken)l=i.mockUserToken,h=mr.MOCK_USER;else{l=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Fe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mr(p)}n._authCredentials=new tc(new cv(l,h))}}(this._delegate,t,e,i)}enableNetwork(){return function rA(n){return function kx(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield q1(n),e=yield Z1(n);return t.setNetworkEnabled(!0),function(i){const r=tt(i);return r._u.delete(0),hp(r)}(e)}))}(Ai(n=pn(n,ci)))}(this._delegate)}disableNetwork(){return function Ux(n){return function R0(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield q1(n),e=yield Z1(n);return t.setNetworkEnabled(!1),(i=(0,pe.Z)(function*(r){const o=tt(r);o._u.add(0),yield wh(o),o.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Ai(n=pn(n,ci)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,M0("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iA(n){return function(t){const e=new or;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function wx(n,t){return M1.apply(this,arguments)}(yield Y1(t),e)})),e.promise}(Ai(n=pn(n,ci)))}(this._delegate)}onSnapshotsInSync(t){return function OG(n,t){return function X1(n,t){const e=new o_(t);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield c_(n),r=e,tt(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield c_(n),r=e,void tt(i).Ru.delete(r);var i,r}))}}(Ai(n=pn(n,ci)),l_(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new $0(this,Nx(this._delegate,t))}catch(e){throw oo(e,"collection()","Firestore.collection()")}}doc(t){try{return new dc(this,s_(this._delegate,t))}catch(e){throw oo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ao(this,function FI(n,t){if(n=pn(n,yp),i_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mr(n,null,(e=t,new fl(Jt.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw oo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function FG(n,t,e){n=pn(n,ci);const i=Object.assign(Object.assign({},kG),e);return function(r){if(r.maxAttempts<1)throw new Fe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,l){const h=new or;return r.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const p=yield function Ox(n){return a_(n).then(t=>t.datastore)}(r);new xx(r.asyncQueue,p,l,o,h).run()})),h.promise}(Ai(n),r=>t(new PG(n,r)),i)}(this._delegate,e=>t(new QF(this,e)))}batch(){return Ai(this._delegate),new JF(new zF(this._delegate,t=>G0(this._delegate,t)))}loadBundle(t){return function sA(n,t){const e=Ai(n=pn(n,ci)),i=new zI;return function $I(n,t,e,i){const r=function(o,l){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,y){if(p instanceof Uint8Array)return UI(p,y);if(p instanceof ArrayBuffer)return UI(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new vp(p,l);var p}(e,bh(t));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function P1(n,t,e){const i=tt(n);var r;(r=(0,pe.Z)(function*(o,l,h){try{const p=yield l.getMetadata();if(yield function(N,P){const H=tt(N),K=Si(P.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",X=>H.Ns.getBundleMetadata(X,P.id)).then(X=>!!X&&X.createTime.compareTo(K)>=0)}(o.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=p).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(E1(p));const y=new mx(p,o.localStore,l.yt);let I=yield l.mc();for(;I;){const N=yield y.Fu(I);N&&h._updateProgress(N),I=yield l.mc()}const T=yield y.complete();return yield yl(o,T.Lu,void 0),yield function(N,P){const H=tt(N);return H.persistence.runTransaction("Save bundle","readwrite",K=>H.Ns.saveBundleMetadata(K,P))}(o.localStore,p),h._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return mu("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var N}),function(o,l,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Y1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function qI(n,t){return function WI(n,t){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(e,i){const r=tt(e);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ns.getNamedQuery(o,i))}(yield N0(n),t)}))}(Ai(n=pn(n,ci)),t).then(e=>e?new Mr(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ao(this,e):null)}}class gA extends ee{constructor(t){super(),this.firestore=t}convertBytes(t){return new tC(new ua(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return dc.forKey(e,this.firestore,null)}}class QF{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gA(t)}get(t){const e=f_(t);return this._delegate.get(e).then(i=>new nC(this._firestore,new ht(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=f_(t);return i?(Jx("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=f_(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=f_(t);return this._delegate.delete(e),this}}class JF{constructor(t){this._delegate=t}set(t,e,i){const r=f_(t);return i?(Jx("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=f_(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=f_(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class h_{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new Ae(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new iC(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=h_.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new h_(t,new gA(t),e),r.set(e,o)),o}}h_.INSTANCES=new WeakMap;class dc{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gA(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new dc(e,new Qn(e._delegate,i,new Xe(t)))}static forKey(t,e,i){return new dc(e,new Qn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new $0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new $0(this.firestore,Nx(this._delegate,t))}catch(e){throw oo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof Qn&&LI(this._delegate,t)}set(t,e){e=Jx("DocumentReference.set",e);try{return e?GF(this._delegate,t,e):GF(this._delegate,t)}catch(i){throw oo(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?$F(this._delegate,t):$F(this._delegate,t,e,...i)}catch(r){throw oo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function RG(n){return G0(pn(n.firestore,ci),[new Yf(n._key,ri.none())])}(this._delegate)}onSnapshot(...t){const e=XF(t),i=eL(t,r=>new nC(this.firestore,new ht(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return WF(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function wp(n){n=pn(n,Qn);const t=pn(n.firestore,ci),e=Ai(t),i=new Qr(t);return function Px(n,t){const e=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(r,o,l){try{const h=yield function(p,y){const I=tt(p);return I.persistence.runTransaction("read document","readonly",T=>I.localDocuments.getDocument(T,y))}(r,o);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Fe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=gp(h,`Failed to get document '${o} from cache`);l.reject(p)}}),function(r,o,l){return i.apply(this,arguments)})(yield N0(n),t,e);var i})),e.promise}(e,n._key).then(r=>new ht(t,i,n._key,r,new Je(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function eC(n){n=pn(n,Qn);const t=pn(n.firestore,ci);return Q1(Ai(t),n._key,{source:"server"}).then(e=>Qx(t,n,e))}(this._delegate):function Rs(n){n=pn(n,Qn);const t=pn(n.firestore,ci);return Q1(Ai(t),n._key).then(e=>Qx(t,n,e))}(this._delegate),e.then(i=>new nC(this.firestore,new ht(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new dc(this.firestore,this._delegate.withConverter(t?h_.getInstance(this.firestore,t):null))}}function oo(n,t,e){return n.message=n.message.replace(t,e),n}function XF(n){for(const t of n)if("object"==typeof t&&!Xx(t))return t;return{}}function eL(n,t){var e,i;let r;return r=Xx(n[0])?n[0]:Xx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class nC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new dc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return On(this._delegate,t._delegate)}}class iC extends nC{data(t){const e=this._delegate.data(t);return function VT(n,t){n||dt()}(void 0!==e),e}}class ao{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gA(t)}where(t,e,i){try{return new ao(this.firestore,Sh(this._delegate,function qx(n,t,e){const i=t,r=U0("where",n);return j0._create(r,i,e)}(t,e,i)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ao(this.firestore,Sh(this._delegate,function Zx(n,t="asc"){const e=t,i=U0("orderBy",n);return pA._create(i,e)}(t,e)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ao(this.firestore,Sh(this._delegate,function HF(n){return B1("limit",n),H0._create("limit",n,"F")}(t)))}catch(e){throw oo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ao(this.firestore,Sh(this._delegate,function s(n){return B1("limitToLast",n),H0._create("limitToLast",n,"L")}(t)))}catch(e){throw oo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ao(this.firestore,Sh(this._delegate,function c(...n){return a._create("startAt",n,!0)}(...t)))}catch(e){throw oo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ao(this.firestore,Sh(this._delegate,function d(...n){return a._create("startAfter",n,!1)}(...t)))}catch(e){throw oo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ao(this.firestore,Sh(this._delegate,function m(...n){return f._create("endBefore",n,!1)}(...t)))}catch(e){throw oo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ao(this.firestore,Sh(this._delegate,function v(...n){return f._create("endAt",n,!0)}(...t)))}catch(e){throw oo(e,"endAt()","Query.endAt()")}}isEqual(t){return BI(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function Kx(n){n=pn(n,Mr);const t=pn(n.firestore,ci),e=Ai(t),i=new Qr(t);return function J1(n,t){const e=new or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(r,o,l){try{const h=yield Xv(r,o,!0),p=new yx(o,h.Hi),y=p.Wu(h.documents),I=p.applyChanges(y,!1);l.resolve(I.snapshot)}catch(h){const p=gp(h,`Failed to execute query '${o} against cache`);l.reject(p)}}),function(r,o,l){return i.apply(this,arguments)})(yield N0(n),t,e);var i})),e.promise}(e,n._query).then(r=>new At(t,i,n,r))}(this._delegate):"server"===t?.source?function NG(n){n=pn(n,Mr);const t=pn(n.firestore,ci),e=Ai(t),i=new Qr(t);return Bu(e,n._query,{source:"server"}).then(r=>new At(t,i,n,r))}(this._delegate):function Yx(n){n=pn(n,Mr);const t=pn(n.firestore,ci),e=Ai(t),i=new Qr(t);return zx(n._query),Bu(e,n._query).then(r=>new At(t,i,n,r))}(this._delegate),e.then(i=>new eO(this.firestore,new At(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=XF(t),i=eL(t,r=>new eO(this.firestore,new At(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return WF(this._delegate,e,i)}withConverter(t){return new ao(this.firestore,this._delegate.withConverter(t?h_.getInstance(this.firestore,t):null))}}class qG{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new iC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eO{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new iC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new qG(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new iC(this._firestore,i))})}isEqual(t){return On(this._delegate,t._delegate)}}class $0 extends ao{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new dc(this.firestore,t):null}doc(t){try{return new dc(this.firestore,void 0===t?s_(this._delegate):s_(this._delegate,t))}catch(e){throw oo(e,"doc()","CollectionReference.doc()")}}add(t){return function xG(n,t){const e=pn(n.firestore,ci),i=s_(n),r=be(n.converter,t);return G0(e,[k0(Uu(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ri.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new dc(this.firestore,e))}isEqual(t){return LI(this._delegate,t._delegate)}withConverter(t){return new $0(this.firestore,this._delegate.withConverter(t?h_.getInstance(this.firestore,t):null))}}function f_(n){return pn(n,Qn)}class tO{constructor(...t){this._delegate=new da(...t)}static documentId(){return new tO(gi.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof da&&this._delegate._internalPath.isEqual(t._internalPath)}}class p_{constructor(t){this._delegate=t}static serverTimestamp(){const t=function BG(){return new lA("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new p_(t)}static delete(){const t=function LG(){return new bp("deleteField")}();return t._methodName="FieldValue.delete",new p_(t)}static arrayUnion(...t){const e=function UG(...n){return new Hx("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new p_(e)}static arrayRemove(...t){const e=function VG(...n){return new KI("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new p_(e)}static increment(t){const e=function jG(n){return new uA("increment",n)}(t);return e._methodName="FieldValue.increment",new p_(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const ZG={Firestore:KF,GeoPoint:ZI,Timestamp:Fn,Blob:tC,Transaction:QF,WriteBatch:JF,DocumentReference:dc,DocumentSnapshot:nC,Query:ao,QueryDocumentSnapshot:iC,QuerySnapshot:eO,CollectionReference:$0,FieldPath:tO,FieldValue:p_,setLogLevel:function zG(n){!function cR(n){gu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function KG(n){(function YG(n,t){n.INTERNAL.registerComponent(new ea.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},ZG)))})(n,(t,e)=>new KF(t,e,new WG)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(Tf.Z);var mA=F(3019),_A=F(3093),QG=F(4552);class JG extends tn.x{constructor(t=1/0,e=1/0,i=QG.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;e||(i.push(t),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!t.closed;l+=i?1:2)t.next(o[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=e.now();let h=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)h=p;h&&i.splice(0,h+1)}}}var nO=F(3020);function tL(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,nO.B)({connector:()=>new JG(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function nL(n,t){return(0,zi.m)(t)?(0,Nn.w)(()=>n,t):(0,Nn.w)(()=>n)}var iO=F(5137);F(3182);const sO=new Map,rL={activated:!1,tokenObservers:[]},i$={initialized:!1,enabled:!1};function ds(n){return sO.get(n)||Object.assign({},rL)}function vA(){return i$}const oO="https://content-firebaseappcheck.googleapis.com/v1",a$="exchangeDebugToken",sL={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class l${constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,pe.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function u$(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const co=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lO(){return lO=(0,pe.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const T=yield r.getHeartbeatsHeader();T&&(i["X-Firebase-Client"]=T)}const o={method:"POST",body:JSON.stringify(t),headers:i};let l,h;try{l=yield fetch(n,o)}catch(T){throw co.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw co.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(T){throw co.create("fetch-parse-error",{originalErrorMessage:T?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw co.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),I=Date.now();return{token:h.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}}),lO.apply(this,arguments)}const g$="firebase-app-check-database",m$=1,rC="firebase-app-check-store";let EA=null;function uO(){return uO=(0,pe.Z)(function*(n,t){const i=(yield function cL(){return EA||(EA=new Promise((n,t)=>{try{const e=indexedDB.open(g$,m$);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(co.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(rC,{keyPath:"compositeKey"})}}catch(e){t(co.create("storage-open",{originalErrorMessage:e?.message}))}}),EA)}()).transaction(rC,"readwrite"),o=i.objectStore(rC).put({compositeKey:n,value:t});return new Promise((l,h)=>{o.onsuccess=p=>{l()},i.onerror=p=>{var y;h(co.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),uO.apply(this,arguments)}const sC=new No.Yd("@firebase/app-check");function fO(n,t){return(0,L.hl)()?function y$(n,t){return function lL(n,t){return uO.apply(this,arguments)}(function dL(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{sC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function gO(){return gO=(0,pe.Z)(function*(){const n=vA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),gO.apply(this,arguments)}const C$={error:"UNKNOWN_ERROR"};function D$(n){return L.US.encodeString(JSON.stringify(n),!1)}function IA(n){return mO.apply(this,arguments)}function mO(){return mO=(0,pe.Z)(function*(n,t=!1){const e=n.app;!function oL(n){if(!ds(n).activated)throw co.create("use-before-activation",{appName:n.name})}(e);const i=ds(e);let o,r=i.token;if(r&&!W0(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(W0(p)?r=p:yield fO(e,void 0))}if(!t&&r&&W0(r))return{token:r.token};let h,l=!1;if(function hL(){return vA().enabled}()){i.exchangeTokenPromise||(i.exchangeTokenPromise=function cO(n,t){return lO.apply(this,arguments)}(function p$(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${oO}/projects/${e}/apps/${i}:${a$}?key=${r}`,body:{debug_token:t}}}(e,yield function fL(){return gO.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const p=yield i.exchangeTokenPromise;return yield fO(e,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield ds(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?sC.warn(p.message):sC.error(p),o=p}return r?o?h=W0(r)?{token:r.token,internalError:o}:mL(o):(h={token:r.token},i.token=r,yield fO(e,r)):h=mL(o),l&&function gL(n,t){const e=ds(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,h),h}),mO.apply(this,arguments)}function yO(n,t){const e=ds(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function pL(n){const{app:t}=n,e=ds(t);let i=e.tokenRefresher;i||(i=function T$(n){const{app:t}=n;return new l$((0,pe.Z)(function*(){let i;if(i=ds(t).token?yield IA(n,!0):yield IA(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ds(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},sL.RETRIAL_MIN_WAIT,sL.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function W0(n){return n.expireTimeMillis-Date.now()>0}function mL(n){return{token:D$(C$),error:n}}class S${constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ds(this.app);for(const e of t)yO(this.app,e.next);return Promise.resolve()}}const CL="app-check-internal";!function j$(){(0,cs._registerComponent)(new ea.wA("app-check",n=>function A$(n,t){return new S$(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(CL).initialize()})),(0,cs._registerComponent)(new ea.wA(CL,n=>function M$(n){return{getToken:t=>IA(n,t),addTokenListener:t=>function _O(n,t,e,i){const{app:r}=n,o=ds(r);if(o.tokenObservers=[...o.tokenObservers,{next:e,error:i,type:t}],o.token&&W0(o.token)){const h=o.token;Promise.resolve().then(()=>{e({token:h.token}),pL(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pL(n))}(n,"INTERNAL",t),removeTokenListener:t=>yO(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,cs.registerVersion)("@firebase/app-check","0.6.1")}();class oC{constructor(){return(0,_n.vb)("app-check")}}typeof window<"u"&&window;var DA=F(7142);const IO=new u.OlP("angularfire2.auth.use-emulator"),CO=new u.OlP("angularfire2.auth.settings"),DO=new u.OlP("angularfire2.auth.tenant-id"),TO=new u.OlP("angularfire2.auth.langugage-code"),SO=new u.OlP("angularfire2.auth.use-device-language"),AO=new u.OlP("angularfire.auth.persistence"),MO=(n,t,e,i,r,o,l,h)=>(0,Ii.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,o&&p.useDeviceLanguage(),l)for(const[y,I]of Object.entries(l))p.settings[y]=I;return h&&p.setPersistence(h),p},[e,i,r,o,l,h]);let aC=(()=>{class n{constructor(e,i,r,o,l,h,p,y,I,T,N,P){const H=new tn.x,K=(0,nt.of)(void 0).pipe((0,_A.Q)(l.outsideAngular),(0,Nn.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8443)))),(0,pt.U)(()=>(0,Ii.on)(e,o,i)),(0,pt.U)(X=>MO(X,o,h,y,I,T,p,N)),tL({bufferSize:1,refCount:!1}));if(Xn(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,nt.of)(null);else{K.pipe(rr()).subscribe();const xe=K.pipe((0,Nn.w)(Oe=>Oe.getRedirectResult().then(Ze=>Ze,()=>null)),_n.iC,tL({bufferSize:1,refCount:!1})),Ue=K.pipe((0,Nn.w)(Oe=>new Hn.y(Ze=>({unsubscribe:o.runOutsideAngular(()=>Oe.onAuthStateChanged(et=>Ze.next(et),et=>Ze.error(et),()=>Ze.complete()))})))),$e=K.pipe((0,Nn.w)(Oe=>new Hn.y(Ze=>({unsubscribe:o.runOutsideAngular(()=>Oe.onIdTokenChanged(et=>Ze.next(et),et=>Ze.error(et),()=>Ze.complete()))}))));this.authState=xe.pipe(nL(Ue),(0,iO.R)(l.outsideAngular),(0,_A.Q)(l.insideAngular)),this.user=xe.pipe(nL($e),(0,iO.R)(l.outsideAngular),(0,_A.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Nn.w)(Oe=>Oe?(0,En.D)(Oe.getIdToken()):(0,nt.of)(null))),this.idTokenResult=this.user.pipe((0,Nn.w)(Oe=>Oe?(0,En.D)(Oe.getIdTokenResult()):(0,nt.of)(null))),this.credential=(0,mA.T)(xe,H,this.authState.pipe(Dn(Oe=>!Oe))).pipe((0,pt.U)(Oe=>Oe?.user?Oe:null),(0,iO.R)(l.outsideAngular),(0,_A.Q)(l.insideAngular))}return(0,Ii.pX)(this,K,o,{spy:{apply:(X,xe,Ue)=>{(X.startsWith("signIn")||X.startsWith("createUser"))&&Ue.then($e=>H.next($e))}}})}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Ii.Dh),u.LFG(Ii.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(IO,8),u.LFG(CO,8),u.LFG(DO,8),u.LFG(TO,8),u.LFG(SO,8),u.LFG(AO,8),u.LFG(oC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q$=(()=>{class n{constructor(){DA.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[aC]}),n})();function TL(n,t){return function Z$(n,t=Ld.z){return new Hn.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function NO(n,t){return TL(n,t).pipe((0,pt.U)(e=>({payload:e,type:"query"})))}function TA(n,t){return NO(n,t).pipe(qi(void 0),sw(),(0,pt.U)(([e,i])=>{const r=i.payload.docChanges(),o=r.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,h)=>{const p=r.find(I=>I.doc.ref.isEqual(l.ref)),y=e?.payload.docs.find(I=>I.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),o}))}function SL(n,t,e){return TA(n,e).pipe(Ko((i,r)=>function K$(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function Q$(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return RO(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return RO(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return RO(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),t),[]),(0,Kg.x)(),(0,pt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function RO(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function AL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ML{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=TA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,pt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(qi(void 0),sw(),Dn(([i,r])=>r.length>0||!i),(0,pt.U)(([i,r])=>r),_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ko((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=AL(t);return SL(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return NO(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),_n.iC)}get(t){return(0,En.D)(this.query.get(t)).pipe(_n.iC)}add(t){return this.ref.add(t)}doc(t){return new NL(this.ref.doc(t),this.afs)}}class NL{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:o}=OL(i,e);return new ML(r,o,this.afs)}snapshotChanges(){return function Y$(n,t){return TL(n,t).pipe(qi(void 0),sw(),(0,pt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,En.D)(this.ref.get(t)).pipe(_n.iC)}}class J${constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?TA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Dn(e=>e.length>0),_n.iC):TA(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ko((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=AL(t);return SL(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return NO(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),_n.iC)}get(t){return(0,En.D)(this.query.get(t)).pipe(_n.iC)}}const RL=new u.OlP("angularfire2.enableFirestorePersistence"),xL=new u.OlP("angularfire2.firestore.persistenceSettings"),X$=new u.OlP("angularfire2.firestore.settings"),e3=new u.OlP("angularfire2.firestore.use-emulator");function OL(n,t=(e=>e)){return{query:t(n),ref:n}}let kL=(()=>{class n{constructor(e,i,r,o,l,h,p,y,I,T,N,P,H,K,X,xe,Ue){this.schedulers=p;const $e=(0,Ii.on)(e,h,i),Oe=I;T&&MO($e,h,N,H,K,X,P,xe),[this.firestore,this.persistenceEnabled$]=(0,Ii.cc)(`${$e.name}.firestore`,"AngularFirestore",$e.name,()=>{const Ze=h.runOutsideAngular(()=>$e.firestore());if(o&&Ze.settings(o),Oe&&Ze.useEmulator(...Oe),r&&!Xn(l)){const et=()=>{try{return(0,En.D)(Ze.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Lt){return typeof console<"u"&&console.warn(Lt),(0,nt.of)(!1)}};return[Ze,h.runOutsideAngular(et)]}return[Ze,(0,nt.of)(!1)]},[o,Oe,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:l}=OL(r,i),h=this.schedulers.ngZone.run(()=>o);return new ML(h,l,this)}collectionGroup(e,i){const r=i||(l=>l),o=this.firestore.collectionGroup(e);return new J$(r(o),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new NL(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Ii.Dh),u.LFG(Ii.xv,8),u.LFG(RL,8),u.LFG(X$,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(xL,8),u.LFG(e3,8),u.LFG(aC,8),u.LFG(IO,8),u.LFG(CO,8),u.LFG(DO,8),u.LFG(TO,8),u.LFG(SO,8),u.LFG(AO,8),u.LFG(oC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),t3=(()=>{class n{constructor(){DA.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:RL,useValue:!0},{provide:xL,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[kL]}),n})(),Ip=(()=>{class n{constructor(e,i,r,o){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=o,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(o=>{o&&this.router.navigate(["/notes"])})}).catch(r=>{window.alert(r.message)})}SignUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.userData=null,this.router.navigate(["sign-in"])})}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(kL),u.LFG(aC),u.LFG(as),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PL(...n){const t=(0,Is.jO)(n),{args:e,keys:i}=In(n),r=new Hn.y(o=>{const{length:l}=e;if(!l)return void o.complete();const h=new Array(l);let p=l,y=l;for(let I=0;I<l;I++){let T=!1;(0,Se.Xf)(e[I]).subscribe((0,Zn.x)(o,N=>{T||(T=!0,y--),h[I]=N},()=>p--,void 0,()=>{(!p||!T)&&(y||o.next(i?Cs(i,h):h),o.complete())}))}});return t?r.pipe(Hr(t)):r}let FL=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),g_=(()=>{class n extends FL{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const hc=new u.OlP("NgValueAccessor"),r3={provide:hc,useExisting:(0,u.Gpc)(()=>SA),multi:!0},o3=new u.OlP("CompositionEventMode");let SA=(()=>{class n extends FL{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function s3(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(o3,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&u.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[u._Bn([r3]),u.qOj]})}return n})();const hs=new u.OlP("NgValidators"),Dp=new u.OlP("NgAsyncValidators");function qL(n){return null!=n}function ZL(n){return(0,u.QGY)(n)?(0,En.D)(n):n}function YL(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function KL(n,t){return t.map(e=>e(n))}function QL(n){return n.map(t=>function c3(n){return!n.validate}(t)?t:e=>t.validate(e))}function xO(n){return null!=n?function JL(n){if(!n)return null;const t=n.filter(qL);return 0==t.length?null:function(e){return YL(KL(e,t))}}(QL(n)):null}function OO(n){return null!=n?function XL(n){if(!n)return null;const t=n.filter(qL);return 0==t.length?null:function(e){return PL(KL(e,t).map(ZL)).pipe((0,pt.U)(YL))}}(QL(n)):null}function e2(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function kO(n){return n?Array.isArray(n)?n:[n]:[]}function MA(n,t){return Array.isArray(n)?n.includes(t):n===t}function i2(n,t){const e=kO(t);return kO(n).forEach(r=>{MA(e,r)||e.push(r)}),e}function r2(n,t){return kO(t).filter(e=>!MA(n,e))}class s2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=OO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class lo extends s2{get formDirective(){return null}get path(){return null}}class Tp extends s2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class o2{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let a2=(()=>{class n extends o2{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Tp,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]})}return n})(),PO=(()=>{class n extends o2{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(lo,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]})}return n})();const cC="VALID",RA="INVALID",z0="PENDING",lC="DISABLED";function BO(n){return(xA(n)?n.validators:n)||null}function UO(n,t){return(xA(t)?t.asyncValidators:n)||null}function xA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class d2{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===cC}get invalid(){return this.status===RA}get pending(){return this.status==z0}get disabled(){return this.status===lC}get enabled(){return this.status!==lC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(i2(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(i2(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(r2(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(r2(t,this._rawAsyncValidators))}hasValidator(t){return MA(this._rawValidators,t)}hasAsyncValidator(t){return MA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=z0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lC,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=cC,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cC||this.status===z0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lC:cC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=z0,this._hasOwnPendingAsyncValidator=!0;const e=ZL(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?lC:this.errors?RA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z0)?z0:this._anyControlsHaveStatus(RA)?RA:cC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){xA(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function h3(n){return Array.isArray(n)?xO(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function f3(n){return Array.isArray(n)?OO(n):n||null}(this._rawAsyncValidators)}}class VO extends d2{constructor(t,e,i){super(BO(e),UO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function u2(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new u.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function l2(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[e])throw new u.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const q0=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>OA}),OA="always";function uC(n,t,e=OA){jO(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function m3(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&h2(n,t)})}(n,t),function y3(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function _3(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&h2(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function g3(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function FA(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function jO(n,t){const e=function t2(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(e2(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function n2(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(e2(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();FA(t._rawValidators,r),FA(t._rawAsyncValidators,r)}function h2(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const I3={provide:lo,useExisting:(0,u.Gpc)(()=>hC)},dC=(()=>Promise.resolve())();let hC=(()=>{class n extends lo{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new VO({},xO(e),OO(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){dC.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),uC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){dC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){dC.then(()=>{const i=this._findContainer(e.path),r=new VO({});(function f2(n,t){jO(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){dC.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){dC.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function p2(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(hs,10),u.Y36(Dp,10),u.Y36(q0,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&u.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([I3]),u.qOj]})}return n})();function g2(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function m2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _2=class extends d2{constructor(t=null,e,i){super(BO(e),UO(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xA(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=m2(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){g2(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){g2(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){m2(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},T3={provide:Tp,useExisting:(0,u.Gpc)(()=>WO)},b2=(()=>Promise.resolve())();let WO=(()=>{class n extends Tp{constructor(e,i,r,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new _2,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function $O(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===SA?e=o:function w3(n){return Object.getPrototypeOf(n.constructor)===g_}(o)?i=o:r=o}),r||i||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function GO(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){b2.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,u.VuI)(i);b2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function kA(n,t){return[...t.path,n]}(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(lo,9),u.Y36(hs,10),u.Y36(Dp,10),u.Y36(hc,10),u.Y36(u.sBO,8),u.Y36(q0,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([T3]),u.qOj,u.TTD]})}return n})(),zO=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),E2=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),K3=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[E2]})}return n})(),J3=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:q0,useValue:e.callSetDisabledState??OA}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[K3]})}return n})();const X3=function(){return["/dashboard"]};function eW(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",9)(1,"form",10)(2,"li",11)(3,"a",12)(4,"strong"),u._uU(5),u.qZA()()(),u.TgZ(6,"li",11)(7,"a",13),u.NdJ("click",function(){u.CHM(e);const r=u.oxw();return u.KtG(r.SignOut())}),u._uU(8,"Log out"),u.qZA()()()()}if(2&n){const e=t.ngIf;u.xp6(3),u.Q6J("routerLink",u.DdM(2,X3)),u.xp6(2),u.Oqu(e.displayName?e.displayName:e.email)}}let XO,tW=(()=>{class n{constructor(e){this.authService=e}onNgInit(){}SignOut(){this.authService.SignOut()}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-top-panel"]],decls:9,vars:1,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-gradient-light"],[1,"container-fluid"],["href","/",1,"navbar-brand"],["src","/assets/logo.svg","alt","logo","aria-hidden","true",1,"brand-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["class","row",4,"ngIf"],[1,"row"],[1,"d-flex","navbar-nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-link",3,"click"]],template:function(i,r){1&i&&(u.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),u._UZ(3,"img",3),u.qZA(),u.TgZ(4,"button",4),u._UZ(5,"span",5),u.qZA(),u.TgZ(6,"div",6),u._UZ(7,"ul",7),u.YNc(8,eW,9,3,"div",8),u.qZA()()()),2&i&&(u.xp6(8),u.Q6J("ngIf",r.authService.userData))},dependencies:[Fd,Hi,zO,PO,hC],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{--hover: rgba(0, 115, 255, .585);--background: rgba(220, 218, 218, .176);--top-panel-height: 64px}body[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:1.5rem;margin:0}.container-fluid[_ngcontent-%COMP%]{background-image:url(/assets/decorative-waves.svg);background-position:center;background-repeat:no-repeat;background-size:auto 64px}.top-panel[_ngcontent-%COMP%]{height:var(--top-panel-height)}.brand-logo[_ngcontent-%COMP%]{width:var(--top-panel-height)}.nav-item[_ngcontent-%COMP%]{cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover{border-radius:5px;border:1px solid var(--hover)}"]})}return n})(),nW=(()=>{class n{constructor(){this.title="universal-note"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(i,r){1&i&&u._UZ(0,"app-top-panel")(1,"router-outlet")},dependencies:[Y,tW]})}return n})();try{XO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{XO=!1}let fC,ek=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Nl(n){return n===Ur}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!XO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BA(n){return function iW(){if(null==fC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fC=!0}))}finally{fC=fC||!1}return fC}()?n:!!n.capture}function j2(n){return Array.isArray(n)?n:[n]}function $2(n,t=Ld.z){return(0,Cn.e)((e,i)=>{let r=null,o=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=o;o=null,i.next(y)}};function p(){const y=l+n,I=t.now();if(I<y)return r=this.schedule(void 0,y-I),void i.add(r);h()}e.subscribe((0,Zn.x)(i,y=>{o=y,l=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{o=r=null}))})}const W2=new Set;let y_,pW=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):mW}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function gW(n,t){if(!W2.has(n))try{y_||(y_=document.createElement("style"),t&&(y_.nonce=t),y_.setAttribute("type","text/css"),document.head.appendChild(y_)),y_.sheet&&(y_.sheet.insertRule(`@media ${n} {body{ }}`,0),W2.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ek),u.LFG(u.Ojb,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mW(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let _W=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new tn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return z2(j2(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=Yo(z2(j2(e)).map(l=>this._registerQuery(l).observable));return o=oe(o.pipe(sn(1)),o.pipe(function G2(n){return Dn((t,e)=>n<=e)}(1),$2(0))),o.pipe((0,pt.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),o={observable:new Hn.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(qi(i),(0,pt.U)(({matches:l})=>({query:e,matches:l})),ni(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(pW),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z2(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const K2="cdk-high-contrast-black-on-white",Q2="cdk-high-contrast-white-on-black",nk="cdk-high-contrast-active";let AW=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,u.f3M)(_W).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(nk,K2,Q2),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(nk,K2):2===i&&e.add(nk,Q2)}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ek),u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J2=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const xW=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function RW(){return!0}});let tB=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!function oW(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(AW),u.LFG(xW,8),u.LFG(ue))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[J2,J2]})}return n})();function OW(n,t){return class extends n{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}const kW=new u.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function PW(){return(0,u.f3M)(u.soG)}});class nB{constructor(){this._localeChanges=new tn.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const FW=new u.OlP("mat-date-formats"),LW=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function ik(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let BW=(()=>{class n extends nB{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return ik(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return ik(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return ik(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let o=this._createDateWithOverflow(e,i,r);return o.getMonth(),o}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(LW.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const o=new Date;return o.setFullYear(e,i,r),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(kW,8),u.LFG(ek))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const UW={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let VW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[{provide:nB,useClass:BW}]})}return n})(),jW=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[{provide:FW,useValue:UW}],imports:[VW]})}return n})();const iB=BA({passive:!0,capture:!0});class GW{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=function sW(n){return n.composedPath?n.composedPath()[0]:n.target}(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,i,r){const o=this._events.get(e);if(o){const l=o.get(i);l?l.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,iB)})}removeHandler(t,e,i){const r=this._events.get(t);if(!r)return;const o=r.get(e);o&&(o.delete(i),0===o.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,iB)))}}class rk{static#e=this._eventManager=new GW;constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=H2(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...rB,...i.animation},l=i.radius||function WW(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),h=t-r.left,p=e-r.top,y=o.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=h-l+"px",I.style.top=p-l+"px",I.style.height=2*l+"px",I.style.width=2*l+"px",null!=i.color&&(I.style.backgroundColor=i.color),I.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(I);const T=window.getComputedStyle(I),P=T.transitionDuration,H="none"===T.transitionProperty||"0s"===P||"0s, 0s"===P||0===r.width&&0===r.height,K=new HW(this,I,i,H);I.style.transform="scale3d(1, 1, 1)",K.state=0,i.persistent||(this._mostRecentTransientRipple=K);return!H&&(y||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const xe=()=>this._finishRippleTransition(K),Ue=()=>this._destroyRipple(K);I.addEventListener("transitionend",xe),I.addEventListener("transitioncancel",Ue)}),this._activeRipples.set(K,null),(H||!y)&&this._finishRippleTransition(K),K}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...rB,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=H2(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,oB.forEach(i=>{rk._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{aB.forEach(e=>{this._triggerElement.addEventListener(e,this,sB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=function DW(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!function TW(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(oB.forEach(e=>rk._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&aB.forEach(e=>t.removeEventListener(e,this,sB)))}}class sk{}class Ah{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),l=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ah?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ah;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ah?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let l=this.headers.get(e);if(!l)return;l=l.filter(h=>-1===o.indexOf(h)),0===l.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,l)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class zW{encodeKey(t){return cB(t)}encodeValue(t){return cB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const ZW=/%(\d[a-f0-9])/gi,YW={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cB(n){return encodeURIComponent(n).replace(ZW,(t,e)=>YW[e]??t)}function VA(n){return`${n}`}class Sp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new zW,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qW(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[l,h]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],p=e.get(l)||[];p.push(h),e.set(l,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(VA):[VA(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Sp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(VA(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(VA(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class KW{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function lB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uB(n){return typeof Blob<"u"&&n instanceof Blob}function dB(n){return typeof FormData<"u"&&n instanceof FormData}class gC{constructor(t,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function QW(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ah),this.context||(this.context=new KW),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+l}}else this.params=new Sp,this.urlWithParams=e}serializeBody(){return null===this.body?null:lB(this.body)||uB(this.body)||dB(this.body)||function JW(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dB(this.body)?null:uB(this.body)?this.body.type||null:lB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,l=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,h=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,y=t.params||this.params;const I=t.context??this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((T,N)=>T.set(N,t.setHeaders[N]),p)),t.setParams&&(y=Object.keys(t.setParams).reduce((T,N)=>T.set(N,t.setParams[N]),y)),new gC(e,i,o,{params:y,headers:p,context:I,reportProgress:h,responseType:r,withCredentials:l})}}var ak=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ak||{});class XW{constructor(t,e=200,i="OK"){this.headers=t.headers||new Ah,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class mC extends XW{constructor(t={}){super(t),this.type=ak.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function ck(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let lk=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof gC)o=e;else{let p,y;p=r.headers instanceof Ah?r.headers:new Ah(r.headers),r.params&&(y=r.params instanceof Sp?r.params:new Sp({fromObject:r.params})),o=new gC(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=(0,nt.of)(o).pipe(Kl(p=>this.handler.handle(p)));if(e instanceof gC||"events"===r.observe)return l;const h=l.pipe(Dn(p=>p instanceof mC));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,pt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,pt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,pt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,pt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Sp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,ck(r,i))}post(e,i,r={}){return this.request("POST",e,ck(r,i))}put(e,i,r={}){return this.request("PUT",e,ck(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(sk))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const vz=["*"];let GA;function _C(n){return function bz(){if(void 0===GA&&(GA=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(GA=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return GA}()?.createHTML(n)||n}function wB(n){return Error(`Unable to find icon with the name "${n}"`)}function EB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function IB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class b_{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let $A=(()=>{class n{constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new b_(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){const l=this._sanitizer.sanitize(u.q3G.HTML,r);if(!l)throw IB(r);const h=_C(l);return this._addSvgIconConfig(e,i,new b_("",h,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new b_(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const o=this._sanitizer.sanitize(u.q3G.HTML,i);if(!o)throw IB(i);const l=_C(o);return this._addSvgIconSetConfig(e,new b_("",l,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,e);if(!i)throw EB(e);const r=this._cachedIconsByUrl.get(i);return r?(0,nt.of)(WA(r)):this._loadSvgIconFromConfig(new b_(e,null)).pipe((0,Gn.b)(o=>this._cachedIconsByUrl.set(i,o)),(0,pt.U)(o=>WA(o)))}getNamedSvgIcon(e,i=""){const r=CB(i,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(e,l):mt(wB(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,nt.of)(WA(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,pt.U)(i=>WA(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?(0,nt.of)(r):PL(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(To(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),(0,nt.of)(null)})))).pipe((0,pt.U)(()=>{const l=this._extractIconWithNameFromAnySet(e,i);if(!l)throw wB(e);return l}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const l=this._svgElementFromConfig(o),h=this._extractSvgIconFromSet(l,e,o.options);if(h)return h}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Gn.b)(i=>e.svgText=i),(0,pt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,nt.of)(null):this._fetchIcon(e).pipe((0,Gn.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const o=e.querySelector(`[id="${i}"]`);if(!o)return null;const l=o.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const h=this._svgElementFromString(_C("<svg></svg>"));return h.appendChild(l),this._setSvgAttributes(h,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(_C("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:l,value:h}=r[o];"id"!==l&&i.setAttribute(l,h)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw function wz(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const l=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,i);if(!l)throw EB(i);const h=this._inProgressUrlFetches.get(l);if(h)return h;const p=this._httpClient.get(l,{responseType:"text",withCredentials:o}).pipe((0,pt.U)(y=>_C(y)),wd(()=>this._inProgressUrlFetches.delete(l)),(0,nO.B)());return this._inProgressUrlFetches.set(l,p),p}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(CB(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,e);if(o)return Iz(o)?new b_(o.url,null,o.options):new b_(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(lk,8),u.LFG(Cr),u.LFG(ue,8),u.LFG(u.qLn))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WA(n){return n.cloneNode(!0)}function CB(n,t){return n+":"+t}function Iz(n){return!(!n.url||!n.options)}const Cz=OW(class{constructor(n){this._elementRef=n}}),Dz=new u.OlP("MAT_ICON_DEFAULT_OPTIONS"),Tz=new u.OlP("mat-icon-location",{providedIn:"root",factory:function Sz(){const n=(0,u.f3M)(ue),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),DB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Az=DB.map(n=>`[${n}]`).join(", "),Mz=/^url\(['"]?#(.*?)['"]?\)$/;let TB=(()=>{class n extends Cz{get inline(){return this._inline}set inline(e){this._inline=function hW(n){return null!=n&&"false"!=`${n}`}(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,o,l,h){super(e),this._iconRegistry=i,this._location=o,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Rt.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(l=>{o.setAttribute(l.name,`url('${e}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(Az),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)DB.forEach(l=>{const h=i[o],p=h.getAttribute(l),y=p?p.match(Mz):null;if(y){let I=r.get(h);I||(I=[],r.set(h,I)),I.push({name:l,value:y[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(sn(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36($A),u.$8M("aria-hidden"),u.Y36(Tz),u.Y36(u.qLn),u.Y36(Dz,8))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(u.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),u.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:vz,decls:1,vars:0,template:function(i,r){1&i&&(u.F$t(),u.Hsn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),Nz=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[tB,tB]})}return n})();const SB="firebasestorage.googleapis.com",AB="storageBucket";class Ui extends L.ZR{constructor(t,e,i=0){super(dk(t),`Firebase Storage: ${e} (${dk(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ui.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return dk(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function dk(n){return"storage/"+n}function hk(){return new Ui("unknown","An unknown error occurred, please check the error payload for server response.")}function MB(){return new Ui("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function NB(){return new Ui("canceled","User canceled the upload/download.")}function RB(){return new Ui("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Y0(n){return new Ui("invalid-argument",n)}function xB(){return new Ui("app-deleted","The Firebase app was deleted.")}function OB(n){return new Ui("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yC(n,t){return new Ui("invalid-format","String does not match format '"+n+"': "+t)}function vC(n){throw new Ui("internal-error","Internal error: "+n)}class xs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=xs.makeFromUrl(t,e)}catch{return new xs(t,"")}if(""===i.path)return i;throw function Vz(n){return new Ui("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Oe){Oe.path_=decodeURIComponent(Oe.path)}const T=e.replace(/[.]/g,"\\."),$e=[{regex:h,indices:{bucket:1,path:3},postModify:function o(Oe){"/"===Oe.path.charAt(Oe.path.length-1)&&(Oe.path_=Oe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===SB?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Oe=0;Oe<$e.length;Oe++){const Ze=$e[Oe],et=Ze.regex.exec(t);if(et){let ln=et[Ze.indices.path];ln||(ln=""),i=new xs(et[Ze.indices.bucket],ln),Ze.postModify(i);break}}if(null==i)throw function Uz(n){return new Ui("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class Wz{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function zA(n){return"string"==typeof n||n instanceof String}function kB(n){return fk()&&n instanceof Blob}function fk(){return typeof Blob<"u"&&!(0,L.UG)()}function pk(n,t,e,i){if(i<t)throw Y0(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Y0(`Invalid value for '${n}'. Expected ${e} or less.`)}function Mh(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function PB(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var K0=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(K0||{});function FB(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),o=-1!==t.indexOf(n);return e||r||o}class Qz{constructor(t,e,i,r,o,l,h,p,y,I,T,N=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=T,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,H)=>{this.resolve_=P,this.reject_=H,this.start_()})}start_(){const e=(i,r)=>{const o=this.resolve_,l=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function Zz(n){return void 0!==n}(p)?o():o(p)}catch(p){l(p)}else if(null!==h){const p=hk();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(r.canceled?this.appDelete_?xB():NB():MB())};this.canceled_?e(0,new qA(!1,null,!0)):this.backoffId_=function zz(n,t,e){let i=1,r=null,o=null,l=!1,h=0;function p(){return 2===h}let y=!1;function I(...X){y||(y=!0,t.apply(null,X))}function T(X){r=setTimeout(()=>{r=null,n(P,p())},X)}function N(){o&&clearTimeout(o)}function P(X,...xe){if(y)return void N();if(X)return N(),void I.call(null,X,...xe);if(p()||l)return N(),void I.call(null,X,...xe);let $e;i<64&&(i*=2),1===h?(h=2,$e=0):$e=1e3*(i+Math.random()),T($e)}let H=!1;function K(X){H||(H=!0,N(),!y&&(null!==r?(X||(h=2),clearTimeout(r),T(0)):X||(h=1)))}return T(0),o=setTimeout(()=>{l=!0,K(!0)},e),K}((i,r)=>{if(r)return void i(!1,new qA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===K0.NO_ERROR,p=o.getStatus();if(!h||FB(p,this.additionalRetryCodes_)&&this.retry){const I=o.getErrorCode()===K0.ABORT;return void i(!1,new qA(!1,null,I))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new qA(y,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function qz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class qA{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function r6(...n){const t=function i6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(fk())return new Blob(n);throw new Ui("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ha={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gk{constructor(t,e){this.data=t,this.contentType=e||null}}function mk(n,t){switch(n){case ha.RAW:return new gk(LB(t));case ha.BASE64:case ha.BASE64URL:return new gk(BB(n,t));case ha.DATA_URL:return new gk(function c6(n){const t=new UB(n);return t.base64?BB(ha.BASE64,t.rest):function a6(n){let t;try{t=decodeURIComponent(n)}catch{throw yC(ha.DATA_URL,"Malformed data URL.")}return LB(t)}(t.rest)}(t),function l6(n){return new UB(n).contentType}(t))}throw hk()}function LB(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function BB(n,t){switch(n){case ha.BASE64:{const r=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(r||o)throw yC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ha.BASE64URL:{const r=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(r||o)throw yC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function o6(n){if(typeof atob>"u")throw function $z(n){return new Ui("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:yC(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class UB{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw yC(ha.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function u6(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Vu{constructor(t,e){let i=0,r="";kB(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(kB(this.data_)){const r=function s6(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Vu(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Vu(i,!0)}}static getBlob(...t){if(fk()){const e=t.map(i=>i instanceof Vu?i.data_:i);return new Vu(r6.apply(null,e))}{const e=t.map(l=>zA(l)?mk(ha.RAW,l).data:l.data_);let i=0;e.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return e.forEach(l=>{for(let h=0;h<l.length;h++)r[o++]=l[h]}),new Vu(r,!0)}}uploadData(){return this.data_}}function _k(n){let t;try{t=JSON.parse(n)}catch{return null}return function Kz(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function VB(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function f6(n,t){return t}class uo{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||f6}}let ZA=null;function bC(){if(ZA)return ZA;const n=[];n.push(new uo("bucket")),n.push(new uo("generation")),n.push(new uo("metageneration")),n.push(new uo("name","fullPath",!0));const e=new uo("name");e.xform=function t(o,l){return function p6(n){return!zA(n)||n.length<2?n:VB(n)}(l)},n.push(e);const r=new uo("size");return r.xform=function i(o,l){return void 0!==l?Number(l):l},n.push(r),n.push(new uo("timeCreated")),n.push(new uo("updated")),n.push(new uo("md5Hash",null,!0)),n.push(new uo("cacheControl",null,!0)),n.push(new uo("contentDisposition",null,!0)),n.push(new uo("contentEncoding",null,!0)),n.push(new uo("contentLanguage",null,!0)),n.push(new uo("contentType",null,!0)),n.push(new uo("metadata","customMetadata",!0)),ZA=n,ZA}function jB(n,t,e){const i=_k(t);return null===i?null:function m6(n,t,e){const i={type:"file"},r=e.length;for(let o=0;o<r;o++){const l=e[o];i[l.local]=l.xform(i,t[l.server])}return function g6(n,t){Object.defineProperty(n,"ref",{get:function e(){const o=new xs(n.bucket,n.fullPath);return t._makeStorageReference(o)}})}(i,n),i}(n,i,e)}function yk(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const o=t[r];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const HB="prefixes",GB="items";class ju{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hu(n){if(!n)throw hk()}function YA(n,t){return function e(i,r){const o=jB(n,r,t);return Hu(null!==o),o}}function Q0(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function Lz(){return new Ui("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Fz(){return new Ui("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Pz(n){return new Ui("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Bz(n){return new Ui("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function wC(n){const t=Q0(n);return function e(i,r){let o=t(i,r);return 404===i.getStatus()&&(o=function kz(n){return new Ui("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function $B(n,t,e){const r=Mh(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ju(r,"GET",YA(n,e),l);return h.errorHandler=wC(t),h}function E6(n,t,e,i,r){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),i&&(o.pageToken=i),r&&(o.maxResults=r);const h=Mh(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new ju(h,"GET",function b6(n,t){return function e(i,r){const o=function v6(n,t,e){const i=_k(e);return null===i?null:function y6(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[HB])for(const r of e[HB]){const o=r.replace(/\/$/,""),l=n._makeStorageReference(new xs(t,o));i.prefixes.push(l)}if(e[GB])for(const r of e[GB]){const o=n._makeStorageReference(new xs(t,r.name));i.items.push(o)}return i}(n,t,i)}(n,t,r);return Hu(null!==o),o}}(n,t.bucket),y);return I.urlParams=o,I.errorHandler=Q0(t),I}function zB(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function T6(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class KA{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function vk(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Hu(!1)}return Hu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const N6={STATE_CHANGED:"state_changed"},ho={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bk(n){switch(n){case"running":case"pausing":case"canceling":return ho.RUNNING;case"paused":return ho.PAUSED;case"success":return ho.SUCCESS;case"canceled":return ho.CANCELED;default:return ho.ERROR}}class R6{constructor(t,e,i){if(function Yz(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function J0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let YB=null;class x6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=K0.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=K0.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=K0.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw vC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class O6 extends x6{initXhr(){this.xhr_.responseType="text"}}function vl(){return YB?YB():new O6}class KB{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=bC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(FB(r.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=MB()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function S6(n,t,e,i,r){const o=t.bucketOnlyServerUrl(),l=zB(t,i,r),h={name:l.fullPath},p=Mh(o,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},T=yk(l,e),H=new ju(p,"POST",function P(K){let X;vk(K);try{X=K.getResponseHeader("X-Goog-Upload-URL")}catch{Hu(!1)}return Hu(zA(X)),X},n.maxUploadRetryTime);return H.urlParams=h,H.headers=I,H.body=T,H.errorHandler=Q0(t),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function A6(n,t,e,i){const p=new ju(e,"POST",function o(y){const I=vk(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hu(!1)}T||Hu(!1);const N=Number(T);return Hu(!isNaN(N)),new KA(N,i.size(),"final"===I)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Q0(t),p}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(r,vl,e,i);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new KA(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let l;try{l=function M6(n,t,e,i,r,o,l,h){const p=new KA(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Hz(){return new Ui("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let I=y;r>0&&(I=Math.min(I,r));const T=p.current;let P="";P=0===I?"finalize":y===I?"upload, finalize":"upload";const H={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},K=i.slice(T,T+I);if(null===K)throw RB();const $e=new ju(e,"POST",function X(Oe,Ze){const et=vk(Oe,["active","final"]),Lt=p.current+I,ln=i.size();let Qi;return Qi="final"===et?YA(t,o)(Oe,Ze):null,new KA(Lt,ln,"final"===et,Qi)},t.maxUploadRetryTime);return $e.headers=H,$e.body=K.uploadData(),$e.progressCallback=h||null,$e.errorHandler=Q0(n),$e}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(l,vl,r,o,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=$B(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function qB(n,t,e,i,r){const o=t.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let $e="";for(let Oe=0;Oe<2;Oe++)$e+=Math.random().toString().slice(2);return $e}();l["Content-Type"]="multipart/related; boundary="+p;const y=zB(t,i,r),I=yk(y,e),P=Vu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw RB();const H={name:y.fullPath},K=Mh(o,n.host,n._protocol),xe=n.maxUploadRetryTime,Ue=new ju(K,"POST",YA(n,e),xe);return Ue.urlParams=H,Ue.headers=l,Ue.body=P.uploadData(),Ue.errorHandler=Q0(t),Ue}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,vl,t,e);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=NB(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=bk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const o=new R6(e||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(bk(this._state)){case ho.SUCCESS:J0(this._resolve.bind(null,this.snapshot))();break;case ho.CANCELED:case ho.ERROR:J0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(bk(this._state)){case ho.RUNNING:case ho.PAUSED:t.next&&J0(t.next.bind(t,this.snapshot))();break;case ho.SUCCESS:t.complete&&J0(t.complete.bind(t))();break;default:t.error&&J0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class w_{constructor(t,e){this._service=t,this._location=e instanceof xs?e:xs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new w_(t,e)}get root(){const t=new xs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VB(this._location.path)}get storage(){return this._service}get parent(){const t=function d6(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new xs(this._location.bucket,t);return new w_(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw OB(t)}}function JB(n,t,e){return wk.apply(this,arguments)}function wk(){return wk=(0,pe.Z)(function*(n,t,e){const r=yield XB(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield JB(n,t,r.nextPageToken))}),wk.apply(this,arguments)}function XB(n,t){null!=t&&"number"==typeof t.maxResults&&pk("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=E6(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,vl)}function W6(n){n._throwIfRoot("getDownloadURL");const t=function I6(n,t,e){const r=Mh(t.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ju(r,"GET",function w6(n,t){return function e(i,r){const o=jB(n,r,t);return Hu(null!==o),function _6(n,t,e,i){const r=_k(t);if(null===r||!zA(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(y=>{const T=n.fullPath;return Mh("/b/"+l(n.bucket)+"/o/"+l(T),e,i)+PB({alt:"media",token:y})})[0]}(o,r,n.host,n._protocol)}}(n,e),l);return h.errorHandler=wC(t),h}(n.storage,n._location,bC());return n.storage.makeRequestWithTokens(t,vl).then(e=>{if(null===e)throw function Gz(){return new Ui("no-download-url","The given file does not have any download URLs.")}();return e})}function eU(n,t){const e=function h6(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new xs(n._location.bucket,e);return new w_(n.storage,i)}function tU(n,t){if(n instanceof Ek){const e=n;if(null==e._bucket)throw function jz(){return new Ui("no-default-bucket","No default bucket found. Did you set the '"+AB+"' property when initializing the app?")}();const i=new w_(e,e._bucket);return null!=t?tU(i,t):i}return void 0!==t?eU(n,t):n}function Y6(n,t){if(t&&function q6(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof Ek)return function Z6(n,t){return new w_(n,t)}(n,t);throw Y0("To use ref(service, url), the first argument must be a Storage instance.")}return tU(n,t)}function nU(n,t){const e=t?.[AB];return null==e?null:xs.makeFromBucketSpec(e,n)}class Ek{constructor(t,e,i,r,o){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=SB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xs.makeFromBucketSpec(r,this._host):nU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?xs.makeFromBucketSpec(this._url,t):nU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pk("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pk("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,pe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,pe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new w_(this,t)}_makeRequest(t,e,i,r,o=!0){if(this._deleted)return new Wz(xB());{const l=function n6(n,t,e,i,r,o,l=!0){const h=PB(n.urlParams),p=n.url+h,y=Object.assign({},n.headers);return function e6(n,t){t&&(n["X-Firebase-GMPID"]=t)}(y,t),function Jz(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(y,e),function Xz(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(y,o),function t6(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(y,i),new Qz(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,l)}(t,this._appId,i,r,e,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var i=this;return(0,pe.Z)(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,o).getPromise()})()}}const iU="@firebase/storage";function oU(n,t){return Y6(n=(0,L.m9)(n),t)}function sq(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Ek(e,i,r,t,cs.SDK_VERSION)}!function oq(){(0,cs._registerComponent)(new ea.wA("storage",sq,"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(iU,"0.10.1",""),(0,cs.registerVersion)(iU,"0.10.1","esm2017")}();class QA{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cU{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new QA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new QA(i,this,this._ref))},e)}on(t,e,i,r){let o;return e&&(o="function"==typeof e?l=>e(new QA(l,this,this._ref)):{next:e.next?l=>e.next(new QA(l,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,i||void 0,r||void 0)}}class lU{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Nh(t,this._service))}get items(){return this._delegate.items.map(t=>new Nh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function rq(n,t){return eU(n,t)}(this._delegate,t);return new Nh(e,this.storage)}get root(){return new Nh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Nh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new cU(function Q6(n,t,e){return function V6(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new KB(n,new Vu(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ha.RAW,i){this._throwIfRoot("putString");const r=mk(e,t),o=Object.assign({},i);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new cU(new KB(this._delegate,new Vu(r.data,!0),o),this)}listAll(){return function tq(n){return function H6(n){const t={prefixes:[],items:[]};return JB(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new lU(t,this.storage))}list(t){return function eq(n,t){return XB(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new lU(e,this.storage))}getMetadata(){return function J6(n){return function G6(n){n._throwIfRoot("getMetadata");const t=$B(n.storage,n._location,bC());return n.storage.makeRequestWithTokens(t,vl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function X6(n,t){return function $6(n,t){n._throwIfRoot("updateMetadata");const e=function C6(n,t,e,i){const o=Mh(t.fullServerUrl(),n.host,n._protocol),h=yk(e,i),y=n.maxOperationRetryTime,I=new ju(o,"PATCH",YA(n,i),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=h,I.errorHandler=wC(t),I}(n.storage,n._location,t,bC());return n.storage.makeRequestWithTokens(e,vl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function nq(n){return W6(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function iq(n){return function z6(n){n._throwIfRoot("deleteObject");const t=function D6(n,t){const i=Mh(t.fullServerUrl(),n.host,n._protocol),h=new ju(i,"DELETE",function l(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=wC(t),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,vl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw OB(t)}}class uU{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(dU(t))throw Y0("ref() expected a child path but got a URL, use refFromURL instead.");return new Nh(oU(this._delegate,t),this)}refFromURL(t){if(!dU(t))throw Y0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xs.makeFromUrl(t,this._delegate.host)}catch{throw Y0("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nh(oU(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function aU(n,t,e,i={}){!function K6(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function dU(n){return/^[A-Za-z]+:\/\//.test(n)}function uq(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new uU(e,i)}function hU(n){const t=function hq(n){return new Hn.y(t=>{const e=l=>t.next(l);e(n.snapshot);const o=n.on("state_changed",e);return n.then(l=>{e(l),t.complete()},l=>{e(n.snapshot),(l=>{t.error(l)})(l)}),function(){o()}}).pipe($2(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function JA(n){return{getDownloadURL:()=>(0,nt.of)(void 0).pipe(_n.fc,(0,Nn.w)(()=>n.getDownloadURL()),_n.iC),getMetadata:()=>(0,nt.of)(void 0).pipe(_n.fc,(0,Nn.w)(()=>n.getMetadata()),_n.iC),delete:()=>(0,En.D)(n.delete()),child:t=>JA(n.child(t)),updateMetadata:t=>(0,En.D)(n.updateMetadata(t)),put:(t,e)=>hU(n.put(t,e)),putString:(t,e,i)=>hU(n.putString(t,e,i)),list:t=>(0,En.D)(n.list(t)),listAll:()=>(0,En.D)(n.listAll())}}!function dq(n){const t={TaskState:ho,TaskEvent:N6,StringFormat:ha,Storage:uU,Reference:Nh};n.INTERNAL.registerComponent(new ea.wA("storage-compat",uq,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(Tf.Z);const fq=new u.OlP("angularfire2.storageBucket"),pq=new u.OlP("angularfire2.storage.maxUploadRetryTime"),gq=new u.OlP("angularfire2.storage.maxOperationRetryTime"),mq=new u.OlP("angularfire2.storage.use-emulator");let _q=(()=>{class n{constructor(e,i,r,o,l,h,p,y,I,T){const N=(0,Ii.on)(e,l,i);this.storage=(0,Ii.cc)(`${N.name}.storage.${r}`,"AngularFireStorage",N.name,()=>{const P=l.runOutsideAngular(()=>N.storage(r||void 0)),H=I;return H&&P.useEmulator(...H),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(e){return JA(this.storage.ref(e))}refFromURL(e){return JA(this.storage.refFromURL(e))}upload(e,i,r){return JA(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Ii.Dh),u.LFG(Ii.xv,8),u.LFG(fq,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(pq,8),u.LFG(gq,8),u.LFG(mq,8),u.LFG(oC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),vq=(()=>{class n{constructor(){DA.Z.registerVersion("angularfire",_n.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[_q],imports:[yq]}),n})();function XA(...n){const t=(0,Is.jO)(n);return(0,Cn.e)((e,i)=>{const r=n.length,o=new Array(r);let l=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,Se.Xf)(n[p]).subscribe((0,Zn.x)(i,y=>{o[p]=y,!h&&!l[p]&&(l[p]=!0,(h=l.every(Lc.y))&&(l=null))},af.Z));e.subscribe((0,Zn.x)(i,p=>{if(h){const y=[p,...o];i.next(t?t(...y):y)}}))})}const fU="@firebase/database";let Ik="";function gU(n){Ik=n}class wq{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Eq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const mU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wq(t)}}catch{}return new Eq},E_=mU("localStorage"),Ck=mU("sessionStorage"),X0=new No.Yd("@firebase/database"),_U=function(){let n=1;return function(){return n++}}(),yU=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},EC=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=EC.apply(null,i):t+="object"==typeof i?(0,L.Wl)(i):i,t+=" "}return t};let I_=null,vU=!0;const bU=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(X0.logLevel=No.in.VERBOSE,I_=X0.log.bind(X0),t&&Ck.set("logging_enabled",!0)):"function"==typeof n?I_=n:(I_=null,Ck.remove("logging_enabled"))},Jr=function(...n){if(!0===vU&&(vU=!1,null===I_&&!0===Ck.get("logging_enabled")&&bU(!0)),I_){const t=EC.apply(null,n);I_(t)}},IC=function(n){return function(...t){Jr(n,...t)}},Dk=function(...n){const t="FIREBASE INTERNAL ERROR: "+EC(...n);X0.error(t)},Gu=function(...n){const t=`FIREBASE FATAL ERROR: ${EC(...n)}`;throw X0.error(t),new Error(t)},Os=function(...n){const t="FIREBASE WARNING: "+EC(...n);X0.warn(t)},eM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Mp="[MIN_NAME]",Rh="[MAX_NAME]",C_=function(n,t){if(n===t)return 0;if(n===Mp||t===Rh)return-1;if(t===Mp||n===Rh)return 1;{const e=IU(n),i=IU(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Dq=function(n,t){return n===t?0:n<t?-1:1},CC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(t))},Tk=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Wl)(t[i]),e+=":",e+=Tk(n[t[i]]);return e+="}",e},wU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Xr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const EU=function(n){(0,L.hu)(!eM(n),"Invalid JSON number");const i=1023;let r,o,l,h,p;0===n?(o=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(r?1:0),y.reverse();const I=y.join("");let T="";for(p=0;p<64;p+=8){let N=parseInt(I.substr(p,8),2).toString(16);1===N.length&&(N="0"+N),T+=N}return T.toLowerCase()},Mq=new RegExp("^-?(0*)\\d{1,10}$"),IU=function(n){if(Mq.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},eb=function(n){try{n()}catch(t){setTimeout(()=>{throw Os("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},DC=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Oq{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kq{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Os(t)}}let TC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RU="websocket",xU="long_polling";class Ak{constructor(t,e,i,r,o=!1,l="",h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=E_.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&E_.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function OU(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===RU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==xU)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Pq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Xr(e,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}class Fq{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const Mk={},Nk={};function Rk(n){const t=n.toString();return Mk[t]||(Mk[t]=new Fq),Mk[t]}class Bq{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&eb(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Np{constructor(t,e,i,r,o,l,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=IC(t),this.stats_=Rk(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),OU(e,xU,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Bq(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xk((...o)=>{const[l,h,p,y,I]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Np.forceAllow_=!0}static forceDisallow(){Np.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Np.forceAllow_&&(Np.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=wU(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class xk{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=_U(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=xk.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Jr("frame writing exception"),h.stack&&Jr(h.stack),Jr(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Jr("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Jr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let nM=null;typeof MozWebSocket<"u"?nM=MozWebSocket:typeof WebSocket<"u"&&(nM=WebSocket);let tb=(()=>{class n{constructor(e,i,r,o,l,h,p){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=IC(this.connId),this.stats_=Rk(i),this.connURL=n.connectionURL_(i,h,p,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o,l){const h={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&AU.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),o&&(h.ac=o),l&&(h.p=l),OU(e,RU,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,E_.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Ik}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new nM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==nM&&!n.forceDisallow_}static previouslyFailed(){return E_.isInMemoryStorage||!0===E_.get("previous_websocket_failure")}markConnectionHealthy(){E_.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=wU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),VU=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Np,tb]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=tb&&tb.isAvailable();let r=i&&!tb.previouslyFailed();if(e.webSocketOnly&&(i||Os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[tb];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class qU{constructor(t,e,i,r,o,l,h,p,y,I){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=IC("c:"+this.id+":"),this.transportManager_=new VU(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=DC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=CC("t",t),i=CC("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=CC("t",t),i=CC("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=CC("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Dk("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dk("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),DC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):DC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(E_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ZU{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class YU{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===e&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class iM extends YU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new iM}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function kn(){return new Vn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rp(n){return n.pieces_.length-n.pieceNum_}function si(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Vn(n.pieces_,t)}function kk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function SC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function JU(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Vn(t,0)}function Mi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Vn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Vn(e,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function fo(n,t){const e=an(n),i=an(t);if(null===e)return t;if(e===i)return fo(si(n),si(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function o8(n,t){const e=SC(n,0),i=SC(t,0);for(let r=0;r<e.length&&r<i.length;r++){const o=C_(e[r],i[r]);if(0!==o)return o}return e.length===i.length?0:e.length<i.length?-1:1}function Pk(n,t){if(Rp(n)!==Rp(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function fc(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Rp(n)>Rp(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class a8{constructor(t,e){this.errorPrefix_=e,this.parts_=SC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);XU(this)}}function XU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+D_(n))}function D_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Fk extends YU{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Fk}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const AC=1e3;let sM,T_=(()=>{class n extends ZU{constructor(e,i,r,o,l,h,p,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=IC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=AC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&iM.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const o=++this.requestNumber_,l={r:o,a:e,b:i};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const i=new L.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?i.resolve(p):i.reject(p)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,o){this.initConnection_();const l=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const l={p:r};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,I=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(r,o),e.onComplete&&e.onComplete(I,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const l=o.s,h=o.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);const l={p:e};o&&(l.q=r,l.t=o),this.sendRequest("n",l)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){const l={p:i,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,l){this.initConnection_();const h={p:i,d:r};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:e,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Dk("Unrecognized action received from server: "+(0,L.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=AC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,pe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let p=!1,y=null;const I=function(){y?y.close():(p=!0,o())};e.realtime_={close:I,sendRequest:function(P){(0,L.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const N=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,H]=yield Promise.all([e.authTokenProvider_.getToken(N),e.appCheckTokenProvider_.getToken(N)]);p?Jr("getToken() completed but was canceled"):(Jr("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=H&&H.token,y=new qU(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,o,K=>{Os(K+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&Os(P),I())}}})()}interrupt(e){Jr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(l=>Tk(l)).join("$"):"default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){const r=new Vn(e).toString();let o;if(this.listens.has(r)){const l=this.listens.get(r);o=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){Jr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Jr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Ik.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=iM.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class gn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new gn(t,e)}}class rM{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new gn(Mp,t),r=new gn(Mp,e);return 0!==this.compare(i,r)}minPost(){return gn.MIN}}class nV extends rM{static get __EMPTY_NODE(){return sM}static set __EMPTY_NODE(t){sM=t}compare(t,e){return C_(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return gn.MIN}maxPost(){return new gn(Rh,sM)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new gn(t,sM)}toString(){return".key"}}const $u=new nV;class oM{constructor(t,e,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Bk,bl=(()=>{class n{constructor(e,i,r,o,l){this.key=e,this.value=i,this.color=r??n.RED,this.left=o??ko.EMPTY_NODE,this.right=l??ko.EMPTY_NODE}copy(e,i,r,o,l){return new n(e??this.key,i??this.value,r??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,i,r),null):0===l?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ko.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return ko.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ko{constructor(t,e=ko.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new ko(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,bl.BLACK,null,null))}remove(t){return new ko(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,bl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new oM(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new oM(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new oM(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new oM(this.root_,null,this.comparator_,!0,t)}}function g8(n,t){return C_(n.name,t.name)}function Lk(n,t){return C_(n,t)}ko.EMPTY_NODE=new class p8{copy(t,e,i,r,o){return this}insert(t,e,i){return new bl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const iV=function(n){return"number"==typeof n?"number:"+EU(n):"string:"+n},rV=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===Bk||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===Bk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sV,oV,aV,nb=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),rV(this.priorityNode_)}static set __childrenNodeConstructor(e){sV=e}static get __childrenNodeConstructor(){return sV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cn(e)?this:".priority"===an(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=an(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===Rp(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(si(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+iV(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?EU(this.value_):this.value_,this.lazyHash_=yU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(o>=0,"Unknown leaf type: "+i),(0,L.hu)(l>=0,"Unknown leaf type: "+r),o===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const li=new class v8 extends rM{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),o=i.compareTo(r);return 0===o?C_(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return gn.MIN}maxPost(){return new gn(Rh,new nb("[PRIORITY-POST]",aV))}makePost(t,e){const i=oV(t);return new gn(e,new nb("[PRIORITY-POST]",i))}toString(){return".priority"}},b8=Math.log(2);class w8{constructor(t){this.count=parseInt(Math.log(t+1)/b8,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const aM=function(n,t,e,i){n.sort(t);const r=function(p,y){const I=y-p;let T,N;if(0===I)return null;if(1===I)return T=n[p],N=e?e(T):T,new bl(N,T.node,bl.BLACK,null,null);{const P=parseInt(I/2,10)+p,H=r(p,P),K=r(P+1,y);return T=n[P],N=e?e(T):T,new bl(N,T.node,bl.BLACK,H,K)}},h=function(p){let y=null,I=null,T=n.length;const N=function(H,K){const X=T-H,xe=T;T-=H;const Ue=r(X+1,xe),$e=n[X],Oe=e?e($e):$e;P(new bl(Oe,$e.node,K,null,Ue))},P=function(H){y?(y.left=H,y=H):(I=H,y=H)};for(let H=0;H<p.count;++H){const K=p.nextBitIsOne(),X=Math.pow(2,p.count-(H+1));K?N(X,bl.BLACK):(N(X,bl.BLACK),N(X,bl.RED))}return I}(new w8(n.length));return new ko(i||t,h)};let Uk;const ib={};class xh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(ib&&li,"ChildrenNode.ts has not been loaded"),Uk=Uk||new xh({".priority":ib},{".priority":li}),Uk}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ko?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==$u,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=e.getIterator(gn.Wrap);let h,l=o.getNext();for(;l;)r=r||t.isDefinedOn(l.node),i.push(l),l=o.getNext();h=r?aM(i,t.getCompare()):ib;const p=t.toString(),y=Object.assign({},this.indexSet_);y[p]=t;const I=Object.assign({},this.indexes_);return I[p]=h,new xh(I,y)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,o)=>{const l=(0,L.DV)(this.indexSet_,o);if((0,L.hu)(l,"Missing index implementation for "+o),r===ib){if(l.isDefinedOn(t.node)){const h=[],p=e.getIterator(gn.Wrap);let y=p.getNext();for(;y;)y.name!==t.name&&h.push(y),y=p.getNext();return h.push(t),aM(h,l.getCompare())}return ib}{const h=e.get(t.name);let p=r;return h&&(p=p.remove(new gn(t.name,h))),p.insert(t,t.node)}});return new xh(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===ib)return r;{const o=e.get(t.name);return o?r.remove(new gn(t.name,o)):r}});return new xh(i,this.indexSet_)}}let MC,Zt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&rV(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return MC||(MC=new n(new ko(Lk),null,xh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||MC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?MC:i}}getChild(e){const i=an(e);return null===i?this:this.getImmediateChild(i).getChild(si(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new gn(e,i);let o,l;i.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(r,this.children_));const h=o.isEmpty()?MC:this.priorityNode_;return new n(o,h,l)}}updateChild(e,i){const r=an(e);if(null===r)return i;{(0,L.hu)(".priority"!==an(e)||1===Rp(e),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(si(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,o=0,l=!0;if(this.forEachChild(li,(h,p)=>{i[h]=p.val(e),r++,l&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!e&&l&&o<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+iV(this.getPriority().val())+":"),this.forEachChild(li,(i,r)=>{const o=r.hash();""!==o&&(e+=":"+i+":"+o)}),this.lazyHash_=""===e?"":yU(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const o=this.resolveIndex_(r);if(o){const l=o.getPredecessorKey(new gn(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new gn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new gn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,gn.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,gn.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===NC?-1:0}withIndex(e){if(e===$u||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===$u||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(li),o=i.getIterator(li);let l=r.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=r.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(e){return e===$u?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const NC=new class E8 extends Zt{constructor(){super(new ko(Lk),Zt.EMPTY_NODE,xh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Zt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(gn,{MIN:{value:new gn(Mp,Zt.EMPTY_NODE)},MAX:{value:new gn(Rh,NC)}}),nV.__EMPTY_NODE=Zt.EMPTY_NODE,nb.__childrenNodeConstructor=Zt,function m8(n){Bk=n}(NC),function y8(n){aV=n}(NC);const I8=!0;function Vi(n,t=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new nb(n,Vi(t));if(n instanceof Array||!I8){let e=Zt.EMPTY_NODE;return Xr(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const o=Vi(r);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(Vi(t))}{const e=[];let i=!1;if(Xr(n,(l,h)=>{if("."!==l.substring(0,1)){const p=Vi(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new gn(l,p)))}}),0===e.length)return Zt.EMPTY_NODE;const o=aM(e,g8,l=>l.name,Lk);if(i){const l=aM(e,li.getCompare());return new Zt(o,Vi(t),new xh({".priority":l},{".priority":li}))}return new Zt(o,Vi(t),xh.Default)}}!function _8(n){oV=n}(Vi);class Vk extends rM{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!cn(t)&&".priority"!==an(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),o=i.compareTo(r);return 0===o?C_(t.name,e.name):o}makePost(t,e){const i=Vi(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,i);return new gn(e,r)}maxPost(){const t=Zt.EMPTY_NODE.updateChild(this.indexPath_,NC);return new gn(Rh,t)}toString(){return SC(this.indexPath_,0).join("/")}}const jk=new class C8 extends rM{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?C_(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return gn.MIN}maxPost(){return gn.MAX}makePost(t,e){const i=Vi(t);return new gn(e,i)}toString(){return".value"}};function cV(n){return{type:"value",snapshotNode:n}}function rb(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function RC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function xC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Hk{constructor(t){this.index_=t}updateChild(t,e,i,r,o,l){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(RC(e,h)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(rb(e,i)):l.trackChildChange(xC(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(li,(r,o)=>{e.hasChild(r)||i.trackChildChange(RC(r,o))}),e.isLeafNode()||e.forEachChild(li,(r,o)=>{if(t.hasChild(r)){const l=t.getImmediateChild(r);l.equals(o)||i.trackChildChange(xC(r,o,l))}else i.trackChildChange(rb(r,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class OC{constructor(t){this.indexedFilter_=new Hk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=OC.getStartPost_(t),this.endPost_=OC.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,o,l){return this.matches(new gn(e,i))||(i=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,o,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Zt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);const o=this;return e.forEachChild(li,(l,h)=>{o.matches(new gn(l,h))||(r=r.updateImmediateChild(l,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class T8{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new OC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,o,l){return this.rangedFilter_.matches(new gn(e,i))||(i=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,o,l):this.fullLimitUpdateChild_(t,e,i,o,l)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;r=Zt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;r=r.updateImmediateChild(h.name,h.node),l++}}}else{let o;r=e.withIndex(this.index_),r=r.updatePriority(Zt.EMPTY_NODE),o=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let l=0;for(;o.hasNext();){const h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:r=r.updateImmediateChild(h.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,o){let l;if(this.reverse_){const T=this.index_.getCompare();l=(N,P)=>T(P,N)}else l=this.index_.getCompare();const h=t;(0,L.hu)(h.numChildren()===this.limit_,"");const p=new gn(e,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(p);if(h.hasChild(e)){const T=h.getImmediateChild(e);let N=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=N&&(N.name===e||h.hasChild(N.name));)N=r.getChildAfterChild(this.index_,N,this.reverse_);const P=null==N?1:l(N,p);if(I&&!i.isEmpty()&&P>=0)return o?.trackChildChange(xC(e,i,T)),h.updateImmediateChild(e,i);{o?.trackChildChange(RC(e,T));const K=h.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(o?.trackChildChange(rb(N.name,N.node)),K.updateImmediateChild(N.name,N.node)):K}}return i.isEmpty()?t:I&&l(y,p)>=0?(null!=o&&(o.trackChildChange(RC(y.name,y.node)),o.trackChildChange(rb(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(y.name,Zt.EMPTY_NODE)):t}}class cM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const t=new cM;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Gk(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function $k(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function lM(n,t){const e=n.copy();return e.index_=t,e}function lV(n){const t={};if(n.isDefault())return t;let e;if(n.index_===li?e="$priority":n.index_===jk?e="$value":n.index_===$u?e="$key":((0,L.hu)(n.index_ instanceof Vk,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function uV(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==li&&(t.i=n.index_.toString()),t}class uM extends ZU{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=IC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const l=uM.getListenId_(t,i),h={};this.listens_[l]=h;const p=lV(t._queryParams);this.restRequest_(o+".json",p,(y,I)=>{let T=I;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(o,T,!1,i),(0,L.DV)(this.listens_,l)===h){let N;N=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(N,null)}})}unlisten(t,e){const i=uM.getListenId_(t,e);delete this.listens_[i]}get(t){const e=lV(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(e.auth=r.accessToken),o&&o.token&&(e.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,L.cI)(h.responseText)}catch{Os("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&Os("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}class x8{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function dM(){return{value:null,children:new Map}}function sb(n,t,e){if(cn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=an(t);n.children.has(i)||n.children.set(i,dM()),sb(n.children.get(i),t=si(t),e)}}function Wk(n,t){if(cn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(li,(i,r)=>{sb(n,new Vn(i),r)}),Wk(n,t)}}if(n.children.size>0){const e=an(t);return t=si(t),n.children.has(e)&&Wk(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function zk(n,t,e){null!==n.value?e(t,n.value):function O8(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{zk(r,new Vn(t.toString()+"/"+i),e)})}class k8{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Xr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class L8{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new k8(t);const i=1e4+2e4*Math.random();DC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Xr(t,(r,o)=>{o>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=o,i=!0)}),i&&this.server_.reportStats(e),DC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Wu||{});function Yk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hM{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Wu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Vn(t));return new hM(kn(),e,this.revert)}}return(0,L.hu)(an(this.path)===t,"operationForChild called for unrelated child."),new hM(si(this.path),this.affectedTree,this.revert)}}class kC{constructor(t,e){this.source=t,this.path=e,this.type=Wu.LISTEN_COMPLETE}operationForChild(t){return cn(this.path)?new kC(this.source,kn()):new kC(this.source,si(this.path))}}class S_{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Wu.OVERWRITE}operationForChild(t){return cn(this.path)?new S_(this.source,kn(),this.snap.getImmediateChild(t)):new S_(this.source,si(this.path),this.snap)}}class ob{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Wu.MERGE}operationForChild(t){if(cn(this.path)){const e=this.children.subtree(new Vn(t));return e.isEmpty()?null:e.value?new S_(this.source,kn(),e.value):new ob(this.source,kn(),e)}return(0,L.hu)(an(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ob(this.source,si(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xp{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(cn(t))return this.isFullyInitialized()&&!this.filtered_;const e=an(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class B8{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function PC(n,t,e,i,r,o){const l=i.filter(h=>h.type===e);l.sort((h,p)=>function j8(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new gn(t.childName,t.snapshotNode),r=new gn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),l.forEach(h=>{const p=function V8(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,o);r.forEach(y=>{y.respondsTo(h.type)&&t.push(y.createEvent(p,n.query_))})})}function fM(n,t){return{eventCache:n,serverCache:t}}function FC(n,t,e,i){return fM(new xp(t,e,i),n.serverCache)}function hV(n,t,e,i){return fM(n.eventCache,new xp(t,e,i))}function pM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function A_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Kk;class ui{constructor(t,e=(()=>(Kk||(Kk=new ko(Dq)),Kk))()){this.value=t,this.children=e}static fromObject(t){let e=new ui(null);return Xr(t,(i,r)=>{e=e.set(new Vn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:kn(),value:this.value};if(cn(t))return null;{const i=an(t),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(si(t),e);return null!=o?{path:Mi(new Vn(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(cn(t))return this;{const e=an(t),i=this.children.get(e);return null!==i?i.subtree(si(t)):new ui(null)}}set(t,e){if(cn(t))return new ui(e,this.children);{const i=an(t),o=(this.children.get(i)||new ui(null)).set(si(t),e),l=this.children.insert(i,o);return new ui(this.value,l)}}remove(t){if(cn(t))return this.children.isEmpty()?new ui(null):new ui(null,this.children);{const e=an(t),i=this.children.get(e);if(i){const r=i.remove(si(t));let o;return o=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&o.isEmpty()?new ui(null):new ui(this.value,o)}return this}}get(t){if(cn(t))return this.value;{const e=an(t),i=this.children.get(e);return i?i.get(si(t)):null}}setTree(t,e){if(cn(t))return e;{const i=an(t),o=(this.children.get(i)||new ui(null)).setTree(si(t),e);let l;return l=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new ui(this.value,l)}}fold(t){return this.fold_(kn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Mi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,kn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(cn(t))return null;{const o=an(t),l=this.children.get(o);return l?l.findOnPath_(si(t),Mi(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,kn(),e)}foreachOnPath_(t,e,i){if(cn(t))return this;{this.value&&i(e,this.value);const r=an(t),o=this.children.get(r);return o?o.foreachOnPath_(si(t),Mi(e,r),i):new ui(null)}}foreach(t){this.foreach_(kn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Mi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class wl{constructor(t){this.writeTree_=t}static empty(){return new wl(new ui(null))}}function LC(n,t,e){if(cn(t))return new wl(new ui(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let o=i.value;const l=fo(r,t);return o=o.updateChild(l,e),new wl(n.writeTree_.set(r,o))}{const r=new ui(e),o=n.writeTree_.setTree(t,r);return new wl(o)}}}function Qk(n,t,e){let i=n;return Xr(e,(r,o)=>{i=LC(i,Mi(t,r),o)}),i}function fV(n,t){if(cn(t))return wl.empty();{const e=n.writeTree_.setTree(t,new ui(null));return new wl(e)}}function Jk(n,t){return null!=M_(n,t)}function M_(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(fo(e.path,t)):null}function pV(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(li,(i,r)=>{t.push(new gn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new gn(i,r.value))}),t}function Op(n,t){if(cn(t))return n;{const e=M_(n,t);return new wl(null!=e?new ui(e):n.writeTree_.subtree(t))}}function Xk(n){return n.writeTree_.isEmpty()}function ab(n,t){return gV(kn(),n.writeTree_,t)}function gV(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{".priority"===r?((0,L.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):e=gV(Mi(n,r),o,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Mi(n,".priority"),i)),e}}function gM(n,t){return bV(t,n)}function q8(n,t){if(n.snap)return fc(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&fc(Mi(n.path,e),t))return!0;return!1}function Y8(n){return n.visible}function mV(n,t,e){let i=wl.empty();for(let r=0;r<n.length;++r){const o=n[r];if(t(o)){const l=o.path;let h;if(o.snap)fc(e,l)?(h=fo(e,l),i=LC(i,h,o.snap)):fc(l,e)&&(h=fo(l,e),i=LC(i,kn(),o.snap.getChild(h)));else{if(!o.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(fc(e,l))h=fo(e,l),i=Qk(i,h,o.children);else if(fc(l,e))if(h=fo(l,e),cn(h))i=Qk(i,kn(),o.children);else{const p=(0,L.DV)(o.children,an(h));if(p){const y=p.getChild(si(h));i=LC(i,kn(),y)}}}}}return i}function _V(n,t,e,i,r){if(i||r){const o=Op(n.visibleWrites,t);return!r&&Xk(o)?e:r||null!=e||Jk(o,kn())?ab(mV(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(fc(y.path,t)||fc(t,y.path))},t),e||Zt.EMPTY_NODE):null}{const o=M_(n.visibleWrites,t);if(null!=o)return o;{const l=Op(n.visibleWrites,t);return Xk(l)?e:null!=e||Jk(l,kn())?ab(l,e||Zt.EMPTY_NODE):null}}}function mM(n,t,e,i){return _V(n.writeTree,n.treePath,t,e,i)}function eP(n,t){return function K8(n,t,e){let i=Zt.EMPTY_NODE;const r=M_(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(li,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(e){const o=Op(n.visibleWrites,t);return e.forEachChild(li,(l,h)=>{const p=ab(Op(o,new Vn(l)),h);i=i.updateImmediateChild(l,p)}),pV(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return pV(Op(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function yV(n,t,e,i){return function Q8(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Mi(t,e);if(Jk(n.visibleWrites,o))return null;{const l=Op(n.visibleWrites,o);return Xk(l)?r.getChild(e):ab(l,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function _M(n,t){return function X8(n,t){return M_(n.visibleWrites,t)}(n.writeTree,Mi(n.treePath,t))}function tP(n,t,e){return function J8(n,t,e,i){const r=Mi(t,e),o=M_(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(e)?ab(Op(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function vV(n,t){return bV(Mi(n.treePath,t),n.writeTree)}function bV(n,t){return{treePath:n,writeTree:t}}class i4{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(i,xC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(i,RC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(i,rb(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,xC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const wV=new class r4{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class nP{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new xp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tP(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:A_(this.viewCache_),o=function n4(n,t,e,i,r,o){return function e4(n,t,e,i,r,o,l){let h;const p=Op(n.visibleWrites,t),y=M_(p,kn());if(null!=y)h=y;else{if(null==e)return[];h=ab(p,e)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const I=[],T=l.getCompare(),N=o?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let P=N.getNext();for(;P&&I.length<r;)0!==T(P,i)&&I.push(P),P=N.getNext();return I}}(n.writeTree,n.treePath,t,e,i,r,o)}(this.writes_,r,e,1,i,t);return 0===o.length?null:o[0]}}function EV(n,t,e,i,r,o){const l=t.eventCache;if(null!=_M(i,e))return t;{let h,p;if(cn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=A_(t),T=eP(i,y instanceof Zt?y:Zt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),T,o)}else{const y=mM(i,A_(t));h=n.filter.updateFullNode(t.eventCache.getNode(),y,o)}else{const y=an(e);if(".priority"===y){(0,L.hu)(1===Rp(e),"Can't have a priority with additional path components");const I=l.getNode();p=t.serverCache.getNode();const T=yV(i,e,I,p);h=null!=T?n.filter.updatePriority(I,T):l.getNode()}else{const I=si(e);let T;if(l.isCompleteForChild(y)){p=t.serverCache.getNode();const N=yV(i,e,l.getNode(),p);T=null!=N?l.getNode().getImmediateChild(y).updateChild(I,N):l.getNode().getImmediateChild(y)}else T=tP(i,y,t.serverCache);h=null!=T?n.filter.updateChild(l.getNode(),y,T,I,r,o):l.getNode()}}return FC(t,h,l.isFullyInitialized()||cn(e),n.filter.filtersNodes())}}function yM(n,t,e,i,r,o,l,h){const p=t.serverCache;let y;const I=l?n.filter:n.filter.getIndexedFilter();if(cn(e))y=I.updateFullNode(p.getNode(),i,null);else if(I.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);y=I.updateFullNode(p.getNode(),P,null)}else{const P=an(e);if(!p.isCompleteForPath(e)&&Rp(e)>1)return t;const H=si(e),X=p.getNode().getImmediateChild(P).updateChild(H,i);y=".priority"===P?I.updatePriority(p.getNode(),X):I.updateChild(p.getNode(),P,X,H,wV,null)}const T=hV(t,y,p.isFullyInitialized()||cn(e),I.filtersNodes());return EV(n,T,e,r,new nP(r,T,o),h)}function iP(n,t,e,i,r,o,l){const h=t.eventCache;let p,y;const I=new nP(r,t,o);if(cn(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,l),p=FC(t,y,!0,n.filter.filtersNodes());else{const T=an(e);if(".priority"===T)y=n.filter.updatePriority(t.eventCache.getNode(),i),p=FC(t,y,h.isFullyInitialized(),h.isFiltered());else{const N=si(e),P=h.getNode().getImmediateChild(T);let H;if(cn(N))H=i;else{const K=I.getCompleteChild(T);H=null!=K?".priority"===kk(N)&&K.getChild(JU(N)).isEmpty()?K:K.updateChild(N,i):Zt.EMPTY_NODE}p=P.equals(H)?t:FC(t,n.filter.updateChild(h.getNode(),T,H,N,I,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function IV(n,t){return n.eventCache.isCompleteForChild(t)}function CV(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function rP(n,t,e,i,r,o,l,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,p=t;y=cn(e)?i:new ui(null).setTree(e,i);const I=t.serverCache.getNode();return y.children.inorderTraversal((T,N)=>{if(I.hasChild(T)){const H=CV(0,t.serverCache.getNode().getImmediateChild(T),N);p=yM(n,p,new Vn(T),H,r,o,l,h)}}),y.children.inorderTraversal((T,N)=>{const P=!t.serverCache.isCompleteForChild(T)&&null===N.value;if(!I.hasChild(T)&&!P){const K=CV(0,t.serverCache.getNode().getImmediateChild(T),N);p=yM(n,p,new Vn(T),K,r,o,l,h)}}),p}class f4{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Hk(i.getIndex()),o=function S8(n){return n.loadsAllData()?new Hk(n.getIndex()):n.hasLimit()?new T8(n):new OC(n)}(i);this.processor_=function s4(n){return{filter:n}}(o);const l=e.serverCache,h=e.eventCache,p=r.updateFullNode(Zt.EMPTY_NODE,l.getNode(),null),y=o.updateFullNode(Zt.EMPTY_NODE,h.getNode(),null),I=new xp(p,l.isFullyInitialized(),r.filtersNodes()),T=new xp(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=fM(T,I),this.eventGenerator_=new B8(this.query_)}get query(){return this.query_}}function m4(n,t){const e=A_(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!cn(t)&&!e.getImmediateChild(an(t)).isEmpty())?e.getChild(t):null}function DV(n){return 0===n.eventRegistrations_.length}function TV(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(e,r);l&&i.push(l)})}if(t){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function SV(n,t,e,i){t.type===Wu.MERGE&&null!==t.source.queryId&&((0,L.hu)(A_(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(pM(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function a4(n,t,e,i,r){const o=new i4;let l,h;if(e.type===Wu.OVERWRITE){const y=e;y.source.fromUser?l=iP(n,t,y.path,y.snap,i,r,o):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered()&&!cn(y.path),l=yM(n,t,y.path,y.snap,i,r,h,o))}else if(e.type===Wu.MERGE){const y=e;y.source.fromUser?l=function l4(n,t,e,i,r,o,l){let h=t;return i.foreach((p,y)=>{const I=Mi(e,p);IV(t,an(I))&&(h=iP(n,h,I,y,r,o,l))}),i.foreach((p,y)=>{const I=Mi(e,p);IV(t,an(I))||(h=iP(n,h,I,y,r,o,l))}),h}(n,t,y.path,y.children,i,r,o):((0,L.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered(),l=rP(n,t,y.path,y.children,i,r,h,o))}else if(e.type===Wu.ACK_USER_WRITE){const y=e;l=y.revert?function h4(n,t,e,i,r,o){let l;if(null!=_M(i,e))return t;{const h=new nP(i,t,r),p=t.eventCache.getNode();let y;if(cn(e)||".priority"===an(e)){let I;if(t.serverCache.isFullyInitialized())I=mM(i,A_(t));else{const T=t.serverCache.getNode();(0,L.hu)(T instanceof Zt,"serverChildren would be complete if leaf node"),I=eP(i,T)}y=n.filter.updateFullNode(p,I,o)}else{const I=an(e);let T=tP(i,I,t.serverCache);null==T&&t.serverCache.isCompleteForChild(I)&&(T=p.getImmediateChild(I)),y=null!=T?n.filter.updateChild(p,I,T,si(e),h,o):t.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,Zt.EMPTY_NODE,si(e),h,o):p,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=mM(i,A_(t)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,o)))}return l=t.serverCache.isFullyInitialized()||null!=_M(i,kn()),FC(t,y,l,n.filter.filtersNodes())}}(n,t,y.path,i,r,o):function u4(n,t,e,i,r,o,l){if(null!=_M(r,e))return t;const h=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(cn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return yM(n,t,e,p.getNode().getChild(e),r,o,h,l);if(cn(e)){let y=new ui(null);return p.getNode().forEachChild($u,(I,T)=>{y=y.set(new Vn(I),T)}),rP(n,t,e,y,r,o,h,l)}return t}{let y=new ui(null);return i.foreach((I,T)=>{const N=Mi(e,I);p.isCompleteForPath(N)&&(y=y.set(I,p.getNode().getChild(N)))}),rP(n,t,e,y,r,o,h,l)}}(n,t,y.path,y.affectedTree,i,r,o)}else{if(e.type!==Wu.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);l=function d4(n,t,e,i,r){const o=t.serverCache;return EV(n,hV(t,o.getNode(),o.isFullyInitialized()||cn(e),o.isFiltered()),e,i,wV,r)}(n,t,e.path,i,o)}const p=o.getChanges();return function c4(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=pM(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(cV(pM(t)))}}(t,l,p),{viewCache:l,changes:p}}(n.processor_,r,t,e,i);return function o4(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,L.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,AV(n,o.changes,o.viewCache.eventCache.getNode(),null)}function AV(n,t,e,i){return function U8(n,t,e,i){const r=[],o=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function D8(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),PC(n,r,"child_removed",t,i,e),PC(n,r,"child_added",t,i,e),PC(n,r,"child_moved",o,i,e),PC(n,r,"child_changed",t,i,e),PC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let vM,wM;class MV{constructor(){this.views=new Map}}function sP(n,t,e,i){const r=t.source.queryId;if(null!==r){const o=n.views.get(r);return(0,L.hu)(null!=o,"SyncTree gave us an op for an invalid query."),SV(o,t,e,i)}{let o=[];for(const l of n.views.values())o=o.concat(SV(l,t,e,i));return o}}function NV(n,t,e,i,r){const l=n.views.get(t._queryIdentifier);if(!l){let h=mM(e,r?i:null),p=!1;h?p=!0:i instanceof Zt?(h=eP(e,i),p=!1):(h=Zt.EMPTY_NODE,p=!1);const y=fM(new xp(h,p,!1),new xp(i,r,!1));return new f4(t,y)}return l}function RV(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function kp(n,t){let e=null;for(const i of n.views.values())e=e||m4(i,t);return e}function xV(n,t){return t._queryParams.loadsAllData()?bM(n):n.views.get(t._queryIdentifier)}function OV(n,t){return null!=xV(n,t)}function Pp(n){return null!=bM(n)}function bM(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let T4=1;class kV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ui(null),this.pendingWriteTree_=function t4(){return{visibleWrites:wl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oP(n,t,e,i,r){return function G8(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=LC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?cb(n,new S_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Fp(n,t,e=!1){const i=function W8(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function z8(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,o=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=e&&q8(h,i.path)?r=!1:fc(i.path,h.path)&&(o=!0)),l--}return!!r&&(o?(function Z8(n){n.visibleWrites=mV(n.allWrites,Y8,kn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=fV(n.visibleWrites,i.path):Xr(i.children,p=>{n.visibleWrites=fV(n.visibleWrites,Mi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let o=new ui(null);return null!=i.snap?o=o.set(kn(),!0):Xr(i.children,l=>{o=o.set(new Vn(l),!0)}),cb(n,new hM(i.path,o,e))}return[]}function BC(n,t,e){return cb(n,new S_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function EM(n,t,e,i,r=!1){const o=t._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===t._queryIdentifier||OV(l,t))){const p=function I4(n,t,e,i){const r=t._queryIdentifier,o=[];let l=[];const h=Pp(n);if("default"===r)for(const[p,y]of n.views.entries())l=l.concat(TV(y,e,i)),DV(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||o.push(y.query));else{const p=n.views.get(r);p&&(l=l.concat(TV(p,e,i)),DV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!Pp(n)&&o.push(new(function b4(){return(0,L.hu)(vM,"Reference.ts has not been loaded"),vM}())(t._repo,t._path)),{removed:o,events:l}}(l,t,e,i);(function w4(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;if(h=p.events,!r){const I=-1!==y.findIndex(N=>N._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(o,(N,P)=>Pp(P));if(I&&!T){const N=n.syncPointTree_.subtree(o);if(!N.isEmpty()){const P=function O4(n){return n.fold((t,e,i)=>{if(e&&Pp(e))return[bM(e)];{let r=[];return e&&(r=RV(e)),Xr(i,(o,l)=>{r=r.concat(l)}),r}})}(N);for(let H=0;H<P.length;++H){const K=P[H],X=K.query,xe=BV(n,K);n.listenProvider_.startListening(VC(X),UC(n,X),xe.hashFn,xe.onComplete)}}}!T&&y.length>0&&!i&&(I?n.listenProvider_.stopListening(VC(t),null):y.forEach(N=>{const P=n.queryToTagMap.get(CM(N));n.listenProvider_.stopListening(VC(N),P)}))}!function k4(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=CM(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function PV(n,t,e,i){const r=cP(n,i);if(null!=r){const o=lP(r),l=o.path,h=o.queryId,p=fo(l,t);return uP(n,l,new S_(Yk(h),p,e))}return[]}function aP(n,t,e,i=!1){const r=t._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(N,P)=>{const H=fo(N,r);o=o||kp(P,H),l=l||Pp(P)});let p,h=n.syncPointTree_.get(r);h?(l=l||Pp(h),o=o||kp(h,kn())):(h=new MV,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?p=!0:(p=!1,o=Zt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,H)=>{const K=kp(H,kn());K&&(o=o.updateImmediateChild(P,K))}));const y=OV(h,t);if(!y&&!t._queryParams.loadsAllData()){const N=CM(t);(0,L.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const P=function P4(){return T4++}();n.queryToTagMap.set(N,P),n.tagToQueryMap.set(P,N)}let T=function E4(n,t,e,i,r,o){const l=NV(n,t,i,r,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function _4(n,t){n.eventRegistrations_.push(t)}(l,e),function y4(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(li,(o,l)=>{i.push(rb(o,l))}),e.isFullyInitialized()&&i.push(cV(e.getNode())),AV(n,i,e.getNode(),t)}(l,e)}(h,t,e,gM(n.pendingWriteTree_,r),o,p);if(!y&&!l&&!i){const N=xV(h,t);T=T.concat(function F4(n,t,e){const i=t._path,r=UC(n,t),o=BV(n,e),l=n.listenProvider_.startListening(VC(t),r,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!Pp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,I,T)=>{if(!cn(y)&&I&&Pp(I))return[bM(I).query];{let N=[];return I&&(N=N.concat(RV(I).map(P=>P.query))),Xr(T,(P,H)=>{N=N.concat(H)}),N}});for(let y=0;y<p.length;++y){const I=p[y];n.listenProvider_.stopListening(VC(I),UC(n,I))}}return l}(n,t,N))}return T}function IM(n,t,e){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(l,h)=>{const y=kp(h,fo(l,t));if(y)return y});return _V(r,t,o,e,!0)}function cb(n,t){return FV(t,n.syncPointTree_,null,gM(n.pendingWriteTree_,kn()))}function FV(n,t,e,i){if(cn(n.path))return LV(n,t,e,i);{const r=t.get(kn());null==e&&null!=r&&(e=kp(r,kn()));let o=[];const l=an(n.path),h=n.operationForChild(l),p=t.children.get(l);if(p&&h){const y=e?e.getImmediateChild(l):null,I=vV(i,l);o=o.concat(FV(h,p,y,I))}return r&&(o=o.concat(sP(r,n,i,e))),o}}function LV(n,t,e,i){const r=t.get(kn());null==e&&null!=r&&(e=kp(r,kn()));let o=[];return t.children.inorderTraversal((l,h)=>{const p=e?e.getImmediateChild(l):null,y=vV(i,l),I=n.operationForChild(l);I&&(o=o.concat(LV(I,h,p,y)))}),r&&(o=o.concat(sP(r,n,i,e))),o}function BV(n,t){const e=t.query,i=UC(n,e);return{hashFn:()=>(function p4(n){return n.viewCache_.serverCache.getNode()}(t)||Zt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function N4(n,t,e){const i=cP(n,e);if(i){const r=lP(i),o=r.path,l=r.queryId,h=fo(o,t);return uP(n,o,new kC(Yk(l),h))}return[]}(n,e._path,i):function M4(n,t){return cb(n,new kC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function Aq(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return EM(n,e,null,o)}}}}function UC(n,t){const e=CM(t);return n.queryToTagMap.get(e)}function CM(n){return n._path.toString()+"$"+n._queryIdentifier}function cP(n,t){return n.tagToQueryMap.get(t)}function lP(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Vn(n.substr(0,t))}}function uP(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),sP(i,e,gM(n.pendingWriteTree_,t),null)}function VC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function D4(){return(0,L.hu)(wM,"Reference.ts has not been loaded"),wM}())(n._repo,n._path):n}class dP{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new dP(e)}node(){return this.node_}}class hP{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Mi(this.path_,t);return new hP(this.syncTree_,e)}node(){return IM(this.syncTree_,this.path_)}}const L4=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},UV=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?B4(n[".sv"],t,e):"object"==typeof n[".sv"]?U4(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},B4=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},U4=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},VV=function(n,t,e,i){return pP(t,new hP(e,n),i)},fP=function(n,t,e){return pP(n,new dP(t),e)};function pP(n,t,e){const i=n.getPriority().val(),r=UV(i,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const l=n,h=UV(l.getValue(),t,e);return h!==l.getValue()||r!==l.getPriority().val()?new nb(h,Vi(r)):n}{const l=n;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new nb(r))),l.forEachChild(li,(h,p)=>{const y=pP(p,t.getImmediateChild(h),e);y!==p&&(o=o.updateImmediateChild(h,y))}),o}}class gP{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function DM(n,t){let e=t instanceof Vn?t:new Vn(t),i=n,r=an(e);for(;null!==r;){const o=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new gP(r,i,o),e=si(e),r=an(e)}return i}function N_(n){return n.node.value}function mP(n,t){n.node.value=t,_P(n)}function jV(n){return n.node.childCount>0}function TM(n,t){Xr(n.node.children,(e,i)=>{t(new gP(e,n,i))})}function HV(n,t,e,i){e&&!i&&t(n),TM(n,r=>{HV(r,t,!0,i)}),e&&i&&t(n)}function jC(n){return new Vn(null===n.parent?n.name:jC(n.parent)+"/"+n.name)}function _P(n){null!==n.parent&&function H4(n,t,e){const i=function V4(n){return void 0===N_(n)&&!jV(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,_P(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,_P(n))}(n.parent,n.name,n)}const G4=/[\[\].#$\/\u0000-\u001F\u007F]/,$4=/[\[\].#$\u0000-\u001F\u007F]/,yP=10485760,SM=function(n){return"string"==typeof n&&0!==n.length&&!G4.test(n)},GV=function(n){return"string"==typeof n&&0!==n.length&&!$4.test(n)},HC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!eM(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},zu=function(n,t,e,i){i&&void 0===t||GC((0,L.gK)(n,"value"),t,e)},GC=function(n,t,e){const i=e instanceof Vn?new a8(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+D_(i));if("function"==typeof t)throw new Error(n+"contains a function "+D_(i)+" with contents = "+t.toString());if(eM(t))throw new Error(n+"contains "+t.toString()+" "+D_(i));if("string"==typeof t&&t.length>yP/3&&(0,L.ug)(t)>yP)throw new Error(n+"contains a string greater than "+yP+" utf8 bytes "+D_(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,o=!1;if(Xr(t,(l,h)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!SM(l)))throw new Error(n+" contains an invalid key ("+l+") "+D_(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function c8(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),XU(n)})(i,l),GC(n,h,i),function l8(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+D_(i)+" in addition to actual children.")}},$V=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const o=[];Xr(t,(l,h)=>{const p=new Vn(l);if(GC(r,h,Mi(e,p)),".priority"===kk(p)&&!HC(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const o=SC(i);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!SM(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(o8);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&fc(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},vP=function(n,t,e){if(!e||void 0!==t){if(eM(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!HC(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},$C=function(n,t,e,i){if(!(i&&void 0===e||SM(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},WC=function(n,t,e,i){if(!(i&&void 0===e||GV(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},q4=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),WC(n,t,e,i)},pc=function(n,t){if(".info"===an(t))throw new Error(n+" failed = Can't modify data under /.info/")},WV=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!SM(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GV(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Z4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AM(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],o=r.getPath();null!==e&&!Pk(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(r)}e&&n.eventLists_.push(e)}function zV(n,t,e){AM(n,e),qV(n,i=>Pk(i,t))}function fa(n,t,e){AM(n,e),qV(n,i=>fc(i,t)||fc(t,i))}function qV(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Y4(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Y4(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();I_&&Jr("event: "+e.toString()),eb(i)}}}const ZV="repo_interrupt",K4=25;class Q4{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Z4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dM(),this.transactionQueueTree_=new gP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YV(n){const e=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function zC(n){return L4({timestamp:YV(n)})}function KV(n,t,e,i,r){n.dataUpdateCount++;const o=new Vn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(r)if(i){const p=(0,L.UI)(e,y=>Vi(y));l=function R4(n,t,e,i){const r=cP(n,i);if(r){const o=lP(r),l=o.path,h=o.queryId,p=fo(l,t),y=ui.fromObject(e);return uP(n,l,new ob(Yk(h),p,y))}return[]}(n.serverSyncTree_,o,p,r)}else{const p=Vi(e);l=PV(n.serverSyncTree_,o,p,r)}else if(i){const p=(0,L.UI)(e,y=>Vi(y));l=function A4(n,t,e){const i=ui.fromObject(e);return cb(n,new ob({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,o,p)}else{const p=Vi(e);l=BC(n.serverSyncTree_,o,p)}let h=o;l.length>0&&(h=ub(n,o)),fa(n.eventQueue_,h,l)}function QV(n,t){bP(n,"connected",t),!1===t&&function n5(n){lb(n,"onDisconnectEvents");const t=zC(n),e=dM();zk(n.onDisconnect_,kn(),(r,o)=>{const l=VV(r,o,n.serverSyncTree_,t);sb(e,r,l)});let i=[];zk(e,kn(),(r,o)=>{i=i.concat(BC(n.serverSyncTree_,r,o));const l=CP(n,r);ub(n,l)}),n.onDisconnect_=dM(),fa(n.eventQueue_,kn(),i)}(n)}function bP(n,t,e){const i=new Vn("/.info/"+t),r=Vi(e);n.infoData_.updateSnapshot(i,r);const o=BC(n.infoSyncTree_,i,r);fa(n.eventQueue_,i,o)}function MM(n){return n.nextWriteId_++}function wP(n,t,e,i,r){lb(n,"set",{path:t.toString(),value:e,priority:i});const o=zC(n),l=Vi(e,i),h=IM(n.serverSyncTree_,t),p=fP(l,h,o),y=MM(n),I=oP(n.serverSyncTree_,t,p,y,!0);AM(n.eventQueue_,I),n.server_.put(t.toString(),l.val(!0),(N,P)=>{const H="ok"===N;H||Os("set at "+t+" failed: "+N);const K=Fp(n.serverSyncTree_,y,!H);fa(n.eventQueue_,t,K),Lp(0,r,N,P)});const T=CP(n,t);ub(n,T),fa(n.eventQueue_,T,[])}function i5(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&Wk(n.onDisconnect_,t),Lp(0,e,i,r)})}function JV(n,t,e,i){const r=Vi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(o,l)=>{"ok"===o&&sb(n.onDisconnect_,t,r),Lp(0,i,o,l)})}function EP(n,t,e){let i;i=".info"===an(t._path)?EM(n.infoSyncTree_,t,e):EM(n.serverSyncTree_,t,e),zV(n.eventQueue_,t._path,i)}function XV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ZV)}function lb(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Jr(e,...t)}function Lp(n,t,e,i){t&&eb(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,t(l)}})}function IP(n,t,e){return IM(n.serverSyncTree_,t,e)||Zt.EMPTY_NODE}function NM(n,t=n.transactionQueueTree_){if(t||RM(n,t),N_(t)){const e=tj(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function l5(n,t,e){const i=e.map(y=>y.currentWriteId),r=IP(n,t,i);let o=r;const l=r.hash();for(let y=0;y<e.length;y++){const I=e[y];(0,L.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=fo(t,I.path);o=o.updateChild(T,I.currentOutputSnapshotRaw)}const h=o.val(!0),p=t;n.server_.put(p.toString(),h,y=>{lb(n,"transaction put response",{path:p.toString(),status:y});let I=[];if("ok"===y){const T=[];for(let N=0;N<e.length;N++)e[N].status=2,I=I.concat(Fp(n.serverSyncTree_,e[N].currentWriteId)),e[N].onComplete&&T.push(()=>e[N].onComplete(null,!0,e[N].currentOutputSnapshotResolved)),e[N].unwatcher();RM(n,DM(n.transactionQueueTree_,t)),NM(n,n.transactionQueueTree_),fa(n.eventQueue_,t,I);for(let N=0;N<T.length;N++)eb(T[N])}else{if("datastale"===y)for(let T=0;T<e.length;T++)e[T].status=3===e[T].status?4:0;else{Os("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<e.length;T++)e[T].status=4,e[T].abortReason=y}ub(n,t)}},l)}(n,jC(t),e)}else jV(t)&&TM(t,e=>{NM(n,e)})}function ub(n,t){const e=ej(n,t),i=jC(e);return function u5(n,t,e){if(0===t.length)return;const i=[];let r=[];const l=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const p=t[h],y=fo(e,p.path);let T,I=!1;if((0,L.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,T=p.abortReason,r=r.concat(Fp(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=K4)I=!0,T="maxretry",r=r.concat(Fp(n.serverSyncTree_,p.currentWriteId,!0));else{const N=IP(n,p.path,l);p.currentInputSnapshot=N;const P=t[h].update(N.val());if(void 0!==P){GC("transaction failed: Data returned ",P,p.path);let H=Vi(P);"object"==typeof P&&null!=P&&(0,L.r3)(P,".priority")||(H=H.updatePriority(N.getPriority()));const X=p.currentWriteId,xe=zC(n),Ue=fP(H,N,xe);p.currentOutputSnapshotRaw=H,p.currentOutputSnapshotResolved=Ue,p.currentWriteId=MM(n),l.splice(l.indexOf(X),1),r=r.concat(oP(n.serverSyncTree_,p.path,Ue,p.currentWriteId,p.applyLocally)),r=r.concat(Fp(n.serverSyncTree_,X,!0))}else I=!0,T="nodata",r=r.concat(Fp(n.serverSyncTree_,p.currentWriteId,!0))}fa(n.eventQueue_,e,r),r=[],I&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===T?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(T),!1,null)))}RM(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)eb(i[h]);NM(n,n.transactionQueueTree_)}(n,tj(n,e),i),i}function ej(n,t){let e,i=n.transactionQueueTree_;for(e=an(t);null!==e&&void 0===N_(i);)i=DM(i,e),e=an(t=si(t));return i}function tj(n,t){const e=[];return nj(n,t,e),e.sort((i,r)=>i.order-r.order),e}function nj(n,t,e){const i=N_(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);TM(t,r=>{nj(n,r,e)})}function RM(n,t){const e=N_(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,mP(t,e.length>0?e:void 0)}TM(t,i=>{RM(n,i)})}function CP(n,t){const e=jC(ej(n,t)),i=DM(n.transactionQueueTree_,t);return function j4(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{DP(n,r)}),DP(n,i),HV(i,r=>{DP(n,r)}),e}function DP(n,t){const e=N_(t);if(e){const i=[];let r=[],o=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,L.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,e[l].status=3,e[l].abortReason="set"):((0,L.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(Fp(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?mP(t,void 0):e.length=o+1,fa(n.eventQueue_,jC(t),r);for(let l=0;l<i.length;l++)eb(i[l])}}const TP=function(n,t){const e=f5(n),i=e.namespace;return"firebase.com"===e.domain&&Gu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Gu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ak(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Vn(e.pathString)}},f5=function(n){let t="",e="",i="",r="",o="",l=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),t=n.substring(0,Math.min(I,T)),I<T&&(r=function d5(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(I,T)));const N=function h5(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Os(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,T)));y=t.indexOf(":"),y>=0?(l="https"===h||"wss"===h,p=parseInt(t.substring(y+1),10)):y=t.length;const P=t.slice(0,y);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const H=t.indexOf(".");i=t.substring(0,H).toLowerCase(),e=t.substring(H+1),o=i}"ns"in N&&(o=N.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:l,scheme:h,pathString:r,namespace:o}},ij="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",p5=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const o=new Array(8);for(r=7;r>=0;r--)o[r]=ij.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let l=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=ij.charAt(t[r]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class rj{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class sj{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SP{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class oj{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return i5(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){pc("OnDisconnect.remove",this._path);const t=new L.BH;return JV(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){pc("OnDisconnect.set",this._path),zu("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return JV(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){pc("OnDisconnect.setWithPriority",this._path),zu("OnDisconnect.setWithPriority",t,this._path,!1),vP("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function r5(n,t,e,i,r){const o=Vi(e,i);n.server_.onDisconnectPut(t.toString(),o.val(!0),(l,h)=>{"ok"===l&&sb(n.onDisconnect_,t,o),Lp(0,r,l,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){pc("OnDisconnect.update",this._path),$V("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function s5(n,t,e,i){if((0,L.xb)(e))return Jr("onDisconnect().update() called with empty data.  Don't do anything."),void Lp(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,o)=>{"ok"===r&&Xr(e,(l,h)=>{const p=Vi(h);sb(n.onDisconnect_,Mi(t,l),p)}),Lp(0,i,r,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Po{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return cn(this._path)?null:kk(this._path)}get ref(){return new gc(this._repo,this._path)}get _queryIdentifier(){const t=uV(this._queryParams),e=Tk(t);return"{}"===e?"default":e}get _queryObject(){return uV(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Po))return!1;const e=this._repo===t._repo,i=Pk(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function s8(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function xM(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Bp(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===$u){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Mp)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Rh)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===li){if(null!=t&&!HC(t)||null!=e&&!HC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof Vk||n.getIndex()===jk,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OM(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gc extends Po{constructor(t,e){super(t,e,new cM,!1)}get parent(){const t=JU(this._path);return null===t?null:new gc(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class R_{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Vn(t),i=x_(this.ref,t);return new R_(this._node.getChild(e),i,li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new R_(r,x_(this.ref,i),li)))}hasChild(t){const e=new Vn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aj(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?x_(n._root,t):n._root}function cj(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=TP(t,n._repo.repoInfo_.nodeAdmin);WV("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Gu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),aj(n,e.path.toString())}function x_(n,t){return null===an((n=(0,L.m9)(n))._path)?q4("child","path",t,!1):WC("child","path",t,!1),new gc(n._repo,Mi(n._path,t))}function AP(n,t){n=(0,L.m9)(n),pc("set",n._path),zu("set",t,n._path,!1);const e=new L.BH;return wP(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function v5(n,t){$V("update",t,n._path,!1);const e=new L.BH;return function t5(n,t,e,i){lb(n,"update",{path:t.toString(),value:e});let r=!0;const o=zC(n),l={};if(Xr(e,(h,p)=>{r=!1,l[h]=VV(Mi(t,h),Vi(p),n.serverSyncTree_,o)}),r)Jr("update() called with empty data.  Don't do anything."),Lp(0,i,"ok",void 0);else{const h=MM(n),p=function S4(n,t,e,i){!function $8(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=Qk(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ui.fromObject(e);return cb(n,new ob({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,l,h);AM(n.eventQueue_,p),n.server_.merge(t.toString(),e,(y,I)=>{const T="ok"===y;T||Os("update at "+t+" failed: "+y);const N=Fp(n.serverSyncTree_,h,!T),P=N.length>0?ub(n,t):t;fa(n.eventQueue_,P,N),Lp(0,i,y,I)}),Xr(e,y=>{const I=CP(n,Mi(t,y));ub(n,I)}),fa(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function b5(n){n=(0,L.m9)(n);const t=new SP(()=>{}),e=new qC(t);return function e5(n,t,e){const i=function x4(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,I)=>{const T=fo(y,e);i=i||kp(I,T)});let r=n.syncPointTree_.get(e);r?i=i||kp(r,kn()):(r=new MV,n.syncPointTree_=n.syncPointTree_.set(e,r));const o=null!=i,l=o?new xp(i,!0,!1):null;return function g4(n){return pM(n.viewCache_)}(NV(r,t,gM(n.pendingWriteTree_,t._path),o?l.getNode():Zt.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const o=Vi(r).withIndex(t._queryParams.getIndex());let l;if(aP(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())l=BC(n.serverSyncTree_,t._path,o);else{const h=UC(n.serverSyncTree_,t);l=PV(n.serverSyncTree_,t._path,o,h)}return fa(n.eventQueue_,t._path,l),EM(n.serverSyncTree_,t,e,null,!0),o},r=>(lb(n,"get for query "+(0,L.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new R_(i,new gc(n._repo,n._path),n._queryParams.getIndex()))}class qC{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new rj("value",this,new R_(t.snapshotNode,new gc(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new sj(this,t,e):null}matches(t){return t instanceof qC&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kM{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new sj(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=x_(new gc(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new rj(t.type,this,new R_(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof kM&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ZC(n,t,e,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const p=e,y=(I,T)=>{EP(n._repo,n,h),p(I,T)};y.userCallback=e.userCallback,y.context=e.context,e=y}const l=new SP(e,o||void 0),h="value"===t?new qC(l):new kM(t,l);return function o5(n,t,e){let i;i=".info"===an(t._path)?aP(n.infoSyncTree_,t,e):aP(n.serverSyncTree_,t,e),zV(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>EP(n._repo,n,h)}function MP(n,t,e,i){return ZC(n,"value",t,e,i)}function lj(n,t,e,i){return ZC(n,"child_added",t,e,i)}function uj(n,t,e,i){return ZC(n,"child_changed",t,e,i)}function dj(n,t,e,i){return ZC(n,"child_moved",t,e,i)}function hj(n,t,e,i){return ZC(n,"child_removed",t,e,i)}function fj(n,t,e){let i=null;const r=e?new SP(e):null;"value"===t?i=new qC(r):t&&(i=new kM(t,r)),EP(n._repo,n,i)}class El{}class pj extends El{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zu("endAt",this._value,t._path,!0);const e=$k(t._queryParams,this._value,this._key);if(OM(e),Bp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Po(t._repo,t._path,e,t._orderByCalled)}}class E5 extends El{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zu("endBefore",this._value,t._path,!1);const e=function R8(n,t,e){let i;return i=$k(n,t,n.index_===$u||e?e:Mp),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(OM(e),Bp(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Po(t._repo,t._path,e,t._orderByCalled)}}class gj extends El{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zu("startAt",this._value,t._path,!0);const e=Gk(t._queryParams,this._value,this._key);if(OM(e),Bp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Po(t._repo,t._path,e,t._orderByCalled)}}class D5 extends El{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){zu("startAfter",this._value,t._path,!1);const e=function N8(n,t,e){let i;return i=Gk(n,t,n.index_===$u||e?e:Rh),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(OM(e),Bp(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Po(t._repo,t._path,e,t._orderByCalled)}}class S5 extends El{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Po(t._repo,t._path,function A8(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class M5 extends El{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Po(t._repo,t._path,function M8(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class R5 extends El{constructor(t){super(),this._path=t}_apply(t){xM(t,"orderByChild");const e=new Vn(this._path);if(cn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Vk(e),r=lM(t._queryParams,i);return Bp(r),new Po(t._repo,t._path,r,!0)}}class O5 extends El{_apply(t){xM(t,"orderByKey");const e=lM(t._queryParams,$u);return Bp(e),new Po(t._repo,t._path,e,!0)}}class P5 extends El{_apply(t){xM(t,"orderByPriority");const e=lM(t._queryParams,li);return Bp(e),new Po(t._repo,t._path,e,!0)}}class L5 extends El{_apply(t){xM(t,"orderByValue");const e=lM(t._queryParams,jk);return Bp(e),new Po(t._repo,t._path,e,!0)}}class U5 extends El{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(zu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pj(this._value,this._key)._apply(new gj(this._value,this._key)._apply(t))}}function Il(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function v4(n){(0,L.hu)(!vM,"__referenceConstructor has already been defined"),vM=n})(gc),function C4(n){(0,L.hu)(!wM,"__referenceConstructor has already been defined"),wM=n}(gc);const NP={};function _j(n,t,e,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||Gu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=TP(o,r),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,o=`http://${y}?ns=${h.namespace}`,l=TP(o,r),h=l.repoInfo):p=!l.repoInfo.secure;const I=r&&p?new TC(TC.OWNER):new kq(n.name,n.options,t);WV("Invalid Firebase Database URL",l),cn(l.path)||Gu("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function $5(n,t,e,i){let r=NP[t.name];r||(r={},NP[t.name]=r);let o=r[n.toURLString()];return o&&Gu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Q4(n,false,e,i),r[n.toURLString()]=o,o}(h,n,I,new Oq(n.name,e));return new z5(T,n)}class z5{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function J4(n,t,e){if(n.stats_=Rk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new uM(n.repoInfo_,(i,r,o,l)=>{KV(n,i,r,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QV(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new T_(n.repoInfo_,t,(i,r,o,l)=>{KV(n,i,r,o,l)},i=>{QV(n,i)},i=>{!function X4(n,t){Xr(t,(e,i)=>{bP(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Lq(n,t){const e=n.toString();return Nk[e]||(Nk[e]=t()),Nk[e]}(n.repoInfo_,()=>new L8(n.stats_,n.server_)),n.infoData_=new x8,n.infoSyncTree_=new kV({startListening:(i,r,o,l)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=BC(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),bP(n,"connected",!1),n.serverSyncTree_=new kV({startListening:(i,r,o,l)=>(n.server_.listen(i,o,r,(h,p)=>{const y=l(h,p);fa(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gc(this._repo,kn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function G5(n,t){const e=NP[t];(!e||e[n.key]!==n)&&Gu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),XV(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Gu("Cannot call "+t+" on a deleted database.")}}function yj(){VU.IS_TRANSPORT_INITIALIZED&&Os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function q5(){yj(),Np.forceDisallow()}function Z5(){yj(),tb.forceDisallow(),Np.forceAllow()}function Q5(n,t){bU(n,t)}const X5={".sv":"timestamp"};class nZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}T_.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},T_.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function J5(n){gU(cs.SDK_VERSION),(0,cs._registerComponent)(new ea.wA("database",(t,{instanceIdentifier:e})=>_j(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,cs.registerVersion)(fU,"0.14.1",n),(0,cs.registerVersion)(fU,"0.14.1","esm2017")}();const oZ=new No.Yd("@firebase/database-compat"),bj=function(n){oZ.warn("FIREBASE WARNING: "+n)};class lZ{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,bj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class uZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Up{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),WC("DataSnapshot.child","path",t,!1),new Up(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),WC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Up(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new pa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class fs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var o;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const l=fs.getCancelAndContextArgs_("Query.on",i,r),h=(y,I)=>{e.call(l.context,new Up(this.database,y),I)};h.userCallback=e,h.context=l.context;const p=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(t){case"value":return MP(this._delegate,h,p),e;case"child_added":return lj(this._delegate,h,p),e;case"child_removed":return hj(this._delegate,h,p),e;case"child_changed":return uj(this._delegate,h,p),e;case"child_moved":return dj(this._delegate,h,p),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,fj(this._delegate,t,r)}else fj(this._delegate,t)}get(){return b5(this._delegate).then(t=>new Up(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const o=fs.getCancelAndContextArgs_("Query.once",i,r),l=new L.BH,h=(y,I)=>{const T=new Up(this.database,y);e&&e.call(o.context,T,I),l.resolve(T)};h.userCallback=e,h.context=o.context;const p=y=>{o.cancel&&o.cancel.call(o.context,y),l.reject(y)};switch(t){case"value":MP(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":lj(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":hj(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":uj(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":dj(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new fs(this.database,Il(this._delegate,function A5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new S5(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new fs(this.database,Il(this._delegate,function N5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new M5(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new fs(this.database,Il(this._delegate,function x5(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return WC("orderByChild","path",n,!1),new R5(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new fs(this.database,Il(this._delegate,function k5(){return new O5}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new fs(this.database,Il(this._delegate,function F5(){return new P5}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new fs(this.database,Il(this._delegate,function B5(){return new L5}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new fs(this.database,Il(this._delegate,function C5(n=null,t){return $C("startAt","key",t,!0),new gj(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new fs(this.database,Il(this._delegate,function T5(n,t){return $C("startAfter","key",t,!0),new D5(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new fs(this.database,Il(this._delegate,function w5(n,t){return $C("endAt","key",t,!0),new pj(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new fs(this.database,Il(this._delegate,function I5(n,t){return $C("endBefore","key",t,!0),new E5(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new fs(this.database,Il(this._delegate,function V5(n,t){return $C("equalTo","key",t,!0),new U5(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof fs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new pa(this.database,new gc(this._delegate._repo,this._delegate._path))}}class pa extends fs{constructor(t,e){super(t,new Po(e._repo,e._path,new cM,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new pa(this.database,x_(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new pa(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new pa(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=AP(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,bj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pc("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=v5(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function y5(n,t,e){if(pc("setWithPriority",n._path),zu("setWithPriority",t,n._path,!1),vP("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return wP(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function m5(n){return pc("remove",n._path),AP(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function iZ(n,t,e){var i;if(n=(0,L.m9)(n),pc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,o=new L.BH,h=MP(n,()=>{});return function c5(n,t,e,i,r,o){lb(n,"transaction on "+t);const l={path:t,update:e,onComplete:i,status:null,order:_U(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=IP(n,t,void 0);l.currentInputSnapshot=h;const p=l.update(h.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{GC("transaction failed: Data returned ",p,l.path),l.status=0;const y=DM(n.transactionQueueTree_,t),I=N_(y)||[];let T;I.push(l),mP(y,I),"object"==typeof p&&null!==p&&(0,L.r3)(p,".priority")?(T=(0,L.DV)(p,".priority"),(0,L.hu)(HC(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(IM(n.serverSyncTree_,t)||Zt.EMPTY_NODE).getPriority().val();const N=zC(n),P=Vi(p,T),H=fP(P,h,N);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=H,l.currentWriteId=MM(n);const K=oP(n.serverSyncTree_,t,H,l.currentWriteId,l.applyLocally);fa(n.eventQueue_,t,K),NM(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,y,I)=>{let T=null;p?o.reject(p):(T=new R_(I,new gc(n._repo,n._path),li),o.resolve(new nZ(y,T)))},h,r),o.promise}(this._delegate,t,{applyLocally:i}).then(o=>new uZ(o.committed,new Up(this.database,o.snapshot)));return e&&r.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function _5(n,t){n=(0,L.m9)(n),pc("setPriority",n._path),vP("setPriority",t,!1);const e=new L.BH;return wP(n._repo,Mi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function g5(n,t){n=(0,L.m9)(n),pc("push",n._path),zu("push",t,n._path,!0);const e=YV(n._repo),i=p5(e),r=x_(n,i),o=x_(n,i);let l;return l=null!=t?AP(o,t).then(()=>o):Promise.resolve(o),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,t),r=i.then(l=>new pa(this.database,l));e&&r.then(()=>e(null),l=>e(l));const o=new pa(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return pc("Reference.onDisconnect",this._delegate._path),new lZ(new oj(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class YC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:q5,forceLongPolling:Z5}}useEmulator(t,e,i={}){!function vj(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Gu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Gu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new TC(TC.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);o=new TC(l)}!function H5(n,t,e,i){n.repoInfo_=new Ak(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,o)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof pa){const e=cj(this._delegate,t.toString());return new pa(this,e)}{const e=aj(this._delegate,t);return new pa(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=cj(this._delegate,t);return new pa(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Y5(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),XV(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function K5(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function a5(n){n.persistentConnection_&&n.persistentConnection_.resume(ZV)}(n._repo)}(this._delegate)}}YC.ServerValue={TIMESTAMP:function eZ(){return X5}(),increment:n=>function tZ(n){return{".sv":{increment:n}}}(n)};var hZ=Object.freeze({__proto__:null,initStandalone:function dZ({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){gU(e);const l=new ea.zt("auth-internal",new ea.H0("database-standalone"));return l.setComponent(new ea.wA("auth-internal",()=>i,"PRIVATE")),{instance:new YC(_j(n,l,void 0,t,o),n),namespace:r}}});const fZ=YC.ServerValue;function wj(n){return null==n}function Ej(n){return"function"==typeof n.set}function Ij(n,t){return Ej(t)?t:n.ref(t)}function Cj(n,t){if(function gZ(n){return"string"==typeof n}(n))return t.stringCase();if(Ej(n))return t.firebaseCase();if(function mZ(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function KC(n,t,e="on",i=Ld.z){return new Hn.y(r=>{let o=null;return o=n[e](t,(l,h)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,pt.U)(r=>{const{snapshot:o,prevKey:l}=r;let h=null;return o.exists()&&(h=o.key),{type:t,payload:o,prevKey:l,key:h}}),(0,nO.B)())}function Dj(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function vZ(n,t){const{payload:e,prevKey:i,key:r}=t,o=Dj(n,r),l=function yZ(n,t){if(wj(t))return 0;{const e=Dj(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(l,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(l,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Tj(n){return(wj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Sj(n,t,e){return function _Z(n,t,e){return KC(n,"value","once",e).pipe((0,Nn.w)(i=>{const r=[(0,nt.of)(i)];return t.forEach(o=>r.push(KC(n,o,"on",e))),(0,mA.T)(...r).pipe(Ko(vZ,[]))}),(0,Kg.x)())}(n,t=Tj(t),e)}function Aj(n,t,e){const i=(t=Tj(t)).map(r=>KC(n,r,"on",e));return(0,mA.T)(...i)}function Mj(n,t){return function(i,r){return Cj(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function IZ(n){return function(e){return e?Cj(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Nj(n,t){return function(){return KC(n,"value","on",t)}}!function pZ(n){n.INTERNAL.registerComponent(new ea.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new YC(r,i)},"PUBLIC").setServiceProps({Reference:pa,Query:fs,Database:YC,DataSnapshot:Up,enableLogging:Q5,INTERNAL:hZ,ServerValue:fZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.1")}(Tf.Z);const TZ=new u.OlP("angularfire2.realtimeDatabaseURL"),SZ=new u.OlP("angularfire2.database.use-emulator");let AZ=(()=>{class n{constructor(e,i,r,o,l,h,p,y,I,T,N,P,H,K,X){this.schedulers=h;const xe=p,Ue=(0,Ii.on)(e,l,i);y&&MO(Ue,l,I,N,P,H,T,K),this.database=(0,Ii.cc)(`${Ue.name}.database.${r}`,"AngularFireDatabase",Ue.name,()=>{const $e=l.runOutsideAngular(()=>Ue.database(r||void 0));return xe&&$e.useEmulator(...xe),$e},[xe])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>Ij(this.database,e));let o=r;return i&&(o=i(r)),function CZ(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Mj(i,"update"),set:Mj(i,"set"),push:r=>i.push(r),remove:IZ(i),snapshotChanges:r=>Sj(n,r,e).pipe(_n.iC),stateChanges:r=>Aj(n,r,e).pipe(_n.iC),auditTrail:r=>function bZ(n,t,e){return function EZ(n,t,e){return function wZ(n,t){return KC(n,"value","on",t).pipe((0,pt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(XA(t),(0,pt.U)(([r,o])=>{const l=r.lastKeyToLoad,h=o.map(p=>p.key);return{actions:o,lastKeyToLoad:l,loadedKeys:h}}),function bq(n){return(0,Cn.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,Zn.x)(e,o=>(i||(i=!n(o,r++)))&&e.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,pt.U)(r=>r.actions))}(n,Aj(n,t).pipe(Ko((r,o)=>[...r,o],[])),e)}(n,r,e).pipe(_n.iC),valueChanges:(r,o)=>Sj(n,r,e).pipe((0,pt.U)(h=>h.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),_n.iC)}}(o,this)}object(e){return function DZ(n,t){return{query:n,snapshotChanges:()=>Nj(n,t.schedulers.outsideAngular)().pipe(_n.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Nj(n,t.schedulers.outsideAngular)().pipe(_n.iC,(0,pt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ij(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(u.LFG(Ii.Dh),u.LFG(Ii.xv,8),u.LFG(TZ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(SZ,8),u.LFG(aC,8),u.LFG(IO,8),u.LFG(CO,8),u.LFG(DO,8),u.LFG(TO,8),u.LFG(SO,8),u.LFG(AO,8),u.LFG(oC,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),MZ=(()=>{class n{constructor(){DA.Z.registerVersion("angularfire",_n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[AZ]}),n})();const Rj_firebase={apiKey:"AIzaSyCyUQKXj4y30YlEI1kjrA4Cq36VoK9YsRw",authDomain:"auth-development-a3663.firebaseapp.com",projectId:"auth-development-a3663",storageBucket:"auth-development-a3663.appspot.com",messagingSenderId:"925325853760",appId:"1:925325853760:web:cf9a8856fcad89d0518ba5"};let NZ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}open(e){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:20,vars:0,consts:[[1,"d-flex","justify-content-center",2,"min-height","100vh"],[1,"w-100",2,"max-width","400px"],[1,"card"],[1,"card-body",3,"keydown.enter"],[1,"card-title"],["type","email","required","","placeholder","email",1,"form-control","mb-3"],["emailRef",""],["type","password","required","","placeholder","password",1,"form-control","mb-3"],["passwordRef",""],["type","submit",1,"form-control","mb-3","btn","btn-primary",3,"click"],["className","w-100 text-center mt-2"],["routerLink","/forgot-password",1,"redirect"],["className","w-100 text-center mt-4"],["routerLink","/register-user",1,"redirect"]],template:function(i,r){if(1&i){const o=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u.NdJ("keydown.enter",function(){u.CHM(o);const h=u.MAs(7),p=u.MAs(9);return u.KtG(r.authService.SignIn(h.value,p.value))}),u.TgZ(4,"h2",4),u._uU(5,"Log in"),u.qZA(),u._UZ(6,"input",5,6)(8,"input",7,8),u.TgZ(10,"button",9),u.NdJ("click",function(){u.CHM(o);const h=u.MAs(7),p=u.MAs(9);return u.KtG(r.authService.SignIn(h.value,p.value))}),u._uU(11,"Log in"),u.qZA(),u.TgZ(12,"div",10)(13,"span",11),u._uU(14," Forgot password?"),u.qZA()()()(),u.TgZ(15,"div",12)(16,"span"),u._uU(17,"Need an account?"),u.TgZ(18,"span",13),u._uU(19," Sign Up"),u.qZA()()()()()}},dependencies:[Fd]})}return n})(),RZ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:19,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"min-height","100vh"],[1,"w-100",2,"max-width","400px"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","email","required","","placeholder","Email address",1,"form-control","mb-3"],["emailRef",""],["type","password","required","","placeholder","Password",1,"form-control","mb-3"],["passwordRef",""],["type","password","required","","placeholder","Password confirmation",1,"form-control","mb-3"],["passwordConfirmationRef",""],[1,"form-control","mb-3","btn","btn-primary",3,"click"],["className","w-100 text-center mt-4"],["routerLink","/sign-in",1,"redirect"]],template:function(i,r){if(1&i){const o=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5,"Sign up"),u.qZA(),u._UZ(6,"input",5,6)(8,"input",7,8)(10,"input",9,10),u.TgZ(12,"button",11),u.NdJ("click",function(){u.CHM(o);const h=u.MAs(7),p=u.MAs(9);return u.KtG(r.authService.SignUp(h.value,p.value))}),u._uU(13,"Sign up"),u.qZA()()(),u.TgZ(14,"div",12)(15,"span"),u._uU(16,"Already have an account?"),u.TgZ(17,"span",13),u._uU(18," Log in"),u.qZA()()()()()}},dependencies:[Fd]})}return n})();function xZ(n,t){if(1&n&&(u.TgZ(0,"div",1)(1,"div",7)(2,"div",8),u._UZ(3,"img",9),u.TgZ(4,"div",10)(5,"h1"),u._uU(6,"Hello: "),u.TgZ(7,"strong"),u._uU(8),u.qZA()(),u.TgZ(9,"p"),u._uU(10,"User ID: "),u.TgZ(11,"strong"),u._uU(12),u.qZA()(),u.TgZ(13,"p"),u._uU(14,"Email: "),u.TgZ(15,"strong"),u._uU(16),u.qZA()(),u.TgZ(17,"p"),u._uU(18,"Email Verified: "),u.TgZ(19,"strong"),u._uU(20),u.qZA()()()()()()),2&n){const e=t.ngIf;u.xp6(3),u.s9C("src",e.photoURL?e.photoURL:"/assets/male_avatar.png",u.LSH),u.s9C("alt",e.displayName),u.xp6(5),u.Oqu(e.displayName?e.displayName:"User"),u.xp6(4),u.Oqu(e.uid),u.xp6(4),u.Oqu(e.email),u.xp6(4),u.Oqu(e.emailVerified)}}let OZ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],["width","64px","height","64px",1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"main",2)(3,"div",3)(4,"div",4)(5,"h1",5),u._uU(6,"User Profile"),u.qZA()(),u.YNc(7,xZ,21,6,"div",6),u.qZA()()()()),2&i&&(u.xp6(7),u.Q6J("ngIf",r.authService.userData))},dependencies:[Hi]})}return n})(),kZ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:16,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"min-height","100vh"],[1,"w-100",2,"max-width","550px"],[1,"card"],[1,"card-body"],[1,"card-title"],["type","text","required","","placeholder","Registed email",1,"form-control","mb-3"],["emailRef",""],["type","submit","value","Reset password",1,"btn","btn-primary",3,"click"],[1,"w-100","text-center","mt-4"],["routerLink","/sign-in",1,"redirect"]],template:function(i,r){if(1&i){const o=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5,"Reset password"),u.qZA(),u.TgZ(6,"p"),u._uU(7,"Please enter your email address to request a password reset"),u.qZA(),u._UZ(8,"input",5,6),u.TgZ(10,"input",7),u.NdJ("click",function(){u.CHM(o);const h=u.MAs(9);return u.KtG(r.authService.ForgotPassword(h.value))}),u.qZA()()(),u.TgZ(11,"div",8)(12,"span"),u._uU(13,"Go back to ? "),u.TgZ(14,"span",9),u._uU(15,"Log in"),u.qZA()()()()()}},dependencies:[Fd]})}return n})();function PZ(n,t){if(1&n&&(u.TgZ(0,"div",4)(1,"p",9),u._uU(2,"We have sent a confirmation email to "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,"."),u.qZA(),u.TgZ(6,"p",9),u._uU(7,"Please check your email and click on the link to verfiy your email address."),u.qZA()()),2&n){const e=t.ngIf;u.xp6(4),u.Oqu(e.email)}}let FZ=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(Ip))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Thank You for Registering"),u.qZA(),u.YNc(5,PZ,8,1,"div",3),u.TgZ(6,"div",4)(7,"button",5),u.NdJ("click",function(){return r.authService.SendVerificationMail()}),u._UZ(8,"i",6),u._uU(9," Resend Verification Email "),u.qZA()()(),u.TgZ(10,"div",7)(11,"span"),u._uU(12,"Go back to?"),u.TgZ(13,"span",8),u._uU(14," Sign in"),u.qZA()()()()()),2&i&&(u.xp6(5),u.Q6J("ngIf",r.authService.userData))},dependencies:[Fd,Hi]})}return n})(),xj=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(Ip),u.LFG(as))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PM={_id:"",type:"string",title:"string",description:"string",content:"string",createAt:20231012,modifiedAt:20231013};let RP=(()=>{class n{constructor(){this.noteList=[],this.url="https://toidamme.com:4400/api/notes"}getNotes(){var e=this;return(0,pe.Z)(function*(){const i=yield fetch(e.url);return console.log(e.url),(yield i.json())??{}})()}searchNotes(e){var i=this;return(0,pe.Z)(function*(){return(yield(yield fetch(`${i.url}/search/${e}`)).json())??{}})()}getNote(e){var i=this;return(0,pe.Z)(function*(){return(yield(yield fetch(`${i.url}/${e}`)).json())??{}})()}updateNote(e,i){var r=this;return(0,pe.Z)(function*(){yield fetch(`${r.url}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})})()}addNote(e){var i=this;return(0,pe.Z)(function*(){return(yield(yield fetch(`${i.url}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json())??{}})()}deleteNote(e){var i=this;return(0,pe.Z)(function*(){yield fetch(`${i.url}/delete/${e}`,{method:"POST"})})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BZ=(()=>{class n{constructor(){this.onItemSelected=new u.vpe}onSelectItem(e){e?.preventDefault(),e?.stopPropagation(),this.onItemSelected.emit({id:this.noteItem._id})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-note-item"]],inputs:{noteItem:"noteItem",active:"active"},outputs:{onItemSelected:"onItemSelected"},decls:5,vars:3,consts:[[1,"list-item",3,"ngClass","click"],[1,"item-title"],[1,"item-description"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0),u.NdJ("click",function(l){return r.onSelectItem(l)}),u.TgZ(1,"div",1),u._uU(2),u.qZA(),u.TgZ(3,"div",2),u._uU(4),u.qZA()()),2&i&&(u.Q6J("ngClass",r.active?"active":""),u.xp6(2),u.Oqu(r.noteItem.title),u.xp6(2),u.Oqu(r.noteItem.description))},dependencies:[Ia],styles:["[_nghost-%COMP%]{--hover: rgba(0, 115, 255, .585);--active: rgba(0, 153, 255, .395)}.list-item[_ngcontent-%COMP%]{cursor:pointer}.list-item[_ngcontent-%COMP%]:hover{border-radius:5px;border:2px solid var(--hover)}.active[_ngcontent-%COMP%]{background-color:var(--active)}.item-title[_ngcontent-%COMP%]{padding:.2rem .2rem .2rem 1rem;font-weight:700;font-size:1.2rem;color:#242424}.item-description[_ngcontent-%COMP%]{padding:.2rem .2rem .2rem 1.5rem;font-style:italic;font-size:1rem;color:#01497994}"]})}return n})();function UZ(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"app-note-item",7),u.NdJ("onItemSelected",function(r){u.CHM(e);const o=u.oxw(2);return u.KtG(o.onNotifyItemChanged(r))}),u.qZA()}if(2&n){const e=t.$implicit,i=u.oxw(2);u.Q6J("noteItem",e)("active",null!==i.activeNoteId&&e._id===i.activeNoteId)}}function VZ(n,t){if(1&n&&(u.TgZ(0,"div"),u.YNc(1,UZ,1,2,"app-note-item",6),u.qZA()),2&n){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.currentNoteList)}}let jZ=(()=>{class n{constructor(){this.noteService=(0,u.f3M)(RP),this.activeItemChanged=new u.vpe,this.currentNoteListChanged=new u.vpe,this.currentNoteList=[]}onNotifyItemChanged(e){this.activeNoteId=e.id,this.activeItemChanged.emit({id:this.activeNoteId})}onDeleteCurItem(e){e?.preventDefault(),e?.stopPropagation(),this.noteService?.deleteNote(this.activeNoteId),this.currentNoteListChanged.emit(this.activeNoteId)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-note-list"]],inputs:{currentNoteList:"currentNoteList",activeNoteId:"activeNoteId"},outputs:{activeItemChanged:"activeItemChanged",currentNoteListChanged:"currentNoteListChanged"},decls:7,vars:1,consts:[[1,"list-header"],[1,"crud-actions"],["clickable","",3,"click"],["aria-hidden","false","aria-label","Delete the active note"],[1,"list-content"],[4,"ngIf"],[3,"noteItem","active","onItemSelected",4,"ngFor","ngForOf"],[3,"noteItem","active","onItemSelected"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"span",2),u.NdJ("click",function(l){return r.onDeleteCurItem(l)}),u.TgZ(3,"mat-icon",3),u._uU(4,"delete"),u.qZA()()()(),u.TgZ(5,"div",4),u.YNc(6,VZ,2,1,"div",5),u.qZA()),2&i&&(u.xp6(6),u.Q6J("ngIf",r.currentNoteList))},dependencies:[Lr,Hi,TB,BZ],styles:["[_nghost-%COMP%]{--header-height: 50px;--padding-standard: 2px;--hover: orange;--icon-scale: 1.5;--icon-width: 50px}.list-header[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-between;height:var(--header-height);padding:.5rem;box-shadow:0 1px 2px gray}.crud-actions[_ngcontent-%COMP%]{padding:var(--padding-standard)}.icon-x2[_ngcontent-%COMP%]{transform:scale(var(--icon-scale));width:var(--icon-width)}.crud-actions[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:hover{color:var(--hover)}.list-content[_ngcontent-%COMP%]{height:calc(100vh - var(--padding-standard)*2 - var(--header-height) - var(--top-panel-height));padding:var(--padding-standard);box-shadow:0 1px 2px gray}"]})}return n})();const Oj=function(){return{standalone:!0}};function HZ(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",12)(1,"label",13),u._uU(2,"Title:"),u.qZA(),u.TgZ(3,"input",14),u.NdJ("ngModelChange",function(r){u.CHM(e);const o=u.oxw();return u.KtG(o.activeNote.title=r)}),u.qZA()()}if(2&n){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.activeNote.title)("ngModelOptions",u.DdM(2,Oj))}}function GZ(n,t){if(1&n){const e=u.EpF();u.TgZ(0,"div",12)(1,"label",15),u._uU(2,"Details:"),u.qZA(),u.TgZ(3,"textarea",16),u.NdJ("ngModelChange",function(r){u.CHM(e);const o=u.oxw();return u.KtG(o.activeNote.content=r)})("keydown.tab",function(r){u.CHM(e);const o=u.oxw();return u.KtG(o.processTabKey(r))}),u.qZA()()}if(2&n){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.activeNote.content)("ngModelOptions",u.DdM(2,Oj))}}let $Z=(()=>{class n{constructor(){this.onChanged=new u.vpe,this.onSearch=new u.vpe,this.noteService=(0,u.f3M)(RP),this.curPos=-1}processTabKey(e){e?.preventDefault();const i=e.currentTarget;this.curPos=i.selectionStart+1;const r=i.value.substring(0,i.selectionStart),o=i.value.substring(i.selectionEnd);i.value=r+"\t"+o,i.selectionStart=i.selectionEnd=this.curPos,i.focus()}addNewNote(e){e?.preventDefault(),e?.stopPropagation(),this.activeNote=PM,function LZ(n){console.log(n),n._id="",n.title="new note",n.content=""}(this.activeNote)}updateCurNote(e){var i=this;return(0,pe.Z)(function*(){e?.preventDefault(),e?.stopPropagation(),null!==i.activeNote&&(""===i.activeNote._id?(i.activeNote=yield i.noteService?.addNote(i.activeNote),i.onChanged.emit(JSON.stringify(i.activeNote))):(i.noteService?.updateNote(i.activeNote._id,i.activeNote),i.onChanged.emit(JSON.stringify(i.activeNote))))})()}onSearchText(e){""!==e&&this.onSearch.emit(e)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-note-content"]],inputs:{activeNote:"activeNote"},outputs:{onChanged:"onChanged",onSearch:"onSearch"},decls:15,vars:2,consts:[[1,"content-header"],[1,"crud-actions"],["clickable","",3,"click"],["aria-hidden","false","aria-label","Add a new note","fontIcon","add"],["aria-hidden","false","aria-label","Save the current note","fontIcon","save"],[1,"d-flex"],["type","search","placeholder","search",1,"form-control","me-2"],["filter",""],["type","submit",1,"btn","btn-outline-secondary",3,"click"],["aria-hidden","false","aria-label","Filter notes","fontIcon","search"],[1,"content-detail"],["class","",4,"ngIf"],[1,""],["for","note-title",1,"form-label"],["type","text","id","note-detail","placeholder","title of the note",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange"],["for","note-detail",1,"form-label"],["id","note-detail","rows","32","placeholder","All details of the active note",1,"form-control","form-control-sm",3,"ngModel","ngModelOptions","ngModelChange","keydown.tab"]],template:function(i,r){if(1&i){const o=u.EpF();u.TgZ(0,"div",0)(1,"div",1)(2,"span",2),u.NdJ("click",function(h){return r.addNewNote(h)}),u._UZ(3,"mat-icon",3),u.qZA(),u.TgZ(4,"span",2),u.NdJ("click",function(h){return r.updateCurNote(h)}),u._UZ(5,"mat-icon",4),u.qZA()(),u.TgZ(6,"form",5),u._UZ(7,"input",6,7),u.TgZ(9,"button",8),u.NdJ("click",function(){u.CHM(o);const h=u.MAs(8);return u.KtG(r.onSearchText(h.value))}),u._UZ(10,"mat-icon",9),u.qZA()()(),u.TgZ(11,"div",10)(12,"form"),u.YNc(13,HZ,4,3,"div",11),u.YNc(14,GZ,4,3,"div",11),u.qZA()()}2&i&&(u.xp6(13),u.Q6J("ngIf",r.activeNote),u.xp6(1),u.Q6J("ngIf",r.activeNote))},dependencies:[Hi,zO,SA,a2,PO,WO,hC,TB],styles:["[_nghost-%COMP%]{--header-height: 50px;--padding-standard: 2px;--hover: orange;--font-size: 1.5rem;--background: rgba(220, 218, 218, .176)}.content-header[_ngcontent-%COMP%]{position:sticky;display:flex;flex-direction:row;justify-content:space-between;height:var(--header-height);padding:.5rem;box-shadow:0 1px 2px gray}.crud-actions[_ngcontent-%COMP%]{padding:var(--padding-standard)}.icon-x2[_ngcontent-%COMP%]{padding:0;transform:scale(1.5);width:48px}.crud-actions[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:hover{color:var(--hover)}.search-form[_ngcontent-%COMP%]{padding:2px}.search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:.75rem;cursor:pointer;align-items:center;padding-top:3px;border:none}.search-icon[_ngcontent-%COMP%]:hover{color:var(--hover)}.content-detail[_ngcontent-%COMP%]{height:calc(100vh - var(--padding-standard)*2 - var(--header-height) - var(--top-panel-height));padding:var(--padding-standard)}.title[_ngcontent-%COMP%]{padding-bottom:var(--padding-standard);padding-right:var(--padding-standard)}.title[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;width:100%;padding-left:1rem}.detail[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:auto;border:none}"]})}return n})();const WZ=[{path:"notes",component:(()=>{class n{constructor(){this.title="universal-note",this.noteService=(0,u.f3M)(RP),this.noteService.getNotes().then(e=>{this.noteList=e})}updateActiveNote(){var e=this;return(0,pe.Z)(function*(){e.activeItemId&&(e.activeNote=yield e.noteService.getNote(e.activeItemId))})()}onItemChanged(e){var i=this;return(0,pe.Z)(function*(){i.activeItemId=e.id,i.updateActiveNote()})()}onContentChanged(e){let i=JSON.parse(e);this.noteList=this.noteList.find(o=>o._id===i._id)?this.noteList.map(o=>o._id===i._id?i:o):[...this.noteList,i],this.activeItemId=i._id,this.updateActiveNote()}onCurrentNotListChanged(e){var i=this;return(0,pe.Z)(function*(){let r=i.noteList.findIndex(o=>o._id===e);i.noteList.splice(r,1),r=Math.min(r,i.noteList.length-1),r>=0?(i.activeNote=i.noteList[r],i.activeItemId=i.activeNote._id):(i.activeNote=PM,i.activeItemId="")})()}filterNote(e){this.noteService.searchNotes(e).then(i=>{this.noteList=i,this.noteList.length>0?(this.activeNote=this.noteList[0],this.activeItemId=this.activeNote._id):(this.activeNote=PM,this.activeItemId="")})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-note-manager"]],decls:4,vars:3,consts:[[1,"my-content"],[1,"my-container"],[1,"left-panel",3,"currentNoteList","activeNoteId","activeItemChanged","currentNoteListChanged"],[1,"detail",3,"activeNote","onChanged","onSearch"]],template:function(i,r){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"app-note-list",2),u.NdJ("activeItemChanged",function(l){return r.onItemChanged(l)})("currentNoteListChanged",function(l){return r.onCurrentNotListChanged(l)}),u.qZA(),u.TgZ(3,"app-note-content",3),u.NdJ("onChanged",function(l){return r.onContentChanged(l)})("onSearch",function(l){return r.filterNote(l)}),u.qZA()()()),2&i&&(u.xp6(2),u.Q6J("currentNoteList",r.noteList)("activeNoteId",r.activeItemId),u.xp6(1),u.Q6J("activeNote",r.activeNote))},dependencies:[jZ,$Z],styles:['*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{--background: rgba(220, 218, 218, .176);--top-panel-height: 64px}body[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:1.5rem;margin:0}.top-panel[_ngcontent-%COMP%]{height:var(--top-panel-height)}.brand-logo[_ngcontent-%COMP%]{width:var(--top-panel-height)}.my-container[_ngcontent-%COMP%]:after{content:"";display:grid;clear:both}.left-panel[_ngcontent-%COMP%]{width:30%;float:left;height:100%}.detail[_ngcontent-%COMP%]{width:70%;float:left;height:100%}']})}return n})(),canActivate:[xj]},{path:"sign-in",component:NZ},{path:"register-user",component:RZ},{path:"dashboard",component:OZ,canActivate:[xj]},{path:"forgot-password",component:kZ},{path:"verify-email-address",component:FZ}];let zZ=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[Yg.forRoot(WZ),Yg]})}return n})();var qZ=F(4266);const ZZ=["addListener","removeListener"],YZ=["addEventListener","removeEventListener"],KZ=["on","off"];function ps(n,t,e,i){if((0,zi.m)(e)&&(i=e,e=void 0),i)return ps(n,t,e).pipe(Hr(i));const[r,o]=function XZ(n){return(0,zi.m)(n.addEventListener)&&(0,zi.m)(n.removeEventListener)}(n)?YZ.map(l=>h=>n[l](t,h,e)):function QZ(n){return(0,zi.m)(n.addListener)&&(0,zi.m)(n.removeListener)}(n)?ZZ.map(kj(n,t)):function JZ(n){return(0,zi.m)(n.on)&&(0,zi.m)(n.off)}(n)?KZ.map(kj(n,t)):[];if(!r&&(0,qZ.z)(n))return(0,dr.z)(l=>ps(l,t,e))((0,Se.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Hn.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return r(h),()=>o(h)})}function kj(n,t){return e=>i=>n[e](t,i)}var eY=F(671);const{isArray:nY}=Array;function Fj(n){return 1===n.length&&nY(n[0])?n[0]:n}function xP(...n){const t=(0,Is.jO)(n),e=Fj(n);return e.length?new Hn.y(i=>{let r=e.map(()=>[]),o=e.map(()=>!1);i.add(()=>{r=o=null});for(let l=0;!i.closed&&l<e.length;l++)(0,Se.Xf)(e[l]).subscribe((0,Zn.x)(i,h=>{if(r[l].push(h),r.every(p=>p.length)){const p=r.map(y=>y.shift());i.next(t?t(...p):p),r.some((y,I)=>!y.length&&o[I])&&i.complete()}},()=>{o[l]=!0,!r[l].length&&i.complete()}));return()=>{r=o=null}}):xt.E}Math,Math,Math;const _K=["*"],qK=["dialog"];function P_(n){return"string"==typeof n}function F_(n){return null!=n}function gb(n){return(n||document.body).getBoundingClientRect()}const oH={animation:!0,transitionTimerDelayMs:5},U7=()=>{},{transitionTimerDelayMs:V7}=oH,iD=new Map,Bo=(n,t,e,i)=>{let r=i.context||{};const o=iD.get(t);if(o)switch(i.runningTransition){case"continue":return xt.E;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),iD.delete(t)}const l=e(t,i.animation,r)||U7;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>l()),(0,nt.of)(void 0).pipe(function L7(n){return t=>new Hn.y(e=>t.subscribe({next:l=>n.run(()=>e.next(l)),error:l=>n.run(()=>e.error(l)),complete:()=>n.run(()=>e.complete())}))}(n));const h=new tn.x,p=new tn.x,y=h.pipe(function rY(...n){return t=>oe(t,(0,nt.of)(...n))}(!0));iD.set(t,{transition$:h,complete:()=>{p.next(),p.complete()},context:r});const I=function B7(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const T=ps(t,"transitionend").pipe(ni(y),Dn(({target:P})=>P===t));(function Lj(...n){return 1===(n=Fj(n)).length?(0,Se.Xf)(n[0]):new Hn.y(function iY(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,Se.Xf)(n[i]).subscribe((0,Zn.x)(t,r=>{if(e){for(let o=0;o<e.length;o++)o!==i&&e[o].unsubscribe();e=null}t.next(r)})))}}(n))})(function Pj(n=0,t,e=Ld.P){let i=-1;return null!=t&&((0,eY.K)(t)?e=t:i=t),new Hn.y(r=>{let o=function tY(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(I+V7).pipe(ni(y)),T,p).pipe(ni(y)).subscribe(()=>{iD.delete(t),n.run(()=>{l(),h.next(),h.complete()})})}),h.asObservable()};let VM=(()=>{class n{constructor(){this.animation=oH.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),mH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),vH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),bH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();var oi=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(oi||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const SH=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function AH(n){const t=Array.from(n.querySelectorAll(SH)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let jH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),$H=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();class j_{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let U9=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(sn(1)).subscribe(()=>{Bo(this._zone,this._el.nativeElement,(e,i)=>{i&&gb(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Bo(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(u.SBq),u.Y36(u.R0b))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[u.jDz],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class WH{update(t){}close(t){}dismiss(t){}}const V9=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],j9=["animation","backdropClass"];class H9{_applyWindowOptions(t,e){V9.forEach(i=>{F_(e[i])&&(t[i]=e[i])})}_applyBackdropOptions(t,e){j9.forEach(i=>{F_(e[i])&&(t[i]=e[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ni(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ni(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new tn.x,this._dismissed=new tn.x,this._hidden=new tn.x,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,l)=>{this._resolve=o,this._reject=l}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function nH(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,nt.of)(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),xP(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var nF=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(nF||{});let G9=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new tn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new tn.x,this.hidden=new tn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":P_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(sn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},l=xP(Bo(this._zone,e,()=>e.classList.remove("show"),i),Bo(this._zone,this._dialogEl.nativeElement,()=>{},i));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const e={animation:this.animation,runningTransition:"continue"};xP(Bo(this._zone,this._elRef.nativeElement,(o,l)=>{l&&gb(o),o.classList.add("show")},e),Bo(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ps(e,"keydown").pipe(ni(this._closed$),Dn(r=>r.which===oi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(nF.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;ps(this._dialogEl.nativeElement,"mousedown").pipe(ni(this._closed$),(0,Gn.b)(()=>i=!1),(0,Nn.w)(()=>ps(e,"mouseup").pipe(ni(this._closed$),sn(1))),Dn(({target:r})=>e===r)).subscribe(()=>{i=!0}),ps(e,"click").pipe(ni(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(nF.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=AH(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Bo(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(u.Y36(ue),u.Y36(u.SBq),u.Y36(u.R0b))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&u.Gf(qK,7),2&i){let o;u.iGM(o=u.CRH())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[u.jDz],ngContentSelectors:_K,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&i&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),$9=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:l}=r;if(e>0){const h=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${h+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=l),r.overflow=o}}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(ue))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W9=(()=>{class n{constructor(e,i,r,o,l,h,p){this._applicationRef=e,this._injector=i,this._environmentInjector=r,this._document=o,this._scrollBar=l,this._rendererFactory=h,this._ngZone=p,this._activeWindowCmptHasChanged=new tn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const y=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{n.runOutsideAngular(()=>{const r=ps(t,"focusin").pipe(ni(e),(0,pt.U)(o=>o.target));ps(t,"keydown").pipe(ni(e),Dn(o=>o.which===oi.Tab),XA(r)).subscribe(([o,l])=>{const[h,p]=AH(t);(l===h||l===t)&&o.shiftKey&&(p.focus(),o.preventDefault()),l===p&&!o.shiftKey&&(h.focus(),o.preventDefault())}),i&&ps(t,"click").pipe(ni(e),XA(r),(0,pt.U)(o=>o[1])).subscribe(o=>o.focus())})})(this._ngZone,y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(y.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r){const o=r.container instanceof HTMLElement?r.container:F_(r.container)?this._document.querySelector(r.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new WH,p=(e=r.injector||e).get(u.lqb,null)||this._environmentInjector,y=this._getContentRef(e,p,i,h,r);let I=!1!==r.backdrop?this._attachBackdrop(o):void 0,T=this._attachWindowComponent(o,y.nodes),N=new H9(T,y,I,r.beforeDismiss);return this._registerModalRef(N),this._registerWindowCmpt(T),N.hidden.pipe(sn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=P=>{N.close(P)},h.dismiss=P=>{N.dismiss(P)},h.update=P=>{N.update(P)},N.update(r),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),I&&I.instance&&I.changeDetectorRef.detectChanges(),T.changeDetectorRef.detectChanges(),N}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,u.LMc)(U9,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let r=(0,u.LMc)(G9,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_getContentRef(e,i,r,o,l){return r?r instanceof u.Rgc?this._createFromTemplateRef(r,o):P_(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,l):new j_([])}_createFromTemplateRef(e,i){const o=e.createEmbeddedView({$implicit:i,close(l){i.close(l)},dismiss(l){i.dismiss(l)}});return this._applicationRef.attachView(o),new j_([o.rootNodes],o)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new j_([[i]])}_createFromComponent(e,i,r,o,l){const h=u.zs3.create({providers:[{provide:WH,useValue:o}],parent:e}),p=(0,u.LMc)(r,{environmentInjector:i,elementInjector:h}),y=p.location.nativeElement;return l.scrollable&&y.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new j_([[y]],p.hostView,p)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(u.lqb),u.LFG(ue),u.LFG($9),u.LFG(u.FYo),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z9=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(VM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),q9=(()=>{class n{constructor(e,i,r){this._injector=e,this._modalStack=i,this._config=r}open(e,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(u.LFG(u.zs3),u.LFG(W9),u.LFG(z9))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[q9]})}return n})(),YH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),iG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),sG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),oG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),aG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),cG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),lG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),uG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),dG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function dQ(){return 100}});let hG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})(),fG=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const fQ=[gH,mH,vH,bH,jH,$H,zH,YH,fG,iG,sG,oG,aG,cG,lG,uG,dG,hG];let pQ=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[fQ,gH,mH,vH,bH,jH,$H,zH,YH,fG,iG,sG,oG,aG,cG,lG,uG,dG,hG]})}return n})(),gQ=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[nW]});static#n=this.\u0275inj=u.cJS({providers:[Ip,(0,u.RIp)(jW)],imports:[Ii.hO.initializeApp(Rj_firebase),q$,t3,vq,MZ,zZ,Jh,J3,Yg,Nz,pQ]})}return n})();zl().bootstrapModule(gQ).catch(n=>console.error(n))},5619:(ft,Ie,F)=>{F.d(Ie,{X:()=>te});var u=F(8645);class te extends u.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const se=super._subscribe(re);return!se.closed&&re.next(this._value),se}getValue(){const{hasError:re,thrownError:se,_value:ue}=this;if(re)throw se;return this._throwIfClosed(),ue}next(re){super.next(this._value=re)}}},5592:(ft,Ie,F)=>{F.d(Ie,{y:()=>De});var u=F(305),te=F(7394),B=F(4850),re=F(8407),se=F(2653),ue=F(4674),ve=F(1441);let De=(()=>{class ie{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Qe=new ie;return Qe.source=this,Qe.operator=Ne,Qe}subscribe(Ne,Qe,ke){const Ye=function W(ie){return ie&&ie instanceof u.Lv||function j(ie){return ie&&(0,ue.m)(ie.next)&&(0,ue.m)(ie.error)&&(0,ue.m)(ie.complete)}(ie)&&(0,te.Nn)(ie)}(Ne)?Ne:new u.Hp(Ne,Qe,ke);return(0,ve.x)(()=>{const{operator:Pe,source:st}=this;Ye.add(Pe?Pe.call(Ye,st):st?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Qe){Ne.error(Qe)}}forEach(Ne,Qe){return new(Qe=he(Qe))((ke,Ye)=>{const Pe=new u.Hp({next:st=>{try{Ne(st)}catch(ct){Ye(ct),Pe.unsubscribe()}},error:Ye,complete:ke});this.subscribe(Pe)})}_subscribe(Ne){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(Ne)}[B.L](){return this}pipe(...Ne){return(0,re.U)(Ne)(this)}toPromise(Ne){return new(Ne=he(Ne))((Qe,ke)=>{let Ye;this.subscribe(Pe=>Ye=Pe,Pe=>ke(Pe),()=>Qe(Ye))})}}return ie.create=He=>new ie(He),ie})();function he(ie){var He;return null!==(He=ie??se.config.Promise)&&void 0!==He?He:Promise}},8645:(ft,Ie,F)=>{F.d(Ie,{x:()=>ve});var u=F(5592),te=F(7394);const re=(0,F(2306).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(9039),ue=F(1441);let ve=(()=>{class he extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const ie=new De(this,this);return ie.operator=W,ie}_throwIfClosed(){if(this.closed)throw new re}next(W){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(W)}})}error(W){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:ie}=this;for(;ie.length;)ie.shift().error(W)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:ie,isStopped:He,observers:Ne}=this;return ie||He?te.Lc:(this.currentObservers=null,Ne.push(W),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Ne,W)}))}_checkFinalizedStatuses(W){const{hasError:ie,thrownError:He,isStopped:Ne}=this;ie?W.error(He):Ne&&W.complete()}asObservable(){const W=new u.y;return W.source=this,W}}return he.create=(j,W)=>new De(j,W),he})();class De extends ve{constructor(j,W){super(),this.destination=j,this.source=W}next(j){var W,ie;null===(ie=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===ie||ie.call(W,j)}error(j){var W,ie;null===(ie=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===ie||ie.call(W,j)}complete(){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===W||W.call(j)}_subscribe(j){var W,ie;return null!==(ie=null===(W=this.source)||void 0===W?void 0:W.subscribe(j))&&void 0!==ie?ie:te.Lc}}},305:(ft,Ie,F)=>{F.d(Ie,{Hp:()=>ke,Lv:()=>ie});var u=F(4674),te=F(7394),B=F(2653),re=F(3894),se=F(2420);const ue=he("C",void 0,void 0);function he(ne,we,ce){return{kind:ne,value:we,error:ce}}var j=F(7599),W=F(1441);class ie extends te.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,te.Nn)(we)&&we.add(this)):this.destination=ct}static create(we,ce,Ee){return new ke(we,ce,Ee)}next(we){this.isStopped?st(function De(ne){return he("N",ne,void 0)}(we),this):this._next(we)}error(we){this.isStopped?st(function ve(ne){return he("E",void 0,ne)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?st(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(ne,we){return He.call(ne,we)}class Qe{constructor(we){this.partialObserver=we}next(we){const{partialObserver:ce}=this;if(ce.next)try{ce.next(we)}catch(Ee){Ye(Ee)}}error(we){const{partialObserver:ce}=this;if(ce.error)try{ce.error(we)}catch(Ee){Ye(Ee)}else Ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(ce){Ye(ce)}}}class ke extends ie{constructor(we,ce,Ee){let Ve;if(super(),(0,u.m)(we)||!we)Ve={next:we??void 0,error:ce??void 0,complete:Ee??void 0};else{let G;this&&B.config.useDeprecatedNextContext?(G=Object.create(we),G.unsubscribe=()=>this.unsubscribe(),Ve={next:we.next&&Ne(we.next,G),error:we.error&&Ne(we.error,G),complete:we.complete&&Ne(we.complete,G)}):Ve=we}this.destination=new Qe(Ve)}}function Ye(ne){B.config.useDeprecatedSynchronousErrorHandling?(0,W.O)(ne):(0,re.h)(ne)}function st(ne,we){const{onStoppedNotification:ce}=B.config;ce&&j.z.setTimeout(()=>ce(ne,we))}const ct={closed:!0,next:se.Z,error:function Pe(ne){throw ne},complete:se.Z}},7394:(ft,Ie,F)=>{F.d(Ie,{Lc:()=>ue,w0:()=>se,Nn:()=>ve});var u=F(4674);const B=(0,F(2306).d)(he=>function(W){he(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((ie,He)=>`${He+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var re=F(9039);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Ne of W)Ne.remove(this);else W.remove(this);const{initialTeardown:ie}=this;if((0,u.m)(ie))try{ie()}catch(Ne){j=Ne instanceof B?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{De(Ne)}catch(Qe){j=j??[],Qe instanceof B?j=[...j,...Qe.errors]:j.push(Qe)}}if(j)throw new B(j)}}add(j){var W;if(j&&j!==this)if(this.closed)De(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(j)}}_hasParent(j){const{_parentage:W}=this;return W===j||Array.isArray(W)&&W.includes(j)}_addParent(j){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(j),W):W?[W,j]:j}_removeParent(j){const{_parentage:W}=this;W===j?this._parentage=null:Array.isArray(W)&&(0,re.P)(W,j)}remove(j){const{_finalizers:W}=this;W&&(0,re.P)(W,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const ue=se.EMPTY;function ve(he){return he instanceof se||he&&"closed"in he&&(0,u.m)(he.remove)&&(0,u.m)(he.add)&&(0,u.m)(he.unsubscribe)}function De(he){(0,u.m)(he)?he():he.unsubscribe()}},2653:(ft,Ie,F)=>{F.d(Ie,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ft,Ie,F)=>{F.d(Ie,{E:()=>te});const te=new(F(5592).y)(se=>se.complete())},2459:(ft,Ie,F)=>{F.d(Ie,{D:()=>we});var u=F(4829),te=F(3093),B=F(5137),ue=F(5592),De=F(4971),he=F(4674),j=F(7103);function ie(ce,Ee){if(!ce)throw new Error("Iterable cannot be null");return new ue.y(Ve=>{(0,j.f)(Ve,Ee,()=>{const G=ce[Symbol.asyncIterator]();(0,j.f)(Ve,Ee,()=>{G.next().then(Te=>{Te.done?Ve.complete():Ve.next(Te.value)})},0,!0)})})}var He=F(8382),Ne=F(4026),Qe=F(4266),ke=F(3664),Ye=F(5726),Pe=F(9853),st=F(541);function we(ce,Ee){return Ee?function ne(ce,Ee){if(null!=ce){if((0,He.c)(ce))return function re(ce,Ee){return(0,u.Xf)(ce).pipe((0,B.R)(Ee),(0,te.Q)(Ee))}(ce,Ee);if((0,Qe.z)(ce))return function ve(ce,Ee){return new ue.y(Ve=>{let G=0;return Ee.schedule(function(){G===ce.length?Ve.complete():(Ve.next(ce[G++]),Ve.closed||this.schedule())})})}(ce,Ee);if((0,Ne.t)(ce))return function se(ce,Ee){return(0,u.Xf)(ce).pipe((0,B.R)(Ee),(0,te.Q)(Ee))}(ce,Ee);if((0,Ye.D)(ce))return ie(ce,Ee);if((0,ke.T)(ce))return function W(ce,Ee){return new ue.y(Ve=>{let G;return(0,j.f)(Ve,Ee,()=>{G=ce[De.h](),(0,j.f)(Ve,Ee,()=>{let Te,ze;try{({value:Te,done:ze}=G.next())}catch(Pt){return void Ve.error(Pt)}ze?Ve.complete():Ve.next(Te)},0,!0)}),()=>(0,he.m)(G?.return)&&G.return()})}(ce,Ee);if((0,st.L)(ce))return function ct(ce,Ee){return ie((0,st.Q)(ce),Ee)}(ce,Ee)}throw(0,Pe.z)(ce)}(ce,Ee):(0,u.Xf)(ce)}},4829:(ft,Ie,F)=>{F.d(Ie,{Xf:()=>He});var u=F(7582),te=F(4266),B=F(4026),re=F(5592),se=F(8382),ue=F(5726),ve=F(9853),De=F(3664),he=F(541),j=F(4674),W=F(3894),ie=F(4850);function He(ne){if(ne instanceof re.y)return ne;if(null!=ne){if((0,se.c)(ne))return function Ne(ne){return new re.y(we=>{const ce=ne[ie.L]();if((0,j.m)(ce.subscribe))return ce.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,te.z)(ne))return function Qe(ne){return new re.y(we=>{for(let ce=0;ce<ne.length&&!we.closed;ce++)we.next(ne[ce]);we.complete()})}(ne);if((0,B.t)(ne))return function ke(ne){return new re.y(we=>{ne.then(ce=>{we.closed||(we.next(ce),we.complete())},ce=>we.error(ce)).then(null,W.h)})}(ne);if((0,ue.D)(ne))return Pe(ne);if((0,De.T)(ne))return function Ye(ne){return new re.y(we=>{for(const ce of ne)if(we.next(ce),we.closed)return;we.complete()})}(ne);if((0,he.L)(ne))return function st(ne){return Pe((0,he.Q)(ne))}(ne)}throw(0,ve.z)(ne)}function Pe(ne){return new re.y(we=>{(function ct(ne,we){var ce,Ee,Ve,G;return(0,u.mG)(this,void 0,void 0,function*(){try{for(ce=(0,u.KL)(ne);!(Ee=yield ce.next()).done;)if(we.next(Ee.value),we.closed)return}catch(Te){Ve={error:Te}}finally{try{Ee&&!Ee.done&&(G=ce.return)&&(yield G.call(ce))}finally{if(Ve)throw Ve.error}}we.complete()})})(ne,we).catch(ce=>we.error(ce))})}},3019:(ft,Ie,F)=>{F.d(Ie,{T:()=>ue});var u=F(7537),te=F(4829),B=F(6232),re=F(9940),se=F(2459);function ue(...ve){const De=(0,re.yG)(ve),he=(0,re._6)(ve,1/0),j=ve;return j.length?1===j.length?(0,te.Xf)(j[0]):(0,u.J)(he)((0,se.D)(j,De)):B.E}},2096:(ft,Ie,F)=>{F.d(Ie,{of:()=>B});var u=F(9940),te=F(2459);function B(...re){const se=(0,u.yG)(re);return(0,te.D)(re,se)}},8251:(ft,Ie,F)=>{F.d(Ie,{x:()=>te});var u=F(305);function te(re,se,ue,ve,De){return new B(re,se,ue,ve,De)}class B extends u.Lv{constructor(se,ue,ve,De,he,j){super(se),this.onFinalize=he,this.shouldUnsubscribe=j,this._next=ue?function(W){try{ue(W)}catch(ie){se.error(ie)}}:super._next,this._error=De?function(W){try{De(W)}catch(ie){se.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(ft,Ie,F)=>{F.d(Ie,{x:()=>re});var u=F(2737),te=F(9360),B=F(8251);function re(ue,ve=u.y){return ue=ue??se,(0,te.e)((De,he)=>{let j,W=!0;De.subscribe((0,B.x)(he,ie=>{const He=ve(ie);(W||!ue(j,He))&&(W=!1,j=He,he.next(ie))}))})}function se(ue,ve){return ue===ve}},7398:(ft,Ie,F)=>{F.d(Ie,{U:()=>B});var u=F(9360),te=F(8251);function B(re,se){return(0,u.e)((ue,ve)=>{let De=0;ue.subscribe((0,te.x)(ve,he=>{ve.next(re.call(se,he,De++))}))})}},7537:(ft,Ie,F)=>{F.d(Ie,{J:()=>B});var u=F(1631),te=F(2737);function B(re=1/0){return(0,u.z)(te.y,re)}},1631:(ft,Ie,F)=>{F.d(Ie,{z:()=>De});var u=F(7398),te=F(4829),B=F(9360),re=F(7103),se=F(8251),ve=F(4674);function De(he,j,W=1/0){return(0,ve.m)(j)?De((ie,He)=>(0,u.U)((Ne,Qe)=>j(ie,Ne,He,Qe))((0,te.Xf)(he(ie,He))),W):("number"==typeof j&&(W=j),(0,B.e)((ie,He)=>function ue(he,j,W,ie,He,Ne,Qe,ke){const Ye=[];let Pe=0,st=0,ct=!1;const ne=()=>{ct&&!Ye.length&&!Pe&&j.complete()},we=Ee=>Pe<ie?ce(Ee):Ye.push(Ee),ce=Ee=>{Ne&&j.next(Ee),Pe++;let Ve=!1;(0,te.Xf)(W(Ee,st++)).subscribe((0,se.x)(j,G=>{He?.(G),Ne?we(G):j.next(G)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Pe--;Ye.length&&Pe<ie;){const G=Ye.shift();Qe?(0,re.f)(j,Qe,()=>ce(G)):ce(G)}ne()}catch(G){j.error(G)}}))};return he.subscribe((0,se.x)(j,we,()=>{ct=!0,ne()})),()=>{ke?.()}}(ie,He,he,W)))}},3093:(ft,Ie,F)=>{F.d(Ie,{Q:()=>re});var u=F(7103),te=F(9360),B=F(8251);function re(se,ue=0){return(0,te.e)((ve,De)=>{ve.subscribe((0,B.x)(De,he=>(0,u.f)(De,se,()=>De.next(he),ue),()=>(0,u.f)(De,se,()=>De.complete(),ue),he=>(0,u.f)(De,se,()=>De.error(he),ue)))})}},3020:(ft,Ie,F)=>{F.d(Ie,{B:()=>se});var u=F(4829),te=F(8645),B=F(305),re=F(9360);function se(ve={}){const{connector:De=(()=>new te.x),resetOnError:he=!0,resetOnComplete:j=!0,resetOnRefCountZero:W=!0}=ve;return ie=>{let He,Ne,Qe,ke=0,Ye=!1,Pe=!1;const st=()=>{Ne?.unsubscribe(),Ne=void 0},ct=()=>{st(),He=Qe=void 0,Ye=Pe=!1},ne=()=>{const we=He;ct(),we?.unsubscribe()};return(0,re.e)((we,ce)=>{ke++,!Pe&&!Ye&&st();const Ee=Qe=Qe??De();ce.add(()=>{ke--,0===ke&&!Pe&&!Ye&&(Ne=ue(ne,W))}),Ee.subscribe(ce),!He&&ke>0&&(He=new B.Hp({next:Ve=>Ee.next(Ve),error:Ve=>{Pe=!0,st(),Ne=ue(ct,he,Ve),Ee.error(Ve)},complete:()=>{Ye=!0,st(),Ne=ue(ct,j),Ee.complete()}}),(0,u.Xf)(we).subscribe(He))})(ie)}}function ue(ve,De,...he){if(!0===De)return void ve();if(!1===De)return;const j=new B.Hp({next:()=>{j.unsubscribe(),ve()}});return(0,u.Xf)(De(...he)).subscribe(j)}},5137:(ft,Ie,F)=>{F.d(Ie,{R:()=>te});var u=F(9360);function te(B,re=0){return(0,u.e)((se,ue)=>{ue.add(B.schedule(()=>se.subscribe(ue),re))})}},4664:(ft,Ie,F)=>{F.d(Ie,{w:()=>re});var u=F(4829),te=F(9360),B=F(8251);function re(se,ue){return(0,te.e)((ve,De)=>{let he=null,j=0,W=!1;const ie=()=>W&&!he&&De.complete();ve.subscribe((0,B.x)(De,He=>{he?.unsubscribe();let Ne=0;const Qe=j++;(0,u.Xf)(se(He,Qe)).subscribe(he=(0,B.x)(De,ke=>De.next(ue?ue(He,ke,Qe,Ne++):ke),()=>{he=null,ie()}))},()=>{W=!0,ie()}))})}},9397:(ft,Ie,F)=>{F.d(Ie,{b:()=>se});var u=F(4674),te=F(9360),B=F(8251),re=F(2737);function se(ue,ve,De){const he=(0,u.m)(ue)||ve||De?{next:ue,error:ve,complete:De}:ue;return he?(0,te.e)((j,W)=>{var ie;null===(ie=he.subscribe)||void 0===ie||ie.call(he);let He=!0;j.subscribe((0,B.x)(W,Ne=>{var Qe;null===(Qe=he.next)||void 0===Qe||Qe.call(he,Ne),W.next(Ne)},()=>{var Ne;He=!1,null===(Ne=he.complete)||void 0===Ne||Ne.call(he),W.complete()},Ne=>{var Qe;He=!1,null===(Qe=he.error)||void 0===Qe||Qe.call(he,Ne),W.error(Ne)},()=>{var Ne,Qe;He&&(null===(Ne=he.unsubscribe)||void 0===Ne||Ne.call(he)),null===(Qe=he.finalize)||void 0===Qe||Qe.call(he)}))}):re.y}},1954:(ft,Ie,F)=>{F.d(Ie,{o:()=>se});var u=F(7394);class te extends u.w0{constructor(ve,De){super()}schedule(ve,De=0){return this}}const B={setInterval(ue,ve,...De){const{delegate:he}=B;return he?.setInterval?he.setInterval(ue,ve,...De):setInterval(ue,ve,...De)},clearInterval(ue){const{delegate:ve}=B;return(ve?.clearInterval||clearInterval)(ue)},delegate:void 0};var re=F(9039);class se extends te{constructor(ve,De){super(ve,De),this.scheduler=ve,this.work=De,this.pending=!1}schedule(ve,De=0){var he;if(this.closed)return this;this.state=ve;const j=this.id,W=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(W,j,De)),this.pending=!0,this.delay=De,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(W,this.id,De),this}requestAsyncId(ve,De,he=0){return B.setInterval(ve.flush.bind(ve,this),he)}recycleAsyncId(ve,De,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return De;null!=De&&B.clearInterval(De)}execute(ve,De){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ve,De);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,De){let j,he=!1;try{this.work(ve)}catch(W){he=!0,j=W||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ve,scheduler:De}=this,{actions:he}=De;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(he,this),null!=ve&&(this.id=this.recycleAsyncId(De,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(ft,Ie,F)=>{F.d(Ie,{v:()=>B});var u=F(4552);class te{constructor(se,ue=te.now){this.schedulerActionCtor=se,this.now=ue}schedule(se,ue=0,ve){return new this.schedulerActionCtor(this,se).schedule(ve,ue)}}te.now=u.l.now;class B extends te{constructor(se,ue=te.now){super(se,ue),this.actions=[],this._active=!1}flush(se){const{actions:ue}=this;if(this._active)return void ue.push(se);let ve;this._active=!0;do{if(ve=se.execute(se.state,se.delay))break}while(se=ue.shift());if(this._active=!1,ve){for(;se=ue.shift();)se.unsubscribe();throw ve}}}},6321:(ft,Ie,F)=>{F.d(Ie,{P:()=>re,z:()=>B});var u=F(1954);const B=new(F(2631).v)(u.o),re=B},4552:(ft,Ie,F)=>{F.d(Ie,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},7599:(ft,Ie,F)=>{F.d(Ie,{z:()=>u});const u={setTimeout(te,B,...re){const{delegate:se}=u;return se?.setTimeout?se.setTimeout(te,B,...re):setTimeout(te,B,...re)},clearTimeout(te){const{delegate:B}=u;return(B?.clearTimeout||clearTimeout)(te)},delegate:void 0}},4971:(ft,Ie,F)=>{F.d(Ie,{h:()=>te});const te=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ft,Ie,F)=>{F.d(Ie,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(ft,Ie,F)=>{F.d(Ie,{_6:()=>ue,jO:()=>re,yG:()=>se});var u=F(4674),te=F(671);function B(ve){return ve[ve.length-1]}function re(ve){return(0,u.m)(B(ve))?ve.pop():void 0}function se(ve){return(0,te.K)(B(ve))?ve.pop():void 0}function ue(ve,De){return"number"==typeof B(ve)?ve.pop():De}},9039:(ft,Ie,F)=>{function u(te,B){if(te){const re=te.indexOf(B);0<=re&&te.splice(re,1)}}F.d(Ie,{P:()=>u})},2306:(ft,Ie,F)=>{function u(te){const re=te(se=>{Error.call(se),se.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}F.d(Ie,{d:()=>u})},1441:(ft,Ie,F)=>{F.d(Ie,{O:()=>re,x:()=>B});var u=F(2653);let te=null;function B(se){if(u.config.useDeprecatedSynchronousErrorHandling){const ue=!te;if(ue&&(te={errorThrown:!1,error:null}),se(),ue){const{errorThrown:ve,error:De}=te;if(te=null,ve)throw De}}else se()}function re(se){u.config.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},7103:(ft,Ie,F)=>{function u(te,B,re,se=0,ue=!1){const ve=B.schedule(function(){re(),ue?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(ve),!ue)return ve}F.d(Ie,{f:()=>u})},2737:(ft,Ie,F)=>{function u(te){return te}F.d(Ie,{y:()=>u})},4266:(ft,Ie,F)=>{F.d(Ie,{z:()=>u});const u=te=>te&&"number"==typeof te.length&&"function"!=typeof te},5726:(ft,Ie,F)=>{F.d(Ie,{D:()=>te});var u=F(4674);function te(B){return Symbol.asyncIterator&&(0,u.m)(B?.[Symbol.asyncIterator])}},4674:(ft,Ie,F)=>{function u(te){return"function"==typeof te}F.d(Ie,{m:()=>u})},8382:(ft,Ie,F)=>{F.d(Ie,{c:()=>B});var u=F(4850),te=F(4674);function B(re){return(0,te.m)(re[u.L])}},3664:(ft,Ie,F)=>{F.d(Ie,{T:()=>B});var u=F(4971),te=F(4674);function B(re){return(0,te.m)(re?.[u.h])}},4026:(ft,Ie,F)=>{F.d(Ie,{t:()=>te});var u=F(4674);function te(B){return(0,u.m)(B?.then)}},541:(ft,Ie,F)=>{F.d(Ie,{L:()=>re,Q:()=>B});var u=F(7582),te=F(4674);function B(se){return(0,u.FC)(this,arguments,function*(){const ve=se.getReader();try{for(;;){const{value:De,done:he}=yield(0,u.qq)(ve.read());if(he)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(De)}}finally{ve.releaseLock()}})}function re(se){return(0,te.m)(se?.getReader)}},671:(ft,Ie,F)=>{F.d(Ie,{K:()=>te});var u=F(4674);function te(B){return B&&(0,u.m)(B.schedule)}},9360:(ft,Ie,F)=>{F.d(Ie,{A:()=>te,e:()=>B});var u=F(4674);function te(re){return(0,u.m)(re?.lift)}function B(re){return se=>{if(te(se))return se.lift(function(ue){try{return re(ue,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ft,Ie,F)=>{function u(){}F.d(Ie,{Z:()=>u})},8407:(ft,Ie,F)=>{F.d(Ie,{U:()=>B,z:()=>te});var u=F(2737);function te(...re){return B(re)}function B(re){return 0===re.length?u.y:1===re.length?re[0]:function(ue){return re.reduce((ve,De)=>De(ve),ue)}}},3894:(ft,Ie,F)=>{F.d(Ie,{h:()=>B});var u=F(2653),te=F(7599);function B(re){te.z.setTimeout(()=>{const{onUnhandledError:se}=u.config;if(!se)throw re;se(re)})}},9853:(ft,Ie,F)=>{function u(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ie,{z:()=>u})},5879:(ft,Ie,F)=>{F.d(Ie,{$8M:()=>Jl,$WT:()=>Sa,$Z:()=>xw,AFp:()=>Ut,AaK:()=>ie,CHM:()=>Ks,CRH:()=>hp,DdM:()=>Ou,EJc:()=>S1,EiD:()=>VD,EpF:()=>rE,F$t:()=>bv,F4k:()=>sE,FYo:()=>ky,FiY:()=>iu,Gf:()=>d1,GfV:()=>fw,Gpc:()=>Qe,HDt:()=>E0,Hsn:()=>aE,Ikx:()=>TE,JOm:()=>g,JVY:()=>kD,JZr:()=>ct,KtG:()=>Xh,L6k:()=>PD,LAX:()=>EN,LFG:()=>rn,LMc:()=>Zx,LSH:()=>qg,Lbi:()=>Bd,Lck:()=>$S,MAs:()=>sa,MGl:()=>Dm,MMx:()=>qE,NdJ:()=>_v,Ojb:()=>LN,OlP:()=>Rn,Oqu:()=>Ov,P3R:()=>xN,PXZ:()=>B1,Q6J:()=>th,QGY:()=>sc,Qsj:()=>uw,R0b:()=>gr,RDi:()=>MD,RIp:()=>YD,Rgc:()=>Ym,SBq:()=>Mf,SDv:()=>US,Sil:()=>CI,Suo:()=>h1,TTD:()=>zo,TgZ:()=>ul,Tol:()=>Av,VKq:()=>ap,VuI:()=>U0,W1O:()=>a0,WLB:()=>YE,X6Q:()=>G1,XFs:()=>wt,Xpm:()=>Ta,Xq5:()=>VT,Xts:()=>Cf,Y36:()=>Wd,YKP:()=>op,YNc:()=>pv,Yjl:()=>vs,Yz7:()=>Ct,Z0I:()=>mn,ZZ4:()=>qI,_Bn:()=>sp,_UZ:()=>dl,_c5:()=>jx,_uU:()=>fS,aQg:()=>da,c2e:()=>w0,cJS:()=>Jn,cg1:()=>Tu,dDg:()=>PI,dqk:()=>dn,eBb:()=>wN,eFA:()=>Qn,eJc:()=>gI,ekj:()=>ch,eoX:()=>P1,f3M:()=>qt,g9A:()=>Jg,h0i:()=>uc,hGG:()=>oA,hij:()=>kv,iGM:()=>r0,ifc:()=>Bs,ip1:()=>b0,jDz:()=>yh,kEZ:()=>KE,kL8:()=>wS,lG2:()=>wc,lqb:()=>nl,lri:()=>D0,mCW:()=>Wg,n5z:()=>iy,oAB:()=>Br,oxw:()=>vv,pB0:()=>IN,q3G:()=>If,q4F:()=>pw,qFp:()=>H0,qLn:()=>ol,qOj:()=>Qw,qZA:()=>Wf,qzn:()=>Pd,rWj:()=>T0,rg0:()=>zs,s9C:()=>wv,sBO:()=>GI,s_b:()=>Qm,soG:()=>_p,tb:()=>M0,tp0:()=>zc,uIk:()=>jT,vHH:()=>ne,vpe:()=>io,wAp:()=>fh,xp6:()=>bT,z2F:()=>vp,z3N:()=>el,zSh:()=>Ld,zW0:()=>Ge,zs3:()=>ta});var u=F(8645),te=F(7394),B=F(5592),re=F(3019),se=F(5619),ue=F(2096),ve=F(3020),De=F(4664),he=F(3997);function j(s){for(let a in s)if(s[a]===j)return a;throw Error("Could not find renamed property on target object.")}function W(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function He(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Ne=j({__forward_ref__:j});function Qe(s){return s.__forward_ref__=Qe,s.toString=function(){return ie(this())},s}function ke(s){return Ye(s)?s():s}function Ye(s){return"function"==typeof s&&s.hasOwnProperty(Ne)&&s.__forward_ref__===Qe}function Pe(s){return s&&!!s.\u0275providers}const ct="https://g.co/ng/security#xss";class ne extends Error{constructor(a,c){super(function we(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,a){throw new ne(-201,!1)}function Be(s,a,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}function Ct(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jn(s){return{providers:s.providers||[],imports:s.imports||[]}}function yi(s){return Wn(s,cr)||Wn(s,xr)}function mn(s){return null!==yi(s)}function Wn(s,a){return s.hasOwnProperty(a)?s[a]:null}function ji(s){return s&&(s.hasOwnProperty(ms)||s.hasOwnProperty(es))?s[ms]:null}const cr=j({\u0275prov:j}),ms=j({\u0275inj:j}),xr=j({ngInjectableDef:j}),es=j({ngInjectorDef:j});var wt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(wt||{});let Bt;function zn(s){const a=Bt;return Bt=s,a}function _s(s,a,c){const d=yi(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&wt.Optional?null:void 0!==a?a:void ze(ie(s))}const dn=globalThis,Dt={},Ft="__NG_DI_FLAG__",Wt="ngTempTokenPath",$=/\n/gm,Ce="__source";let ae;function Tt(s){const a=ae;return ae=s,a}function bn(s,a=wt.Default){if(void 0===ae)throw new ne(-203,!1);return null===ae?_s(s,void 0,a):ae.get(s,a&wt.Optional?null:void 0,a)}function rn(s,a=wt.Default){return(function Ht(){return Bt}()||bn)(ke(s),a)}function qt(s,a=wt.Default){return rn(s,zt(a))}function zt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function di(s){const a=[];for(let c=0;c<s.length;c++){const d=ke(s[c]);if(Array.isArray(d)){if(0===d.length)throw new ne(900,!1);let f,m=wt.Default;for(let v=0;v<d.length;v++){const w=d[v],C=Uo(w);"number"==typeof C?-1===C?f=w.token:m|=C:f=w}a.push(rn(f,m))}else a.push(rn(d))}return a}function Ps(s,a){return s[Ft]=a,s.prototype[Ft]=a,s}function Uo(s){return s[Ft]}function Fs(s){return{toString:s}.toString()}var Ls=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Ls||{}),Bs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Bs||{});const ys={},Mt=[],Vo=j({\u0275cmp:j}),wa=j({\u0275dir:j}),jo=j({\u0275pipe:j}),Yu=j({\u0275mod:j}),Us=j({\u0275fac:j}),Ea=j({__NG_ELEMENT_ID__:j}),Vs=j({__NG_ENV_ID__:j});function xi(s,a,c){let d=s.length;for(;;){const f=s.indexOf(a,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=a.length;if(f+m===d||s.charCodeAt(f+m)<=32)return f}c=f+1}}function Ia(s,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const m=c[d++],v=c[d++],w=c[d++];s.setAttribute(a,v,w,m)}else{const m=f,v=c[++d];_c(m)?s.setProperty(a,m,v):s.setAttribute(a,m,v),d++}}return d}function Ku(s){return 3===s||4===s||6===s}function _c(s){return 64===s.charCodeAt(0)}function Ca(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Lr(s,c,f,null,-1===c||2===c?a[++d]:null)}}return s}function Lr(s,a,c,d,f){let m=0,v=s.length;if(-1===a)v=-1;else for(;m<s.length;){const w=s[m++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=m-1;break}}}for(;m<s.length;){const w=s[m];if("number"==typeof w)break;if(w===c){if(null===d)return void(null!==f&&(s[m+1]=f));if(d===s[m+1])return void(s[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==v&&(s.splice(v,0,a),m=v+1),s.splice(m++,0,c),null!==d&&s.splice(m++,0,d),null!==f&&s.splice(m++,0,f)}const yc="ng-template";function Gp(s,a,c){let d=0,f=!0;for(;d<s.length;){let m=s[d++];if("string"==typeof m&&f){const v=s[d++];if(c&&"class"===m&&-1!==xi(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;d<s.length&&"string"==typeof(m=s[d++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function Hi(s){return 4===s.type&&s.value!==yc}function vc(s,a,c){return a===(4!==s.type||c?s.value:yc)}function kh(s,a,c){let d=4;const f=s.attrs||[],m=function $p(s){for(let a=0;a<s.length;a++)if(Ku(s[a]))return a;return s.length}(f);let v=!1;for(let w=0;w<a.length;w++){const C=a[w];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!vc(s,C,c)||""===C&&1===a.length){if(Ji(d))return!1;v=!0}}else{const M=8&d?C:a[++w];if(8&d&&null!==s.attrs){if(!Gp(s.attrs,M,c)){if(Ji(d))return!1;v=!0}continue}const U=bc(8&d?"class":C,f,Hi(s),c);if(-1===U){if(Ji(d))return!1;v=!0;continue}if(""!==M){let q;q=U>m?"":f[U+1].toLowerCase();const ee=8&d?q:null;if(ee&&-1!==xi(ee,M,0)||2&d&&M!==q){if(Ji(d))return!1;v=!0}}}}else{if(!v&&!Ji(d)&&!Ji(C))return!1;if(v&&Ji(C))continue;v=!1,d=C|1&d}}return Ji(d)||v}function Ji(s){return 0==(1&s)}function bc(s,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let m=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function Wp(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,s)}function Qu(s,a,c=!1){for(let d=0;d<a.length;d++)if(kh(s,a[d],c))return!0;return!1}function Da(s,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function zp(s,a){return s?":not("+a.trim()+")":a}function _o(s){let a=s[0],c=1,d=2,f="",m=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&d){const w=s[++c];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Ji(v)&&(a+=zp(m,f),f=""),d=v,m=m||!Ji(d);c++}return""!==f&&(a+=zp(m,f)),a}function Ta(s){return Fs(()=>{const a=yo(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Ls.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Bs.Emulated,styles:s.styles||Mt,_:null,schemas:s.schemas||null,tView:null,id:""};Yp(c);const d=s.dependencies;return c.directiveDefs=Aa(d,!1),c.pipeDefs=Aa(d,!0),c.id=function Ph(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const f of c)a=Math.imul(31,a)+f.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function Ju(s){return en(s)||hi(s)}function qp(s){return null!==s}function Br(s){return Fs(()=>({type:s.type,bootstrap:s.bootstrap||Mt,declarations:s.declarations||Mt,imports:s.imports||Mt,exports:s.exports||Mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ml(s,a){if(null==s)return ys;const c={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,a&&(a[f]=m)}return c}function wc(s){return Fs(()=>{const a=yo(s);return Yp(a),a})}function vs(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[Vo]||null}function hi(s){return s[wa]||null}function Xi(s){return s[jo]||null}function Sa(s){const a=en(s)||hi(s)||Xi(s);return null!==a&&a.standalone}function er(s,a){const c=s[Yu]||null;if(!c&&!0===a)throw new Error(`Type ${ie(s)} does not have '\u0275mod' property.`);return c}function yo(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||ys,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Mt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ml(s.inputs,a),outputs:Ml(s.outputs)}}function Yp(s){s.features?.forEach(a=>a(s))}function Aa(s,a){if(!s)return null;const c=a?Xi:Ju;return()=>("function"==typeof s?s():s).map(d=>c(d)).filter(qp)}const Pn=0,Ke=1,Nt=2,wn=3,tr=4,vo=5,Gi=6,Ic=7,Mn=8,Ur=9,Oi=10,Ot=11,bo=12,Nl=13,Xn=14,ei=15,Ma=16,Ho=17,br=18,Na=19,Hs=20,Gs=21,wr=22,Go=23,ts=24,jt=25,xl=1,Ra=2,$i=7,Un=9,ai=11;function Wi(s){return Array.isArray(s)&&"object"==typeof s[xl]}function vi(s){return Array.isArray(s)&&!0===s[xl]}function Cc(s){return 0!=(4&s.flags)}function ns(s){return s.componentOffset>-1}function Dc(s){return 1==(1&s.flags)}function lr(s){return!!s.template}function Wo(s){return 0!=(512&s[Nt])}function $s(s,a){return s.hasOwnProperty(Us)?s[Us]:null}let bi=null,ka=!1;function nr(s){const a=bi;return bi=s,a}const Tc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function sd(s){if(!Fl(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Fa(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function od(s){s.dirty=!0,function Vh(s){if(void 0===s.liveConsumerNode)return;const a=ka;ka=!0;try{for(const c of s.liveConsumerNode)c.dirty||od(c)}finally{ka=a}}(s),s.consumerMarkedDirty?.(s)}function Sc(s){return s&&(s.nextProducerIndex=0),nr(s)}function jh(s,a){if(nr(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Fl(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)Ac(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Fa(s){wo(s);for(let a=0;a<s.producerNode.length;a++){const c=s.producerNode[a],d=s.producerLastReadVersion[a];if(d!==c.version||(sd(c),d!==c.version))return!0}return!1}function Hh(s){if(wo(s),Fl(s))for(let a=0;a<s.producerNode.length;a++)Ac(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Ac(s,a){if(function ig(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),wo(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)Ac(s.producerNode[d],s.producerIndexOfThis[d]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[a],f=s.liveConsumerNode[a];wo(f),f.producerIndexOfThis[d]=a}}function Fl(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function wo(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Q_=null;function zs(s){const a=nr(null);try{return s()}finally{nr(a)}}const Zh=()=>{},lg=(()=>({...Tc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Zh}))();class Er{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function zo(){return ad}function ad(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ll),qs}function qs(){const s=qo(this),a=s?.current;if(a){const c=s.previous;if(c===ys)s.previous=a;else for(let d in a)c[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Ll(s,a,c,d){const f=this.declaredInputs[c],m=qo(s)||function cd(s,a){return s[Bl]=a}(s,{previous:ys,current:null}),v=m.current||(m.current={}),w=m.previous,C=w[f];v[f]=new Er(C&&C.currentValue,a,w===ys),s[d]=a}zo.ngInherit=!0;const Bl="__ngSimpleChanges__";function qo(s){return s[Bl]||null}const Ir=function(s,a,c){};function Tn(s){for(;Array.isArray(s);)s=s[Pn];return s}function Zs(s,a){return Tn(a[s])}function ur(s,a){return Tn(a[s.index])}function Hl(s,a){return s.data[a]}function wi(s,a){const c=a[s];return Wi(c)?c:c[Pn]}function ws(s,a){return null==a?null:s[a]}function $l(s){s[Ho]=0}function Oc(s){1024&s[Nt]||(s[Nt]|=1024,Kh(s,1))}function dd(s){1024&s[Nt]&&(s[Nt]&=-1025,Kh(s,-1))}function Kh(s,a){let c=s[wn];if(null===c)return;c[vo]+=a;let d=c;for(c=c[wn];null!==c&&(1===a&&1===d[vo]||-1===a&&0===d[vo]);)c[vo]+=a,d=c,c=c[wn]}const Et={lFrame:Zl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Zo(){return Et.bindingsEnabled}function Ys(){return null!==Et.skipHydrationRootTNode}function Me(){return Et.lFrame.lView}function Yt(){return Et.lFrame.tView}function Ks(s){return Et.lFrame.contextLView=s,s[Mn]}function Xh(s){return Et.lFrame.contextLView=null,s}function fi(){let s=fd();for(;null!==s&&64===s.type;)s=s.parent;return s}function fd(){return Et.lFrame.currentTNode}function kc(){const s=Et.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function Qs(s,a){const c=Et.lFrame;c.currentTNode=s,c.isParent=a}function hg(){return Et.lFrame.isParent}function fg(){Et.lFrame.isParent=!1}function ki(){const s=Et.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Pc(){return Et.lFrame.bindingIndex++}function Cr(s){const a=Et.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function Fc(s){Et.lFrame.inI18n=s}function gg(s,a){const c=Et.lFrame;c.bindingIndex=c.bindingRootIndex=s,Ba(a)}function Ba(s){Et.lFrame.currentDirectiveIndex=s}function gd(){return Et.lFrame.currentQueryIndex}function nf(s){Et.lFrame.currentQueryIndex=s}function rf(s){const a=s[Ke];return 2===a.type?a.declTNode:1===a.type?s[Gi]:null}function md(s,a,c){if(c&wt.SkipSelf){let f=a,m=s;for(;!(f=f.parent,null!==f||c&wt.Host||(f=rf(m),null===f||(m=m[Xn],10&f.type))););if(null===f)return!1;a=f,s=m}const d=Et.lFrame=zi();return d.currentTNode=a,d.lView=s,!0}function Hn(s){const a=zi(),c=s[Ke];Et.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function zi(){const s=Et.lFrame,a=null===s?null:s.child;return null===a?Zl(s):a}function Zl(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function En(){const s=Et.lFrame;return Et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const nt=En;function jr(){const s=En();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Pi(){return Et.lFrame.selectedIndex}function Xs(s){Et.lFrame.selectedIndex=s}function In(){const s=Et.lFrame;return Hl(s.tView,s.selectedIndex)}let Hr=!0;function Is(){return Hr}function Cs(s){Hr=s}function Bc(s,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const m=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:M,ngOnDestroy:x}=m;v&&(s.contentHooks??=[]).push(-c,v),w&&((s.contentHooks??=[]).push(c,w),(s.contentCheckHooks??=[]).push(c,w)),C&&(s.viewHooks??=[]).push(-c,C),M&&((s.viewHooks??=[]).push(c,M),(s.viewCheckHooks??=[]).push(c,M)),null!=x&&(s.destroyHooks??=[]).push(c,x)}}function Yo(s,a,c){S(s,a,3,c)}function _d(s,a,c,d){(3&s[Nt])===c&&S(s,a,c,d)}function D(s,a){let c=s[Nt];(3&c)===a&&(c&=8191,c+=1,s[Nt]=c)}function S(s,a,c,d){const m=d??-1,v=a.length-1;let w=0;for(let C=void 0!==d?65535&s[Ho]:0;C<v;C++)if("number"==typeof a[C+1]){if(w=a[C],null!=d&&w>=d)break}else a[C]<0&&(s[Ho]+=65536),(w<m||-1==m)&&(V(s,c,a,C),s[Ho]=(4294901760&s[Ho])+C+2),C++}function O(s,a){Ir(4,s,a);const c=nr(null);try{a.call(s)}finally{nr(c),Ir(5,s,a)}}function V(s,a,c,d){const f=c[d]<0,m=c[d+1],w=s[f?-c[d]:c[d]];f?s[Nt]>>13<s[Ho]>>16&&(3&s[Nt])===a&&(s[Nt]+=8192,O(w,m)):O(w,m)}const J=-1;class oe{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Do(s){return s!==J}function tn(s){return 32767&s}function sn(s,a){let c=function Nn(s){return s>>16}(s),d=a;for(;c>0;)d=d[Xn],c--;return d}let qi=!0;function Dn(s){const a=qi;return qi=s,a}const yd=255,mg=5;let _g=0;const rr={};function Gn(s,a){const c=vd(s,a);if(-1!==c)return c;const d=a[Ke];d.firstCreatePass&&(s.injectorIndex=a.length,To(d.data,s),To(a,null),To(d.blueprint,null));const f=Ko(s,a),m=s.injectorIndex;if(Do(f)){const v=tn(f),w=sn(f,a),C=w[Ke].data;for(let M=0;M<8;M++)a[m+M]=w[v+M]|C[v+M]}return a[m+8]=f,m}function To(s,a){s.push(0,0,0,0,0,0,0,0,a)}function vd(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Ko(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=ry(f),null===d)return J;if(c++,f=f[Xn],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return J}function bd(s,a,c){!function Kl(s,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ea)&&(d=c[Ea]),null==d&&(d=c[Ea]=_g++);const f=d&yd;a.data[s+(f>>mg)]|=1<<f}(s,a,c)}function yg(s,a,c){if(c&wt.Optional||void 0!==s)return s;ze()}function wd(s,a,c,d){if(c&wt.Optional&&void 0===d&&(d=null),!(c&(wt.Self|wt.Host))){const f=s[Ur],m=zn(void 0);try{return f?f.get(a,d,c&wt.Optional):_s(a,d,c&wt.Optional)}finally{zn(m)}}return yg(d,0,c)}function af(s,a,c,d=wt.Default,f){if(null!==s){if(2048&a[Nt]&&!(d&wt.Self)){const v=function lf(s,a,c,d,f){let m=s,v=a;for(;null!==m&&null!==v&&2048&v[Nt]&&!(512&v[Nt]);){const w=ni(m,v,c,d|wt.Self,rr);if(w!==rr)return w;let C=m.parent;if(!C){const M=v[Hs];if(M){const x=M.get(c,rr,d);if(x!==rr)return x}C=ry(v),v=v[Xn]}m=C}return f}(s,a,c,d,rr);if(v!==rr)return v}const m=ni(s,a,c,d,rr);if(m!==rr)return m}return wd(a,c,d,f)}function ni(s,a,c,d,f){const m=function Ql(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Ea)?s[Ea]:void 0;return"number"==typeof a?a>=0?a&yd:Va:a}(c);if("function"==typeof m){if(!md(a,s,d))return d&wt.Host?yg(f,0,d):wd(a,c,d,f);try{let v;if(v=m(d),null!=v||d&wt.Optional)return v;ze()}finally{nt()}}else if("number"==typeof m){let v=null,w=vd(s,a),C=J,M=d&wt.Host?a[ei][Gi]:null;for((-1===w||d&wt.SkipSelf)&&(C=-1===w?Ko(s,a):a[w+8],C!==J&&ny(d,!1)?(v=a[Ke],w=tn(C),a=sn(C,a)):w=-1);-1!==w;){const x=a[Ke];if(ty(m,w,x.data)){const U=Gt(w,a,c,v,d,M);if(U!==rr)return U}C=a[w+8],C!==J&&ny(d,a[Ke].data[w+8]===M)&&ty(m,w,a)?(v=x,w=tn(C),a=sn(C,a)):w=-1}}return f}function Gt(s,a,c,d,f,m){const v=a[Ke],w=v.data[s+8],x=So(w,v,c,null==d?ns(w)&&qi:d!=v&&0!=(3&w.type),f&wt.Host&&m===w);return null!==x?Uc(a,v,x,w):rr}function So(s,a,c,d,f){const m=s.providerIndexes,v=a.data,w=1048575&m,C=s.directiveStart,x=m>>20,q=f?w+x:s.directiveEnd;for(let ee=d?w:w+x;ee<q;ee++){const be=v[ee];if(ee<C&&c===be||ee>=C&&be.type===c)return ee}if(f){const ee=v[C];if(ee&&lr(ee)&&ee.type===c)return C}return null}function Uc(s,a,c,d){let f=s[c];const m=a.data;if(function Se(s){return s instanceof oe}(f)){const v=f;v.resolving&&function Ve(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ne(-200,`Circular dependency in DI detected for ${s}${c}`)}(function Ee(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}(m[c]));const w=Dn(v.canSeeViewProviders);v.resolving=!0;const M=v.injectImpl?zn(v.injectImpl):null;md(s,d,wt.Default);try{f=s[c]=v.factory(void 0,m,s,d),a.firstCreatePass&&c>=d.directiveStart&&function Zn(s,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(d){const v=ad(a);(c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v)}f&&(c.preOrderHooks??=[]).push(0-s,f),m&&((c.preOrderHooks??=[]).push(s,m),(c.preOrderCheckHooks??=[]).push(s,m))}(c,m[c],a)}finally{null!==M&&zn(M),Dn(w),v.resolving=!1,nt()}}return f}function ty(s,a,c){return!!(c[a+(s>>mg)]&1<<s)}function ny(s,a){return!(s&wt.Self||s&wt.Host&&a)}class hr{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return af(this._tNode,this._lView,a,zt(d),c)}}function Va(){return new hr(fi(),Me())}function iy(s){return Fs(()=>{const a=s.prototype.constructor,c=a[Us]||cf(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const m=f[Us]||cf(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function cf(s){return Ye(s)?()=>{const a=cf(ke(s));return a&&a()}:$s(s)}function ry(s){const a=s[Ke],c=a.type;return 2===c?a.declTNode:1===c?s[Gi]:null}function Jl(s){return function Db(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(Ku(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(fi(),s)}const ja="__parameters__";function on(s,a,c){return Fs(()=>{const d=function Ha(s){return function(...c){if(s){const d=s(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...m){if(this instanceof f)return d.apply(this,m),this;const v=new f(...m);return w.annotation=v,w;function w(C,M,x){const U=C.hasOwnProperty(ja)?C[ja]:Object.defineProperty(C,ja,{value:[]})[ja];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(v),C}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}function tu(s,a){s.forEach(c=>Array.isArray(c)?tu(c,a):a(c))}function ff(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function pf(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Hc(s,a){const c=[];for(let d=0;d<s;d++)c.push(a);return c}function rs(s,a,c){let d=Gc(s,a);return d>=0?s[1|d]=c:(d=~d,function Ab(s,a,c,d){let f=s.length;if(f==a)s.push(c,d);else if(1===f)s.push(d,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=c,s[a+1]=d}}(s,d,a,c)),d}function Eg(s,a){const c=Gc(s,a);if(c>=0)return s[1|c]}function Gc(s,a){return function Cg(s,a,c){let d=0,f=s.length>>c;for(;f!==d;){const m=d+(f-d>>1),v=s[m<<c];if(a===v)return m<<c;v>a?f=m:d=m+1}return~(f<<c)}(s,a,1)}const iu=Ps(on("Optional"),8),zc=Ps(on("SkipSelf"),4);function _f(s){return 128==(128&s.flags)}var g=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(g||{});const Y=new Map;let ye=0;const uu="__ngContext__";function sr(s,a){Wi(a)?(s[uu]=a[Na],function rt(s){Y.set(s[Na],s)}(a)):s[uu]=a}let Pg;function no(s,a){return Pg(s,a)}function Xc(s){const a=s[wn];return vi(a)?a[wn]:a}function _D(s){return Fg(s[bo])}function Hb(s){return Fg(s[tr])}function Fg(s){for(;null!==s&&!vi(s);)s=s[tr];return s}function vf(s,a,c,d,f){if(null!=d){let m,v=!1;vi(d)?m=d:Wi(d)&&(v=!0,d=d[Pn]);const w=Tn(d);0===s&&null!==c?null==f?wD(a,c,w):xd(a,c,w,f||null,!0):1===s&&null!==c?xd(a,c,w,f||null,!0):2===s?function _y(s,a,c){const d=my(s,a);d&&function fN(s,a,c,d){s.removeChild(a,c,d)}(s,d,a,c)}(a,w,v):3===s&&a.destroyNode(w),null!=m&&function gN(s,a,c,d,f){const m=c[$i];m!==Tn(c)&&vf(a,s,d,m,f);for(let w=ai;w<c.length;w++){const C=c[w];Hg(C[Ke],C,s,a,d,m)}}(a,s,m,c,f)}}function fy(s,a){return s.createText(a)}function py(s,a,c){return s.createElement(a,c)}function yD(s,a){const c=s[Un],d=c.indexOf(a);dd(a),c.splice(d,1)}function gy(s,a){if(s.length<=ai)return;const c=ai+a,d=s[c];if(d){const f=d[Ma];null!==f&&f!==s&&yD(f,d),a>0&&(s[c-1][tr]=d[tr]);const m=pf(s,ai+a);!function cN(s,a){Hg(s,a,a[Ot],2,null,null),a[Pn]=null,a[Gi]=null}(d[Ke],d);const v=m[br];null!==v&&v.detachView(m[Ke]),d[wn]=null,d[tr]=null,d[Nt]&=-129}return d}function Gb(s,a){if(!(256&a[Nt])){const c=a[Ot];a[Go]&&Hh(a[Go]),a[ts]&&Hh(a[ts]),c.destroyNode&&Hg(s,a,c,3,null,null),function lN(s){let a=s[bo];if(!a)return vD(s[Ke],s);for(;a;){let c=null;if(Wi(a))c=a[bo];else{const d=a[ai];d&&(c=d)}if(!c){for(;a&&!a[tr]&&a!==s;)Wi(a)&&vD(a[Ke],a),a=a[wn];null===a&&(a=s),Wi(a)&&vD(a[Ke],a),c=a&&a[tr]}a=c}}(a)}}function vD(s,a){if(!(256&a[Nt])){a[Nt]&=-129,a[Nt]|=256,function bD(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof oe)){const m=c[d+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const w=f[m[v]],C=m[v+1];Ir(4,w,C);try{C.call(w)}finally{Ir(5,w,C)}}else{Ir(4,f,m);try{m.call(f)}finally{Ir(5,f,m)}}}}}(s,a),function hN(s,a){const c=s.cleanup,d=a[Ic];if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?d[v]():d[-v].unsubscribe(),m+=2}else c[m].call(d[c[m+1]]);null!==d&&(a[Ic]=null);const f=a[Gs];if(null!==f){a[Gs]=null;for(let m=0;m<f.length;m++)(0,f[m])()}}(s,a),1===a[Ke].type&&a[Ot].destroy();const c=a[Ma];if(null!==c&&vi(a[wn])){c!==a[wn]&&yD(c,a);const d=a[br];null!==d&&d.detachView(s)}!function vt(s){Y.delete(s[Na])}(a)}}function bf(s,a,c){return Rd(s,a.parent,c)}function Rd(s,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[Pn];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:m}=s.data[d.directiveStart+f];if(m===Bs.None||m===Bs.Emulated)return null}return ur(d,c)}}function xd(s,a,c,d,f){s.insertBefore(a,c,d,f)}function wD(s,a,c){s.appendChild(a,c)}function ED(s,a,c,d,f){null!==d?xd(s,a,c,d,f):wD(s,a,c)}function my(s,a){return s.parentNode(a)}function ID(s,a,c){return $b(s,a,c)}function CD(s,a,c){return 40&s.type?ur(s,c):null}let Wb,yy,AD,vy,$b=CD;function Ug(s,a){$b=s,Wb=a}function Vg(s,a,c,d){const f=bf(s,d,a),m=a[Ot],w=ID(d.parent||a[Gi],d,a);if(null!=f)if(Array.isArray(c))for(let C=0;C<c.length;C++)ED(m,f,c[C],w,!1);else ED(m,f,c,w,!1);void 0!==Wb&&Wb(m,d,a,c,f)}function Za(s,a){if(null!==a){const c=a.type;if(3&c)return ur(a,s);if(4&c)return qb(-1,s[a.index]);if(8&c){const d=a.child;if(null!==d)return Za(s,d);{const f=s[a.index];return vi(f)?qb(-1,f):Tn(f)}}if(32&c)return no(a,s)()||Tn(s[a.index]);{const d=zb(s,a);return null!==d?Array.isArray(d)?d[0]:Za(Xc(s[ei]),d):Za(s,a.next)}}return null}function zb(s,a){return null!==a?s[ei][Gi].projection[a.projection]:null}function qb(s,a){const c=ai+s+1;if(c<a.length){const d=a[c],f=d[Ke].firstChild;if(null!==f)return Za(d,f)}return a[$i]}function jg(s,a,c,d,f,m,v){for(;null!=c;){const w=d[c.index],C=c.type;if(v&&0===a&&(w&&sr(Tn(w),d),c.flags|=2),32!=(32&c.flags))if(8&C)jg(s,a,c.child,d,f,m,!1),vf(a,s,f,w,m);else if(32&C){const M=no(c,d);let x;for(;x=M();)vf(a,s,f,x,m);vf(a,s,f,w,m)}else 16&C?Yb(s,a,d,c,f,m):vf(a,s,f,w,m);c=v?c.projectionNext:c.next}}function Hg(s,a,c,d,f,m){jg(c,d,s.firstChild,a,f,m,!1)}function Yb(s,a,c,d,f,m){const v=c[ei],C=v[Gi].projection[d.projection];if(Array.isArray(C))for(let M=0;M<C.length;M++)vf(a,s,f,C[M],m);else{let M=C;const x=v[wn];_f(d)&&(M.flags|=128),jg(s,a,M,x,f,m,!0)}}function TD(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function Gg(s,a,c){const{mergedAttrs:d,classes:f,styles:m}=c;null!==d&&Ia(s,a,d),null!==f&&TD(s,a,f),null!==m&&function _N(s,a,c){s.setAttribute(a,"style",c)}(s,a,m)}function wf(s){return function Kb(){if(void 0===yy&&(yy=null,dn.trustedTypes))try{yy=dn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return yy}()?.createHTML(s)||s}function MD(s){AD=s}function Od(){if(void 0!==AD)return AD;if(typeof document<"u")return document;throw new ne(210,!1)}function xD(s){return function Qb(){if(void 0===vy&&(vy=null,dn.trustedTypes))try{vy=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return vy}()?.createScriptURL(s)||s}class kd{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}class OD extends kd{getTypeName(){return"HTML"}}class Jb extends kd{getTypeName(){return"Style"}}class Ef extends kd{getTypeName(){return"Script"}}class Xb extends kd{getTypeName(){return"URL"}}class bN extends kd{getTypeName(){return"ResourceURL"}}function el(s){return s instanceof kd?s.changingThisBreaksApplicationSecurity:s}function Pd(s,a){const c=function by(s){return s instanceof kd&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${ct})`)}return c===a}function kD(s){return new OD(s)}function PD(s){return new Jb(s)}function wN(s){return new Ef(s)}function EN(s){return new Xb(s)}function IN(s){return new bN(s)}function FD(s){const a=new CN(s);return function DN(){try{return!!(new window.DOMParser).parseFromString(wf(""),"text/html")}catch{return!1}}()?new wy(a):a}class wy{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(wf(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class CN{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=wf(a),c}}const $g=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wg(s){return(s=String(s)).match($g)?s:"unsafe:"+s}function tl(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function zg(...s){const a={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const LD=tl("area,br,col,hr,img,wbr"),BD=tl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),as=tl("rp,rt"),ew=zg(LD,zg(BD,tl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zg(as,tl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zg(as,BD)),tw=tl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),AN=zg(tw,tl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),MN=tl("script,style,template");class nw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!ew.hasOwnProperty(c))return this.sanitizedSomething=!0,!MN.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),v=m.name,w=v.toLowerCase();if(!AN.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let C=m.value;tw[w]&&(C=Wg(C)),this.buf.push(" ",v,'="',iw(C),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();ew.hasOwnProperty(c)&&!LD.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(iw(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const UD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hF=/([^\#-~ |!])/g;function iw(s){return s.replace(/&/g,"&amp;").replace(UD,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(hF,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mo;function VD(s,a){let c=null;try{Mo=Mo||FD(s);let d=a?String(a):"";c=Mo.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=Mo.getInertBodyElement(d)}while(d!==m);return wf((new nw).sanitizeChildren(jD(c)||c))}finally{if(c){const d=jD(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function jD(s){return"content"in s&&function fF(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var If=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(If||{});function qg(s){const a=Zg();return a?a.sanitize(If.URL,s)||"":Pd(s,"URL")?el(s):Wg(ce(s))}function $D(s){const a=Zg();if(a)return xD(a.sanitize(If.RESOURCE_URL,s)||"");if(Pd(s,"ResourceURL"))return xD(el(s));throw new ne(904,!1)}function xN(s,a,c){return function RN(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?$D:qg}(a,c)(s)}function Zg(){const s=Me();return s&&s[Oi].sanitizer}class Rn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ct({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cf=new Rn("ENVIRONMENT_INITIALIZER"),zD=new Rn("INJECTOR",-1),qD=new Rn("INJECTOR_DEF_TYPES");class Yg{get(a,c=Dt){if(c===Dt){const d=new Error(`NullInjectorError: No provider for ${ie(a)}!`);throw d.name="NullInjectorError",d}return c}}function YD(...s){return{\u0275providers:KD(0,s),\u0275fromNgModule:!0}}function KD(s,...a){const c=[],d=new Set;let f;const m=v=>{c.push(v)};return tu(a,v=>{const w=v;Ey(w,m,[],d)&&(f||=[],f.push(w))}),void 0!==f&&QD(f,m),c}function QD(s,a){for(let c=0;c<s.length;c++){const{ngModule:d,providers:f}=s[c];rw(f,m=>{a(m,d)})}}function Ey(s,a,c,d){if(!(s=ke(s)))return!1;let f=null,m=ji(s);const v=!m&&en(s);if(m||v){if(v&&!v.standalone)return!1;f=s}else{const C=s.ngModule;if(m=ji(C),!m)return!1;f=C}const w=d.has(f);if(v){if(w)return!1;if(d.add(f),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of C)Ey(M,a,c,d)}}else{if(!m)return!1;{if(null!=m.imports&&!w){let M;d.add(f);try{tu(m.imports,x=>{Ey(x,a,c,d)&&(M||=[],M.push(x))})}finally{}void 0!==M&&QD(M,a)}if(!w){const M=$s(f)||(()=>new f);a({provide:f,useFactory:M,deps:Mt},f),a({provide:qD,useValue:f,multi:!0},f),a({provide:Cf,useValue:()=>rn(f),multi:!0},f)}const C=m.providers;if(null!=C&&!w){const M=s;rw(C,x=>{a(x,M)})}}}return f!==s&&void 0!==s.providers}function rw(s,a){for(let c of s)Pe(c)&&(c=c.\u0275providers),Array.isArray(c)?rw(c,a):a(c)}const gF=j({provide:String,useValue:j});function JD(s){return null!==s&&"object"==typeof s&&gF in s}function Df(s){return"function"==typeof s}const Ld=new Rn("Set Injector scope."),_n={},sw={};let Kg;function Ii(){return void 0===Kg&&(Kg=new Yg),Kg}class nl{}class Tf extends nl{get destroyed(){return this._destroyed}constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qg(a,v=>this.processProvider(v)),this.records.set(zD,L(void 0,this)),f.has("environment")&&this.records.set(nl,L(void 0,this));const m=this.records.get(Ld);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(qD.multi,Mt,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=Tt(this),d=zn(void 0);try{return a()}finally{Tt(c),zn(d)}}get(a,c=Dt,d=wt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Vs))return a[Vs](this);d=zt(d);const m=Tt(this),v=zn(void 0);try{if(!(d&wt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const M=function bt(s){return"function"==typeof s||"object"==typeof s&&s instanceof Rn}(a)&&yi(a);C=M&&this.injectableDefInScope(M)?L(pe(a),_n):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&wt.Self?Ii():this.parent).get(a,c=d&wt.Optional&&c===Dt?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Wt]=w[Wt]||[]).unshift(ie(a)),m)throw w;return function q_(s,a,c,d){const f=s[Wt];throw a[Ce]&&f.unshift(a[Ce]),s.message=function Hp(s,a,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=ie(a);if(Array.isArray(a))f=a.map(ie).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];m.push(v+":"+("string"==typeof w?JSON.stringify(w):ie(w)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${s.replace($,"\n  ")}`}("\n"+s.message,f,c,d),s.ngTokenPath=f,s[Wt]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{zn(v),Tt(m)}}resolveInjectorInitializers(){const a=Tt(this),c=zn(void 0);try{const f=this.get(Cf.multi,Mt,wt.Self);for(const m of f)m()}finally{Tt(a),zn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ie(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(a){let c=Df(a=ke(a))?a:ke(a&&a.provide);const d=function ea(s){return JD(s)?L(void 0,s.useValue):L(No(s),_n)}(a);if(Df(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=L(void 0,_n,!0),f.factory=()=>di(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===_n&&(c.value=sw,c.value=c.factory()),"object"==typeof c.value&&c.value&&function il(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ke(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function pe(s){const a=yi(s),c=null!==a?a.factory:$s(s);if(null!==c)return c;if(s instanceof Rn)throw new ne(204,!1);if(s instanceof Function)return function cs(s){const a=s.length;if(a>0)throw Hc(a,"?"),new ne(204,!1);const c=function yr(s){return s&&(s[cr]||s[xr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ne(204,!1)}function No(s,a,c){let d;if(Df(s)){const f=ke(s);return $s(f)||pe(f)}if(JD(s))d=()=>ke(s.useValue);else if(function PN(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...di(s.deps||[]));else if(function kN(s){return!(!s||!s.useExisting)}(s))d=()=>rn(ke(s.useExisting));else{const f=ke(s&&(s.useClass||s.provide));if(!function FN(s){return!!s.deps}(s))return $s(f)||pe(f);d=()=>new f(...di(s.deps))}return d}function L(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function Qg(s,a){for(const c of s)Array.isArray(c)?Qg(c,a):c&&Pe(c)?Qg(c.\u0275providers,a):a(c)}const Ut=new Rn("AppId",{providedIn:"root",factory:()=>Iy}),Iy="ng",Jg=new Rn("Platform Initializer"),Bd=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LN=new Rn("CSP nonce",{providedIn:"root",factory:()=>Od().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hd=(s,a,c)=>null;function Sy(s,a,c=!1){return Hd(s,a,c)}class im{}class rT{}class xy{resolveComponentFactory(a){throw function rm(s){const a=Error(`No component factory found for ${ie(s)}.`);return a.ngComponent=s,a}(a)}}let Af=(()=>{class s{static#e=this.NULL=new xy}return s})();function oT(){return Gd(fi(),Me())}function Gd(s,a){return new Mf(ur(s,a))}let Mf=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=oT}return s})();function Oy(s){return s instanceof Mf?s.nativeElement:s}class ky{}let uw=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function dw(){const s=Me(),c=wi(fi().index,s);return(Wi(c)?c:s)[Ot]}()}return s})(),hw=(()=>{class s{static#e=this.\u0275prov=Ct({token:s,providedIn:"root",factory:()=>null})}return s})();class fw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const pw=new fw("16.2.10"),gw={};function Uy(s,a=null,c=null,d){const f=cT(s,a,c,d);return f.resolveInjectorInitializers(),f}function cT(s,a=null,c=null,d,f=new Set){const m=[c||Mt,YD(s)];return d=d||("object"==typeof s?void 0:ie(s)),new Tf(m,a||Ii(),d||null,f)}let ta=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=Dt;static#t=this.NULL=new Yg;static create(c,d){if(Array.isArray(c))return Uy({name:""},d,c,"");{const f=c.name??"";return Uy({name:f},c.parent,c.providers,f)}}static#n=this.\u0275prov=Ct({token:s,providedIn:"any",factory:()=>rn(zD)});static#i=this.__NG_ELEMENT_ID__=-1}return s})();function vw(s){return s.ngOriginalError}class ol{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&vw(a);for(;c&&vw(c);)c=vw(c);return c||null}}function bw(s){return a=>{setTimeout(s,void 0,a)}}const io=class uT extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,m=c||(()=>null),v=d;if(a&&"object"==typeof a){const C=a;f=C.next?.bind(C),m=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(m=bw(m),f&&(f=bw(f)),v&&(v=bw(v)));const w=super.subscribe({next:f,error:m,complete:v});return a instanceof te.w0&&a.add(w),w}};function Vy(...s){}class gr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new io(!1),this.onMicrotaskEmpty=new io(!1),this.onStable=new io(!1),this.onError=new io(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ww(){const s="function"==typeof dn.requestAnimationFrame;let a=dn[s?"requestAnimationFrame":"setTimeout"],c=dn[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const f=c[Zone.__symbol__("OriginalDelegate")];f&&(c=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function hT(s){const a=()=>{!function dT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Nf(s),s.isCheckStableRunning=!0,jy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Nf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,v,w)=>{if(function $d(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(w))return c.invokeTask(f,m,v,w);try{return fT(s),c.invokeTask(f,m,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),pT(s)}},onInvoke:(c,d,f,m,v,w,C)=>{try{return fT(s),c.invoke(f,m,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&a(),pT(s)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Nf(s),jy(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gr.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(gr.isInAngularZone())throw new ne(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,om,Vy,Vy);try{return m.runTask(v,c,d)}finally{m.cancelTask(v)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const om={};function jy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Nf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function fT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pT(s){s._nesting--,jy(s)}class Rf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new io,this.onMicrotaskEmpty=new io,this.onStable=new io,this.onError=new io}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const gT=new Rn("",{providedIn:"root",factory:mT});function mT(){const s=qt(gr);let a=!0;const c=new B.y(f=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{f.next(a),f.complete()})}),d=new B.y(f=>{let m;s.runOutsideAngular(()=>{m=s.onStable.subscribe(()=>{gr.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,f.next(!0))})})});const v=s.onUnstable.subscribe(()=>{gr.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{f.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});return(0,re.T)(c,d.pipe((0,ve.B)()))}function Qa(s){return s instanceof Function?s():s}let lm=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ct({token:s,providedIn:"root",factory:()=>new s})}return s})();function xf(s){for(;s;){s[Nt]|=64;const a=Xc(s);if(Wo(s)&&!a)return s;s=a}return null}const Gy=new Rn("",{providedIn:"root",factory:()=>!1});let Wy=null;function kf(s,a){return s[a]??du()}function Rw(s,a){const c=du();c.producerNode?.length&&(s[a]=Wy,c.lView=s,Wy=Pf())}const zy={...Tc,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{xf(s.lView)},lView:null};function Pf(){return Object.create(zy)}function du(){return Wy??=Pf(),Wy}const Vt={};function bT(s){wT(Yt(),Me(),Pi()+s,!1)}function wT(s,a,c,d){if(!d)if(3==(3&a[Nt])){const m=s.preOrderCheckHooks;null!==m&&Yo(a,m,c)}else{const m=s.preOrderHooks;null!==m&&_d(a,m,0,c)}Xs(c)}function Wd(s,a=wt.Default){const c=Me();return null===c?rn(s,a):af(fi(),c,ke(s),a)}function xw(){throw new Error("invalid")}function Ja(s,a,c,d,f,m,v,w,C,M,x){const U=a.blueprint.slice();return U[Pn]=f,U[Nt]=140|d,(null!==M||s&&2048&s[Nt])&&(U[Nt]|=2048),$l(U),U[wn]=U[Xn]=s,U[Mn]=c,U[Oi]=v||s&&s[Oi],U[Ot]=w||s&&s[Ot],U[Ur]=C||s&&s[Ur]||null,U[Gi]=m,U[Na]=function qe(){return ye++}(),U[wr]=x,U[Hs]=M,U[ei]=2==a.type?s[ei]:U,U}function Ts(s,a,c,d,f){let m=s.data[a];if(null===m)m=Ff(s,a,c,d,f),function ql(){return Et.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const v=kc();m.injectorIndex=null===v?-1:v.injectorIndex}return Qs(m,!0),m}function Ff(s,a,c,d,f){const m=fd(),v=hg(),C=s.data[a]=function CT(s,a,c,d,f,m){let v=a?a.injectorIndex:-1,w=0;return Ys()&&(w|=128),{type:c,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,d,f);return null===s.firstChild&&(s.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C,C.prev=m)),C}function hu(s,a,c,d){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function Ow(s,a,c,d,f){const m=kf(a,Go),v=Pi(),w=2&d;try{Xs(-1),w&&a.length>jt&&wT(s,a,jt,!1),Ir(w?2:0,f);const M=w?m:null,x=Sc(M);try{null!==M&&(M.dirty=!1),c(d,f)}finally{jh(M,x)}}finally{w&&null===a[Go]&&Rw(a,Go),Xs(v),Ir(w?3:1,f)}}function Kn(s,a,c){if(Cc(a)){const d=nr(null);try{const m=a.directiveEnd;for(let v=a.directiveStart;v<m;v++){const w=s.data[v];w.contentQueries&&w.contentQueries(1,c[v],v)}}finally{nr(d)}}}function Lf(s,a,c){Zo()&&(function ST(s,a,c,d){const f=c.directiveStart,m=c.directiveEnd;ns(c)&&function AT(s,a,c){const d=ur(a,s),f=Bf(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const w=Jy(s,Ja(s,f,null,v,d,a,null,s[Oi].rendererFactory.createRenderer(d,c),null,null,null));s[a.index]=w}(a,c,s.data[f+c.componentOffset]),s.firstCreatePass||Gn(c,a),sr(d,a);const v=c.initialInputs;for(let w=f;w<m;w++){const C=s.data[w],M=Uc(a,s,w,c);sr(M,a),null!==v&&tR(0,w-f,M,C,0,v),lr(C)&&(wi(c.index,a)[Mn]=Uc(a,s,w,c))}}(s,a,c,ur(c,a)),64==(64&c.flags)&&Yy(s,a,c))}function zd(s,a,c=ur){const d=a.localNames;if(null!==d){let f=a.index+1;for(let m=0;m<d.length;m+=2){const v=d[m+1],w=-1===v?c(a,s):s[v];s[f++]=w}}}function Bf(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=kw(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function kw(s,a,c,d,f,m,v,w,C,M,x){const U=jt+d,q=U+f,ee=function ET(s,a){const c=[];for(let d=0;d<a;d++)c.push(d<s?null:Vt);return c}(U,q),be="function"==typeof M?M():M;return ee[Ke]={type:s,blueprint:ee,template:c,queries:null,viewQuery:w,declTNode:a,data:ee.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:be,incompleteFirstPass:!1,ssrId:x}}let IT=s=>null;function Pw(s,a,c,d){for(let f in s)if(s.hasOwnProperty(f)){c=null===c?{}:c;const m=s[f];null===d?Fw(c,a,f,m):d.hasOwnProperty(f)&&Fw(c,a,d[f],m)}return c}function Fw(s,a,c,d){s.hasOwnProperty(c)?s[c].push(a,d):s[c]=[a,d]}function ro(s,a,c,d,f,m,v,w){const C=ur(a,c);let x,M=a.inputs;!w&&null!=M&&(x=M[d])?(ev(s,c,x,d,f),ns(a)&&function DT(s,a){const c=wi(a,s);16&c[Nt]||(c[Nt]|=64)}(c,a.index)):3&a.type&&(d=function KN(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=v?v(f,a.value||"",d):f,m.setProperty(C,d,f))}function qy(s,a,c,d){if(Zo()){const f=null===d?null:{"":-1},m=function eR(s,a){const c=s.directiveRegistry;let d=null,f=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(Qu(a,v.selectors,!1))if(d||(d=[]),lr(v))if(null!==v.findHostDirectiveDefs){const w=[];f=f||new Map,v.findHostDirectiveDefs(v,w,f),d.unshift(...w,v),Bw(s,a,w.length)}else d.unshift(v),Bw(s,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,d,f),d.push(v)}return null===d?null:[d,f]}(s,c);let v,w;null===m?v=w=null:[v,w]=m,null!==v&&Zy(s,a,c,v,f,w),f&&function Ky(s,a,c){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new ne(-301,!1);d.push(a[f],m)}}}(c,d,f)}c.mergedAttrs=Ca(c.mergedAttrs,c.attrs)}function Zy(s,a,c,d,f,m){for(let M=0;M<d.length;M++)bd(Gn(c,a),s,d[M].type);!function Qy(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,d.length);for(let M=0;M<d.length;M++){const x=d[M];x.providersResolver&&x.providersResolver(x)}let v=!1,w=!1,C=hu(s,a,d.length,null);for(let M=0;M<d.length;M++){const x=d[M];c.mergedAttrs=Ca(c.mergedAttrs,x.hostAttrs),Uw(s,c,a,C,x),fm(C,x,f),null!==x.contentQueries&&(c.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(c.flags|=64);const U=x.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),v=!0),!w&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),w=!0),C++}!function Uf(s,a,c){const f=a.directiveEnd,m=s.data,v=a.attrs,w=[];let C=null,M=null;for(let x=a.directiveStart;x<f;x++){const U=m[x],q=c?c.get(U):null,be=q?q.outputs:null;C=Pw(U.inputs,x,C,q?q.inputs:null),M=Pw(U.outputs,x,M,be);const je=null===C||null===v||Hi(a)?null:MT(C,x,v);w.push(je)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=8),C.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=w,a.inputs=C,a.outputs=M}(s,c,m)}function Yy(s,a,c){const d=c.directiveStart,f=c.directiveEnd,m=c.index,v=function tf(){return Et.lFrame.currentDirectiveIndex}();try{Xs(m);for(let w=d;w<f;w++){const C=s.data[w],M=a[w];Ba(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&XN(C,M)}}finally{Xs(-1),Ba(v)}}function XN(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Bw(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function fm(s,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=s;lr(a)&&(c[""]=s)}}function Uw(s,a,c,d,f){s.data[d]=f;const m=f.factory||(f.factory=$s(f.type)),v=new oe(m,lr(f),Wd);s.blueprint[d]=v,c[d]=v,function Lw(s,a,c,d,f){const m=f.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const w=~a.index;(function TT(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=w&&v.push(w),v.push(c,d,m)}}(s,a,d,hu(s,c,f.hostVars,Vt),f)}function Ss(s,a,c,d,f,m){const v=ur(s,a);!function qd(s,a,c,d,f,m,v){if(null==m)s.removeAttribute(a,f,c);else{const w=null==v?ce(m):v(m,d||"",f);s.setAttribute(a,f,w,c)}}(a[Ot],v,m,s.value,c,d,f)}function tR(s,a,c,d,f,m){const v=m[a];if(null!==v)for(let w=0;w<v.length;)pi(d,c,v[w++],v[w++],v[w++])}function pi(s,a,c,d,f){const m=nr(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(f=v[d].call(a,f)),null!==s.setInput?s.setInput(a,f,c,d):a[d]=f}finally{nr(m)}}function MT(s,a,c){let d=null,f=0;for(;f<c.length;){const m=c[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===d&&(d=[]);const v=s[m];for(let w=0;w<v.length;w+=2)if(v[w]===a){d.push(m,v[w+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function NT(s,a,c,d){return[s,!0,!1,a,null,0,d,c,null,null,null]}function RT(s,a){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const m=c[d+1];if(-1!==m){const v=s.data[m];nf(c[d]),v.contentQueries(2,a[m],m)}}}function Jy(s,a){return s[bo]?s[Nl][tr]=a:s[bo]=a,s[Nl]=a,a}function Xy(s,a,c){nf(0);const d=nr(null);try{a(s,c)}finally{nr(d)}}function Vw(s){return s[Ic]||(s[Ic]=[])}function pm(s){return s.cleanup||(s.cleanup=[])}function Xa(s,a){const c=s[Ur],d=c?c.get(ol,null):null;d&&d.handleError(a)}function ev(s,a,c,d,f){for(let m=0;m<c.length;){const v=c[m++],w=c[m++];pi(s.data[v],a[v],d,w,f)}}function Hw(s,a){const c=wi(a,s),d=c[Ke];!function gm(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(d,c);const f=c[Pn];null!==f&&null===c[wr]&&(c[wr]=Sy(f,c[Ur])),tv(d,c,c[Mn])}function tv(s,a,c){Hn(a);try{const d=s.viewQuery;null!==d&&Xy(1,d,c);const f=s.template;null!==f&&Ow(s,a,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&RT(s,a),s.staticViewQueries&&Xy(2,s.viewQuery,c);const m=s.components;null!==m&&function Gw(s,a){for(let c=0;c<a.length;c++)Hw(s,a[c])}(a,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[Nt]&=-5,jr()}}let mm=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,d,f){const m=typeof Zone>"u"?null:Zone.current,v=function qh(s,a,c){const d=Object.create(lg);c&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=a;const f=v=>{d.cleanupFn=v};return d.ref={notify:()=>od(d),run:()=>{if(d.dirty=!1,d.hasRun&&!Fa(d))return;d.hasRun=!0;const v=Sc(d);try{d.cleanupFn(),d.cleanupFn=Zh,d.fn(f)}finally{jh(d,v)}},cleanup:()=>d.cleanupFn()},d.ref}(c,M=>{this.all.has(M)&&this.queue.set(M,m)},f);let w;this.all.add(v),v.notify();const C=()=>{v.cleanup(),w?.(),this.all.delete(v),this.queue.delete(v)};return w=d?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ct({token:s,providedIn:"root",factory:()=>new s})}return s})();function Zd(s,a,c){let d=c?s.styles:null,f=c?s.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?m=w:1==m?f=He(f,w):2==m&&(d=He(d,w+": "+a[++v]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=f:s.classesWithoutHost=f}function _m(s,a,c,d,f=!1){for(;null!==c;){const m=a[c.index];null!==m&&d.push(Tn(m)),vi(m)&&$w(m,d);const v=c.type;if(8&v)_m(s,a,c.child,d);else if(32&v){const w=no(c,a);let C;for(;C=w();)d.push(C)}else if(16&v){const w=zb(a,c);if(Array.isArray(w))d.push(...w);else{const C=Xc(a[ei]);_m(C[Ke],C,w,d,!0)}}c=f?c.projectionNext:c.next}return d}function $w(s,a){for(let c=ai;c<s.length;c++){const d=s[c],f=d[Ke].firstChild;null!==f&&_m(d[Ke],d,f,a)}s[$i]!==s[Pn]&&a.push(s[$i])}function pu(s,a,c,d=!0){const f=a[Oi],m=f.rendererFactory,v=f.afterRenderEventManager;m.begin?.(),v?.begin();try{nv(s,a,s.template,c)}catch(C){throw d&&Xa(a,C),C}finally{m.end?.(),f.effectManager?.flush(),v?.end()}}function nv(s,a,c,d){const f=a[Nt];if(256!=(256&f)){a[Oi].effectManager?.flush(),Hn(a);try{$l(a),function pd(s){return Et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Ow(s,a,c,2,d);const v=3==(3&f);if(v){const M=s.preOrderCheckHooks;null!==M&&Yo(a,M,null)}else{const M=s.preOrderHooks;null!==M&&_d(a,M,0,null),D(a,0)}if(function kT(s){for(let a=_D(s);null!==a;a=Hb(a)){if(!a[Ra])continue;const c=a[Un];for(let d=0;d<c.length;d++){Oc(c[d])}}}(a),iv(a,2),null!==s.contentQueries&&RT(s,a),v){const M=s.contentCheckHooks;null!==M&&Yo(a,M)}else{const M=s.contentHooks;null!==M&&_d(a,M,1),D(a,1)}!function zN(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const d=kf(a,ts);try{for(let f=0;f<c.length;f++){const m=c[f];if(m<0)Xs(~m);else{const v=m,w=c[++f],C=c[++f];gg(w,v),d.dirty=!1;const M=Sc(d);try{C(2,a[v])}finally{jh(d,M)}}}}finally{null===a[ts]&&Rw(a,ts),Xs(-1)}}(s,a);const w=s.components;null!==w&&zw(a,w,0);const C=s.viewQuery;if(null!==C&&Xy(2,C,d),v){const M=s.viewCheckHooks;null!==M&&Yo(a,M)}else{const M=s.viewHooks;null!==M&&_d(a,M,2),D(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Nt]&=-73,dd(a)}finally{jr()}}}function iv(s,a){for(let c=_D(s);null!==c;c=Hb(c))for(let d=ai;d<c.length;d++)Ww(c[d],a)}function rv(s,a,c){Ww(wi(a,s),c)}function Ww(s,a){if(!function ud(s){return 128==(128&s[Nt])}(s))return;const c=s[Ke],d=s[Nt];if(80&d&&0===a||1024&d||2===a)nv(c,s,c.template,s[Mn]);else if(s[vo]>0){iv(s,1);const f=c.components;null!==f&&zw(s,f,1)}}function zw(s,a,c){for(let d=0;d<a.length;d++)rv(s,a[d],c)}class na{get rootNodes(){const a=this._lView,c=a[Ke];return _m(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(a){this._lView[Mn]=a}get destroyed(){return 256==(256&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[wn];if(vi(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(gy(a,d),pf(c,d))}this._attachedToViewContainer=!1}Gb(this._lView[Ke],this._lView)}onDestroy(a){!function hd(s,a){if(256==(256&s[Nt]))throw new ne(911,!1);null===s[Gs]&&(s[Gs]=[]),s[Gs].push(a)}(this._lView,a)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-129}reattach(){this._lView[Nt]|=128}detectChanges(){pu(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bg(s,a){Hg(s,a,a[Ot],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=a}}class PT extends na{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;pu(a[Ke],a,a[Mn],!1)}checkNoChanges(){}get context(){return null}}class qw extends Af{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=en(a);return new Sr(c,this.ngModule)}}function Zw(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class sv{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){d=zt(d);const f=this.injector.get(a,gw,d);return f!==gw||c===gw?f:this.parentInjector.get(a,c,d)}}class Sr extends rT{get inputs(){const a=this.componentDef,c=a.inputTransforms,d=Zw(a.inputs);if(null!==c)for(const f of d)c.hasOwnProperty(f.propName)&&(f.transform=c[f.propName]);return d}get outputs(){return Zw(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Y_(s){return s.map(_o).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,d,f){let m=(f=f||this.ngModule)instanceof nl?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new sv(a,m):a,w=v.get(ky,null);if(null===w)throw new ne(407,!1);const U={rendererFactory:w,sanitizer:v.get(hw,null),effectManager:v.get(mm,null),afterRenderEventManager:v.get(lm,null)},q=w.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",be=d?function qN(s,a,c,d){const m=d.get(Gy,!1)||c===Bs.ShadowDom,v=s.selectRootElement(a,m);return function ZN(s){IT(s)}(v),v}(q,d,this.componentDef.encapsulation,v):py(q,ee,function FT(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(ee)),ht=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ae=null;null!==be&&(Ae=Sy(be,v,!0));const At=kw(0,null,null,1,0,null,null,null,null,null,null),Kt=Ja(null,At,null,ht,null,null,U,q,v,null,Ae);let On,Rs;Hn(Kt);try{const Qr=this.componentDef;let wp,eC=null;Qr.findHostDirectiveDefs?(wp=[],eC=new Map,Qr.findHostDirectiveDefs(Qr,wp,eC),wp.push(Qr)):wp=[Qr];const Yx=function BT(s,a){const c=s[Ke],d=jt;return s[d]=a,Ts(c,d,2,"#host",null)}(Kt,be),Kx=function Vf(s,a,c,d,f,m,v){const w=f[Ke];!function rR(s,a,c,d){for(const f of s)a.mergedAttrs=Ca(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Zd(a,a.mergedAttrs,!0),null!==c&&Gg(d,c,a))}(d,s,a,v);let C=null;null!==a&&(C=Sy(a,f[Ur]));const M=m.rendererFactory.createRenderer(a,c);let x=16;c.signals?x=4096:c.onPush&&(x=64);const U=Ja(f,Bf(c),null,x,f[s.index],s,m,M,null,null,C);return w.firstCreatePass&&Bw(w,s,d.length-1),Jy(f,U),f[s.index]=U}(Yx,be,Qr,wp,Kt,U,q);Rs=Hl(At,jt),be&&function Yw(s,a,c,d){if(d)Ia(s,c,["ng-version",pw.full]);else{const{attrs:f,classes:m}=function vr(s){const a=[],c=[];let d=1,f=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===f?""!==m&&a.push(m,s[++d]):8===f&&c.push(m);else{if(!Ji(f))break;f=m}d++}return{attrs:a,classes:c}}(a.selectors[0]);f&&Ia(s,c,f),m&&m.length>0&&TD(s,c,m.join(" "))}}(q,Qr,be,d),void 0!==c&&function oR(s,a,c){const d=s.projection=[];for(let f=0;f<a.length;f++){const m=c[f];d.push(null!=m?Array.from(m):null)}}(Rs,this.ngContentSelectors,c),On=function sR(s,a,c,d,f,m){const v=fi(),w=f[Ke],C=ur(v,f);Zy(w,f,v,c,null,d);for(let x=0;x<c.length;x++)sr(Uc(f,w,v.directiveStart+x,v),f);Yy(w,f,v),C&&sr(C,f);const M=Uc(f,w,v.directiveStart+v.componentOffset,v);if(s[Mn]=f[Mn]=M,null!==m)for(const x of m)x(M,a);return Kn(w,v,s),M}(Kx,Qr,wp,eC,Kt,[aR]),tv(At,Kt,null)}finally{jr()}return new LT(this.componentType,On,Gd(Rs,Kt),Kt,Rs)}}class LT extends im{constructor(a,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new PT(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const m=this._rootLView;ev(m[Ke],m,f,a,c),this.previousInputValues.set(a,c),xf(wi(this._tNode.index,m))}}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function aR(){const s=fi();Bc(Me()[Ke],s)}function Qw(s){let a=function Kw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;a;){let f;if(lr(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ne(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const v=s;v.inputs=av(s.inputs),v.inputTransforms=av(s.inputTransforms),v.declaredInputs=av(s.declaredInputs),v.outputs=av(s.outputs);const w=f.hostBindings;w&&jf(s,w);const C=f.viewQuery,M=f.contentQueries;if(C&&UT(s,C),M&&mr(s,M),W(s.inputs,f.inputs),W(s.declaredInputs,f.declaredInputs),W(s.outputs,f.outputs),null!==f.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),W(v.inputTransforms,f.inputTransforms)),lr(f)&&f.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const w=m[v];w&&w.ngInherit&&w(s),w===Qw&&(c=!1)}}a=Object.getPrototypeOf(a)}!function ov(s){let a=0,c=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Ca(f.hostAttrs,c=Ca(c,f.hostAttrs))}}(d)}function av(s){return s===ys?{}:s===Mt?[]:s}function UT(s,a){const c=s.viewQuery;s.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function mr(s,a){const c=s.contentQueries;s.contentQueries=c?(d,f,m)=>{a(d,f,m),c(d,f,m)}:a}function jf(s,a){const c=s.hostBindings;s.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}function Ge(s){return a=>{a.findHostDirectiveDefs=Ci,a.hostDirectives=(Array.isArray(s)?s:s()).map(c=>"function"==typeof c?{directive:ke(c),inputs:ys,outputs:ys}:{directive:ke(c.directive),inputs:mu(c.inputs),outputs:mu(c.outputs)})}}function Ci(s,a,c){if(null!==s.hostDirectives)for(const d of s.hostDirectives){const f=hi(d.directive);Xw(f.declaredInputs,d.inputs),Ci(f,a,c),c.set(f,d),a.push(f)}}function mu(s){if(void 0===s||0===s.length)return ys;const a={};for(let c=0;c<s.length;c+=2)a[s[c]]=s[c+1];return a}function Xw(s,a){for(const c in a)a.hasOwnProperty(c)&&(s[a[c]]=s[c])}function VT(s){const a=s.inputConfig,c={};for(const d in a)if(a.hasOwnProperty(d)){const f=a[d];Array.isArray(f)&&f[2]&&(c[d]=f[2])}s.inputTransforms=c}function fe(s){return!!cv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function cv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function tc(s,a,c){return s[a]=c}function $r(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function Yd(s,a,c,d){const f=$r(s,a,c);return $r(s,a+1,d)||f}function jT(s,a,c,d){const f=Me();return $r(f,Pc(),a)&&(Yt(),Ss(In(),f,s,a,c,d)),jT}function Kd(s,a,c,d){return $r(s,Pc(),c)?a+ce(c)+d:Vt}function pv(s,a,c,d,f,m,v,w){const C=Me(),M=Yt(),x=s+jt,U=M.firstCreatePass?function Xd(s,a,c,d,f,m,v,w,C){const M=a.consts,x=Ts(a,s,4,v||null,ws(M,w));qy(a,c,x,ws(M,C)),Bc(a,x);const U=x.tView=kw(2,x,d,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M,null);return null!==a.queries&&(a.queries.template(a,x),U.queries=a.queries.embeddedTView(x)),x}(x,M,C,a,c,d,f,m,v):M.data[x];Qs(U,!1);const q=nE(M,C,U,s);Is()&&Vg(M,C,q,U),sr(q,C),Jy(C,C[x]=NT(q,C,q,U)),Dc(U)&&Lf(M,C,U),null!=v&&zd(C,U,w)}let nE=function $f(s,a,c,d){return Cs(!0),a[Ot].createComment("")};function sa(s){return function Vr(s,a){return s[a]}(function pg(){return Et.lFrame.contextLView}(),jt+s)}function th(s,a,c){const d=Me();return $r(d,Pc(),a)&&ro(Yt(),In(),d,s,a,d[Ot],c,!1),th}function rc(s,a,c,d,f){const v=f?"class":"style";ev(s,c,a.inputs[v],v,d)}function ul(s,a,c,d){const f=Me(),m=Yt(),v=jt+s,w=f[Ot],C=m.firstCreatePass?function KT(s,a,c,d,f,m){const v=a.consts,C=Ts(a,s,2,d,ws(v,f));return qy(a,c,C,ws(v,m)),null!==C.attrs&&Zd(C,C.attrs,!1),null!==C.mergedAttrs&&Zd(C,C.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,C),C}(v,m,f,a,c,d):m.data[v],M=mv(m,f,C,w,a,s);f[v]=M;const x=Dc(C);return Qs(C,!0),Gg(w,M,C),32!=(32&C.flags)&&Is()&&Vg(m,f,M,C),0===function Es(){return Et.lFrame.elementDepthCount}()&&sr(M,f),function zl(){Et.lFrame.elementDepthCount++}(),x&&(Lf(m,f,C),Kn(m,C,f)),null!==d&&zd(f,C),ul}function Wf(){let s=fi();hg()?fg():(s=s.parent,Qs(s,!1));const a=s;(function Jh(s){return Et.skipHydrationRootTNode===s})(a)&&function dg(){Et.skipHydrationRootTNode=null}(),function Qh(){Et.lFrame.elementDepthCount--}();const c=Yt();return c.firstCreatePass&&(Bc(c,s),Cc(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function xt(s){return 0!=(8&s.flags)}(a)&&rc(c,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Rt(s){return 0!=(16&s.flags)}(a)&&rc(c,a,Me(),a.stylesWithoutHost,!1),Wf}function dl(s,a,c,d){return ul(s,a,c,d),Wf(),dl}let mv=(s,a,c,d,f,m)=>(Cs(!0),py(d,f,function Yl(){return Et.lFrame.currentNamespace}()));function rE(){return Me()}function sc(s){return!!s&&"function"==typeof s.then}function sE(s){return!!s&&"function"==typeof s.subscribe}function _v(s,a,c,d){const f=Me(),m=Yt(),v=fi();return function xn(s,a,c,d,f,m,v){const w=Dc(d),M=s.firstCreatePass&&pm(s),x=a[Mn],U=Vw(a);let q=!0;if(3&d.type||v){const je=ur(d,a),Je=v?v(je):je,ht=U.length,Ae=v?Kt=>v(Tn(Kt[d.index])):d.index;let At=null;if(!v&&w&&(At=function fn(s,a,c,d){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===d){const w=a[Ic],C=f[m+2];return w.length>C?w[C]:null}"string"==typeof v&&(m+=2)}return null}(s,a,f,d.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=m,At.__ngLastListenerFn__=m,q=!1;else{m=yv(d,a,x,m,!1);const Kt=c.listen(Je,f,m);U.push(m,Kt),M&&M.push(f,Ae,ht,ht+1)}}else m=yv(d,a,x,m,!1);const ee=d.outputs;let be;if(q&&null!==ee&&(be=ee[f])){const je=be.length;if(je)for(let Je=0;Je<je;Je+=2){const On=a[be[Je]][be[Je+1]].subscribe(m),Rs=U.length;U.push(m,On),M&&M.push(f,d.index,Rs,-(Rs+1))}}}(m,f,f[Ot],v,s,a,d),_v}function ih(s,a,c,d){try{return Ir(6,a,c),!1!==c(d)}catch(f){return Xa(s,f),!1}finally{Ir(7,a,c)}}function yv(s,a,c,d,f){return function m(v){if(v===Function)return d;xf(s.componentOffset>-1?wi(s.index,a):a);let C=ih(a,c,d,v),M=m.__ngNextListenerFn__;for(;M;)C=ih(a,c,M,v)&&C,M=M.__ngNextListenerFn__;return f&&!1===C&&v.preventDefault(),C}}function vv(s=1){return function sf(s){return(Et.lFrame.contextLView=function ey(s,a){for(;s>0;)a=a[Xn],s--;return a}(s,Et.lFrame.contextLView))[Mn]}(s)}function tS(s,a){let c=null;const d=function Z_(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(s);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===d?Qu(s,m,!0):Da(d,m))return f}else c=f}return c}function bv(s){const a=Me()[ei][Gi];if(!a.projection){const d=a.projection=Hc(s?s.length:1,null),f=d.slice();let m=a.child;for(;null!==m;){const v=s?tS(m,s):0;null!==v&&(f[v]?f[v].projectionNext=m:d[v]=m,f[v]=m),m=m.next}}}function aE(s,a=0,c){const d=Me(),f=Yt(),m=Ts(f,jt+s,16,null,c||null);null===m.projection&&(m.projection=a),fg(),(!d[wr]||Ys())&&32!=(32&m.flags)&&function Zb(s,a,c){Yb(a[Ot],0,a,c,bf(s,c,a),ID(c.parent||a[Gi],c,a))}(f,d,m)}function wv(s,a,c){return Dm(s,"",a,"",c),wv}function Dm(s,a,c,d,f){const m=Me(),v=Kd(m,a,c,d);return v!==Vt&&ro(Yt(),In(),m,s,v,m[Ot],f,!1),Dm}function hl(s,a){return s<<17|a<<2}function Iu(s){return s>>17&32767}function ar(s){return 2|s}function yn(s){return(131068&s)>>2}function Iv(s,a){return-131069&s|a<<2}function Wr(s){return 1|s}function Cv(s,a,c,d,f){const m=s[c+1],v=null===a;let w=d?Iu(m):yn(m),C=!1;for(;0!==w&&(!1===C||v);){const x=s[w+1];rh(s[w],a)&&(C=!0,s[w+1]=d?Wr(x):ar(x)),w=d?Iu(x):yn(x)}C&&(s[c+1]=d?ar(m):Wr(m))}function rh(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Gc(s,a)>=0}const mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tm(s){return s.substring(mi.key,mi.keyEnd)}function uE(s,a){const c=mi.textEnd;return c===a?-1:(a=mi.keyEnd=function hE(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,mi.key=a,c),oh(s,a,c))}function oh(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function ch(s,a){return function Oo(s,a,c,d){const f=Me(),m=Yt(),v=Cr(2);m.firstUpdatePass&&gE(m,s,v,d),a!==Vt&&$r(f,v,a)&&dh(m,m.data[Pi()],f,f[Ot],s,f[v+1]=function Mm(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ie(el(s)))),s}(a,c),d,v)}(s,a,null,!0),ch}function Av(s){!function ca(s,a,c,d){const f=Yt(),m=Cr(2);f.firstUpdatePass&&gE(f,null,m,d);const v=Me();if(c!==Vt&&$r(v,m,c)){const w=f.data[Pi()];if(hS(w,d)&&!pE(f,m)){let C=d?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(c=He(C,c||"")),rc(f,w,v,c,d)}else!function dS(s,a,c,d,f,m,v,w){f===Vt&&(f=Mt);let C=0,M=0,x=0<f.length?f[0]:null,U=0<m.length?m[0]:null;for(;null!==x||null!==U;){const q=C<f.length?f[C+1]:void 0,ee=M<m.length?m[M+1]:void 0;let je,be=null;x===U?(C+=2,M+=2,q!==ee&&(be=U,je=ee)):null===U||null!==x&&x<U?(C+=2,be=x):(M+=2,be=U,je=ee),null!==be&&dh(s,a,c,d,be,je,v,w),x=C<f.length?f[C]:null,U=M<m.length?m[M]:null}}(f,w,v,v[Ot],v[m+1],v[m+1]=function lh(s,a,c){if(null==c||""===c)return Mt;const d=[],f=el(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(d,m,f[m]);else"string"==typeof f&&a(d,f);return d}(s,a,c),d,m)}}(uh,aa,s,!0)}function aa(s,a){for(let c=function cS(s){return function sh(s){mi.key=0,mi.keyEnd=0,mi.value=0,mi.valueEnd=0,mi.textEnd=s.length}(s),uE(s,oh(s,0,mi.textEnd))}(a);c>=0;c=uE(a,c))rs(s,Tm(a),!0)}function pE(s,a){return a>=s.expandoStartIndex}function gE(s,a,c,d){const f=s.data;if(null===f[c+1]){const m=f[Pi()],v=pE(s,c);hS(m,d)&&null===a&&!v&&(a=!1),a=function uS(s,a,c,d){const f=function Js(s){const a=Et.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let m=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=oc(c=Nv(null,s,a,c,d),a.attrs,d),m=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(c=Nv(f,s,a,c,d),null===m){let C=function Mv(s,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==yn(d))return s[Iu(d)]}(s,a,d);void 0!==C&&Array.isArray(C)&&(C=Nv(null,s,a,C[1],d),C=oc(C,a.attrs,d),function vR(s,a,c,d){s[Iu(c?a.classBindings:a.styleBindings)]=d}(s,a,d,C))}else m=function bR(s,a,c){let d;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)d=oc(d,s[m].hostAttrs,c);return oc(d,a.attrs,c)}(s,a,d)}return void 0!==m&&(d?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,d),function ii(s,a,c,d,f,m){let v=m?a.classBindings:a.styleBindings,w=Iu(v),C=yn(v);s[d]=c;let x,M=!1;if(Array.isArray(c)?(x=c[1],(null===x||Gc(c,x)>0)&&(M=!0)):x=c,f)if(0!==C){const q=Iu(s[w+1]);s[d+1]=hl(q,w),0!==q&&(s[q+1]=Iv(s[q+1],d)),s[w+1]=function Ev(s,a){return 131071&s|a<<17}(s[w+1],d)}else s[d+1]=hl(w,0),0!==w&&(s[w+1]=Iv(s[w+1],d)),w=d;else s[d+1]=hl(C,0),0===w?w=d:s[C+1]=Iv(s[C+1],d),C=d;M&&(s[d+1]=ar(s[d+1])),Cv(s,x,d,!0),Cv(s,x,d,!1),function yR(s,a,c,d,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&Gc(m,a)>=0&&(c[d+1]=Wr(c[d+1]))}(a,x,s,d,m),v=hl(w,C),m?a.classBindings=v:a.styleBindings=v}(f,m,a,c,v,d)}}function Nv(s,a,c,d,f){let m=null;const v=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<v&&(m=a[w],d=oc(d,m.hostAttrs,f),m!==s);)w++;return null!==s&&(c.directiveStylingLast=w),d}function oc(s,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),rs(s,v,!!c||a[++m]))}return void 0===s?null:s}function uh(s,a,c){const d=String(a);""!==d&&!d.includes(" ")&&rs(s,d,c)}function dh(s,a,c,d,f,m,v,w){if(!(3&a.type))return;const C=s.data,M=C[w+1],x=function qf(s){return 1==(1&s)}(M)?_E(C,a,c,f,yn(M),v):void 0;Am(x)||(Am(m)||function Ti(s){return 2==(2&s)}(M)&&(m=_E(C,null,c,f,w,v)),function mN(s,a,c,d,f){if(a)f?s.addClass(c,d):s.removeClass(c,d);else{let m=-1===d.indexOf("-")?void 0:g.DashCase;null==f?s.removeStyle(c,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=g.Important),s.setStyle(c,d,f,m))}}(d,v,Zs(Pi(),c),f,m))}function _E(s,a,c,d,f,m){const v=null===a;let w;for(;f>0;){const C=s[f],M=Array.isArray(C),x=M?C[1]:C,U=null===x;let q=c[f+1];q===Vt&&(q=U?Mt:void 0);let ee=U?Eg(q,d):x===d?q:void 0;if(M&&!Am(ee)&&(ee=Eg(C,d)),Am(ee)&&(w=ee,v))return w;const be=s[f+1];f=v?Iu(be):yn(be)}if(null!==a){let C=m?a.residualClasses:a.residualStyles;null!=C&&(w=Eg(C,d))}return w}function Am(s){return void 0!==s}function hS(s,a){return 0!=(s.flags&(a?8:16))}function fS(s,a=""){const c=Me(),d=Yt(),f=s+jt,m=d.firstCreatePass?Ts(d,f,1,a,null):d.data[f],v=ri(d,c,m,a,s);c[f]=v,Is()&&Vg(d,c,v,m),Qs(m,!1)}let ri=(s,a,c,d,f)=>(Cs(!0),fy(a[Ot],d));function Ov(s){return kv("",s,""),Ov}function kv(s,a,c){const d=Me(),f=Kd(d,s,a,c);return f!==Vt&&function ec(s,a,c){const d=Zs(a,s);!function Md(s,a,c){s.setValue(a,c)}(s[Ot],d,c)}(d,Pi(),f),kv}function TE(s,a,c){const d=Me();return $r(d,Pc(),a)&&ro(Yt(),In(),d,s,a,d[Ot],c,!0),TE}const Du=void 0;var TR=["en",[["a","p"],["AM","PM"],Du],[["AM","PM"],Du,Du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Du,"{1} 'at' {0}",Du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DR(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Jf={};function Tu(s){const a=function km(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Si(a);if(c)return c;const d=a.split("-")[0];if(c=Si(d),c)return c;if("en"===d)return TR;throw new ne(701,!1)}function wS(s){return Tu(s)[fh.PluralCase]}function Si(s){return s in Jf||(Jf[s]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[s]),Jf[s]}var fh=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(fh||{});const ph="en-US",Fm={marker:"element"},Lm={marker:"ICU"};var us=function(s){return s[s.SHIFT=2]="SHIFT",s[s.APPEND_EAGERLY=1]="APPEND_EAGERLY",s[s.COMMENT=2]="COMMENT",s}(us||{});let IS=ph;function Xf(s){(function lt(s,a){null==s&&Be(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(IS=s.toLowerCase().replace(/_/g,"-"))}function CS(s,a,c){const d=a.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?CD(s,0,c):Tn(c[f])}function NE(s,a,c,d,f){const m=a.insertBeforeIndex;if(Array.isArray(m)){let v=d,w=null;if(3&a.type||(w=v,v=f),null!==v&&-1===a.componentOffset)for(let C=1;C<m.length;C++)xd(s,v,c[m[C]],w,!1)}}function Pv(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const d=s[c];RE(d)||AR(d,a)&&null===DS(d)&&MR(d,a.index)}}function RE(s){return!(64&s.type)}function AR(s,a){return RE(a)||s.index>a.index}function DS(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function MR(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(Ug(CS,NE),s.insertBeforeIndex=a)}function tp(s,a,c){const d=Ff(s,c,64,null,null);return Pv(a,d),d}function kR(){const s=[];let c,d,a=-1;function m(w,C){a=0;const M=function Um(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}(w,C);d=null!==M?w.remove[M]:Mt}function v(){if(a<d.length){const w=d[a++];return w>0?c[w]:(s.push(a,d),m(c[Ke].data[~w],c),v())}return 0===s.length?null:(d=s.pop(),a=s.pop(),v())}return function f(w,C){for(c=C;s.length;)s.pop();return m(w.value,C),v}}const Lv=/\ufffd(\d+):?\d*\ufffd/gi,FR=/\ufffd(\d+)\ufffd/,OE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Vm="\ufffd",kS=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,PS=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,LR=/\uE500/g;function Bv(s,a,c,d,f,m,v){const w=hu(s,d,1,null);let C=w<<us.SHIFT,M=kc();a===M&&(M=null),null===M&&(C|=us.APPEND_EAGERLY),v&&(C|=us.COMMENT,function oN(s){void 0===Pg&&(Pg=s())}(kR)),f.push(C,null===m?"":m);const x=Ff(s,w,v?32:1,null===m?"":m,null);Pv(c,x);const U=x.index;return Qs(x,!1),null!==M&&a!==M&&function ep(s,a){let c=s.insertBeforeIndex;null===c?(Ug(CS,NE),c=s.insertBeforeIndex=[null,a]):(function Sn(s,a,c){s!=a&&Be(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(M,U),x}function FE(s,a,c,d,f,m,v){const w=v.match(Lv),C=Bv(s,a,c,m,d,w?null:v,!1);w&&ip(f,v,C.index,null,0,null)}function ip(s,a,c,d,f,m){const v=s.length,w=v+1;s.push(null,null);const C=v+2,M=a.split(Lv);let x=0;for(let U=0;U<M.length;U++){const q=M[U];if(1&U){const ee=f+parseInt(q,10);s.push(-1-ee),x|=LE(ee)}else""!==q&&s.push(q)}return s.push(c<<2|(d?1:0)),d&&s.push(d,m),s[v]=x,s[w]=s.length-C,x}function LE(s){return 1<<Math.min(s,31)}function Au(s){let a,m,c="",d=0,f=!1;for(;null!==(a=kS.exec(s));)f?a[0]===`${Vm}/*${m}${Vm}`&&(d=a.index,f=!1):(c+=s.substring(d,a.index+a[0].length),m=a[1],f=!0);return c+=s.slice(d),c}function Mu(s,a,c,d,f,m){let v=0;const w={type:f.type,currentCaseLViewIndex:hu(s,a,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function UR(s,a,c){s.push(LE(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,f,m),function NR(s,a,c){const d=s.data[a];null===d?s.data[a]=c:d.value=c}(s,m,w);const C=f.values;for(let M=0;M<C.length;M++){const x=C[M],U=[];for(let q=0;q<x.length;q++){const ee=x[q];if("string"!=typeof ee){const be=U.push(ee)-1;x[q]=`\x3c!--\ufffd${be}\ufffd--\x3e`}}v=BE(s,w,a,c,d,f.cases[M],x.join(""),U)|v}v&&function LS(s,a,c){s.push(a,1,c<<2|3)}(c,v,m)}function jm(s){const a=[],c=[];let d=1,f=0;const m=Vv(s=s.replace(OE,function(v,w,C){return d="select"===C?0:1,f=parseInt(w.slice(1),10),""}));for(let v=0;v<m.length;){let w=m[v++].trim();1===d&&(w=w.replace(/\s*(?:=)?(\w+)\s*/,"$1")),w.length&&a.push(w);const C=Vv(m[v++]);a.length>c.length&&c.push(C)}return{type:d,mainBinding:f,cases:a,values:c}}function Vv(s){if(!s)return[];let a=0;const c=[],d=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(s);){const w=m.index;if("}"==m[0]){if(c.pop(),0==c.length){const C=s.substring(a,w);OE.test(C)?d.push(jm(C)):d.push(C),a=w+1}}else{if(0==c.length){const C=s.substring(a,w);d.push(C),a=w+1}c.push("{")}}const v=s.substring(a);return d.push(v),d}function BE(s,a,c,d,f,m,v,w){const C=[],M=[],x=[];a.cases.push(m),a.create.push(C),a.remove.push(M),a.update.push(x);const q=FD(Od()).getInertBodyElement(v),ee=jD(q)||q;return ee?jv(s,a,c,d,C,M,x,ee,f,w,0):0}function jv(s,a,c,d,f,m,v,w,C,M,x){let U=0,q=w.firstChild;for(;q;){const ee=hu(s,c,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const be=q,je=be.tagName.toLowerCase();if(ew.hasOwnProperty(je)){Hv(f,Fm,je,C,ee),s.data[ee]=je;const At=be.attributes;for(let Kt=0;Kt<At.length;Kt++){const On=At.item(Kt),Rs=On.name.toLowerCase();On.value.match(Lv)?AN.hasOwnProperty(Rs)&&ip(v,On.value,ee,On.name,0,tw[Rs]?Wg:null):Gv(f,ee,On)}U=jv(s,a,c,d,f,m,v,q,ee,M,x+1)|U,UE(m,ee,x)}break;case Node.TEXT_NODE:const Je=q.textContent||"",ht=Je.match(Lv);Hv(f,null,ht?"":Je,C,ee),UE(m,ee,x),ht&&(U=ip(v,Je,ee,null,0,null)|U);break;case Node.COMMENT_NODE:const Ae=FR.exec(q.textContent||"");if(Ae){const Kt=M[parseInt(Ae[1],10)];Hv(f,Lm,"",C,ee),Mu(s,c,d,C,Kt,ee),FS(m,ee,x)}}q=q.nextSibling}return U}function UE(s,a,c){0===c&&s.push(a)}function FS(s,a,c){0===c&&(s.push(~a),s.push(a))}function Hv(s,a,c,d,f){null!==a&&s.push(a),s.push(c,f,function RR(s,a,c){return s|a<<17|c<<1}(0,d,f))}function Gv(s,a,c){s.push(a<<1|1,c.name,c.value)}function pl(s,a,c=-1){const d=Yt(),f=Me(),m=jt+s,v=ws(d.consts,a),w=kc();d.firstCreatePass&&function PE(s,a,c,d,f,m){const v=kc(),w=[],C=[],M=[[]];f=function gh(s,a){if(function Uv(s){return-1===s}(a))return Au(s);{const c=s.indexOf(`:${a}${Vm}`)+2+a.toString().length,d=s.search(new RegExp(`${Vm}\\/\\*\\d+:${a}${Vm}`));return Au(s.substring(c,d))}}(f,m);const x=function kE(s){return s.replace(LR," ")}(f).split(PS);for(let U=0;U<x.length;U++){let q=x[U];if(1&U){const ee=47===q.charCodeAt(0),je=(q.charCodeAt(ee?1:0),jt+Number.parseInt(q.substring(ee?2:1)));if(ee)M.shift(),Qs(kc(),!1);else{const Je=tp(s,M[0],je);M.unshift([]),Qs(Je,!0)}}else{const ee=Vv(q);for(let be=0;be<ee.length;be++){let je=ee[be];if(1&be){const Je=je;if("object"!=typeof Je)throw new Error(`Unable to parse ICU expression in "${f}" message.`);Mu(s,c,C,a,Je,Bv(s,v,M[0],c,w,"",!0).index)}else""!==je&&FE(s,v,M[0],w,C,c,je)}}}s.data[d]={create:w,update:C}}(d,null===w?0:w.index,f,m,v,c),2===d.type?f[ei][Nt]|=32:f[Nt]|=32;const C=d.data[m],x=Rd(d,w===f[Gi]?null:w,f);(function AS(s,a,c,d){const f=s[Ot];for(let m=0;m<a.length;m++){const v=a[m++],w=a[m],M=(v&us.APPEND_EAGERLY)===us.APPEND_EAGERLY,x=v>>>us.SHIFT;let U=s[x];null===U&&(U=s[x]=(v&us.COMMENT)===us.COMMENT?f.createComment(w):fy(f,w)),M&&null!==c&&xd(f,c,U,d,!1)}})(f,C.create,x,w&&8&w.type?f[w.index]:null),Fc(!0)}function US(s,a,c){pl(s,a,c),function VE(){Fc(!1)}()}function Gm(s,a,c,d,f){if(s=ke(s),Array.isArray(s))for(let m=0;m<s.length;m++)Gm(s[m],a,c,d,f);else{const m=Yt(),v=Me(),w=fi();let C=Df(s)?s:ke(s.provide);const M=No(s),x=1048575&w.providerIndexes,U=w.directiveStart,q=w.providerIndexes>>20;if(Df(s)||!s.multi){const ee=new oe(M,f,Wd),be=$E(C,a,f?x:x+q,U);-1===be?(bd(Gn(w,v),m,C),$v(m,s,a.length),a.push(C),w.directiveStart++,w.directiveEnd++,f&&(w.providerIndexes+=1048576),c.push(ee),v.push(ee)):(c[be]=ee,v[be]=ee)}else{const ee=$E(C,a,x+q,U),be=$E(C,a,x,x+q),Je=be>=0&&c[be];if(f&&!Je||!f&&!(ee>=0&&c[ee])){bd(Gn(w,v),m,C);const ht=function GS(s,a,c,d,f){const m=new oe(s,c,Wd);return m.multi=[],m.index=a,m.componentProviders=0,$m(m,f,d&&!c),m}(f?Wv:WE,c.length,f,d,M);!f&&Je&&(c[be].providerFactory=ht),$v(m,s,a.length,0),a.push(C),w.directiveStart++,w.directiveEnd++,f&&(w.providerIndexes+=1048576),c.push(ht),v.push(ht)}else $v(m,s,ee>-1?ee:be,$m(c[f?be:ee],M,!f&&d));!f&&d&&Je&&c[be].componentProviders++}}}function $v(s,a,c,d){const f=Df(a),m=function mF(s){return!!s.useClass}(a);if(f||m){const C=(m?ke(a.useClass):a).prototype.ngOnDestroy;if(C){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const x=M.indexOf(c);-1===x?M.push(c,[d,C]):M[x+1].push(d,C)}else M.push(c,C)}}}function $m(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function $E(s,a,c,d){for(let f=c;f<d;f++)if(a[f]===s)return f;return-1}function WE(s,a,c,d){return zE(this.multi,[])}function Wv(s,a,c,d){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Uc(c,c[Ke],this.providerFactory.index,d);m=w.slice(0,v),zE(f,m);for(let C=v;C<w.length;C++)m.push(w[C])}else m=[],zE(f,m);return m}function zE(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function sp(s,a=[]){return c=>{c.providersResolver=(d,f)=>function GE(s,a,c){const d=Yt();if(d.firstCreatePass){const f=lr(s);Gm(c,d.data,d.blueprint,f,!0),Gm(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class uc{}class op{}function $S(s,a){return new Yr(s,a??null,[])}class Yr extends uc{constructor(a,c,d){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qw(this);const f=er(a);this._bootstrapComponents=Qa(f.bootstrap),this._r3Injector=cT(a,c,[{provide:uc,useValue:this},{provide:Af,useValue:this.componentFactoryResolver},...d],ie(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class zv extends op{constructor(a){super(),this.moduleType=a}create(a){return new Yr(this.moduleType,a,[])}}class Wm extends uc{constructor(a){super(),this.componentFactoryResolver=new qw(this),this.instance=null;const c=new Tf([...a.providers,{provide:uc,useValue:this},{provide:Af,useValue:this.componentFactoryResolver}],a.parent||Ii(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function qE(s,a,c=null){return new Wm({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let Nu=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=KD(0,c.type),f=d.length>0?qE([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,f)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ct({token:s,providedIn:"environment",factory:()=>new s(rn(nl))})}return s})();function yh(s){s.getStandaloneInjector=a=>a.get(Nu).getOrCreateStandaloneInjector(s)}function Ou(s,a,c){const d=ki()+s,f=Me();return f[d]===Vt?tc(f,d,c?a.call(c):a()):function ym(s,a){return s[a]}(f,d)}function ap(s,a,c,d){return function QS(s,a,c,d,f,m){const v=a+c;return $r(s,v,f)?tc(s,v+1,m?d.call(m,f):d(f)):qm(s,v+1)}(Me(),ki(),s,a,c,d)}function YE(s,a,c,d,f){return function JS(s,a,c,d,f,m,v){const w=a+c;return Yd(s,w,f,m)?tc(s,w+2,v?d.call(v,f,m):d(f,m)):qm(s,w+2)}(Me(),ki(),s,a,c,d,f)}function KE(s,a,c,d,f,m){return function XS(s,a,c,d,f,m,v,w){const C=a+c;return function vm(s,a,c,d,f){const m=Yd(s,a,c,d);return $r(s,a+2,f)||m}(s,C,f,m,v)?tc(s,C+3,w?d.call(w,f,m,v):d(f,m,v)):qm(s,C+3)}(Me(),ki(),s,a,c,d,f,m)}function qm(s,a){const c=s[a];return c===Vt?void 0:c}function tx(){return this._results[Symbol.iterator]()}class Qv{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new io)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Qv.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=tx)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=function is(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function hf(s,a,c){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],m=a[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function nx(s,a,c,d=!0){const f=a[Ke];if(function uN(s,a,c,d){const f=ai+d,m=c.length;d>0&&(c[f-1][tr]=a),d<m-ai?(a[tr]=c[f],ff(c,ai+d,a)):(c.push(a),a[tr]=null),a[wn]=c;const v=a[Ma];null!==v&&c!==v&&function dN(s,a){const c=s[Un];a[ei]!==a[wn][wn][ei]&&(s[Ra]=!0),null===c?s[Un]=[a]:c.push(a)}(v,a);const w=a[br];null!==w&&w.insertView(s),a[Nt]|=128}(f,a,s,c),d){const m=qb(c,s),v=a[Ot],w=my(v,s[$i]);null!==w&&function Lg(s,a,c,d,f,m){d[Pn]=f,d[Gi]=a,Hg(s,d,c,1,f,m)}(f,s[Gi],v,a,w,m)}}let Ym=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=lp}return s})();const s1=Ym,rx=class extends s1{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c)}createEmbeddedViewImpl(a,c,d){const f=function n1(s,a,c,d){const f=a.tView,w=Ja(s,f,c,4096&s[Nt]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);w[Ma]=s[a.index];const M=s[br];return null!==M&&(w[br]=M.createEmbeddedView(f)),tv(f,w,c),w}(this._declarationLView,this._declarationTContainer,a,{injector:c,hydrationInfo:d});return new na(f)}};function lp(){return gl(fi(),Me())}function gl(s,a){return 4&s.type?new rx(a,s,Gd(s,a)):null}let Qm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=sI}return s})();function sI(){return n0(fi(),Me())}const t0=Qm,up=class extends t0{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Gd(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ko(this._hostTNode,this._hostLView);if(Do(a)){const c=sn(a,this._hostLView),d=tn(a);return new hr(c[Ke].data[d+8],c)}return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Jm(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-ai}createEmbeddedView(a,c,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const w=a.createEmbeddedViewImpl(c||{},m,null);return this.insertImpl(w,f,false),w}createComponent(a,c,d,f,m){const v=a&&!function $a(s){return"function"==typeof s}(a);let w;if(v)w=c;else{const je=c||{};w=je.index,d=je.injector,f=je.projectableNodes,m=je.environmentInjector||je.ngModuleRef}const C=v?a:new Sr(en(a)),M=d||this.parentInjector;if(!m&&null==C.ngModule){const Je=(v?M:this.parentInjector).get(nl,null);Je&&(m=Je)}en(C.componentType??{});const ee=C.create(M,f,null,m);return this.insertImpl(ee.hostView,w,false),ee}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,d){const f=a._lView;if(function xc(s){return vi(s[wn])}(f)){const C=this.indexOf(a);if(-1!==C)this.detach(C);else{const M=f[wn],x=new up(M,M[Gi],M[wn]);x.detach(x.indexOf(a))}}const v=this._adjustIndex(c),w=this._lContainer;return nx(w,f,v,!d),a.attachToViewContainerRef(),ff(Xm(w),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Jm(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=gy(this._lContainer,c);d&&(pf(Xm(this._lContainer),c),Gb(d[Ke],d))}detach(a){const c=this._adjustIndex(a,-1),d=gy(this._lContainer,c);return d&&null!=pf(Xm(this._lContainer),c)?new na(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function Jm(s){return s[8]}function Xm(s){return s[8]||(s[8]=[])}function n0(s,a){let c;const d=a[s.index];return vi(d)?c=d:(c=NT(d,a,null,s),a[s.index]=c,Jy(a,c)),aI(c,a,s,d),new up(c,s,a)}let aI=function a1(s,a,c,d){if(s[$i])return;let f;f=8&c.type?Tn(d):function oI(s,a){const c=s[Ot],d=c.createComment(""),f=ur(a,s);return xd(c,my(c,f),d,function pN(s,a){return s.nextSibling(a)}(c,f),!1),d}(a,c),s[$i]=f};class cI{constructor(a){this.queryList=a,this.matches=null}clone(){return new cI(this.queryList)}setDirty(){this.queryList.setDirty()}}class lI{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new lI(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==fp(a,c).matches&&this.queries[c].setDirty()}}class uI{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class dp{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(a,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new dp(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class bh{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new bh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(a,c,dI(c,m)),this.matchTNodeWithReadOption(a,c,So(c,a,m,!1,!1))}else d===Ym?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,So(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Mf||f===Qm||f===Ym&&4&c.type)this.addMatch(c.index,-2);else{const m=So(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function dI(s,a){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function cx(s,a,c,d){return-1===c?function l1(s,a){return 11&s.type?Gd(s,a):4&s.type?gl(s,a):null}(a,s):-2===c?function lx(s,a,c){return c===Mf?Gd(a,s):c===Ym?gl(a,s):c===Qm?n0(a,s):void 0}(s,a,d):Uc(s,s[Ke],c,a)}function u1(s,a,c,d){const f=a[br].queries[d];if(null===f.matches){const m=s.data,v=c.matches,w=[];for(let C=0;C<v.length;C+=2){const M=v[C];w.push(M<0?null:cx(a,m[M],v[C+1],c.metadata.read))}f.matches=w}return f.matches}function hI(s,a,c,d){const f=s.queries.getByIndex(c),m=f.matches;if(null!==m){const v=u1(s,a,f,c);for(let w=0;w<m.length;w+=2){const C=m[w];if(C>0)d.push(v[w/2]);else{const M=m[w+1],x=a[-C];for(let U=ai;U<x.length;U++){const q=x[U];q[Ma]===q[wn]&&hI(q[Ke],q,M,d)}if(null!==x[Un]){const U=x[Un];for(let q=0;q<U.length;q++){const ee=U[q];hI(ee[Ke],ee,M,d)}}}}}return d}function r0(s){const a=Me(),c=Yt(),d=gd();nf(d+1);const f=fp(c,d);if(s.dirty&&function Gl(s){return 4==(4&s[Nt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?hI(c,a,d,[]):u1(c,a,f,d);s.reset(m,Oy),s.notifyOnChanges()}return!0}return!1}function d1(s,a,c){const d=Yt();d.firstCreatePass&&(s0(d,new uI(s,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),wh(d,Me(),a)}function h1(s,a,c,d){const f=Yt();if(f.firstCreatePass){const m=fi();s0(f,new uI(a,c,d),m.index),function o0(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}wh(f,Me(),c)}function hp(){return function fI(s,a){return s[br].queries[a].queryList}(Me(),gd())}function wh(s,a,c){const d=new Qv(4==(4&c));(function fu(s,a,c,d){const f=Vw(a);f.push(c),s.firstCreatePass&&pm(s).push(d,f.length-1)})(s,a,d,d.destroy),null===a[br]&&(a[br]=new lI),a[br].queries.push(new cI(d))}function s0(s,a,c){null===s.queries&&(s.queries=new dp),s.queries.track(new bh(a,c))}function fp(s,a){return s.queries.getByIndex(a)}function a0(s,a){return gl(s,a)}function gI(s){return!!er(s)}const b0=new Rn("Application Initializer");let II=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=qt(b0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const f of this.appInits){const m=f();if(sc(m))c.push(m);else if(sE(m)){const v=new Promise((w,C)=>{m.subscribe({complete:w,error:C})});c.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),w0=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const _p=new Rn("LocaleId",{providedIn:"root",factory:()=>qt(_p,wt.Optional|wt.SkipSelf)||function T1(){return typeof $localize<"u"&&$localize.locale||ph}()}),S1=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let E0=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class bx{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let CI=(()=>{class s{compileModuleSync(c){return new zv(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Qa(er(c).declarations).reduce((v,w)=>{const C=en(w);return C&&v.push(new Sr(C)),v},[]);return new bx(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const D0=new Rn(""),T0=new Rn("");let S0,PI=(()=>{class s{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,S0||(function F1(s){S0=s}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(rn(gr),rn(P1),rn(T0))};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac})}return s})(),P1=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return S0?.findTestabilityInTree(this,c,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),Lu=null;const A0=new Rn("AllowMultipleToken"),i_=new Rn("PlatformDestroyListeners"),M0=new Rn("appBootstrapListener");class B1{constructor(a,c){this.name=a,this.token=c}}function Qn(s,a,c=[]){const d=`Platform: ${a}`,f=new Rn(d);return(m=[])=>{let v=FI();if(!v||v.injector.get(A0,!1)){const w=[...c,...m,{provide:f,useValue:!0}];s?s(w):function U1(s){if(Lu&&!Lu.get(A0,!1))throw new ne(400,!1);(function r_(){!function $h(s){Q_=s}(()=>{throw new ne(600,!1)})})(),Lu=s;const a=s.get(s_);(function yp(s){s.get(Jg,null)?.forEach(c=>c())})(s)}(function la(s=[],a){return ta.create({name:a,providers:[{provide:Ld,useValue:"platform"},{provide:i_,useValue:new Set([()=>Lu=null])},...s]})}(w,d))}return function Mr(s){const a=FI();if(!a)throw new ne(401,!1);return a}()}}function FI(){return Lu?.get(s_)??null}let s_=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function BI(s="zone.js",a){return"noop"===s?new Rf:"zone.js"===s?new gr(a):s}(d?.ngZone,function LI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return f.run(()=>{const m=function qv(s,a,c){return new Yr(s,a,c)}(c.moduleType,this.injector,function jI(s){return[{provide:gr,useFactory:s},{provide:Cf,multi:!0,useFactory:()=>{const a=qt(xx,{optional:!0});return()=>a.initialize()}},{provide:H1,useFactory:Rx},{provide:gT,useFactory:mT}]}(()=>f)),v=m.injector.get(ol,null);return f.runOutsideAngular(()=>{const w=f.onError.subscribe({next:C=>{v.handleError(C)}});m.onDestroy(()=>{VI(this._modules,m),w.unsubscribe()})}),function UI(s,a,c){try{const d=c();return sc(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(v,f,()=>{const w=m.injector.get(II);return w.runInitializers(),w.donePromise.then(()=>(Xf(m.injector.get(_p,ph)||ph),this._moduleDoBootstrap(m),m))})})}bootstrapModule(c,d=[]){const f=o_({},d);return function L1(s,a,c){const d=new zv(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(vp);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new ne(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(i_,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(rn(ta))};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function o_(s,a){return Array.isArray(a)?a.reduce(o_,s):{...s,...a}}let vp=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qt(H1),this.zoneIsStable=qt(gT),this.componentTypes=[],this.components=[],this.isStable=qt(E0).hasPendingTasks.pipe((0,De.w)(c=>c?(0,ue.of)(!1):this.zoneIsStable),(0,he.x)(),(0,ve.B)()),this._injector=qt(nl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof rT;if(!this._injector.get(II).done)throw!f&&Sa(c),new ne(405,!1);let v;v=f?c:this._injector.get(Af).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const w=function pn(s){return s.isBoundToModule}(v)?void 0:this._injector.get(uc),M=v.create(ta.NULL,[],d||v.selector,w),x=M.location.nativeElement,U=M.injector.get(D0,null);return U?.registerApplication(x),M.onDestroy(()=>{this.detachView(M.hostView),VI(this.components,M),U?.unregisterApplication(x)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;VI(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(M0,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>VI(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ne(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function VI(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const H1=new Rn("",{providedIn:"root",factory:()=>qt(ol).handleError.bind(void 0)});function Rx(){const s=qt(gr),a=qt(ol);return c=>s.runOutsideAngular(()=>a.handleError(c))}let xx=(()=>{class s{constructor(){this.zone=qt(gr),this.applicationRef=qt(vp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=Ct({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function G1(){return!1}let GI=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=q1}return s})();function q1(s){return function N0(s,a,c){if(ns(s)&&!c){const d=wi(s.index,a);return new na(d,d)}return 47&s.type?new na(a[ei],a):null}(fi(),Me(),16==(16&s))}class Ai{constructor(){}supports(a){return fe(a)}create(a){return new Lx(a)}}const eA=(s,a)=>a;class Lx{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||eA}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const v=!d||c&&c.currentIndex<iA(d,f,m)?c:d,w=iA(v,f,m),C=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const M=w-f,x=C-f;if(M!=x){for(let q=0;q<M;q++){const ee=q<m.length?m[q]:m[q]=0,be=ee+q;x<=be&&be<M&&(m[q]=ee+1)}m[v.previousIndex]=x-M}}w!==C&&a(v,w,C)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!fe(a))throw new ne(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)m=a[w],v=this._trackByFn(w,m),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,m,v,w)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,w),d=!0),c=c._next}else f=0,function or(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,w=>{v=this._trackByFn(f,w),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,w,v,f)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new Bx(c,d),m,f),a}_verifyReinsertion(a,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new nA),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nA),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Bx{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tA{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class nA{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new tA,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iA(s,a,c){const d=s.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class rA{constructor(){}supports(a){return a instanceof Map||cv(a)}create(){return new Ux}}class Ux{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||cv(a)))throw new ne(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const d=new UF(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class UF{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sA(){return new qI([new Ai])}let qI=(()=>{class s{static#e=this.\u0275prov=Ct({token:s,providedIn:"root",factory:sA});constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||sA()),deps:[[s,new zc,new iu]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new ne(901,!1)}}return s})();function ua(){return new da([new rA])}let da=(()=>{class s{static#e=this.\u0275prov=Ct({token:s,providedIn:"root",factory:ua});constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||ua()),deps:[[s,new zc,new iu]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new ne(901,!1)}}return s})();const jx=Qn(null,"core",[]);let oA=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(d){return new(d||s)(rn(vp))};static#t=this.\u0275mod=Br({type:s});static#n=this.\u0275inj=Jn({})}return s})();function U0(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Zx(s,a){const c=en(s),d=a.elementInjector||Ii();return new Sr(c).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}function H0(s){const a=en(s);if(!a)return null;const c=new Sr(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3106:(ft,Ie,F)=>{F.d(Ie,{Z:()=>Qe});var u=F(9058),te=F(4537),B=F(4303),re=F(7879);class se{constructor(Ye,Pe){this._delegate=Ye,this.firebase=Pe,(0,B._addComponent)(Ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Ye,Pe=B._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ye);return!ct.isInitialized()&&"EXPLICIT"===(null===(st=ct.getComponent())||void 0===st?void 0:st.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Pe})}_removeServiceInstance(Ye,Pe=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(Pe)}_addComponent(Ye){(0,B._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,B._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function he(){const ke=function De(ke){const Ye={},Pe={__esModule:!0,initializeApp:function ne(Ve,G={}){const Te=B.initializeApp(Ve,G);if((0,u.r3)(Ye,Te.name))return Ye[Te.name];const ze=new ke(Te,Pe);return Ye[Te.name]=ze,ze},app:ct,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function ce(Ve){const G=Ve.name,Te=G.replace("-compat","");if(B._registerComponent(Ve)&&"PUBLIC"===Ve.type){const ze=(Pt=ct())=>{if("function"!=typeof Pt[Te])throw ve.create("invalid-app-argument",{appName:G});return Pt[Te]()};void 0!==Ve.serviceProps&&(0,u.ZB)(ze,Ve.serviceProps),Pe[Te]=ze,ke.prototype[Te]=function(...Pt){return this._getService.bind(this,G).apply(this,Ve.multipleInstances?Pt:[])}}return"PUBLIC"===Ve.type?Pe[Te]:null},removeApp:function st(Ve){delete Ye[Ve]},useAsService:function Ee(Ve,G){return"serverAuth"===G?null:G},modularAPIs:B}};function ct(Ve){if(!(0,u.r3)(Ye,Ve=Ve||B._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Ve});return Ye[Ve]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function we(){return Object.keys(Ye).map(Ve=>Ye[Ve])}}),ct.App=ke,Pe}(se);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function Ye(Pe){(0,u.ZB)(ke,Pe)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),ke}(),W=new re.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=j;!function Ne(ke){(0,B.registerVersion)("@firebase/app-compat","0.2.1",ke)}()},4303:(ft,Ie,F)=>{F.r(Ie),F.d(Ie,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Jn,_DEFAULT_ENTRY_NAME:()=>le,_addComponent:()=>Le,_addOrOverwriteComponent:()=>We,_apps:()=>_e,_clearComponents:()=>It,_components:()=>me,_getProvider:()=>Be,_registerComponent:()=>lt,_removeServiceInstance:()=>Xt,deleteApp:()=>yr,getApp:()=>mn,getApps:()=>Wn,initializeApp:()=>yi,onLog:()=>ms,registerVersion:()=>cr,setLogLevel:()=>xr});var u=F(5861),te=F(4537),B=F(7879),re=F(9058),se=F(1878);class ue{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function ve(ot){const Re=ot.getComponent();return"VERSION"===Re?.type}(it)){const Dt=it.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(it=>it).join(" ")}}const De="@firebase/app",j=new B.Yd("@firebase/app"),le="[DEFAULT]",ge={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_e=new Map,me=new Map;function Le(ot,Re){try{ot.container.addComponent(Re)}catch(it){j.debug(`Component ${Re.name} failed to register with FirebaseApp ${ot.name}`,it)}}function We(ot,Re){ot.container.addOrOverwriteComponent(Re)}function lt(ot){const Re=ot.name;if(me.has(Re))return j.debug(`There were multiple attempts to register component ${Re}.`),!1;me.set(Re,ot);for(const it of _e.values())Le(it,ot);return!0}function Be(ot,Re){const it=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),ot.container.getProvider(Re)}function Xt(ot,Re,it=le){Be(ot,Re).clearInstance(it)}function It(){me.clear()}const Ct=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(Re,it,Dt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}const Jn="9.16.0";function yi(ot,Re={}){let it=ot;"object"!=typeof Re&&(Re={name:Re});const Dt=Object.assign({name:le,automaticDataCollectionEnabled:!1},Re),Ft=Dt.name;if("string"!=typeof Ft||!Ft)throw Ct.create("bad-app-name",{appName:String(Ft)});if(it||(it=(0,re.aH)()),!it)throw Ct.create("no-options");const Wt=_e.get(Ft);if(Wt){if((0,re.vZ)(it,Wt.options)&&(0,re.vZ)(Dt,Wt.config))return Wt;throw Ct.create("duplicate-app",{appName:Ft})}const z=new te.H0(Ft);for(const Q of me.values())z.addComponent(Q);const $=new nn(it,Dt,z);return _e.set(Ft,$),$}function mn(ot=le){const Re=_e.get(ot);if(!Re&&ot===le)return yi();if(!Re)throw Ct.create("no-app",{appName:ot});return Re}function Wn(){return Array.from(_e.values())}function yr(ot){return ji.apply(this,arguments)}function ji(){return(ji=(0,u.Z)(function*(ot){const Re=ot.name;_e.has(Re)&&(_e.delete(Re),yield Promise.all(ot.container.getProviders().map(it=>it.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function cr(ot,Re,it){var Dt;let Ft=null!==(Dt=ge[ot])&&void 0!==Dt?Dt:ot;it&&(Ft+=`-${it}`);const Wt=Ft.match(/\s|\//),z=Re.match(/\s|\//);if(Wt||z){const $=[`Unable to register library "${Ft}" with version "${Re}":`];return Wt&&$.push(`library name "${Ft}" contains illegal characters (whitespace or "/")`),Wt&&z&&$.push("and"),z&&$.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void j.warn($.join(" "))}lt(new te.wA(`${Ft}-version`,()=>({library:Ft,version:Re}),"VERSION"))}function ms(ot,Re){if(null!==ot&&"function"!=typeof ot)throw Ct.create("invalid-log-argument");(0,B.Am)(ot,Re)}function xr(ot){(0,B.Ub)(ot)}const es="firebase-heartbeat-database",wt=1,Bt="firebase-heartbeat-store";let Ht=null;function zn(){return Ht||(Ht=(0,se.X3)(es,wt,{upgrade:(ot,Re)=>{0===Re&&ot.createObjectStore(Bt)}}).catch(ot=>{throw Ct.create("idb-open",{originalErrorMessage:ot.message})})),Ht}function Ri(){return(Ri=(0,u.Z)(function*(ot){try{return(yield zn()).transaction(Bt).objectStore(Bt).get(Or(ot))}catch(Re){if(Re instanceof re.ZR)j.warn(Re.message);else{const it=Ct.create("idb-get",{originalErrorMessage:Re?.message});j.warn(it.message)}}})).apply(this,arguments)}function dn(ot,Re){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,u.Z)(function*(ot,Re){try{const Dt=(yield zn()).transaction(Bt,"readwrite");return yield Dt.objectStore(Bt).put(Re,Or(ot)),Dt.done}catch(it){if(it instanceof re.ZR)j.warn(it.message);else{const Dt=Ct.create("idb-set",{originalErrorMessage:it?.message});j.warn(Dt.message)}}})).apply(this,arguments)}function Or(ot){return`${ot.name}!${ot.options.appId}`}class hn{constructor(Re){this.container=Re,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new va(it),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Re=this;return(0,u.Z)(function*(){const Dt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=kr();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==Ft&&!Re._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Ft))return Re._heartbeatsCache.heartbeats.push({date:Ft,agent:Dt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(Wt=>{const z=new Date(Wt.date).valueOf();return Date.now()-z<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,u.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const it=kr(),{heartbeatsToSend:Dt,unsentEntries:Ft}=function Pr(ot,Re=1024){const it=[];let Dt=ot.slice();for(const Ft of ot){const Wt=it.find(z=>z.agent===Ft.agent);if(Wt){if(Wt.dates.push(Ft.date),Fr(it)>Re){Wt.dates.pop();break}}else if(it.push({agent:Ft.agent,dates:[Ft.date]}),Fr(it)>Re){it.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Dt}}(Re._heartbeatsCache.heartbeats),Wt=(0,re.L)(JSON.stringify({version:2,heartbeats:Dt}));return Re._heartbeatsCache.lastSentHeartbeatDate=it,Ft.length>0?(Re._heartbeatsCache.heartbeats=Ft,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),Wt})()}}function kr(){return(new Date).toISOString().substring(0,10)}class va{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,u.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function _s(ot){return Ri.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var it=this;return(0,u.Z)(function*(){var Dt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return dn(it.app,{lastSentHeartbeatDate:null!==(Dt=Re.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Wt.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var it=this;return(0,u.Z)(function*(){var Dt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return dn(it.app,{lastSentHeartbeatDate:null!==(Dt=Re.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...Re.heartbeats]})}})()}}function Fr(ot){return(0,re.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function ba(ot){lt(new te.wA("platform-logger",Re=>new ue(Re),"PRIVATE")),lt(new te.wA("heartbeat",Re=>new hn(Re),"PRIVATE")),cr(De,"0.9.1",ot),cr(De,"0.9.1","esm2017"),cr("fire-js","")}("")},4537:(ft,Ie,F)=>{F.d(Ie,{H0:()=>De,wA:()=>B,zt:()=>se});var u=F(5861),te=F(9058);class B{constructor(j,W,ie){this.name=j,this.instanceFactory=W,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const re="[DEFAULT]";class se{constructor(j,W){this.name=j,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const W=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(W)){const ie=new te.BH;if(this.instancesDeferred.set(W,ie),this.isInitialized(W)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:W});He&&ie.resolve(He)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(j){var W;const ie=this.normalizeInstanceIdentifier(j?.identifier),He=null!==(W=j?.optional)&&void 0!==W&&W;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ve(he){return"EAGER"===he.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[W,ie]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(W);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});ie.resolve(Ne)}catch{}}}}clearInstance(j=re){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,u.Z)(function*(){const W=Array.from(j.instances.values());yield Promise.all([...W.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...W.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=re){return this.instances.has(j)}getOptions(j=re){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:W={}}=j,ie=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ie,options:W});for(const[Ne,Qe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ne)&&Qe.resolve(He);return He}onInit(j,W){var ie;const He=this.normalizeInstanceIdentifier(W),Ne=null!==(ie=this.onInitCallbacks.get(He))&&void 0!==ie?ie:new Set;Ne.add(j),this.onInitCallbacks.set(He,Ne);const Qe=this.instances.get(He);return Qe&&j(Qe,He),()=>{Ne.delete(j)}}invokeOnInitCallbacks(j,W){const ie=this.onInitCallbacks.get(W);if(ie)for(const He of ie)try{He(j,W)}catch{}}getOrInitializeService({instanceIdentifier:j,options:W={}}){let ie=this.instances.get(j);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(he=j,he===re?void 0:he),options:W}),this.instances.set(j,ie),this.instancesOptions.set(j,W),this.invokeOnInitCallbacks(ie,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ie)}catch{}var he;return ie||null}normalizeInstanceIdentifier(j=re){return this.component?this.component.multipleInstances?j:re:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const W=this.getProvider(j.name);if(W.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);W.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const W=new se(j,this);return this.providers.set(j,W),W}getProviders(){return Array.from(this.providers.values())}}},7879:(ft,Ie,F)=>{F.d(Ie,{Am:()=>he,Ub:()=>De,Yd:()=>ve,in:()=>te});const u=[];var te=function(j){return j[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",j}(te||{});const B={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},re=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ue=(j,W,...ie)=>{if(W<j.logLevel)return;const He=(new Date).toISOString(),Ne=se[W];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Ne](`[${He}]  ${j.name}:`,...ie)};class ve{constructor(W){this.name=W,this._logLevel=re,this._logHandler=ue,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in te))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?B[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...W),this._logHandler(this,te.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...W),this._logHandler(this,te.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,te.INFO,...W),this._logHandler(this,te.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,te.WARN,...W),this._logHandler(this,te.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...W),this._logHandler(this,te.ERROR,...W)}}function De(j){u.forEach(W=>{W.setLogLevel(j)})}function he(j,W){for(const ie of u){let He=null;W&&W.level&&(He=B[W.level]),ie.userLogHandler=null===j?null:(Ne,Qe,...ke)=>{const Ye=ke.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");Qe>=(He??Ne.logLevel)&&j({level:te[Qe].toLowerCase(),message:Ye,args:ke,type:Ne.name})}}}},3182:(ft,Ie,F)=>{F.d(Ie,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(4303);(0,u.registerVersion)("firebase","9.16.0","app")},7142:(ft,Ie,F)=>{F.d(Ie,{Z:()=>u.Z});var u=F(3106);u.Z.registerVersion("firebase","9.16.0","app-compat")},8443:(ft,Ie,F)=>{F.r(Ie);var u=F(5861),te=F(3106),B=F(9058),re=F(4303),se=F(7879),ue=F(7582),ve=F(4537);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Qe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ye=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new se.Yd("@firebase/auth");function ct(b,...g){st.logLevel<=se.in.ERROR&&st.error(`Auth (${re.SDK_VERSION}): ${b}`,...g)}function ne(b,...g){throw Ve(b,...g)}function we(b,...g){return Ve(b,...g)}function ce(b,g,_){const E=Object.assign(Object.assign({},ke()),{[g]:_});return new B.LL("auth","Firebase",E).create(g,{appName:b.name})}function Ee(b,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&ne(b,"argument-error"),ce(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(b,...g){if("string"!=typeof b){const _=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return Ye.create(b,...g)}function G(b,g,..._){if(!b)throw Ve(g,..._)}function Te(b){const g="INTERNAL ASSERTION FAILED: "+b;throw ct(g),new Error(g)}function ze(b,g){b||Te(g)}const Pt=new Map;function Qt(b){ze(b instanceof Function,"Expected a class definition");let g=Pt.get(b);return g?(ze(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,Pt.set(b,g),g)}function Sn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function _i(){return"http:"===go()||"https:"===go()}function go(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class _e{constructor(g,_){this.shortDelay=g,this.longDelay=_,ze(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function le(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_i()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function me(b,g){ze(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Le{static initialize(g,_,E){this.fetchImpl=g,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const We={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},lt=new _e(3e4,6e4);function Be(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Xt(b,g,_,E){return It.apply(this,arguments)}function It(){return(It=(0,u.Z)(function*(b,g,_,E,R={}){return un(b,R,(0,u.Z)(function*(){let k={},Y={};E&&("GET"===g?Y=E:k={body:JSON.stringify(E)});const ye=(0,B.xO)(Object.assign({key:b.config.apiKey},Y)).slice(1),qe=yield b._getAdditionalHeaders();return qe["Content-Type"]="application/json",b.languageCode&&(qe["X-Firebase-Locale"]=b.languageCode),Le.fetch()(yi(b,b.config.apiHost,_,ye),Object.assign({method:g,headers:qe,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function un(b,g,_){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(function*(b,g,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},We),g);try{const R=new mn(b),k=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const Y=yield k.json();if("needConfirmation"in Y)throw Wn(b,"account-exists-with-different-credential",Y);if(k.ok&&!("errorMessage"in Y))return Y;{const ye=k.ok?Y.errorMessage:Y.error.message,[qe,rt]=ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw Wn(b,"credential-already-in-use",Y);if("EMAIL_EXISTS"===qe)throw Wn(b,"email-already-in-use",Y);if("USER_DISABLED"===qe)throw Wn(b,"user-disabled",Y);const St=E[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw ce(b,St,rt);ne(b,St)}}catch(R){if(R instanceof B.ZR)throw R;ne(b,"network-request-failed")}})).apply(this,arguments)}function nn(b,g,_,E){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(b,g,_,E,R={}){const k=yield Xt(b,g,_,E,R);return"mfaPendingCredential"in k&&ne(b,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function yi(b,g,_,E){const R=`${g}${_}?${E}`;return b.config.emulator?me(b.config,R):`${b.config.apiScheme}://${R}`}class mn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),lt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(b,g,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const R=we(b,g,E);return R.customData._tokenResponse=_,R}function ji(){return(ji=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ms(){return(ms=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function es(){return(es=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function wt(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function zn(){return(zn=(0,u.Z)(function*(b,g=!1){const _=(0,B.m9)(b),E=yield _.getIdToken(g),R=Ri(E);G(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const k="object"==typeof R.firebase?R.firebase:void 0,Y=k?.sign_in_provider;return{claims:R,token:E,authTime:wt(_s(R.auth_time)),issuedAtTime:wt(_s(R.iat)),expirationTime:wt(_s(R.exp)),signInProvider:Y||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function _s(b){return 1e3*Number(b)}function Ri(b){const[g,_,E]=b.split(".");if(void 0===g||void 0===_||void 0===E)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,B.tV)(_);return R?JSON.parse(R):(ct("Failed to decode base64 JWT payload"),null)}catch(R){return ct("Caught error parsing JWT payload as JSON",R?.toString()),null}}function Bn(b,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(b,g,_=!1){if(_)return g;try{return yield g}catch(E){throw E instanceof B.ZR&&function An({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}class mo{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),E)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class hn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=wt(this.lastLoginAt),this.creationTime=wt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kr(b){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,u.Z)(function*(b){var g;const _=b.auth,E=yield b.getIdToken(),R=yield Bn(b,function xr(b,g){return es.apply(this,arguments)}(_,{idToken:E}));G(R?.users.length,_,"internal-error");const k=R.users[0];b._notifyReloadListener(k);const Y=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?function ot(b){return b.map(g=>{var{providerId:_}=g,E=(0,ue._T)(g,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(k.providerUserInfo):[],ye=function ba(b,g){return[...b.filter(E=>!g.some(R=>R.providerId===E.providerId)),...g]}(b.providerData,Y),St=!!b.isAnonymous&&!(b.email&&k.passwordHash||ye?.length),vt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ye,metadata:new hn(k.createdAt,k.lastLoginAt),isAnonymous:St};Object.assign(b,vt)}),Pr.apply(this,arguments)}function Fr(){return(Fr=(0,u.Z)(function*(b){const g=(0,B.m9)(b);yield kr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(b,g){const _=yield un(b,{},(0,u.Z)(function*(){const E=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:k}=b.config,Y=yi(b,R,"/v1/token",`key=${k}`),ye=yield b._getAdditionalHeaders();return ye["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(Y,{method:"POST",headers:ye,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function dn(b){const g=Ri(b);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var E=this;return(0,u.Z)(function*(){return G(!E.accessToken||E.refreshToken,g,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var E=this;return(0,u.Z)(function*(){const{accessToken:R,refreshToken:k,expiresIn:Y}=yield function Re(b,g){return it.apply(this,arguments)}(g,_);E.updateTokensAndExpiration(R,k,Number(Y))})()}updateTokensAndExpiration(g,_,E){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,_){const{refreshToken:E,accessToken:R,expirationTime:k}=_,Y=new Dt;return E&&(G("string"==typeof E,"internal-error",{appName:g}),Y.refreshToken=E),R&&(G("string"==typeof R,"internal-error",{appName:g}),Y.accessToken=R),k&&(G("number"==typeof k,"internal-error",{appName:g}),Y.expirationTime=k),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Dt,this.toJSON())}_performRefresh(){return Te("not implemented")}}function Ft(b,g){G("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class Wt{constructor(g){var{uid:_,auth:E,stsTokenManager:R}=g,k=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new hn(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,u.Z)(function*(){const E=yield Bn(_,_.stsTokenManager.getToken(_.auth,g));return G(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(g){return function Ht(b){return zn.apply(this,arguments)}(this,g)}reload(){return function va(b){return Fr.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Wt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var E=this;return(0,u.Z)(function*(){let R=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield kr(E)),yield E.auth._persistUserIfCurrent(E),R&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,u.Z)(function*(){const _=yield g.getIdToken();return yield Bn(g,function yr(b,g){return ji.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var E,R,k,Y,ye,qe,rt,St;const vt=null!==(E=_.displayName)&&void 0!==E?E:void 0,Li=null!==(R=_.email)&&void 0!==R?R:void 0,Yn=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,qa=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,yf=null!==(ye=_.tenantId)&&void 0!==ye?ye:void 0,uu=null!==(qe=_._redirectEventId)&&void 0!==qe?qe:void 0,sr=null!==(rt=_.createdAt)&&void 0!==rt?rt:void 0,Jc=null!==(St=_.lastLoginAt)&&void 0!==St?St:void 0,{uid:Ad,emailVerified:xg,isAnonymous:Bb,providerData:Og,stsTokenManager:Ub}=_;G(Ad&&Ub,g,"internal-error");const Vb=Dt.fromJSON(this.name,Ub);G("string"==typeof Ad,g,"internal-error"),Ft(vt,g.name),Ft(Li,g.name),G("boolean"==typeof xg,g,"internal-error"),G("boolean"==typeof Bb,g,"internal-error"),Ft(Yn,g.name),Ft(qa,g.name),Ft(yf,g.name),Ft(uu,g.name),Ft(sr,g.name),Ft(Jc,g.name);const kg=new Wt({uid:Ad,auth:g,email:Li,emailVerified:xg,displayName:vt,isAnonymous:Bb,photoURL:qa,phoneNumber:Yn,tenantId:yf,stsTokenManager:Vb,createdAt:sr,lastLoginAt:Jc});return Og&&Array.isArray(Og)&&(kg.providerData=Og.map(jb=>Object.assign({},jb))),uu&&(kg._redirectEventId=uu),kg}static _fromIdTokenResponse(g,_,E=!1){return(0,u.Z)(function*(){const R=new Dt;R.updateFromServerResponse(_);const k=new Wt({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:E});return yield kr(k),k})()}}const $=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,E){var R=this;return(0,u.Z)(function*(){R.storage[_]=E})()}_get(_){var E=this;return(0,u.Z)(function*(){const R=E.storage[_];return void 0===R?null:R})()}_remove(_){var E=this;return(0,u.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function Q(b,g,_){return`firebase:${b}:${g}:${_}`}class Ce{constructor(g,_,E){this.persistence=g,this.auth=_,this.userKey=E;const{config:R,name:k}=this.auth;this.fullUserKey=Q(this.userKey,R.apiKey,k),this.fullPersistenceKey=Q("persistence",R.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Wt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,u.Z)(function*(){if(_.persistence===g)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,E="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Ce(Qt($),g,E);const R=(yield Promise.all(_.map(function(){var rt=(0,u.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let k=R[0]||Qt($);const Y=Q(E,g.config.apiKey,g.name);let ye=null;for(const rt of _)try{const St=yield rt._get(Y);if(St){const vt=Wt._fromJSON(g,St);rt!==k&&(ye=vt),k=rt;break}}catch{}const qe=R.filter(rt=>rt._shouldAllowMigration);return k._shouldAllowMigration&&qe.length?(k=qe[0],ye&&(yield k._set(Y,ye.toJSON())),yield Promise.all(_.map(function(){var rt=(0,u.Z)(function*(St){if(St!==k)try{yield St._remove(Y)}catch{}});return function(St){return rt.apply(this,arguments)}}())),new Ce(k,g,E)):new Ce(k,g,E)})()}}function ae(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(rn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ut(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(qt(g))return"Blackberry";if(zt(g))return"Webos";if(Tt(g))return"Safari";if((g.includes("chrome/")||bn(g))&&!g.includes("edge/"))return"Chrome";if(qn(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ut(b=(0,B.z$)()){return/firefox\//i.test(b)}function Tt(b=(0,B.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function bn(b=(0,B.z$)()){return/crios\//i.test(b)}function rn(b=(0,B.z$)()){return/iemobile/i.test(b)}function qn(b=(0,B.z$)()){return/android/i.test(b)}function qt(b=(0,B.z$)()){return/blackberry/i.test(b)}function zt(b=(0,B.z$)()){return/webos/i.test(b)}function di(b=(0,B.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Hp(b=(0,B.z$)()){return di(b)||qn(b)||zt(b)||qt(b)||/windows phone/i.test(b)||rn(b)}function Ls(b,g=[]){let _;switch(b){case"Browser":_=ae((0,B.z$)());break;case"Worker":_=`${ae((0,B.z$)())}-${b}`;break;default:_=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${re.SDK_VERSION}/${E}`}class Bs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const E=k=>new Promise((Y,ye)=>{try{Y(g(k))}catch(qe){ye(qe)}});E.onAbort=_,this.queue.push(E);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===g)return;const E=[];try{for(const R of _.queue)yield R(g),R.onAbort&&E.push(R.onAbort)}catch(R){E.reverse();for(const k of E)try{k()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class ys{constructor(g,_,E){this.app=g,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vo(this),this.idTokenSubscription=new Vo(this),this.beforeStateQueue=new Bs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,_){var E=this;return _&&(this._popupRedirectResolver=Qt(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var R,k;if(!E._deleted&&(E.persistenceManager=yield Ce.create(E,g),!E._deleted)){if(null!==(R=E._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,u.Z)(function*(){var E;const R=yield _.assertedPersistence.getCurrentUser();let k=R,Y=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ye=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,qe=k?._redirectEventId,rt=yield _.tryRedirectSignIn(g);(!ye||ye===qe)&&rt?.user&&(k=rt.user,Y=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(k)}catch(ye){k=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ye))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var _=this;return(0,u.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,u.Z)(function*(){try{yield kr(g)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ge(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,u.Z)(function*(){const E=g?(0,B.m9)(g):null;return E&&G(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(g,_=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return g&&G(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(Qt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,E){return this.registerStateListener(this.authStateSubscription,g,_,E)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,E){return this.registerStateListener(this.idTokenSubscription,g,_,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var E=this;return(0,u.Z)(function*(){const R=yield E.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const E=g&&Qt(g)||_._popupRedirectResolver;G(E,_,"argument-error"),_.redirectPersistenceManager=yield Ce.create(_,[Qt(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,u.Z)(function*(){var E,R;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,u.Z)(function*(){if(g===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,E,R){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Y,this,"internal-error"),Y.then(()=>k(this.currentUser)),"function"==typeof _?g.addObserver(_,E,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ls(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var _;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return R&&(E["X-Firebase-Client"]=R),E})()}}function Mt(b){return(0,B.m9)(b)}class Vo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jo(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Us(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Vs{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Te("not implemented")}_getIdTokenResponse(g){return Te("not implemented")}_linkToIdToken(g,_){return Te("not implemented")}_getReauthenticationResolver(g){return Te("not implemented")}}function xi(b,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:resetPassword",Be(b,g))})).apply(this,arguments)}function Ku(b,g){return _c.apply(this,arguments)}function _c(){return(_c=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:update",Be(b,g))})).apply(this,arguments)}function Gp(){return(Gp=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithPassword",Be(b,g))})).apply(this,arguments)}function Hi(b,g){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:sendOobCode",Be(b,g))})).apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(function*(b,g){return Hi(b,g)})).apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(b,g){return Hi(b,g)})).apply(this,arguments)}function $p(){return($p=(0,u.Z)(function*(b,g){return Hi(b,g)})).apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(b,g){return Hi(b,g)})).apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithEmailLink",Be(b,g))})).apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithEmailLink",Be(b,g))})).apply(this,arguments)}class Ta extends Vs{constructor(g,_,E,R=null){super("password",E),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Ta(g,_,"password")}static _fromEmailAndCode(g,_,E=null){return new Ta(g,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function yc(b,g){return Gp.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function zp(b,g){return _o.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:ne(g,"internal-error")}})()}_linkToIdToken(g,_){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return Ku(g,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Y_(b,g){return vr.apply(this,arguments)}(g,{idToken:_,email:E._email,oobCode:E._password});default:ne(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function js(b,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithIdp",Be(b,g))})).apply(this,arguments)}class Br extends Vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Br(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):ne("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R}=_,k=(0,ue._T)(_,["providerId","signInMethod"]);if(!E||!R)return null;const Y=new Br(E,R);return Y.idToken=k.idToken||void 0,Y.accessToken=k.accessToken||void 0,Y.secret=k.secret,Y.nonce=k.nonce,Y.pendingToken=k.pendingToken||null,Y}_getIdTokenResponse(g){return js(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,js(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,js(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function Ml(){return(Ml=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:sendVerificationCode",Be(b,g))})).apply(this,arguments)}function vs(){return(vs=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Be(b,g))})).apply(this,arguments)}function hi(){return(hi=(0,u.Z)(function*(b,g){const _=yield nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Be(b,g));if(_.temporaryProof)throw Wn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Xi={USER_NOT_FOUND:"user-not-found"};function er(){return(er=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithPhoneNumber",Be(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Xi)})).apply(this,arguments)}class yo extends Vs{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new yo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new yo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function wc(b,g){return vs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function en(b,g){return hi.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Sa(b,g){return er.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:E,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:E,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:k}=g;return E||_||R||k?new yo({verificationId:_,verificationCode:E,phoneNumber:R,temporaryProof:k}):null}}class Ec{constructor(g){var _,E,R,k,Y,ye;const qe=(0,B.zd)((0,B.pd)(g)),rt=null!==(_=qe.apiKey)&&void 0!==_?_:null,St=null!==(E=qe.oobCode)&&void 0!==E?E:null,vt=function Yp(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=qe.mode)&&void 0!==R?R:null);G(rt&&St&&vt,"argument-error"),this.apiKey=rt,this.operation=vt,this.code=St,this.continueUrl=null!==(k=qe.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Y=qe.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ye=qe.tenantId)&&void 0!==ye?ye:null}static parseLink(g){const _=function Aa(b){const g=(0,B.zd)((0,B.pd)(b)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,E=(0,B.zd)((0,B.pd)(b)).deep_link_id;return(E?(0,B.zd)((0,B.pd)(E)).link:null)||E||_||g||b}(g);try{return new Ec(_)}catch{return null}}}let Pn=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return Ta._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const R=Ec.parseLink(E);return G(R,"argument-error"),Ta._fromEmailAndCode(_,R.code,R.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ke{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Nt extends Ke{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class wn extends Nt{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Br._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),Br._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return wn.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return wn.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:k,nonce:Y,providerId:ye}=g;if(!E&&!R&&!_&&!k||!ye)return null;try{return new wn(ye)._credential({idToken:_,accessToken:E,nonce:Y,pendingToken:k})}catch{return null}}}let tr=(()=>{class b extends Nt{constructor(){super("facebook.com")}static credential(_){return Br._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),vo=(()=>{class b extends Nt{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Br._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:R}=_;if(!E&&!R)return null;try{return b.credential(E,R)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Gi=(()=>{class b extends Nt{constructor(){super("github.com")}static credential(_){return Br._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Mn extends Vs{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return js(g,this.buildRequest())}_linkToIdToken(g,_){const E=this.buildRequest();return E.idToken=_,js(g,E)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,js(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:R,pendingToken:k}=_;return E&&R&&k&&E===R?new Mn(E,k):null}static _create(g,_){return new Mn(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oi extends Ke{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Oi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Oi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Mn.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:E}=g;if(!_||!E)return null;try{return Mn._create(E,_)}catch{return null}}}let Ot=(()=>{class b extends Nt{constructor(){super("twitter.com")}static credential(_,E){return Br._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:R}=_;if(!E||!R)return null;try{return b.credential(E,R)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function bo(b,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signUp",Be(b,g))})).apply(this,arguments)}class Xn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,E,R=!1){return(0,u.Z)(function*(){const k=yield Wt._fromIdTokenResponse(g,E,R),Y=ei(E);return new Xn({user:k,providerId:Y,_tokenResponse:E,operationType:_})})()}static _forOperation(g,_,E){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const R=ei(E);return new Xn({user:g,providerId:R,_tokenResponse:E,operationType:_})})()}}function ei(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Ho(){return(Ho=(0,u.Z)(function*(b){var g;const _=Mt(b);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Xn({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield bo(_,{returnSecureToken:!0}),R=yield Xn._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class br extends B.ZR{constructor(g,_,E,R){var k;super(_.code,_.message),this.operationType=E,this.user=R,Object.setPrototypeOf(this,br.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,_,E,R){return new br(g,_,E,R)}}function Na(b,g,_,E){return("reauthenticate"===g?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?br._fromErrorAndOperation(b,k,g,E):k})}function Hs(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function wr(){return wr=(0,u.Z)(function*(b,g){const _=(0,B.m9)(b);yield jt(!0,_,g);const{providerUserInfo:E}=yield function cr(b,g){return ms.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Hs(E||[]);return _.providerData=_.providerData.filter(k=>R.has(k.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),wr.apply(this,arguments)}function Go(b,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,u.Z)(function*(b,g,_=!1){const E=yield Bn(b,g._linkToIdToken(b.auth,yield b.getIdToken()),_);return Xn._forOperation(b,"link",E)})).apply(this,arguments)}function jt(b,g,_){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,u.Z)(function*(b,g,_){yield kr(g);const R=!1===b?"provider-already-linked":"no-such-provider";G(Hs(g.providerData).has(_)===b,g.auth,R)})).apply(this,arguments)}function xl(b,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(b,g,_=!1){const{auth:E}=b,R="reauthenticate";try{const k=yield Bn(b,Na(E,R,g,b),_);G(k.idToken,E,"internal-error");const Y=Ri(k.idToken);G(Y,E,"internal-error");const{sub:ye}=Y;return G(b.uid===ye,E,"user-mismatch"),Xn._forOperation(b,R,k)}catch(k){throw"auth/user-not-found"===k?.code&&ne(E,"user-mismatch"),k}})).apply(this,arguments)}function $i(b,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(b,g,_=!1){const E="signIn",R=yield Na(b,E,g),k=yield Xn._fromIdTokenResponse(b,E,R);return _||(yield b._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Un(b,g){return $o.apply(this,arguments)}function $o(){return($o=(0,u.Z)(function*(b,g){return $i(Mt(b),g)})).apply(this,arguments)}function ai(b,g){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,u.Z)(function*(b,g){const _=(0,B.m9)(b);return yield jt(!1,_,g.providerId),Go(_,g)})).apply(this,arguments)}function Wi(b,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,u.Z)(function*(b,g){return xl((0,B.m9)(b),g)})).apply(this,arguments)}function ns(){return(ns=(0,u.Z)(function*(b,g){return nn(b,"POST","/v1/accounts:signInWithCustomToken",Be(b,g))})).apply(this,arguments)}function lr(){return lr=(0,u.Z)(function*(b,g){const _=Mt(b),E=yield function Cc(b,g){return ns.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),R=yield Xn._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(R.user),R}),lr.apply(this,arguments)}class Wo{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Xu._fromServerResponse(g,_):ne(g,"internal-error")}}class Xu extends Wo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Xu(_)}}function Ol(b,g,_){var E;G((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function ed(){return ed=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b),R={requestType:"PASSWORD_RESET",email:g};_&&Ol(E,R,_),yield function bc(b,g){return Qu.apply(this,arguments)}(E,R)}),ed.apply(this,arguments)}function Fh(){return(Fh=(0,u.Z)(function*(b,g,_){yield xi((0,B.m9)(b),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Bh(){return Bh=(0,u.Z)(function*(b,g){yield function Ca(b,g){return Lr.apply(this,arguments)}((0,B.m9)(b),{oobCode:g})}),Bh.apply(this,arguments)}function Uh(b,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(b,g){const _=(0,B.m9)(b),E=yield xi(_,{oobCode:g}),R=E.requestType;switch(G(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(E.mfaInfo,_,"internal-error");default:G(E.email,_,"internal-error")}let k=null;return E.mfaInfo&&(k=Wo._fromServerResponse(Mt(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:R}})).apply(this,arguments)}function Xp(){return(Xp=(0,u.Z)(function*(b,g){const{data:_}=yield Uh((0,B.m9)(b),g);return _.email})).apply(this,arguments)}function eg(){return(eg=(0,u.Z)(function*(b,g,_){const E=Mt(b),R=yield bo(E,{returnSecureToken:!0,email:g,password:_}),k=yield Xn._fromIdTokenResponse(E,"signIn",R);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function tg(){return tg=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b),R={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,E,"argument-error"),_&&Ol(E,R,_),yield function Z_(b,g){return $p.apply(this,arguments)}(E,R)}),tg.apply(this,arguments)}function id(){return(id=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b),R=Pn.credentialWithLink(g,_||Sn());return G(R._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Un(E,R)})).apply(this,arguments)}function kl(){return(kl=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:createAuthUri",Be(b,g))})).apply(this,arguments)}function bs(){return bs=(0,u.Z)(function*(b,g){const E={identifier:g,continueUri:_i()?Sn():"http://localhost"},{signinMethods:R}=yield function Eb(b,g){return kl.apply(this,arguments)}((0,B.m9)(b),E);return R||[]}),bs.apply(this,arguments)}function Oa(){return Oa=(0,u.Z)(function*(b,g){const _=(0,B.m9)(b),R={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Ol(_.auth,R,g);const{email:k}=yield function kh(b,g){return Ji.apply(this,arguments)}(_.auth,R);k!==b.email&&(yield b.reload())}),Oa.apply(this,arguments)}function ka(){return ka=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};_&&Ol(E.auth,k,_);const{email:Y}=yield function Wp(b,g){return Da.apply(this,arguments)}(E.auth,k);Y!==b.email&&(yield b.reload())}),ka.apply(this,arguments)}function Tc(){return(Tc=(0,u.Z)(function*(b,g){return Xt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sd(){return sd=(0,u.Z)(function*(b,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const E=(0,B.m9)(b),k={idToken:yield E.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield Bn(E,function nr(b,g){return Tc.apply(this,arguments)}(E.auth,k));E.displayName=Y.displayName||null,E.photoURL=Y.photoUrl||null;const ye=E.providerData.find(({providerId:qe})=>"password"===qe);ye&&(ye.displayName=E.displayName,ye.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Y)}),sd.apply(this,arguments)}function od(b,g,_){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,u.Z)(function*(b,g,_){const{auth:E}=b,k={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(k.email=g),_&&(k.password=_);const Y=yield Bn(b,Ku(E,k));yield b._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Fa{constructor(g,_,E={}){this.isNewUser=g,this.providerId=_,this.profile=E}}class Hh extends Fa{constructor(g,_,E,R){super(g,_,E),this.username=R}}class Gh extends Fa{constructor(g,_){super(g,"facebook.com",_)}}class Ac extends Hh{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Fl extends Fa{constructor(g,_){super(g,"google.com",_)}}class wo extends Hh{constructor(g,_,E){super(g,"twitter.com",_,E)}}function ig(b){const{user:g,_tokenResponse:_}=b;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function jh(b){var g,_;if(!b)return null;const{providerId:E}=b,R=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},k=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const Y=null===(_=null===(g=Ri(b.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new Fa(k,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!E)return null;switch(E){case"facebook.com":return new Gh(k,R);case"github.com":return new Ac(k,R);case"google.com":return new Fl(k,R);case"twitter.com":return new wo(k,R,b.screenName||null);case"custom":case"anonymous":return new Fa(k,null);default:return new Fa(k,E,R)}}(_)}class Eo{constructor(g,_,E){this.type=g,this.credential=_,this.auth=E}static _fromIdtoken(g,_){return new Eo("enroll",g,_)}static _fromMfaPendingCredential(g){return new Eo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,E;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Eo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Eo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Wh{constructor(g,_,E){this.session=g,this.hints=_,this.signInResolver=E}static _fromError(g,_){const E=Mt(g),R=_.customData._serverResponse,k=(R.mfaInfo||[]).map(ye=>Wo._fromServerResponse(E,ye));G(R.mfaPendingCredential,E,"internal-error");const Y=Eo._fromMfaPendingCredential(R.mfaPendingCredential);return new Wh(Y,k,function(){var ye=(0,u.Z)(function*(qe){const rt=yield qe._process(E,Y);delete R.mfaInfo,delete R.mfaPendingCredential;const St=Object.assign(Object.assign({},R),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(_.operationType){case"signIn":const vt=yield Xn._fromIdTokenResponse(E,_.operationType,St);return yield E._updateCurrentUser(vt.user),vt;case"reauthenticate":return G(_.user,E,"internal-error"),Xn._forOperation(_.user,_.operationType,St);default:ne(E,"internal-error")}});return function(qe){return ye.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,u.Z)(function*(){return _.signInResolver(g)})()}}class Nc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Wo._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Nc(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Eo._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var E=this;return(0,u.Z)(function*(){const R=g,k=yield E.getSession(),Y=yield Bn(E.user,R._process(E.user.auth,k,_));return yield E.user._updateTokensIfNecessary(Y),E.user.reload()})()}unenroll(g){var _=this;return(0,u.Z)(function*(){const E="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),k=yield Bn(_.user,function zh(b,g){return Xt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Be(b,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Y})=>Y!==E),yield _.user._updateTokensIfNecessary(k);try{yield _.user.reload()}catch(Y){if("auth/user-token-expired"!==Y?.code)throw Y}})()}}const Ws=new WeakMap,zs="__sak";class qh{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(zs,"1"),this.storage.removeItem(zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const zo=(()=>{class b extends qh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Zh(){const b=(0,B.z$)();return Tt(b)||di(b)}()&&function Fs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hp(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const R=this.storage.getItem(E),k=this.localCache[E];R!==k&&_(E,k,R)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((ye,qe,rt)=>{this.notifyListeners(ye,rt)});const R=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ye=this.storage.getItem(R);if(_.newValue!==ye)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!E)return}const k=()=>{const ye=this.storage.getItem(R);!E&&this.localCache[R]===ye||this.notifyListeners(R,ye)},Y=this.storage.getItem(R);!function q_(){return(0,B.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var R=()=>super._set,k=this;return(0,u.Z)(function*(){yield R().call(k,_,E),k.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,R=this;return(0,u.Z)(function*(){const k=yield E().call(R,_);return R.localCache[_]=JSON.stringify(k),k})()}_remove(_){var E=()=>super._remove,R=this;return(0,u.Z)(function*(){yield E().call(R,_),delete R.localCache[_]})()}}return b.type="LOCAL",b})(),qs=(()=>{class b extends qh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let Bl=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(k=>k.isListeningto(_));if(E)return E;const R=new b(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,u.Z)(function*(){const R=_,{eventId:k,eventType:Y,data:ye}=R.data,qe=E.handlersMap[Y];if(!qe?.size)return;R.ports[0].postMessage({status:"ack",eventId:k,eventType:Y});const rt=Array.from(qe).map(function(){var vt=(0,u.Z)(function*(Li){return Li(R.origin,ye)});return function(Li){return vt.apply(this,arguments)}}()),St=yield function Ll(b){return Promise.all(b.map(function(){var g=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return g.apply(this,arguments)}}()))}(rt);R.ports[0].postMessage({status:"done",eventId:k,eventType:Y,response:St})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function qo(b="",g=10){let _="";for(let E=0;E<g;E++)_+=Math.floor(10*Math.random());return b+_}class cd{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,E=50){var R=this;return(0,u.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Y,ye;return new Promise((qe,rt)=>{const St=qo("",20);k.port1.start();const vt=setTimeout(()=>{rt(new Error("unsupported_event"))},E);ye={messageChannel:k,onMessage(Li){const Yn=Li;if(Yn.data.eventId===St)switch(Yn.data.status){case"ack":clearTimeout(vt),Y=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),qe(Yn.data.response);break;default:clearTimeout(vt),clearTimeout(Y),rt(new Error("invalid_response"))}}},R.handlers.add(ye),k.port1.addEventListener("message",ye.onMessage),R.target.postMessage({eventType:g,eventId:St,data:_},[k.port2])}).finally(()=>{ye&&R.removeMessageHandler(ye)})})()}}function ti(){return window}function Ir(){return typeof ti().WorkerGlobalScope<"u"&&"function"==typeof ti().importScripts}function Vl(){return(Vl=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zs="firebaseLocalStorageDb",Rc="firebaseLocalStorage",Hl="fbase_key";class Vr{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function wi(b,g){return b.transaction([Rc],g?"readwrite":"readonly").objectStore(Rc)}function ud(){const b=indexedDB.open(Zs,1);return new Promise((g,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Rc,{keyPath:Hl})}catch(R){_(R)}}),b.addEventListener("success",(0,u.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Rc)?g(E):(E.close(),yield function Gl(){const b=indexedDB.deleteDatabase(Zs);return new Vr(b).toPromise()}(),g(yield ud()))}))})}function xc(b,g,_){return ws.apply(this,arguments)}function ws(){return(ws=(0,u.Z)(function*(b,g,_){const E=wi(b,!0).put({[Hl]:g,value:_});return new Vr(E).toPromise()})).apply(this,arguments)}function Oc(){return(Oc=(0,u.Z)(function*(b,g){const _=wi(b,!1).get(g),E=yield new Vr(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function dd(b,g){const _=wi(b,!0).delete(g);return new Vr(_).toPromise()}const Et=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield ud()),_.db})()}_withRetries(_){var E=this;return(0,u.Z)(function*(){let R=0;for(;;)try{const k=yield E._openDb();return yield _(k)}catch(k){if(R++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return Ir()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Bl._getInstance(function jl(){return Ir()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(R,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(R,k){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(R,k){return["keyChanged"]});return function(R,k){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var E,R;if(_.activeServiceWorker=yield function Ul(){return Vl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new cd(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);k&&null!==(E=k[0])&&void 0!==E&&E.fulfilled&&null!==(R=k[0])&&void 0!==R&&R.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Tn(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ud();return yield xc(_,zs,"1"),yield dd(_,zs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var R=this;return(0,u.Z)(function*(){return R._withPendingWrite((0,u.Z)(function*(){return yield R._withRetries(k=>xc(k,_,E)),R.localCache[_]=E,R.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,u.Z)(function*(){const R=yield E._withRetries(k=>function $l(b,g){return Oc.apply(this,arguments)}(k,_));return E.localCache[_]=R,R})()}_remove(_){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(R=>dd(R,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const E=yield _._withRetries(Y=>{const ye=wi(Y,!1).getAll();return new Vr(ye).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const R=[],k=new Set;for(const{fbase_key:Y,value:ye}of E)k.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ye)&&(_.notifyListeners(Y,ye),R.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!k.has(Y)&&(_.notifyListeners(Y,null),R.push(Y));return R})()}notifyListeners(_,E){this.localCache[_]=E;const R=this.listeners[_];if(R)for(const k of Array.from(R))k(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function zl(){return(zl=(0,u.Z)(function*(b){return(yield Xt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zo(b){return new Promise((g,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=R=>{const k=we("internal-error");k.customData=R,_(k)},E.type="text/javascript",E.charset="UTF-8",function Qh(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function Ys(b){return`__${b}${Math.floor(1e6*Math.random())}`}const La=1e12;class Cb{constructor(g){this.auth=g,this.counter=La,this._widgets=new Map}render(g,_){const E=this.counter;return this._widgets.set(E,new dg(g,this.auth.name,_||{})),this.counter++,E}reset(g){var _;const E=g||La;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(g){var _;return(null===(_=this._widgets.get(g||La))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,u.Z)(function*(){var E;return null===(E=_._widgets.get(g||La))||void 0===E||E.execute(),""})()}}class dg{constructor(g,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;G(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Me(b){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)g.push(_.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yt=Ys("rcb"),Ks=new _e(3e4,6e4);class fi{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ti().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function fd(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(ti().grecaptcha):new Promise((E,R)=>{const k=ti().setTimeout(()=>{R(we(g,"network-request-failed"))},Ks.get());ti()[Yt]=()=>{ti().clearTimeout(k),delete ti()[Yt];const ye=ti().grecaptcha;if(!ye)return void R(we(g,"internal-error"));const qe=ye.render;ye.render=(rt,St)=>{const vt=qe(rt,St);return this.counter++,vt},this.hostLanguage=_,E(ye)},Zo(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Yt,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),R(we(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=ti().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kc{load(g){return(0,u.Z)(function*(){return new Cb(g)})()}clearedOneInstance(){}}const Qs="recaptcha",hg={theme:"light",type:"image"};class fg{constructor(g,_=Object.assign({},hg),E){this.parameters=_,this.type=Qs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(E),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;G(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kc:new fi,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(_)||new Promise(k=>{const Y=ye=>{ye&&(g.tokenChangeListeners.delete(Y),k(ye))};g.tokenChangeListeners.add(Y),g.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof g)g(_);else if("string"==typeof g){const E=ti()[g];"function"==typeof E&&E(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){G(_i()&&!Ir(),g.auth,"internal-error"),yield function pg(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Es(b){return zl.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class X_{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=yo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ki(){return(ki=(0,u.Z)(function*(b,g,_){const E=Mt(b),R=yield ql(E,g,(0,B.m9)(_));return new X_(R,k=>Un(E,k))})).apply(this,arguments)}function pd(){return(pd=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b);yield jt(!1,E,"phone");const R=yield ql(E.auth,g,(0,B.m9)(_));return new X_(R,k=>ai(E,k))})).apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b),R=yield ql(E.auth,g,(0,B.m9)(_));return new X_(R,k=>Wi(E,k))})).apply(this,arguments)}function ql(b,g,_){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,u.Z)(function*(b,g,_){var E;const R=yield _.verify();try{let k;if(G("string"==typeof R,b,"argument-error"),G(_.type===Qs,b,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const Y=k.session;if("phoneNumber"in k)return G("enroll"===Y.type,b,"internal-error"),(yield function Mc(b,g){return Xt(b,"POST","/v2/accounts/mfaEnrollment:start",Be(b,g))}(b,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{G("signin"===Y.type,b,"internal-error");const ye=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return G(ye,b,"missing-multi-factor-info"),(yield function Wl(b,g){return Xt(b,"POST","/v2/accounts/mfaSignIn:start",Be(b,g))}(b,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ye,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Zp(b,g){return Ml.apply(this,arguments)}(b,{phoneNumber:k.phoneNumber,recaptchaToken:R});return Y}}finally{_._reset()}}),Fc.apply(this,arguments)}function tf(){return(tf=(0,u.Z)(function*(b,g){yield Go((0,B.m9)(b),g)})).apply(this,arguments)}let Ba=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Mt(_)}verifyPhoneNumber(_,E){return ql(this.auth,_,(0,B.m9)(E))}static credential(_,E){return yo._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:R}=_;return E&&R?yo._fromTokenResponse(E,R):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Js(b,g){return g?Qt(g):(G(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class gd extends Vs{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return js(g,this._buildIdpRequest())}_linkToIdToken(g,_){return js(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return js(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function nf(b){return $i(b.auth,new gd(b),b.bypassAuthState)}function rf(b){const{auth:g,user:_}=b;return G(_,g,"internal-error"),xl(_,new gd(b),b.bypassAuthState)}function md(b){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(b){const{auth:g,user:_}=b;return G(_,g,"internal-error"),Go(_,new gd(b),b.bypassAuthState)})).apply(this,arguments)}class zi{constructor(g,_,E,R,k=!1){this.auth=g,this.resolver=E,this.user=R,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,u.Z)(function*(E,R){g.pendingPromise={resolve:E,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(E,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:R,postBody:k,tenantId:Y,error:ye,type:qe}=g;if(ye)return void _.reject(ye);const rt={auth:_.auth,requestUri:E,sessionId:R,tenantId:Y||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(qe)(rt))}catch(St){_.reject(St)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return nf;case"linkViaPopup":case"linkViaRedirect":return md;case"reauthViaPopup":case"reauthViaRedirect":return rf;default:ne(this.auth,"internal-error")}}resolve(g){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zl=new _e(2e3,1e4);function nt(){return(nt=(0,u.Z)(function*(b,g,_){const E=Mt(b);Ee(b,g,Ke);const R=Js(E,_);return new Xs(E,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function sf(){return(sf=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b);Ee(E.auth,g,Ke);const R=Js(E.auth,_);return new Xs(E.auth,"reauthViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b);Ee(E.auth,g,Ke);const R=Js(E.auth,_);return new Xs(E.auth,"linkViaPopup",g,R,E).executeNotNull()})).apply(this,arguments)}let Xs=(()=>{class b extends zi{constructor(_,E,R,k,Y){super(_,E,k,Y),this.provider=R,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const E=yield _.execute();return G(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,u.Z)(function*(){ze(1===_.filter.length,"Popup operations only handle one event");const E=qo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(we(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,R;this.pollId=null!==(R=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Zl.get())};_()}}return b.currentPopupAction=null,b})();const In="pendingRedirect",Ua=new Map;class Lc extends zi{constructor(g,_,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,u.Z)(function*(){let E=Ua.get(_.auth._key());if(!E){try{const k=(yield function pt(b,g){return eo.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;E=()=>Promise.resolve(k)}catch(R){E=()=>Promise.reject(R)}Ua.set(_.auth._key(),E)}return _.bypassAuthState||Ua.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(E,g);if("unknown"!==g.type){if(g.eventId){const R=yield E.auth._redirectUserForId(g.eventId);if(R)return E.user=R,_().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function eo(){return(eo=(0,u.Z)(function*(b,g){const _=Bc(g),E=Zn(b);if(!(yield E._isAvailable()))return!1;const R="true"===(yield E._get(_));return yield E._remove(_),R})).apply(this,arguments)}function Yl(b,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(b,g){return Zn(b)._set(Bc(g),"true")})).apply(this,arguments)}function Cs(b,g){Ua.set(b._key(),g)}function Zn(b){return Qt(b._redirectPersistence)}function Bc(b){return Q(In,b.config.apiKey,b.name)}function Yo(b,g,_){return function _d(b,g,_){return D.apply(this,arguments)}(b,g,_)}function D(){return(D=(0,u.Z)(function*(b,g,_){const E=Mt(b);Ee(b,g,Ke),yield E._initializationPromise;const R=Js(E,_);return yield Yl(R,E),R._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function S(b,g,_){return function O(b,g,_){return V.apply(this,arguments)}(b,g,_)}function V(){return(V=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b);Ee(E.auth,g,Ke),yield E.auth._initializationPromise;const R=Js(E.auth,_);yield Yl(R,E.auth);const k=yield Rt(E);return R._openRedirect(E.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function J(b,g,_){return function oe(b,g,_){return Se.apply(this,arguments)}(b,g,_)}function Se(){return(Se=(0,u.Z)(function*(b,g,_){const E=(0,B.m9)(b);Ee(E.auth,g,Ke),yield E.auth._initializationPromise;const R=Js(E.auth,_);yield jt(!1,E,g.providerId),yield Yl(R,E.auth);const k=yield Rt(E);return R._openRedirect(E.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(b,g){return yield Mt(b)._initializationPromise,mt(b,g,!1)})).apply(this,arguments)}function mt(b,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(b,g,_=!1){const E=Mt(b),R=Js(E,g),Y=yield new Lc(E,R,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield E._persistUserIfCurrent(Y.user),yield E._setRedirectUser(null,g)),Y})).apply(this,arguments)}function Rt(b){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(b){const g=qo(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Do{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(_=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function sn(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nn(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var E;if(g.error&&!Nn(g)){const R=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(we(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const E=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tn(g))}saveEventToCache(g){this.cachedEventUids.add(tn(g)),this.lastProcessedEventTime=Date.now()}}function tn(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Nn({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function qi(b){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(b,g={}){return Xt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yd=/^https?/;function _g(){return(_g=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield qi(b);for(const _ of g)try{if(rr(_))return}catch{}ne(b,"unauthorized-domain")})).apply(this,arguments)}function rr(b){const g=Sn(),{protocol:_,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const Y=new URL(b);return""===Y.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===E}if(!yd.test(_))return!1;if(dr.test(b))return E===b;const R=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(E)}const Kl=new _e(3e4,6e4);function Gn(){const b=ti().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let vd=null;const bd=new _e(5e3,15e3),Db="__/auth/iframe",yg="emulator/auth/iframe",wd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},af=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ni(b){const g=b.config;G(g.authDomain,b,"auth-domain-config-required");const _=g.emulator?me(g,yg):`https://${b.config.authDomain}/${Db}`,E={apiKey:g.apiKey,appName:b.name,v:re.SDK_VERSION},R=af.get(b.config.apiHost);R&&(E.eid=R);const k=b._getFrameworks();return k.length&&(E.fw=k.join(",")),`${_}?${(0,B.xO)(E).slice(1)}`}function So(){return So=(0,u.Z)(function*(b){const g=yield function Ko(b){return vd=vd||function To(b){return new Promise((g,_)=>{var E,R,k;function Y(){Gn(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Gn(),_(we(b,"network-request-failed"))},timeout:Kl.get()})}if(null!==(R=null===(E=ti().gapi)||void 0===E?void 0:E.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(k=ti().gapi)||void 0===k||!k.load){const ye=Ys("iframefcb");return ti()[ye]=()=>{gapi.load?Y():_(we(b,"network-request-failed"))},Zo(`https://apis.google.com/js/api.js?onload=${ye}`).catch(qe=>_(qe))}Y()}}).catch(g=>{throw vd=null,g})}(b),vd}(b),_=ti().gapi;return G(_,b,"internal-error"),g.open({where:document.body,url:ni(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wd,dontclear:!0},E=>new Promise(function(){var R=(0,u.Z)(function*(k,Y){yield E.restyle({setHideOnLeave:!1});const ye=we(b,"network-request-failed"),qe=ti().setTimeout(()=>{Y(ye)},bd.get());function rt(){ti().clearTimeout(qe),k(E)}E.ping(rt).then(rt,()=>{Y(ye)})});return function(k,Y){return R.apply(this,arguments)}}()))}),So.apply(this,arguments)}const Uc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const iy="__/auth/handler",cf="emulator/auth/handler";function lf(b,g,_,E,R,k){G(b.config.authDomain,b,"auth-domain-config-required"),G(b.config.apiKey,b,"invalid-api-key");const Y={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:re.SDK_VERSION,eventId:R};if(g instanceof Ke){g.setDefaultLanguage(b.languageCode),Y.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[qe,rt]of Object.entries(k||{}))Y[qe]=rt}if(g instanceof Nt){const qe=g.getScopes().filter(rt=>""!==rt);qe.length>0&&(Y.scopes=qe.join(","))}b.tenantId&&(Y.tid=b.tenantId);const ye=Y;for(const qe of Object.keys(ye))void 0===ye[qe]&&delete ye[qe];return`${function ry({config:b}){return b.emulator?me(b,cf):`https://${b.authDomain}/${iy}`}(b)}?${(0,B.xO)(ye).slice(1)}`}const Jl="webStorageSupport",ja=class Xl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qs,this._completeRedirectFn=mt,this._overrideRedirectResult=Cs}_openPopup(g,_,E,R){var k=this;return(0,u.Z)(function*(){var Y;ze(null===(Y=k.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ye=lf(g,_,E,Sn(),R);return function hr(b,g,_,E=500,R=600){const k=Math.max((window.screen.availHeight-R)/2,0).toString(),Y=Math.max((window.screen.availWidth-E)/2,0).toString();let ye="";const qe=Object.assign(Object.assign({},Uc),{width:E.toString(),height:R.toString(),top:k,left:Y}),rt=(0,B.z$)().toLowerCase();_&&(ye=bn(rt)?"_blank":_),ut(rt)&&(g=g||"http://localhost",qe.scrollbars="yes");const St=Object.entries(qe).reduce((Li,[Yn,qa])=>`${Li}${Yn}=${qa},`,"");if(function Uo(b=(0,B.z$)()){var g;return di(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(rt)&&"_self"!==ye)return function Va(b,g){const _=document.createElement("a");_.href=b,_.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(g||"",ye),new vg(null);const vt=window.open(g||"",ye,St);G(vt,b,"popup-blocked");try{vt.focus()}catch{}return new vg(vt)}(g,ye,qo())})()}_openRedirect(g,_,E,R){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(g),function ld(b){ti().location.href=b}(lf(g,_,E,Sn(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:k}=this.eventManagers[_];return R?Promise.resolve(R):(ze(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(g);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(g){var _=this;return(0,u.Z)(function*(){const E=yield function Gt(b){return So.apply(this,arguments)}(g),R=new Do(g);return E.register("authEvent",k=>(G(k?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=E,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Jl,{type:Jl},R=>{var k;const Y=null===(k=R?.[0])||void 0===k?void 0:k[Jl];void 0!==Y&&_(!!Y),ne(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function mg(b){return _g.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Hp()||Tt()||di()}};class Vc{constructor(g){this.factorId=g}_process(g,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,E);case"signin":return this._finalizeSignIn(g,_.credential);default:return Te("unexpected MultiFactorSessionType")}}}class jc extends Vc{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new jc(g)}_finalizeEnroll(g,_,E){return function ag(b,g){return Xt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Be(b,g))}(g,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function J_(b,g){return Xt(b,"POST","/v2/accounts/mfaSignIn:finalize",Be(b,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ha=(()=>{class b{constructor(){}static assertion(_){return jc._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var on="@firebase/auth";class Tb{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ga(){return window}(0,B.Pz)("authIdTokenMaxAge"),function fD(b){(0,re._registerComponent)(new ve.wA("auth",(g,{options:_})=>{const E=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),{apiKey:k,authDomain:Y}=E.options;return((ye,qe)=>{G(k&&!k.includes(":"),"invalid-api-key",{appName:ye.name}),G(!Y?.includes(":"),"argument-error",{appName:ye.name});const rt={apiKey:k,authDomain:Y,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ls(b)},St=new ys(ye,qe,rt);return function Ln(b,g){const _=g?.persistence||[],E=(Array.isArray(_)?_:[_]).map(Qt);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,g?.popupRedirectResolver)}(St,_),St})(E,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,E)=>{g.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new ve.wA("auth-internal",g=>{const _=Mt(g.getProvider("auth").getImmediate());return new Tb(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(on,"0.21.1",function eu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,re.registerVersion)(on,"0.21.1","esm2017")}("Browser");function Id(){return Id=(0,u.Z)(function*(b,g,_){var E;const{BuildInfo:R}=Ga();ze(g.sessionId,"AuthEvent did not contain a session ID");const k=yield function Hc(b){return wg.apply(this,arguments)}(g.sessionId),Y={};return di()?Y.ibi=R.packageName:qn()?Y.apn=R.packageName:ne(b,"operation-not-supported-in-this-environment"),R.displayName&&(Y.appDisplayName=R.displayName),Y.sessionId=k,lf(b,_,g.type,void 0,null!==(E=g.eventId)&&void 0!==E?E:void 0,Y)}),Id.apply(this,arguments)}function hf(){return(hf=(0,u.Z)(function*(b){const{BuildInfo:g}=Ga(),_={};di()?_.iosBundleId=g.packageName:qn()?_.androidPackageName=g.packageName:ne(b,"operation-not-supported-in-this-environment"),yield qi(b,_)})).apply(this,arguments)}function ff(){return(ff=(0,u.Z)(function*(b,g,_){const{cordova:E}=Ga();let R=()=>{};try{yield new Promise((k,Y)=>{let ye=null;function qe(){var vt;k();const Li=null===(vt=E.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof Li&&Li(),"function"==typeof _?.close&&_.close()}function rt(){ye||(ye=window.setTimeout(()=>{Y(we(b,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===document?.visibilityState&&rt()}g.addPassiveListener(qe),document.addEventListener("resume",rt,!1),qn()&&document.addEventListener("visibilitychange",St,!1),R=()=>{g.removePassiveListener(qe),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",St,!1),ye&&window.clearTimeout(ye)}})}finally{R()}})).apply(this,arguments)}function wg(){return(wg=(0,u.Z)(function*(b){const g=function pD(b){if(ze(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),_=new Uint8Array(g);for(let E=0;E<b.length;E++)_[E]=b.charCodeAt(E);return _}(b),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class gD extends Do{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,u.Z)(function*(){yield g.initPromise})()}}function Gc(b){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,u.Z)(function*(b){const g=yield Jo()._get(Dg(b));return g&&(yield Jo()._remove(Dg(b))),g})).apply(this,arguments)}function Mb(){const b=[];for(let _=0;_<20;_++){const E=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return b.join("")}function Jo(){return Qt(zo)}function Dg(b){return Q("authEvent",b.config.apiKey,b.name)}function $c(b){if(!b?.includes("?"))return{};const[g,..._]=b.split("?");return(0,B.zd)(_.join("?"))}const cy=class nu{constructor(){this._redirectPersistence=qs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mt,this._overrideRedirectResult=Cs}_initialize(g){var _=this;return(0,u.Z)(function*(){const E=g._key();let R=_.eventManagers.get(E);return R||(R=new gD(g),_.eventManagers.set(E,R),_.attachCallbackListeners(g,R)),R})()}_openPopup(g){ne(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,E,R){var k=this;return(0,u.Z)(function*(){!function pf(b){var g,_,E,R,k,Y,ye,qe,rt,St;const vt=Ga();G("function"==typeof(null===(g=vt?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=vt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(k=null===(R=null===(E=vt?.cordova)||void 0===E?void 0:E.plugins)||void 0===R?void 0:R.browsertab)||void 0===k?void 0:k.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(qe=null===(ye=null===(Y=vt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ye?void 0:ye.browsertab)||void 0===qe?void 0:qe.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(St=null===(rt=vt?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===St?void 0:St.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield k._initialize(g);yield Y.initialized(),Y.resetRedirect(),function Is(){Ua.clear()}(),yield k._originValidation(g);const ye=function rs(b,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Mb(),postBody:null,tenantId:b.tenantId,error:we(b,"no-auth-event")}}(g,E,R);yield function Eg(b,g){return Jo()._set(Dg(b),g)}(g,ye);const qe=yield function Fi(b,g,_){return Id.apply(this,arguments)}(g,ye,_),rt=yield function is(b){const{cordova:g}=Ga();return new Promise(_=>{g.plugins.browsertab.isAvailable(E=>{let R=null;E?g.plugins.browsertab.openUrl(b):R=g.InAppBrowser.open(b,function Ps(b=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(R)})})}(qe);return function tu(b,g,_){return ff.apply(this,arguments)}(g,Y,rt)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $a(b){return hf.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:E,handleOpenURL:R,BuildInfo:k}=Ga(),Y=setTimeout((0,u.Z)(function*(){yield Gc(g),_.onEvent(iu())}),500),ye=function(){var St=(0,u.Z)(function*(vt){clearTimeout(Y);const Li=yield Gc(g);let Yn=null;Li&&vt?.url&&(Yn=function Cg(b,g){var _,E;const R=function ay(b){const g=$c(b),_=g.link?decodeURIComponent(g.link):void 0,E=$c(_).link,R=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return $c(R).link||R||E||_||b}(g);if(R.includes("/__/auth/callback")){const k=$c(R),Y=k.firebaseError?function oy(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,ye=null===(E=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],qe=ye?we(ye):null;return qe?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:R,postBody:null}}return null}(Li,vt.url)),_.onEvent(Yn||iu())});return function(Li){return St.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ye);const qe=R,rt=`${k.packageName.toLowerCase()}://`;Ga().handleOpenURL=function(){var St=(0,u.Z)(function*(vt){if(vt.toLowerCase().startsWith(rt)&&ye({url:vt}),"function"==typeof qe)try{qe(vt)}catch(Li){console.error(Li)}});return function(vt){return St.apply(this,arguments)}}()}};function iu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function qc(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Zc(b=(0,B.z$)()){return!("file:"!==qc()&&"ionic:"!==qc()&&"capacitor:"!==qc()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sg(){try{const b=self.localStorage,g=qo();if(b)return b.setItem(g,"1"),b.removeItem(g),!function su(b=(0,B.z$)()){return function Tg(){return(0,B.w1)()&&11===document?.documentMode}()||function ru(b=(0,B.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,B.hl)()}catch{return ou()&&(0,B.hl)()}return!1}function ou(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ss(){return(function Cd(){return"http:"===qc()||"https:"===qc()}()||(0,B.ru)()||Zc())&&!function xb(){return(0,B.b$)()||(0,B.UG)()}()&&Sg()&&!ou()}function Dd(){return Zc()&&typeof document<"u"}function Kc(){return(Kc=(0,u.Z)(function*(){return!!Dd()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const fr={LOCAL:"local",NONE:"none",SESSION:"session"},Xo=G,Ag="persistence";function gf(b){return uy.apply(this,arguments)}function uy(){return(uy=(0,u.Z)(function*(b){yield b._initializationPromise;const g=kb(),_=Q(Ag,b.config.apiKey,b.name);g&&g.setItem(_,b._getPersistence())})).apply(this,arguments)}function kb(){var b;try{return(null===(b=function au(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Pb=G;class Wa{constructor(){this.browserResolver=Qt(ja),this.cordovaResolver=Qt(cy),this.underlyingResolver=null,this._redirectPersistence=qs,this._completeRedirectFn=mt,this._overrideRedirectResult=Cs}_initialize(g){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,E,R){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(g,_,E,R)})()}_openRedirect(g,_,E,R){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(g,_,E,R)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Dd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,u.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Yc(){return Kc.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function mf(b){return b.unwrap()}function Fb(b){return Mg(b)}function Mg(b){const{_tokenResponse:g}=b instanceof B.ZR?b.customData:b;if(!g)return null;if(!(b instanceof B.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ba.credentialFromResult(b);const _=g.providerId;if(!_||_===he.PASSWORD)return null;let E;switch(_){case he.GOOGLE:E=vo;break;case he.FACEBOOK:E=tr;break;case he.GITHUB:E=Gi;break;case he.TWITTER:E=Ot;break;default:const{oauthIdToken:R,oauthAccessToken:k,oauthTokenSecret:Y,pendingToken:ye,nonce:qe}=g;return k||Y||R||ye?ye?_.startsWith("saml.")?Mn._create(_,ye):Br._fromParams({providerId:_,signInMethod:_,pendingToken:ye,idToken:R,accessToken:k}):new wn(_).credential({idToken:R,accessToken:k,rawNonce:qe}):null}return b instanceof B.ZR?E.credentialFromError(b):E.credentialFromResult(b)}function Ds(b,g){return g.catch(_=>{throw _ instanceof B.ZR&&function Td(b,g){var _;const E=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Lb(b,function ir(b,g){var _;const E=(0,B.m9)(b),R=g;return G(g.customData.operationType,E,"argument-error"),G(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Wh._fromError(E,R)}(b,g));else if(E){const R=Mg(g),k=g;R&&(k.credential=R,k.tenantId=E.tenantId||void 0,k.email=E.email||void 0,k.phoneNumber=E.phoneNumber||void 0)}}(b,_),_}).then(_=>{const R=_.user;return{operationType:_.operationType,credential:Fb(_),additionalUserInfo:ig(_),user:to.getOrCreate(R)}})}function hy(b,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,u.Z)(function*(b,g){const _=yield g;return{verificationId:_.verificationId,confirm:E=>Ds(b,_.confirm(E))}})).apply(this,arguments)}class Lb{constructor(g,_){this.resolver=_,this.auth=function mD(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Ds(mf(this.auth),this.resolver.resolveSignIn(g))}}class to{constructor(g){this._delegate=g,this.multiFactor=function cg(b){const g=(0,B.m9)(b);return Ws.has(g)||Ws.set(g,Nc._fromUser(g)),Ws.get(g)}(g)}static getOrCreate(g){return to.USER_MAP.has(g)||to.USER_MAP.set(g,new to(g)),to.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,u.Z)(function*(){return Ds(_.auth,ai(_._delegate,g))})()}linkWithPhoneNumber(g,_){var E=this;return(0,u.Z)(function*(){return hy(E.auth,function Co(b,g,_){return pd.apply(this,arguments)}(E._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,u.Z)(function*(){return Ds(_.auth,function ey(b,g,_){return Pi.apply(this,arguments)}(_._delegate,g,Wa))})()}linkWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield gf(Mt(_.auth)),J(_._delegate,g,Wa)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,u.Z)(function*(){return Ds(_.auth,Wi(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return hy(this.auth,function Pc(b,g,_){return Cr.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Ds(this.auth,function jr(b,g,_){return sf.apply(this,arguments)}(this._delegate,g,Wa))}reauthenticateWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield gf(Mt(_.auth)),S(_._delegate,g,Wa)})()}sendEmailVerification(g){return function Pl(b,g){return Oa.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,u.Z)(function*(){return yield function Gs(b,g){return wr.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Vh(b,g){return od((0,B.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function Pa(b,g){return od((0,B.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function gg(b,g){return tf.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function rd(b,g){return sd.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function bi(b,g,_){return ka.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const Ao=G;let os=(()=>{class b{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=_.options;Ao(R,"invalid-api-key",{appName:_.name}),Ao(R,"invalid-api-key",{appName:_.name});const k=typeof window<"u"?Wa:void 0;this._delegate=E.initialize({options:{persistence:Ng(R,_.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function wa(b,g,_){const E=Mt(b);G(E._canInitEmulator,E,"emulator-config-failed"),G(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const R=!!_?.disableWarnings,k=jo(g),{host:Y,port:ye}=function Yu(b){const g=jo(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(E);if(R){const k=R[1];return{host:k,port:Us(E.substr(k.length+1))}}{const[k,Y]=E.split(":");return{host:k,port:Us(Y)}}}(g);E.config.emulator={url:`${k}//${Y}${null===ye?"":`:${ye}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Y,port:ye,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Ea(){function b(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,E)}applyActionCode(_){return function Lh(b,g){return Bh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Uh(this._delegate,_)}confirmPasswordReset(_,E){return function td(b,g,_){return Fh.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var R=this;return(0,u.Z)(function*(){return Ds(R._delegate,function K_(b,g,_){return eg.apply(this,arguments)}(R._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function $s(b,g){return bs.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function nd(b,g){const _=Ec.parseLink(g);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){Ao(ss(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function at(b,g){return gt.apply(this,arguments)}(_._delegate,Wa);return E?Ds(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Nb(b,g){Mt(b)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,E,R){const{next:k,error:Y,complete:ye}=za(_,E,R);return this._delegate.onAuthStateChanged(k,Y,ye)}onIdTokenChanged(_,E,R){const{next:k,error:Y,complete:ye}=za(_,E,R);return this._delegate.onIdTokenChanged(k,Y,ye)}sendSignInLinkToEmail(_,E){return function wb(b,g,_){return tg.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function Qp(b,g,_){return ed.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,u.Z)(function*(){let R;switch(function Ob(b,g){Xo(Object.values(fr).includes(g),b,"invalid-persistence-type"),(0,B.b$)()?Xo(g!==fr.SESSION,b,"unsupported-persistence-type"):(0,B.UG)()?Xo(g===fr.NONE,b,"unsupported-persistence-type"):ou()?Xo(g===fr.NONE||g===fr.LOCAL&&(0,B.hl)(),b,"unsupported-persistence-type"):Xo(g===fr.NONE||Sg(),b,"unsupported-persistence-type")}(E._delegate,_),_){case fr.SESSION:R=qs;break;case fr.LOCAL:R=(yield Qt(Et)._isAvailable())?Et:zo;break;case fr.NONE:R=$;break;default:return ne("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ds(this._delegate,function Ma(b){return Ho.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ds(this._delegate,Un(this._delegate,_))}signInWithCustomToken(_){return Ds(this._delegate,function Dc(b,g){return lr.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Ds(this._delegate,function bb(b,g,_){return Un((0,B.m9)(b),Pn.credential(g,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Ds(this._delegate,function ng(b,g,_){return id.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return hy(this._delegate,function ef(b,g,_){return ki.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,u.Z)(function*(){return Ao(ss(),E._delegate,"operation-not-supported-in-this-environment"),Ds(E._delegate,function En(b,g,_){return nt.apply(this,arguments)}(E._delegate,_,Wa))})()}signInWithRedirect(_){var E=this;return(0,u.Z)(function*(){return Ao(ss(),E._delegate,"operation-not-supported-in-this-environment"),yield gf(E._delegate),Yo(E._delegate,_,Wa)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Jp(b,g){return Xp.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=fr,b})();function za(b,g,_){let E=b;"function"!=typeof b&&({next:E,error:g,complete:_}=b);const R=E;return{next:Y=>R(Y&&to.getOrCreate(Y)),error:g,complete:_}}function Ng(b,g){const _=function dy(b,g){const _=kb();if(!_)return[];const E=Q(Ag,b,g);switch(_.getItem(E)){case fr.NONE:return[$];case fr.LOCAL:return[Et,qs];case fr.SESSION:return[qs];default:return[]}}(b,g);if(typeof self<"u"&&!_.includes(Et)&&_.push(Et),typeof window<"u")for(const E of[zo,qs])_.includes(E)||_.push(E);return _.includes($)||_.push($),_}class Sd{constructor(){this.providerId="phone",this._delegate=new Ba(mf(te.Z.auth()))}static credential(g,_){return Ba.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Sd.PHONE_SIGN_IN_METHOD=Ba.PHONE_SIGN_IN_METHOD,Sd.PROVIDER_ID=Ba.PROVIDER_ID;const lu=G;class Qc{constructor(g,_,E=te.Z.app()){var R;lu(null===(R=E.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new fg(g,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _f(b){b.INTERNAL.registerComponent(new ve.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),E=g.getProvider("auth");return new os(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Pn,FacebookAuthProvider:tr,GithubAuthProvider:Gi,GoogleAuthProvider:vo,OAuthProvider:wn,SAMLAuthProvider:Oi,PhoneAuthProvider:Sd,PhoneMultiFactorGenerator:Ha,RecaptchaVerifier:Qc,TwitterAuthProvider:Ot,Auth:os,AuthCredential:Vs,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.1")}(te.Z)},1878:(ft,Ie,F)=>{F.d(Ie,{Lj:()=>ne,X3:()=>ct});var u=F(5861);const te=(G,Te)=>Te.some(ze=>G instanceof ze);let B,re;const ve=new WeakMap,De=new WeakMap,he=new WeakMap,j=new WeakMap,W=new WeakMap;let Ne={get(G,Te,ze){if(G instanceof IDBTransaction){if("done"===Te)return De.get(G);if("objectStoreNames"===Te)return G.objectStoreNames||he.get(G);if("store"===Te)return ze.objectStoreNames[1]?void 0:ze.objectStore(ze.objectStoreNames[0])}return Pe(G[Te])},set:(G,Te,ze)=>(G[Te]=ze,!0),has:(G,Te)=>G instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in G};function Ye(G){return"function"==typeof G?function ke(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Te){return G.apply(st(this),Te),Pe(ve.get(this))}:function(...Te){return Pe(G.apply(st(this),Te))}:function(Te,...ze){const Pt=G.call(st(this),Te,...ze);return he.set(Pt,Te.sort?Te.sort():[Te]),Pe(Pt)}}(G):(G instanceof IDBTransaction&&function He(G){if(De.has(G))return;const Te=new Promise((ze,Pt)=>{const Qt=()=>{G.removeEventListener("complete",$n),G.removeEventListener("error",Ln),G.removeEventListener("abort",Ln)},$n=()=>{ze(),Qt()},Ln=()=>{Pt(G.error||new DOMException("AbortError","AbortError")),Qt()};G.addEventListener("complete",$n),G.addEventListener("error",Ln),G.addEventListener("abort",Ln)});De.set(G,Te)}(G),te(G,function se(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Ne):G)}function Pe(G){if(G instanceof IDBRequest)return function ie(G){const Te=new Promise((ze,Pt)=>{const Qt=()=>{G.removeEventListener("success",$n),G.removeEventListener("error",Ln)},$n=()=>{ze(Pe(G.result)),Qt()},Ln=()=>{Pt(G.error),Qt()};G.addEventListener("success",$n),G.addEventListener("error",Ln)});return Te.then(ze=>{ze instanceof IDBCursor&&ve.set(ze,G)}).catch(()=>{}),W.set(Te,G),Te}(G);if(j.has(G))return j.get(G);const Te=Ye(G);return Te!==G&&(j.set(G,Te),W.set(Te,G)),Te}const st=G=>W.get(G);function ct(G,Te,{blocked:ze,upgrade:Pt,blocking:Qt,terminated:$n}={}){const Ln=indexedDB.open(G,Te),Sn=Pe(Ln);return Pt&&Ln.addEventListener("upgradeneeded",_i=>{Pt(Pe(Ln.result),_i.oldVersion,_i.newVersion,Pe(Ln.transaction))}),ze&&Ln.addEventListener("blocked",()=>ze()),Sn.then(_i=>{$n&&_i.addEventListener("close",()=>$n()),Qt&&_i.addEventListener("versionchange",()=>Qt())}).catch(()=>{}),Sn}function ne(G,{blocked:Te}={}){const ze=indexedDB.deleteDatabase(G);return Te&&ze.addEventListener("blocked",()=>Te()),Pe(ze).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],ce=["put","add","delete","clear"],Ee=new Map;function Ve(G,Te){if(!(G instanceof IDBDatabase)||Te in G||"string"!=typeof Te)return;if(Ee.get(Te))return Ee.get(Te);const ze=Te.replace(/FromIndex$/,""),Pt=Te!==ze,Qt=ce.includes(ze);if(!(ze in(Pt?IDBIndex:IDBObjectStore).prototype)||!Qt&&!we.includes(ze))return;const $n=function(){var Ln=(0,u.Z)(function*(Sn,..._i){const go=this.transaction(Sn,Qt?"readwrite":"readonly");let le=go.store;return Pt&&(le=le.index(_i.shift())),(yield Promise.all([le[ze](..._i),Qt&&go.done]))[0]});return function(_i){return Ln.apply(this,arguments)}}();return Ee.set(Te,$n),$n}!function Qe(G){Ne=G(Ne)}(G=>({...G,get:(Te,ze,Pt)=>Ve(Te,ze)||G.get(Te,ze,Pt),has:(Te,ze)=>!!Ve(Te,ze)||G.has(Te,ze)}))},5861:(ft,Ie,F)=>{function u(B,re,se,ue,ve,De,he){try{var j=B[De](he),W=j.value}catch(ie){return void se(ie)}j.done?re(W):Promise.resolve(W).then(ue,ve)}function te(B){return function(){var re=this,se=arguments;return new Promise(function(ue,ve){var De=B.apply(re,se);function he(W){u(De,ue,ve,he,j,"next",W)}function j(W){u(De,ue,ve,he,j,"throw",W)}he(void 0)})}}F.d(Ie,{Z:()=>te})},7582:(ft,Ie,F)=>{function re(le,ge){var _e={};for(var me in le)Object.prototype.hasOwnProperty.call(le,me)&&ge.indexOf(me)<0&&(_e[me]=le[me]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(me=Object.getOwnPropertySymbols(le);Le<me.length;Le++)ge.indexOf(me[Le])<0&&Object.prototype.propertyIsEnumerable.call(le,me[Le])&&(_e[me[Le]]=le[me[Le]])}return _e}function ie(le,ge,_e,me){return new(_e||(_e=Promise))(function(We,lt){function Be(un){try{It(me.next(un))}catch(Ct){lt(Ct)}}function Xt(un){try{It(me.throw(un))}catch(Ct){lt(Ct)}}function It(un){un.done?We(un.value):function Le(We){return We instanceof _e?We:new _e(function(lt){lt(We)})}(un.value).then(Be,Xt)}It((me=me.apply(le,ge||[])).next())})}function ne(le){return this instanceof ne?(this.v=le,this):new ne(le)}function we(le,ge,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,me=_e.apply(le,ge||[]),We=[];return Le={},lt("next"),lt("throw"),lt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function lt(nn){me[nn]&&(Le[nn]=function(Jn){return new Promise(function(yi,mn){We.push([nn,Jn,yi,mn])>1||Be(nn,Jn)})})}function Be(nn,Jn){try{!function Xt(nn){nn.value instanceof ne?Promise.resolve(nn.value.v).then(It,un):Ct(We[0][2],nn)}(me[nn](Jn))}catch(yi){Ct(We[0][3],yi)}}function It(nn){Be("next",nn)}function un(nn){Be("throw",nn)}function Ct(nn,Jn){nn(Jn),We.shift(),We.length&&Be(We[0][0],We[0][1])}}function Ee(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ge=le[Symbol.asyncIterator];return ge?ge.call(le):(le=function ke(le){var ge="function"==typeof Symbol&&Symbol.iterator,_e=ge&&le[ge],me=0;if(_e)return _e.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&me>=le.length&&(le=void 0),{value:le&&le[me++],done:!le}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),_e={},me("next"),me("throw"),me("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function me(We){_e[We]=le[We]&&function(lt){return new Promise(function(Be,Xt){!function Le(We,lt,Be,Xt){Promise.resolve(Xt).then(function(It){We({value:It,done:Be})},lt)}(Be,Xt,(lt=le[We](lt)).done,lt.value)})}}}F.d(Ie,{FC:()=>we,KL:()=>Ee,_T:()=>re,mG:()=>ie,qq:()=>ne}),"function"==typeof SuppressedError&&SuppressedError}},ft=>{ft(ft.s=8390)}]);